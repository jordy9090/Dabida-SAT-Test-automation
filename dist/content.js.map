{
  "version": 3,
  "sources": ["../node_modules/html2canvas/node_modules/tslib/tslib.es6.js", "../node_modules/src/css/layout/bounds.ts", "../node_modules/html2canvas/node_modules/src/Util.ts", "../node_modules/html2canvas/node_modules/css-line-break/node_modules/src/Util.ts", "../node_modules/html2canvas/node_modules/css-line-break/node_modules/src/Trie.ts", "../node_modules/html2canvas/node_modules/css-line-break/node_modules/utrie/node_modules/src/index.ts", "../node_modules/html2canvas/node_modules/src/linebreak-trie.ts", "../node_modules/html2canvas/node_modules/src/LineBreak.ts", "../node_modules/src/css/syntax/tokenizer.ts", "../node_modules/src/css/syntax/parser.ts", "../node_modules/src/css/types/length.ts", "../node_modules/src/css/types/length-percentage.ts", "../node_modules/src/css/types/angle.ts", "../node_modules/src/css/types/color.ts", "../node_modules/src/css/property-descriptors/background-clip.ts", "../node_modules/src/css/property-descriptors/background-color.ts", "../node_modules/src/css/types/functions/gradient.ts", "../node_modules/src/css/types/functions/linear-gradient.ts", "../node_modules/src/css/types/functions/-prefix-linear-gradient.ts", "../node_modules/src/css/types/functions/-webkit-gradient.ts", "../node_modules/src/css/types/functions/radial-gradient.ts", "../node_modules/src/css/types/functions/-prefix-radial-gradient.ts", "../node_modules/src/css/types/image.ts", "../node_modules/src/css/property-descriptors/background-image.ts", "../node_modules/src/css/property-descriptors/background-origin.ts", "../node_modules/src/css/property-descriptors/background-position.ts", "../node_modules/src/css/property-descriptors/background-repeat.ts", "../node_modules/src/css/property-descriptors/background-size.ts", "../node_modules/src/css/property-descriptors/border-color.ts", "../node_modules/src/css/property-descriptors/border-radius.ts", "../node_modules/src/css/property-descriptors/border-style.ts", "../node_modules/src/css/property-descriptors/border-width.ts", "../node_modules/src/css/property-descriptors/color.ts", "../node_modules/src/css/property-descriptors/direction.ts", "../node_modules/src/css/property-descriptors/display.ts", "../node_modules/src/css/property-descriptors/float.ts", "../node_modules/src/css/property-descriptors/letter-spacing.ts", "../node_modules/src/css/property-descriptors/line-break.ts", "../node_modules/src/css/property-descriptors/line-height.ts", "../node_modules/src/css/property-descriptors/list-style-image.ts", "../node_modules/src/css/property-descriptors/list-style-position.ts", "../node_modules/src/css/property-descriptors/list-style-type.ts", "../node_modules/src/css/property-descriptors/margin.ts", "../node_modules/src/css/property-descriptors/overflow.ts", "../node_modules/src/css/property-descriptors/overflow-wrap.ts", "../node_modules/src/css/property-descriptors/padding.ts", "../node_modules/src/css/property-descriptors/text-align.ts", "../node_modules/src/css/property-descriptors/position.ts", "../node_modules/src/css/property-descriptors/text-shadow.ts", "../node_modules/src/css/property-descriptors/text-transform.ts", "../node_modules/src/css/property-descriptors/transform.ts", "../node_modules/src/css/property-descriptors/transform-origin.ts", "../node_modules/src/css/property-descriptors/visibility.ts", "../node_modules/src/css/property-descriptors/word-break.ts", "../node_modules/src/css/property-descriptors/z-index.ts", "../node_modules/src/css/types/time.ts", "../node_modules/src/css/property-descriptors/opacity.ts", "../node_modules/src/css/property-descriptors/text-decoration-color.ts", "../node_modules/src/css/property-descriptors/text-decoration-line.ts", "../node_modules/src/css/property-descriptors/font-family.ts", "../node_modules/src/css/property-descriptors/font-size.ts", "../node_modules/src/css/property-descriptors/font-weight.ts", "../node_modules/src/css/property-descriptors/font-variant.ts", "../node_modules/src/css/property-descriptors/font-style.ts", "../node_modules/src/core/bitwise.ts", "../node_modules/src/css/property-descriptors/content.ts", "../node_modules/src/css/property-descriptors/counter-increment.ts", "../node_modules/src/css/property-descriptors/counter-reset.ts", "../node_modules/src/css/property-descriptors/duration.ts", "../node_modules/src/css/property-descriptors/quotes.ts", "../node_modules/src/css/property-descriptors/box-shadow.ts", "../node_modules/src/css/property-descriptors/paint-order.ts", "../node_modules/src/css/property-descriptors/webkit-text-stroke-color.ts", "../node_modules/src/css/property-descriptors/webkit-text-stroke-width.ts", "../node_modules/src/css/index.ts", "../node_modules/src/core/debugger.ts", "../node_modules/src/dom/element-container.ts", "../node_modules/html2canvas/node_modules/src/grapheme-break-trie.ts", "../node_modules/html2canvas/node_modules/text-segmentation/node_modules/src/Util.ts", "../node_modules/html2canvas/node_modules/text-segmentation/node_modules/src/Trie.ts", "../node_modules/html2canvas/node_modules/text-segmentation/node_modules/utrie/node_modules/src/index.ts", "../node_modules/html2canvas/node_modules/src/GraphemeBreak.ts", "../node_modules/src/core/features.ts", "../node_modules/src/css/layout/text.ts", "../node_modules/src/dom/text-container.ts", "../node_modules/src/dom/replaced-elements/image-element-container.ts", "../node_modules/src/dom/replaced-elements/canvas-element-container.ts", "../node_modules/src/dom/replaced-elements/svg-element-container.ts", "../node_modules/src/dom/elements/li-element-container.ts", "../node_modules/src/dom/elements/ol-element-container.ts", "../node_modules/src/dom/replaced-elements/input-element-container.ts", "../node_modules/src/dom/elements/select-element-container.ts", "../node_modules/src/dom/elements/textarea-element-container.ts", "../node_modules/src/dom/replaced-elements/iframe-element-container.ts", "../node_modules/src/dom/node-parser.ts", "../node_modules/src/css/types/functions/counter.ts", "../node_modules/src/dom/document-cloner.ts", "../node_modules/src/core/cache-storage.ts", "../node_modules/src/render/vector.ts", "../node_modules/src/render/bezier-curve.ts", "../node_modules/src/render/bound-curves.ts", "../node_modules/src/render/effects.ts", "../node_modules/src/render/path.ts", "../node_modules/src/render/stacking-context.ts", "../node_modules/src/render/border.ts", "../node_modules/src/render/box-sizing.ts", "../node_modules/src/render/background.ts", "../node_modules/src/core/util.ts", "../node_modules/src/render/font-metrics.ts", "../node_modules/src/render/renderer.ts", "../node_modules/src/render/canvas/canvas-renderer.ts", "../node_modules/src/render/canvas/foreignobject-renderer.ts", "../node_modules/src/core/logger.ts", "../node_modules/src/core/context.ts", "../node_modules/src/index.ts", "../src/dom/deepQuery.js", "../src/dom/query.js", "../src/dom/extract.js", "../content.js", "../src/config/constants.js", "../src/dom/wait.js", "../src/dom/buttons.js", "../src/flow/navigator.js", "../src/flow/stateManager.js", "../src/flow/moduleRunner.js", "../src/flow/scraper.js", "../src/pdf/pdfGenerator.js", "../src/frame/workerFrame.js", "../src/dom/modal.js", "../src/flow/geminiChat.js", "../src/flow/geminiSetup.js", "../src/entry/content.entry.js"],
  "sourcesContent": ["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n", "import {Context} from '../../core/context';\n\nexport class Bounds {\n    constructor(readonly left: number, readonly top: number, readonly width: number, readonly height: number) {}\n\n    add(x: number, y: number, w: number, h: number): Bounds {\n        return new Bounds(this.left + x, this.top + y, this.width + w, this.height + h);\n    }\n\n    static fromClientRect(context: Context, clientRect: ClientRect): Bounds {\n        return new Bounds(\n            clientRect.left + context.windowBounds.left,\n            clientRect.top + context.windowBounds.top,\n            clientRect.width,\n            clientRect.height\n        );\n    }\n\n    static fromDOMRectList(context: Context, domRectList: DOMRectList): Bounds {\n        const domRect = Array.from(domRectList).find((rect) => rect.width !== 0);\n        return domRect\n            ? new Bounds(\n                  domRect.left + context.windowBounds.left,\n                  domRect.top + context.windowBounds.top,\n                  domRect.width,\n                  domRect.height\n              )\n            : Bounds.EMPTY;\n    }\n\n    static EMPTY = new Bounds(0, 0, 0, 0);\n}\n\nexport const parseBounds = (context: Context, node: Element): Bounds => {\n    return Bounds.fromClientRect(context, node.getBoundingClientRect());\n};\n\nexport const parseDocumentSize = (document: Document): Bounds => {\n    const body = document.body;\n    const documentElement = document.documentElement;\n\n    if (!body || !documentElement) {\n        throw new Error(`Unable to get document size`);\n    }\n    const width = Math.max(\n        Math.max(body.scrollWidth, documentElement.scrollWidth),\n        Math.max(body.offsetWidth, documentElement.offsetWidth),\n        Math.max(body.clientWidth, documentElement.clientWidth)\n    );\n\n    const height = Math.max(\n        Math.max(body.scrollHeight, documentElement.scrollHeight),\n        Math.max(body.offsetHeight, documentElement.offsetHeight),\n        Math.max(body.clientHeight, documentElement.clientHeight)\n    );\n\n    return new Bounds(0, 0, width, height);\n};\n", "export const toCodePoints = (str: string): number[] => {\n    const codePoints = [];\n    let i = 0;\n    const length = str.length;\n    while (i < length) {\n        const value = str.charCodeAt(i++);\n        if (value >= 0xd800 && value <= 0xdbff && i < length) {\n            const extra = str.charCodeAt(i++);\n            if ((extra & 0xfc00) === 0xdc00) {\n                codePoints.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);\n            } else {\n                codePoints.push(value);\n                i--;\n            }\n        } else {\n            codePoints.push(value);\n        }\n    }\n    return codePoints;\n};\n\nexport const fromCodePoint = (...codePoints: number[]): string => {\n    if (String.fromCodePoint) {\n        return String.fromCodePoint(...codePoints);\n    }\n\n    const length = codePoints.length;\n    if (!length) {\n        return '';\n    }\n\n    const codeUnits = [];\n\n    let index = -1;\n    let result = '';\n    while (++index < length) {\n        let codePoint = codePoints[index];\n        if (codePoint <= 0xffff) {\n            codeUnits.push(codePoint);\n        } else {\n            codePoint -= 0x10000;\n            codeUnits.push((codePoint >> 10) + 0xd800, (codePoint % 0x400) + 0xdc00);\n        }\n        if (index + 1 === length || codeUnits.length > 0x4000) {\n            result += String.fromCharCode(...codeUnits);\n            codeUnits.length = 0;\n        }\n    }\n    return result;\n};\n\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\n\nexport const decode = (base64: string): ArrayBuffer | number[] => {\n    let bufferLength = base64.length * 0.75,\n        len = base64.length,\n        i,\n        p = 0,\n        encoded1,\n        encoded2,\n        encoded3,\n        encoded4;\n\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    const buffer =\n        typeof ArrayBuffer !== 'undefined' &&\n        typeof Uint8Array !== 'undefined' &&\n        typeof Uint8Array.prototype.slice !== 'undefined'\n            ? new ArrayBuffer(bufferLength)\n            : new Array(bufferLength);\n    const bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return buffer;\n};\n\nexport const polyUint16Array = (buffer: number[]): number[] => {\n    const length = buffer.length;\n    const bytes = [];\n    for (let i = 0; i < length; i += 2) {\n        bytes.push((buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n\nexport const polyUint32Array = (buffer: number[]): number[] => {\n    const length = buffer.length;\n    const bytes = [];\n    for (let i = 0; i < length; i += 4) {\n        bytes.push((buffer[i + 3] << 24) | (buffer[i + 2] << 16) | (buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n", "const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\n\nexport const decode = (base64: string): ArrayBuffer | number[] => {\n    let bufferLength = base64.length * 0.75,\n        len = base64.length,\n        i,\n        p = 0,\n        encoded1,\n        encoded2,\n        encoded3,\n        encoded4;\n\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    const buffer =\n        typeof ArrayBuffer !== 'undefined' &&\n        typeof Uint8Array !== 'undefined' &&\n        typeof Uint8Array.prototype.slice !== 'undefined'\n            ? new ArrayBuffer(bufferLength)\n            : new Array(bufferLength);\n    const bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return buffer;\n};\n\nexport const polyUint16Array = (buffer: number[]): number[] => {\n    const length = buffer.length;\n    const bytes = [];\n    for (let i = 0; i < length; i += 2) {\n        bytes.push((buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n\nexport const polyUint32Array = (buffer: number[]): number[] => {\n    const length = buffer.length;\n    const bytes = [];\n    for (let i = 0; i < length; i += 4) {\n        bytes.push((buffer[i + 3] << 24) | (buffer[i + 2] << 16) | (buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n", "import {decode, polyUint16Array, polyUint32Array} from './Util';\n\nexport type int = number;\n\n/** Shift size for getting the index-2 table offset. */\nexport const UTRIE2_SHIFT_2 = 5;\n\n/** Shift size for getting the index-1 table offset. */\nexport const UTRIE2_SHIFT_1 = 6 + 5;\n\n/**\n * Shift size for shifting left the index array values.\n * Increases possible data size with 16-bit index values at the cost\n * of compactability.\n * This requires data blocks to be aligned by UTRIE2_DATA_GRANULARITY.\n */\nexport const UTRIE2_INDEX_SHIFT = 2;\n\n/**\n * Difference between the two shift sizes,\n * for getting an index-1 offset from an index-2 offset. 6=11-5\n */\nexport const UTRIE2_SHIFT_1_2 = UTRIE2_SHIFT_1 - UTRIE2_SHIFT_2;\n\n/**\n * The part of the index-2 table for U+D800..U+DBFF stores values for\n * lead surrogate code _units_ not code _points_.\n * Values for lead surrogate code _points_ are indexed with this portion of the table.\n * Length=32=0x20=0x400>>UTRIE2_SHIFT_2. (There are 1024=0x400 lead surrogates.)\n */\nexport const UTRIE2_LSCP_INDEX_2_OFFSET = 0x10000 >> UTRIE2_SHIFT_2;\n\n/** Number of entries in a data block. 32=0x20 */\nexport const UTRIE2_DATA_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_2;\n/** Mask for getting the lower bits for the in-data-block offset. */\nexport const UTRIE2_DATA_MASK = UTRIE2_DATA_BLOCK_LENGTH - 1;\n\nexport const UTRIE2_LSCP_INDEX_2_LENGTH = 0x400 >> UTRIE2_SHIFT_2;\n/** Count the lengths of both BMP pieces. 2080=0x820 */\nexport const UTRIE2_INDEX_2_BMP_LENGTH = UTRIE2_LSCP_INDEX_2_OFFSET + UTRIE2_LSCP_INDEX_2_LENGTH;\n/**\n * The 2-byte UTF-8 version of the index-2 table follows at offset 2080=0x820.\n * Length 32=0x20 for lead bytes C0..DF, regardless of UTRIE2_SHIFT_2.\n */\nexport const UTRIE2_UTF8_2B_INDEX_2_OFFSET = UTRIE2_INDEX_2_BMP_LENGTH;\nexport const UTRIE2_UTF8_2B_INDEX_2_LENGTH = 0x800 >> 6; /* U+0800 is the first code point after 2-byte UTF-8 */\n/**\n * The index-1 table, only used for supplementary code points, at offset 2112=0x840.\n * Variable length, for code points up to highStart, where the last single-value range starts.\n * Maximum length 512=0x200=0x100000>>UTRIE2_SHIFT_1.\n * (For 0x100000 supplementary code points U+10000..U+10ffff.)\n *\n * The part of the index-2 table for supplementary code points starts\n * after this index-1 table.\n *\n * Both the index-1 table and the following part of the index-2 table\n * are omitted completely if there is only BMP data.\n */\nexport const UTRIE2_INDEX_1_OFFSET = UTRIE2_UTF8_2B_INDEX_2_OFFSET + UTRIE2_UTF8_2B_INDEX_2_LENGTH;\n\n/**\n * Number of index-1 entries for the BMP. 32=0x20\n * This part of the index-1 table is omitted from the serialized form.\n */\nexport const UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = 0x10000 >> UTRIE2_SHIFT_1;\n\n/** Number of entries in an index-2 block. 64=0x40 */\nexport const UTRIE2_INDEX_2_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_1_2;\n/** Mask for getting the lower bits for the in-index-2-block offset. */\nexport const UTRIE2_INDEX_2_MASK = UTRIE2_INDEX_2_BLOCK_LENGTH - 1;\n\nconst slice16 = (view: number[] | Uint16Array, start: number, end?: number) => {\n    if (view.slice) {\n        return view.slice(start, end);\n    }\n\n    return new Uint16Array(Array.prototype.slice.call(view, start, end));\n};\n\nconst slice32 = (view: number[] | Uint32Array, start: number, end?: number) => {\n    if (view.slice) {\n        return view.slice(start, end);\n    }\n\n    return new Uint32Array(Array.prototype.slice.call(view, start, end));\n};\n\nexport const createTrieFromBase64 = (base64: string, _byteLength: number): Trie => {\n    const buffer = decode(base64);\n    const view32 = Array.isArray(buffer) ? polyUint32Array(buffer) : new Uint32Array(buffer);\n    const view16 = Array.isArray(buffer) ? polyUint16Array(buffer) : new Uint16Array(buffer);\n    const headerLength = 24;\n\n    const index = slice16(view16, headerLength / 2, view32[4] / 2);\n    const data =\n        view32[5] === 2\n            ? slice16(view16, (headerLength + view32[4]) / 2)\n            : slice32(view32, Math.ceil((headerLength + view32[4]) / 4));\n\n    return new Trie(view32[0], view32[1], view32[2], view32[3], index, data);\n};\n\nexport class Trie {\n    initialValue: int;\n    errorValue: int;\n    highStart: int;\n    highValueIndex: int;\n    index: Uint16Array | number[];\n    data: Uint32Array | Uint16Array | number[];\n\n    constructor(\n        initialValue: int,\n        errorValue: int,\n        highStart: int,\n        highValueIndex: int,\n        index: Uint16Array | number[],\n        data: Uint32Array | Uint16Array | number[]\n    ) {\n        this.initialValue = initialValue;\n        this.errorValue = errorValue;\n        this.highStart = highStart;\n        this.highValueIndex = highValueIndex;\n        this.index = index;\n        this.data = data;\n    }\n\n    /**\n     * Get the value for a code point as stored in the Trie.\n     *\n     * @param codePoint the code point\n     * @return the value\n     */\n    get(codePoint: number): number {\n        let ix;\n        if (codePoint >= 0) {\n            if (codePoint < 0x0d800 || (codePoint > 0x0dbff && codePoint <= 0x0ffff)) {\n                // Ordinary BMP code point, excluding leading surrogates.\n                // BMP uses a single level lookup.  BMP index starts at offset 0 in the Trie2 index.\n                // 16 bit data is stored in the index array itself.\n                ix = this.index[codePoint >> UTRIE2_SHIFT_2];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n\n            if (codePoint <= 0xffff) {\n                // Lead Surrogate Code Point.  A Separate index section is stored for\n                // lead surrogate code units and code points.\n                //   The main index has the code unit data.\n                //   For this function, we need the code point data.\n                // Note: this expression could be refactored for slightly improved efficiency, but\n                //       surrogate code points will be so rare in practice that it's not worth it.\n                ix = this.index[UTRIE2_LSCP_INDEX_2_OFFSET + ((codePoint - 0xd800) >> UTRIE2_SHIFT_2)];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n\n            if (codePoint < this.highStart) {\n                // Supplemental code point, use two-level lookup.\n                ix = UTRIE2_INDEX_1_OFFSET - UTRIE2_OMITTED_BMP_INDEX_1_LENGTH + (codePoint >> UTRIE2_SHIFT_1);\n                ix = this.index[ix];\n                ix += (codePoint >> UTRIE2_SHIFT_2) & UTRIE2_INDEX_2_MASK;\n                ix = this.index[ix];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n            if (codePoint <= 0x10ffff) {\n                return this.data[this.highValueIndex];\n            }\n        }\n\n        // Fall through.  The code point is outside of the legal range of 0..0x10ffff.\n        return this.errorValue;\n    }\n}\n", "const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\n\nexport const encode = (arraybuffer: ArrayBuffer): string => {\n    let bytes = new Uint8Array(arraybuffer),\n        i,\n        len = bytes.length,\n        base64 = '';\n\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    } else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n\n    return base64;\n};\n\nexport const decode = (base64: string): ArrayBuffer => {\n    let bufferLength = base64.length * 0.75,\n        len = base64.length,\n        i,\n        p = 0,\n        encoded1,\n        encoded2,\n        encoded3,\n        encoded4;\n\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    const arraybuffer = new ArrayBuffer(bufferLength),\n        bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n};\n", "export const base64 =\n    'KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==';\nexport const byteLength = 39664;\n", "'use strict';\n\nimport {createTrieFromBase64} from 'utrie';\nimport {base64, byteLength} from './linebreak-trie';\nimport {fromCodePoint, toCodePoints} from './Util';\n\nexport const LETTER_NUMBER_MODIFIER = 50;\n\n// Non-tailorable Line Breaking Classes\nconst BK = 1; //  Cause a line break (after)\nconst CR = 2; //  Cause a line break (after), except between CR and LF\nconst LF = 3; //  Cause a line break (after)\nconst CM = 4; //  Prohibit a line break between the character and the preceding character\nconst NL = 5; //  Cause a line break (after)\nconst SG = 6; //  Do not occur in well-formed text\nconst WJ = 7; //  Prohibit line breaks before and after\nconst ZW = 8; //  Provide a break opportunity\nconst GL = 9; //  Prohibit line breaks before and after\nconst SP = 10; // Enable indirect line breaks\nconst ZWJ = 11; // Prohibit line breaks within joiner sequences\n// Break Opportunities\nconst B2 = 12; //  Provide a line break opportunity before and after the character\nconst BA = 13; //  Generally provide a line break opportunity after the character\nconst BB = 14; //  Generally provide a line break opportunity before the character\nconst HY = 15; //  Provide a line break opportunity after the character, except in numeric context\nconst CB = 16; //   Provide a line break opportunity contingent on additional information\n// Characters Prohibiting Certain Breaks\nconst CL = 17; //  Prohibit line breaks before\nconst CP = 18; //  Prohibit line breaks before\nconst EX = 19; //  Prohibit line breaks before\nconst IN = 20; //  Allow only indirect line breaks between pairs\nconst NS = 21; //  Allow only indirect line breaks before\nconst OP = 22; //  Prohibit line breaks after\nconst QU = 23; //  Act like they are both opening and closing\n// Numeric Context\nconst IS = 24; //  Prevent breaks after any and before numeric\nconst NU = 25; //  Form numeric expressions for line breaking purposes\nconst PO = 26; //  Do not break following a numeric expression\nconst PR = 27; //  Do not break in front of a numeric expression\nconst SY = 28; //  Prevent a break before; and allow a break after\n// Other Characters\nconst AI = 29; //  Act like AL when the resolvedEAW is N; otherwise; act as ID\nconst AL = 30; //  Are alphabetic characters or symbols that are used with alphabetic characters\nconst CJ = 31; //  Treat as NS or ID for strict or normal breaking.\nconst EB = 32; //  Do not break from following Emoji Modifier\nconst EM = 33; //  Do not break from preceding Emoji Base\nconst H2 = 34; //  Form Korean syllable blocks\nconst H3 = 35; //  Form Korean syllable blocks\nconst HL = 36; //  Do not break around a following hyphen; otherwise act as Alphabetic\nconst ID = 37; //  Break before or after; except in some numeric context\nconst JL = 38; //  Form Korean syllable blocks\nconst JV = 39; //  Form Korean syllable blocks\nconst JT = 40; //  Form Korean syllable blocks\nconst RI = 41; //  Keep pairs together. For pairs; break before and after other classes\nconst SA = 42; //  Provide a line break opportunity contingent on additional, language-specific context analysis\nconst XX = 43; //  Have as yet unknown line breaking behavior or unassigned code positions\n\nconst ea_OP = [0x2329, 0xff08];\n\nexport const classes: {[key: string]: number} = {\n    BK,\n    CR,\n    LF,\n    CM,\n    NL,\n    SG,\n    WJ,\n    ZW,\n    GL,\n    SP,\n    ZWJ,\n    B2,\n    BA,\n    BB,\n    HY,\n    CB,\n    CL,\n    CP,\n    EX,\n    IN,\n    NS,\n    OP,\n    QU,\n    IS,\n    NU,\n    PO,\n    PR,\n    SY,\n    AI,\n    AL,\n    CJ,\n    EB,\n    EM,\n    H2,\n    H3,\n    HL,\n    ID,\n    JL,\n    JV,\n    JT,\n    RI,\n    SA,\n    XX,\n};\n\nexport const BREAK_MANDATORY = '!';\nexport const BREAK_NOT_ALLOWED = '';\nexport const BREAK_ALLOWED = '';\nexport const UnicodeTrie = createTrieFromBase64(base64, byteLength);\n\nconst ALPHABETICS = [AL, HL];\nconst HARD_LINE_BREAKS = [BK, CR, LF, NL];\nconst SPACE = [SP, ZW];\nconst PREFIX_POSTFIX = [PR, PO];\nconst LINE_BREAKS = HARD_LINE_BREAKS.concat(SPACE);\nconst KOREAN_SYLLABLE_BLOCK = [JL, JV, JT, H2, H3];\nconst HYPHEN = [HY, BA];\n\nexport const codePointsToCharacterClasses = (\n    codePoints: number[],\n    lineBreak: string = 'strict'\n): [number[], number[], boolean[]] => {\n    const types: number[] = [];\n    const indices: number[] = [];\n    const categories: boolean[] = [];\n    codePoints.forEach((codePoint, index) => {\n        let classType = UnicodeTrie.get(codePoint);\n        if (classType > LETTER_NUMBER_MODIFIER) {\n            categories.push(true);\n            classType -= LETTER_NUMBER_MODIFIER;\n        } else {\n            categories.push(false);\n        }\n\n        if (['normal', 'auto', 'loose'].indexOf(lineBreak) !== -1) {\n            // U+2010,  U+2013,  U+301C,  U+30A0\n            if ([0x2010, 0x2013, 0x301c, 0x30a0].indexOf(codePoint) !== -1) {\n                indices.push(index);\n                return types.push(CB);\n            }\n        }\n\n        if (classType === CM || classType === ZWJ) {\n            // LB10 Treat any remaining combining mark or ZWJ as AL.\n            if (index === 0) {\n                indices.push(index);\n                return types.push(AL);\n            }\n\n            // LB9 Do not break a combining character sequence; treat it as if it has the line breaking class of\n            // the base character in all of the following rules. Treat ZWJ as if it were CM.\n            const prev = types[index - 1];\n            if (LINE_BREAKS.indexOf(prev) === -1) {\n                indices.push(indices[index - 1]);\n                return types.push(prev);\n            }\n            indices.push(index);\n            return types.push(AL);\n        }\n\n        indices.push(index);\n\n        if (classType === CJ) {\n            return types.push(lineBreak === 'strict' ? NS : ID);\n        }\n\n        if (classType === SA) {\n            return types.push(AL);\n        }\n\n        if (classType === AI) {\n            return types.push(AL);\n        }\n\n        // For supplementary characters, a useful default is to treat characters in the range 10000..1FFFD as AL\n        // and characters in the ranges 20000..2FFFD and 30000..3FFFD as ID, until the implementation can be revised\n        // to take into account the actual line breaking properties for these characters.\n        if (classType === XX) {\n            if ((codePoint >= 0x20000 && codePoint <= 0x2fffd) || (codePoint >= 0x30000 && codePoint <= 0x3fffd)) {\n                return types.push(ID);\n            } else {\n                return types.push(AL);\n            }\n        }\n\n        types.push(classType);\n    });\n\n    return [indices, types, categories];\n};\n\nconst isAdjacentWithSpaceIgnored = (\n    a: number[] | number,\n    b: number,\n    currentIndex: number,\n    classTypes: number[]\n): boolean => {\n    const current = classTypes[currentIndex];\n    if (Array.isArray(a) ? a.indexOf(current) !== -1 : a === current) {\n        let i = currentIndex;\n        while (i <= classTypes.length) {\n            i++;\n            let next = classTypes[i];\n\n            if (next === b) {\n                return true;\n            }\n\n            if (next !== SP) {\n                break;\n            }\n        }\n    }\n\n    if (current === SP) {\n        let i = currentIndex;\n\n        while (i > 0) {\n            i--;\n            const prev = classTypes[i];\n\n            if (Array.isArray(a) ? a.indexOf(prev) !== -1 : a === prev) {\n                let n = currentIndex;\n                while (n <= classTypes.length) {\n                    n++;\n                    let next = classTypes[n];\n\n                    if (next === b) {\n                        return true;\n                    }\n\n                    if (next !== SP) {\n                        break;\n                    }\n                }\n            }\n\n            if (prev !== SP) {\n                break;\n            }\n        }\n    }\n    return false;\n};\n\nconst previousNonSpaceClassType = (currentIndex: number, classTypes: number[]): number => {\n    let i = currentIndex;\n    while (i >= 0) {\n        let type = classTypes[i];\n        if (type === SP) {\n            i--;\n        } else {\n            return type;\n        }\n    }\n    return 0;\n};\n\nexport type BREAK_OPPORTUNITIES = typeof BREAK_NOT_ALLOWED | typeof BREAK_ALLOWED | typeof BREAK_MANDATORY;\n\nconst _lineBreakAtIndex = (\n    codePoints: number[],\n    classTypes: number[],\n    indicies: number[],\n    index: number,\n    forbiddenBreaks?: boolean[]\n): BREAK_OPPORTUNITIES => {\n    if (indicies[index] === 0) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    let currentIndex = index - 1;\n    if (Array.isArray(forbiddenBreaks) && forbiddenBreaks[currentIndex] === true) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    let beforeIndex = currentIndex - 1;\n    let afterIndex = currentIndex + 1;\n    let current = classTypes[currentIndex];\n\n    // LB4 Always break after hard line breaks.\n    // LB5 Treat CR followed by LF, as well as CR, LF, and NL as hard line breaks.\n    let before = beforeIndex >= 0 ? classTypes[beforeIndex] : 0;\n    let next = classTypes[afterIndex];\n\n    if (current === CR && next === LF) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    if (HARD_LINE_BREAKS.indexOf(current) !== -1) {\n        return BREAK_MANDATORY;\n    }\n\n    // LB6 Do not break before hard line breaks.\n    if (HARD_LINE_BREAKS.indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB7 Do not break before spaces or zero width space.\n    if (SPACE.indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB8 Break before any character following a zero-width space, even if one or more spaces intervene.\n    if (previousNonSpaceClassType(currentIndex, classTypes) === ZW) {\n        return BREAK_ALLOWED;\n    }\n\n    // LB8a Do not break after a zero width joiner.\n    if (UnicodeTrie.get(codePoints[currentIndex]) === ZWJ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // zwj emojis\n    if ((current === EB || current === EM) && UnicodeTrie.get(codePoints[afterIndex]) === ZWJ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB11 Do not break before or after Word joiner and related characters.\n    if (current === WJ || next === WJ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB12 Do not break after NBSP and related characters.\n    if (current === GL) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB12a Do not break before NBSP and related characters, except after spaces and hyphens.\n    if ([SP, BA, HY].indexOf(current) === -1 && next === GL) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB13 Do not break before ] or ! or ; or /, even after spaces.\n    if ([CL, CP, EX, IS, SY].indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB14 Do not break after [, even after spaces.\n    if (previousNonSpaceClassType(currentIndex, classTypes) === OP) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB15 Do not break within [, even with intervening spaces.\n    if (isAdjacentWithSpaceIgnored(QU, OP, currentIndex, classTypes)) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB16 Do not break between closing punctuation and a nonstarter (lb=NS), even with intervening spaces.\n    if (isAdjacentWithSpaceIgnored([CL, CP], NS, currentIndex, classTypes)) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB17 Do not break within , even with intervening spaces.\n    if (isAdjacentWithSpaceIgnored(B2, B2, currentIndex, classTypes)) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB18 Break after spaces.\n    if (current === SP) {\n        return BREAK_ALLOWED;\n    }\n\n    // LB19 Do not break before or after quotation marks, such as   .\n    if (current === QU || next === QU) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB20 Break before and after unresolved CB.\n    if (next === CB || current === CB) {\n        return BREAK_ALLOWED;\n    }\n\n    // LB21 Do not break before hyphen-minus, other hyphens, fixed-width spaces, small kana, and other non-starters, or after acute accents.\n    if ([BA, HY, NS].indexOf(next) !== -1 || current === BB) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB21a Don't break after Hebrew + Hyphen.\n    if (before === HL && HYPHEN.indexOf(current) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB21b Dont break between Solidus and Hebrew letters.\n    if (current === SY && next === HL) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB22 Do not break before ellipsis.\n    if (next === IN) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB23 Do not break between digits and letters.\n    if ((ALPHABETICS.indexOf(next) !== -1 && current === NU) || (ALPHABETICS.indexOf(current) !== -1 && next === NU)) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB23a Do not break between numeric prefixes and ideographs, or between ideographs and numeric postfixes.\n    if (\n        (current === PR && [ID, EB, EM].indexOf(next) !== -1) ||\n        ([ID, EB, EM].indexOf(current) !== -1 && next === PO)\n    ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB24 Do not break between numeric prefix/postfix and letters, or between letters and prefix/postfix.\n    if (\n        (ALPHABETICS.indexOf(current) !== -1 && PREFIX_POSTFIX.indexOf(next) !== -1) ||\n        (PREFIX_POSTFIX.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1)\n    ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB25 Do not break between the following pairs of classes relevant to numbers:\n    if (\n        // (PR | PO)  ( OP | HY )? NU\n        ([PR, PO].indexOf(current) !== -1 &&\n            (next === NU || ([OP, HY].indexOf(next) !== -1 && classTypes[afterIndex + 1] === NU))) ||\n        // ( OP | HY )  NU\n        ([OP, HY].indexOf(current) !== -1 && next === NU) ||\n        // NU \t(NU | SY | IS)\n        (current === NU && [NU, SY, IS].indexOf(next) !== -1)\n    ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // NU (NU | SY | IS)*  (NU | SY | IS | CL | CP)\n    if ([NU, SY, IS, CL, CP].indexOf(next) !== -1) {\n        let prevIndex = currentIndex;\n        while (prevIndex >= 0) {\n            let type = classTypes[prevIndex];\n            if (type === NU) {\n                return BREAK_NOT_ALLOWED;\n            } else if ([SY, IS].indexOf(type) !== -1) {\n                prevIndex--;\n            } else {\n                break;\n            }\n        }\n    }\n\n    // NU (NU | SY | IS)* (CL | CP)?  (PO | PR))\n    if ([PR, PO].indexOf(next) !== -1) {\n        let prevIndex = [CL, CP].indexOf(current) !== -1 ? beforeIndex : currentIndex;\n        while (prevIndex >= 0) {\n            let type = classTypes[prevIndex];\n            if (type === NU) {\n                return BREAK_NOT_ALLOWED;\n            } else if ([SY, IS].indexOf(type) !== -1) {\n                prevIndex--;\n            } else {\n                break;\n            }\n        }\n    }\n\n    // LB26 Do not break a Korean syllable.\n    if (\n        (JL === current && [JL, JV, H2, H3].indexOf(next) !== -1) ||\n        ([JV, H2].indexOf(current) !== -1 && [JV, JT].indexOf(next) !== -1) ||\n        ([JT, H3].indexOf(current) !== -1 && next === JT)\n    ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB27 Treat a Korean Syllable Block the same as ID.\n    if (\n        (KOREAN_SYLLABLE_BLOCK.indexOf(current) !== -1 && [IN, PO].indexOf(next) !== -1) ||\n        (KOREAN_SYLLABLE_BLOCK.indexOf(next) !== -1 && current === PR)\n    ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB28 Do not break between alphabetics (at).\n    if (ALPHABETICS.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB29 Do not break between numeric punctuation and alphabetics (e.g.).\n    if (current === IS && ALPHABETICS.indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB30 Do not break between letters, numbers, or ordinary symbols and opening or closing parentheses.\n    if (\n        (ALPHABETICS.concat(NU).indexOf(current) !== -1 &&\n            next === OP &&\n            ea_OP.indexOf(codePoints[afterIndex]) === -1) ||\n        (ALPHABETICS.concat(NU).indexOf(next) !== -1 && current === CP)\n    ) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB30a Break between two regional indicator symbols if and only if there are an even number of regional\n    // indicators preceding the position of the break.\n    if (current === RI && next === RI) {\n        let i = indicies[currentIndex];\n        let count = 1;\n        while (i > 0) {\n            i--;\n            if (classTypes[i] === RI) {\n                count++;\n            } else {\n                break;\n            }\n        }\n        if (count % 2 !== 0) {\n            return BREAK_NOT_ALLOWED;\n        }\n    }\n\n    // LB30b Do not break between an emoji base and an emoji modifier.\n    if (current === EB && next === EM) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    return BREAK_ALLOWED;\n};\n\nexport const lineBreakAtIndex = (codePoints: number[], index: number): BREAK_OPPORTUNITIES => {\n    // LB2 Never break at the start of text.\n    if (index === 0) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // LB3 Always break at the end of text.\n    if (index >= codePoints.length) {\n        return BREAK_MANDATORY;\n    }\n\n    const [indices, classTypes] = codePointsToCharacterClasses(codePoints);\n\n    return _lineBreakAtIndex(codePoints, classTypes, indices, index);\n};\n\nexport type LINE_BREAK = 'auto' | 'normal' | 'strict';\nexport type WORD_BREAK = 'normal' | 'break-all' | 'break-word' | 'keep-all';\n\ninterface IOptions {\n    lineBreak?: LINE_BREAK;\n    wordBreak?: WORD_BREAK;\n}\n\nconst cssFormattedClasses = (codePoints: number[], options?: IOptions): [number[], number[], boolean[] | undefined] => {\n    if (!options) {\n        options = {lineBreak: 'normal', wordBreak: 'normal'};\n    }\n    let [indicies, classTypes, isLetterNumber] = codePointsToCharacterClasses(codePoints, options.lineBreak);\n\n    if (options.wordBreak === 'break-all' || options.wordBreak === 'break-word') {\n        classTypes = classTypes.map((type) => ([NU, AL, SA].indexOf(type) !== -1 ? ID : type));\n    }\n\n    const forbiddenBreakpoints =\n        options.wordBreak === 'keep-all'\n            ? isLetterNumber.map((letterNumber, i) => {\n                  return letterNumber && codePoints[i] >= 0x4e00 && codePoints[i] <= 0x9fff;\n              })\n            : undefined;\n\n    return [indicies, classTypes, forbiddenBreakpoints];\n};\n\nexport const inlineBreakOpportunities = (str: string, options?: IOptions): string => {\n    const codePoints = toCodePoints(str);\n    let output = BREAK_NOT_ALLOWED;\n    const [indicies, classTypes, forbiddenBreakpoints] = cssFormattedClasses(codePoints, options);\n\n    codePoints.forEach((codePoint, i) => {\n        output +=\n            fromCodePoint(codePoint) +\n            (i >= codePoints.length - 1\n                ? BREAK_MANDATORY\n                : _lineBreakAtIndex(codePoints, classTypes, indicies, i + 1, forbiddenBreakpoints));\n    });\n\n    return output;\n};\n\nclass Break {\n    private readonly codePoints: number[];\n    readonly required: boolean;\n    readonly start: number;\n    readonly end: number;\n\n    constructor(codePoints: number[], lineBreak: string, start: number, end: number) {\n        this.codePoints = codePoints;\n        this.required = lineBreak === BREAK_MANDATORY;\n        this.start = start;\n        this.end = end;\n    }\n\n    slice(): string {\n        return fromCodePoint(...this.codePoints.slice(this.start, this.end));\n    }\n}\n\nexport type LineBreak =\n    | {\n          done: true;\n          value: null;\n      }\n    | {\n          done: false;\n          value: Break;\n      };\n\ninterface ILineBreakIterator {\n    next: () => LineBreak;\n}\n\nexport const LineBreaker = (str: string, options?: IOptions): ILineBreakIterator => {\n    const codePoints = toCodePoints(str);\n    const [indicies, classTypes, forbiddenBreakpoints] = cssFormattedClasses(codePoints, options);\n    const length = codePoints.length;\n    let lastEnd = 0;\n    let nextIndex = 0;\n\n    return {\n        next: () => {\n            if (nextIndex >= length) {\n                return {done: true, value: null};\n            }\n            let lineBreak = BREAK_NOT_ALLOWED;\n            while (\n                nextIndex < length &&\n                (lineBreak = _lineBreakAtIndex(codePoints, classTypes, indicies, ++nextIndex, forbiddenBreakpoints)) ===\n                    BREAK_NOT_ALLOWED\n            ) {}\n\n            if (lineBreak !== BREAK_NOT_ALLOWED || nextIndex === length) {\n                const value = new Break(codePoints, lineBreak, lastEnd, nextIndex);\n                lastEnd = nextIndex;\n                return {value, done: false};\n            }\n\n            return {done: true, value: null};\n        },\n    };\n};\n", "// https://www.w3.org/TR/css-syntax-3\n\nimport {fromCodePoint, toCodePoints} from 'css-line-break';\n\nexport const enum TokenType {\n    STRING_TOKEN,\n    BAD_STRING_TOKEN,\n    LEFT_PARENTHESIS_TOKEN,\n    RIGHT_PARENTHESIS_TOKEN,\n    COMMA_TOKEN,\n    HASH_TOKEN,\n    DELIM_TOKEN,\n    AT_KEYWORD_TOKEN,\n    PREFIX_MATCH_TOKEN,\n    DASH_MATCH_TOKEN,\n    INCLUDE_MATCH_TOKEN,\n    LEFT_CURLY_BRACKET_TOKEN,\n    RIGHT_CURLY_BRACKET_TOKEN,\n    SUFFIX_MATCH_TOKEN,\n    SUBSTRING_MATCH_TOKEN,\n    DIMENSION_TOKEN,\n    PERCENTAGE_TOKEN,\n    NUMBER_TOKEN,\n    FUNCTION,\n    FUNCTION_TOKEN,\n    IDENT_TOKEN,\n    COLUMN_TOKEN,\n    URL_TOKEN,\n    BAD_URL_TOKEN,\n    CDC_TOKEN,\n    CDO_TOKEN,\n    COLON_TOKEN,\n    SEMICOLON_TOKEN,\n    LEFT_SQUARE_BRACKET_TOKEN,\n    RIGHT_SQUARE_BRACKET_TOKEN,\n    UNICODE_RANGE_TOKEN,\n    WHITESPACE_TOKEN,\n    EOF_TOKEN\n}\n\ninterface IToken {\n    type: TokenType;\n}\n\nexport interface Token extends IToken {\n    type:\n        | TokenType.BAD_URL_TOKEN\n        | TokenType.BAD_STRING_TOKEN\n        | TokenType.LEFT_PARENTHESIS_TOKEN\n        | TokenType.RIGHT_PARENTHESIS_TOKEN\n        | TokenType.COMMA_TOKEN\n        | TokenType.SUBSTRING_MATCH_TOKEN\n        | TokenType.PREFIX_MATCH_TOKEN\n        | TokenType.SUFFIX_MATCH_TOKEN\n        | TokenType.COLON_TOKEN\n        | TokenType.SEMICOLON_TOKEN\n        | TokenType.LEFT_SQUARE_BRACKET_TOKEN\n        | TokenType.RIGHT_SQUARE_BRACKET_TOKEN\n        | TokenType.LEFT_CURLY_BRACKET_TOKEN\n        | TokenType.RIGHT_CURLY_BRACKET_TOKEN\n        | TokenType.DASH_MATCH_TOKEN\n        | TokenType.INCLUDE_MATCH_TOKEN\n        | TokenType.COLUMN_TOKEN\n        | TokenType.WHITESPACE_TOKEN\n        | TokenType.CDC_TOKEN\n        | TokenType.CDO_TOKEN\n        | TokenType.EOF_TOKEN;\n}\n\nexport interface StringValueToken extends IToken {\n    type:\n        | TokenType.STRING_TOKEN\n        | TokenType.DELIM_TOKEN\n        | TokenType.FUNCTION_TOKEN\n        | TokenType.IDENT_TOKEN\n        | TokenType.URL_TOKEN\n        | TokenType.AT_KEYWORD_TOKEN;\n    value: string;\n}\n\nexport interface HashToken extends IToken {\n    type: TokenType.HASH_TOKEN;\n    flags: number;\n    value: string;\n}\n\nexport interface NumberValueToken extends IToken {\n    type: TokenType.PERCENTAGE_TOKEN | TokenType.NUMBER_TOKEN;\n    flags: number;\n    number: number;\n}\n\nexport interface DimensionToken extends IToken {\n    type: TokenType.DIMENSION_TOKEN;\n    flags: number;\n    unit: string;\n    number: number;\n}\n\nexport interface UnicodeRangeToken extends IToken {\n    type: TokenType.UNICODE_RANGE_TOKEN;\n    start: number;\n    end: number;\n}\n\nexport type CSSToken = Token | StringValueToken | NumberValueToken | DimensionToken | UnicodeRangeToken | HashToken;\n\nexport const FLAG_UNRESTRICTED = 1 << 0;\nexport const FLAG_ID = 1 << 1;\nexport const FLAG_INTEGER = 1 << 2;\nexport const FLAG_NUMBER = 1 << 3;\n\nconst LINE_FEED = 0x000a;\nconst SOLIDUS = 0x002f;\nconst REVERSE_SOLIDUS = 0x005c;\nconst CHARACTER_TABULATION = 0x0009;\nconst SPACE = 0x0020;\nconst QUOTATION_MARK = 0x0022;\nconst EQUALS_SIGN = 0x003d;\nconst NUMBER_SIGN = 0x0023;\nconst DOLLAR_SIGN = 0x0024;\nconst PERCENTAGE_SIGN = 0x0025;\nconst APOSTROPHE = 0x0027;\nconst LEFT_PARENTHESIS = 0x0028;\nconst RIGHT_PARENTHESIS = 0x0029;\nconst LOW_LINE = 0x005f;\nconst HYPHEN_MINUS = 0x002d;\nconst EXCLAMATION_MARK = 0x0021;\nconst LESS_THAN_SIGN = 0x003c;\nconst GREATER_THAN_SIGN = 0x003e;\nconst COMMERCIAL_AT = 0x0040;\nconst LEFT_SQUARE_BRACKET = 0x005b;\nconst RIGHT_SQUARE_BRACKET = 0x005d;\nconst CIRCUMFLEX_ACCENT = 0x003d;\nconst LEFT_CURLY_BRACKET = 0x007b;\nconst QUESTION_MARK = 0x003f;\nconst RIGHT_CURLY_BRACKET = 0x007d;\nconst VERTICAL_LINE = 0x007c;\nconst TILDE = 0x007e;\nconst CONTROL = 0x0080;\nconst REPLACEMENT_CHARACTER = 0xfffd;\nconst ASTERISK = 0x002a;\nconst PLUS_SIGN = 0x002b;\nconst COMMA = 0x002c;\nconst COLON = 0x003a;\nconst SEMICOLON = 0x003b;\nconst FULL_STOP = 0x002e;\nconst NULL = 0x0000;\nconst BACKSPACE = 0x0008;\nconst LINE_TABULATION = 0x000b;\nconst SHIFT_OUT = 0x000e;\nconst INFORMATION_SEPARATOR_ONE = 0x001f;\nconst DELETE = 0x007f;\nconst EOF = -1;\nconst ZERO = 0x0030;\nconst a = 0x0061;\nconst e = 0x0065;\nconst f = 0x0066;\nconst u = 0x0075;\nconst z = 0x007a;\nconst A = 0x0041;\nconst E = 0x0045;\nconst F = 0x0046;\nconst U = 0x0055;\nconst Z = 0x005a;\n\nconst isDigit = (codePoint: number) => codePoint >= ZERO && codePoint <= 0x0039;\nconst isSurrogateCodePoint = (codePoint: number) => codePoint >= 0xd800 && codePoint <= 0xdfff;\nconst isHex = (codePoint: number) =>\n    isDigit(codePoint) || (codePoint >= A && codePoint <= F) || (codePoint >= a && codePoint <= f);\nconst isLowerCaseLetter = (codePoint: number) => codePoint >= a && codePoint <= z;\nconst isUpperCaseLetter = (codePoint: number) => codePoint >= A && codePoint <= Z;\nconst isLetter = (codePoint: number) => isLowerCaseLetter(codePoint) || isUpperCaseLetter(codePoint);\nconst isNonASCIICodePoint = (codePoint: number) => codePoint >= CONTROL;\nconst isWhiteSpace = (codePoint: number): boolean =>\n    codePoint === LINE_FEED || codePoint === CHARACTER_TABULATION || codePoint === SPACE;\nconst isNameStartCodePoint = (codePoint: number): boolean =>\n    isLetter(codePoint) || isNonASCIICodePoint(codePoint) || codePoint === LOW_LINE;\nconst isNameCodePoint = (codePoint: number): boolean =>\n    isNameStartCodePoint(codePoint) || isDigit(codePoint) || codePoint === HYPHEN_MINUS;\nconst isNonPrintableCodePoint = (codePoint: number): boolean => {\n    return (\n        (codePoint >= NULL && codePoint <= BACKSPACE) ||\n        codePoint === LINE_TABULATION ||\n        (codePoint >= SHIFT_OUT && codePoint <= INFORMATION_SEPARATOR_ONE) ||\n        codePoint === DELETE\n    );\n};\nconst isValidEscape = (c1: number, c2: number): boolean => {\n    if (c1 !== REVERSE_SOLIDUS) {\n        return false;\n    }\n\n    return c2 !== LINE_FEED;\n};\nconst isIdentifierStart = (c1: number, c2: number, c3: number): boolean => {\n    if (c1 === HYPHEN_MINUS) {\n        return isNameStartCodePoint(c2) || isValidEscape(c2, c3);\n    } else if (isNameStartCodePoint(c1)) {\n        return true;\n    } else if (c1 === REVERSE_SOLIDUS && isValidEscape(c1, c2)) {\n        return true;\n    }\n    return false;\n};\n\nconst isNumberStart = (c1: number, c2: number, c3: number): boolean => {\n    if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {\n        if (isDigit(c2)) {\n            return true;\n        }\n\n        return c2 === FULL_STOP && isDigit(c3);\n    }\n\n    if (c1 === FULL_STOP) {\n        return isDigit(c2);\n    }\n\n    return isDigit(c1);\n};\n\nconst stringToNumber = (codePoints: number[]): number => {\n    let c = 0;\n    let sign = 1;\n    if (codePoints[c] === PLUS_SIGN || codePoints[c] === HYPHEN_MINUS) {\n        if (codePoints[c] === HYPHEN_MINUS) {\n            sign = -1;\n        }\n        c++;\n    }\n\n    const integers = [];\n\n    while (isDigit(codePoints[c])) {\n        integers.push(codePoints[c++]);\n    }\n\n    const int = integers.length ? parseInt(fromCodePoint(...integers), 10) : 0;\n\n    if (codePoints[c] === FULL_STOP) {\n        c++;\n    }\n\n    const fraction = [];\n    while (isDigit(codePoints[c])) {\n        fraction.push(codePoints[c++]);\n    }\n\n    const fracd = fraction.length;\n    const frac = fracd ? parseInt(fromCodePoint(...fraction), 10) : 0;\n\n    if (codePoints[c] === E || codePoints[c] === e) {\n        c++;\n    }\n\n    let expsign = 1;\n\n    if (codePoints[c] === PLUS_SIGN || codePoints[c] === HYPHEN_MINUS) {\n        if (codePoints[c] === HYPHEN_MINUS) {\n            expsign = -1;\n        }\n        c++;\n    }\n\n    const exponent = [];\n\n    while (isDigit(codePoints[c])) {\n        exponent.push(codePoints[c++]);\n    }\n\n    const exp = exponent.length ? parseInt(fromCodePoint(...exponent), 10) : 0;\n\n    return sign * (int + frac * Math.pow(10, -fracd)) * Math.pow(10, expsign * exp);\n};\n\nconst LEFT_PARENTHESIS_TOKEN: Token = {\n    type: TokenType.LEFT_PARENTHESIS_TOKEN\n};\nconst RIGHT_PARENTHESIS_TOKEN: Token = {\n    type: TokenType.RIGHT_PARENTHESIS_TOKEN\n};\nconst COMMA_TOKEN: Token = {type: TokenType.COMMA_TOKEN};\nconst SUFFIX_MATCH_TOKEN: Token = {type: TokenType.SUFFIX_MATCH_TOKEN};\nconst PREFIX_MATCH_TOKEN: Token = {type: TokenType.PREFIX_MATCH_TOKEN};\nconst COLUMN_TOKEN: Token = {type: TokenType.COLUMN_TOKEN};\nconst DASH_MATCH_TOKEN: Token = {type: TokenType.DASH_MATCH_TOKEN};\nconst INCLUDE_MATCH_TOKEN: Token = {type: TokenType.INCLUDE_MATCH_TOKEN};\nconst LEFT_CURLY_BRACKET_TOKEN: Token = {\n    type: TokenType.LEFT_CURLY_BRACKET_TOKEN\n};\nconst RIGHT_CURLY_BRACKET_TOKEN: Token = {\n    type: TokenType.RIGHT_CURLY_BRACKET_TOKEN\n};\nconst SUBSTRING_MATCH_TOKEN: Token = {type: TokenType.SUBSTRING_MATCH_TOKEN};\nconst BAD_URL_TOKEN: Token = {type: TokenType.BAD_URL_TOKEN};\nconst BAD_STRING_TOKEN: Token = {type: TokenType.BAD_STRING_TOKEN};\nconst CDO_TOKEN: Token = {type: TokenType.CDO_TOKEN};\nconst CDC_TOKEN: Token = {type: TokenType.CDC_TOKEN};\nconst COLON_TOKEN: Token = {type: TokenType.COLON_TOKEN};\nconst SEMICOLON_TOKEN: Token = {type: TokenType.SEMICOLON_TOKEN};\nconst LEFT_SQUARE_BRACKET_TOKEN: Token = {\n    type: TokenType.LEFT_SQUARE_BRACKET_TOKEN\n};\nconst RIGHT_SQUARE_BRACKET_TOKEN: Token = {\n    type: TokenType.RIGHT_SQUARE_BRACKET_TOKEN\n};\nconst WHITESPACE_TOKEN: Token = {type: TokenType.WHITESPACE_TOKEN};\nexport const EOF_TOKEN: Token = {type: TokenType.EOF_TOKEN};\n\nexport class Tokenizer {\n    private _value: number[];\n\n    constructor() {\n        this._value = [];\n    }\n\n    write(chunk: string): void {\n        this._value = this._value.concat(toCodePoints(chunk));\n    }\n\n    read(): CSSToken[] {\n        const tokens = [];\n        let token = this.consumeToken();\n        while (token !== EOF_TOKEN) {\n            tokens.push(token);\n            token = this.consumeToken();\n        }\n        return tokens;\n    }\n\n    private consumeToken(): CSSToken {\n        const codePoint = this.consumeCodePoint();\n\n        switch (codePoint) {\n            case QUOTATION_MARK:\n                return this.consumeStringToken(QUOTATION_MARK);\n            case NUMBER_SIGN:\n                const c1 = this.peekCodePoint(0);\n                const c2 = this.peekCodePoint(1);\n                const c3 = this.peekCodePoint(2);\n                if (isNameCodePoint(c1) || isValidEscape(c2, c3)) {\n                    const flags = isIdentifierStart(c1, c2, c3) ? FLAG_ID : FLAG_UNRESTRICTED;\n                    const value = this.consumeName();\n\n                    return {type: TokenType.HASH_TOKEN, value, flags};\n                }\n                break;\n            case DOLLAR_SIGN:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return SUFFIX_MATCH_TOKEN;\n                }\n                break;\n            case APOSTROPHE:\n                return this.consumeStringToken(APOSTROPHE);\n            case LEFT_PARENTHESIS:\n                return LEFT_PARENTHESIS_TOKEN;\n            case RIGHT_PARENTHESIS:\n                return RIGHT_PARENTHESIS_TOKEN;\n            case ASTERISK:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return SUBSTRING_MATCH_TOKEN;\n                }\n                break;\n            case PLUS_SIGN:\n                if (isNumberStart(codePoint, this.peekCodePoint(0), this.peekCodePoint(1))) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeNumericToken();\n                }\n                break;\n            case COMMA:\n                return COMMA_TOKEN;\n            case HYPHEN_MINUS:\n                const e1 = codePoint;\n                const e2 = this.peekCodePoint(0);\n                const e3 = this.peekCodePoint(1);\n\n                if (isNumberStart(e1, e2, e3)) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeNumericToken();\n                }\n\n                if (isIdentifierStart(e1, e2, e3)) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeIdentLikeToken();\n                }\n\n                if (e2 === HYPHEN_MINUS && e3 === GREATER_THAN_SIGN) {\n                    this.consumeCodePoint();\n                    this.consumeCodePoint();\n                    return CDC_TOKEN;\n                }\n                break;\n\n            case FULL_STOP:\n                if (isNumberStart(codePoint, this.peekCodePoint(0), this.peekCodePoint(1))) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeNumericToken();\n                }\n                break;\n            case SOLIDUS:\n                if (this.peekCodePoint(0) === ASTERISK) {\n                    this.consumeCodePoint();\n                    while (true) {\n                        let c = this.consumeCodePoint();\n                        if (c === ASTERISK) {\n                            c = this.consumeCodePoint();\n                            if (c === SOLIDUS) {\n                                return this.consumeToken();\n                            }\n                        }\n                        if (c === EOF) {\n                            return this.consumeToken();\n                        }\n                    }\n                }\n                break;\n            case COLON:\n                return COLON_TOKEN;\n            case SEMICOLON:\n                return SEMICOLON_TOKEN;\n            case LESS_THAN_SIGN:\n                if (\n                    this.peekCodePoint(0) === EXCLAMATION_MARK &&\n                    this.peekCodePoint(1) === HYPHEN_MINUS &&\n                    this.peekCodePoint(2) === HYPHEN_MINUS\n                ) {\n                    this.consumeCodePoint();\n                    this.consumeCodePoint();\n                    return CDO_TOKEN;\n                }\n                break;\n            case COMMERCIAL_AT:\n                const a1 = this.peekCodePoint(0);\n                const a2 = this.peekCodePoint(1);\n                const a3 = this.peekCodePoint(2);\n                if (isIdentifierStart(a1, a2, a3)) {\n                    const value = this.consumeName();\n                    return {type: TokenType.AT_KEYWORD_TOKEN, value};\n                }\n                break;\n            case LEFT_SQUARE_BRACKET:\n                return LEFT_SQUARE_BRACKET_TOKEN;\n            case REVERSE_SOLIDUS:\n                if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeIdentLikeToken();\n                }\n                break;\n            case RIGHT_SQUARE_BRACKET:\n                return RIGHT_SQUARE_BRACKET_TOKEN;\n            case CIRCUMFLEX_ACCENT:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return PREFIX_MATCH_TOKEN;\n                }\n                break;\n            case LEFT_CURLY_BRACKET:\n                return LEFT_CURLY_BRACKET_TOKEN;\n            case RIGHT_CURLY_BRACKET:\n                return RIGHT_CURLY_BRACKET_TOKEN;\n            case u:\n            case U:\n                const u1 = this.peekCodePoint(0);\n                const u2 = this.peekCodePoint(1);\n                if (u1 === PLUS_SIGN && (isHex(u2) || u2 === QUESTION_MARK)) {\n                    this.consumeCodePoint();\n                    this.consumeUnicodeRangeToken();\n                }\n                this.reconsumeCodePoint(codePoint);\n                return this.consumeIdentLikeToken();\n            case VERTICAL_LINE:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return DASH_MATCH_TOKEN;\n                }\n                if (this.peekCodePoint(0) === VERTICAL_LINE) {\n                    this.consumeCodePoint();\n                    return COLUMN_TOKEN;\n                }\n                break;\n            case TILDE:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return INCLUDE_MATCH_TOKEN;\n                }\n                break;\n            case EOF:\n                return EOF_TOKEN;\n        }\n\n        if (isWhiteSpace(codePoint)) {\n            this.consumeWhiteSpace();\n            return WHITESPACE_TOKEN;\n        }\n\n        if (isDigit(codePoint)) {\n            this.reconsumeCodePoint(codePoint);\n            return this.consumeNumericToken();\n        }\n\n        if (isNameStartCodePoint(codePoint)) {\n            this.reconsumeCodePoint(codePoint);\n            return this.consumeIdentLikeToken();\n        }\n\n        return {type: TokenType.DELIM_TOKEN, value: fromCodePoint(codePoint)};\n    }\n\n    private consumeCodePoint(): number {\n        const value = this._value.shift();\n\n        return typeof value === 'undefined' ? -1 : value;\n    }\n\n    private reconsumeCodePoint(codePoint: number) {\n        this._value.unshift(codePoint);\n    }\n\n    private peekCodePoint(delta: number): number {\n        if (delta >= this._value.length) {\n            return -1;\n        }\n\n        return this._value[delta];\n    }\n\n    private consumeUnicodeRangeToken(): UnicodeRangeToken {\n        const digits = [];\n        let codePoint = this.consumeCodePoint();\n        while (isHex(codePoint) && digits.length < 6) {\n            digits.push(codePoint);\n            codePoint = this.consumeCodePoint();\n        }\n        let questionMarks = false;\n        while (codePoint === QUESTION_MARK && digits.length < 6) {\n            digits.push(codePoint);\n            codePoint = this.consumeCodePoint();\n            questionMarks = true;\n        }\n\n        if (questionMarks) {\n            const start = parseInt(\n                fromCodePoint(...digits.map((digit) => (digit === QUESTION_MARK ? ZERO : digit))),\n                16\n            );\n            const end = parseInt(fromCodePoint(...digits.map((digit) => (digit === QUESTION_MARK ? F : digit))), 16);\n            return {type: TokenType.UNICODE_RANGE_TOKEN, start, end};\n        }\n\n        const start = parseInt(fromCodePoint(...digits), 16);\n        if (this.peekCodePoint(0) === HYPHEN_MINUS && isHex(this.peekCodePoint(1))) {\n            this.consumeCodePoint();\n            codePoint = this.consumeCodePoint();\n            const endDigits = [];\n            while (isHex(codePoint) && endDigits.length < 6) {\n                endDigits.push(codePoint);\n                codePoint = this.consumeCodePoint();\n            }\n            const end = parseInt(fromCodePoint(...endDigits), 16);\n\n            return {type: TokenType.UNICODE_RANGE_TOKEN, start, end};\n        } else {\n            return {type: TokenType.UNICODE_RANGE_TOKEN, start, end: start};\n        }\n    }\n\n    private consumeIdentLikeToken(): StringValueToken | Token {\n        const value = this.consumeName();\n        if (value.toLowerCase() === 'url' && this.peekCodePoint(0) === LEFT_PARENTHESIS) {\n            this.consumeCodePoint();\n            return this.consumeUrlToken();\n        } else if (this.peekCodePoint(0) === LEFT_PARENTHESIS) {\n            this.consumeCodePoint();\n            return {type: TokenType.FUNCTION_TOKEN, value};\n        }\n\n        return {type: TokenType.IDENT_TOKEN, value};\n    }\n\n    private consumeUrlToken(): StringValueToken | Token {\n        const value = [];\n        this.consumeWhiteSpace();\n\n        if (this.peekCodePoint(0) === EOF) {\n            return {type: TokenType.URL_TOKEN, value: ''};\n        }\n\n        const next = this.peekCodePoint(0);\n        if (next === APOSTROPHE || next === QUOTATION_MARK) {\n            const stringToken = this.consumeStringToken(this.consumeCodePoint());\n            if (stringToken.type === TokenType.STRING_TOKEN) {\n                this.consumeWhiteSpace();\n\n                if (this.peekCodePoint(0) === EOF || this.peekCodePoint(0) === RIGHT_PARENTHESIS) {\n                    this.consumeCodePoint();\n                    return {type: TokenType.URL_TOKEN, value: stringToken.value};\n                }\n            }\n\n            this.consumeBadUrlRemnants();\n            return BAD_URL_TOKEN;\n        }\n\n        while (true) {\n            const codePoint = this.consumeCodePoint();\n            if (codePoint === EOF || codePoint === RIGHT_PARENTHESIS) {\n                return {type: TokenType.URL_TOKEN, value: fromCodePoint(...value)};\n            } else if (isWhiteSpace(codePoint)) {\n                this.consumeWhiteSpace();\n                if (this.peekCodePoint(0) === EOF || this.peekCodePoint(0) === RIGHT_PARENTHESIS) {\n                    this.consumeCodePoint();\n                    return {type: TokenType.URL_TOKEN, value: fromCodePoint(...value)};\n                }\n                this.consumeBadUrlRemnants();\n                return BAD_URL_TOKEN;\n            } else if (\n                codePoint === QUOTATION_MARK ||\n                codePoint === APOSTROPHE ||\n                codePoint === LEFT_PARENTHESIS ||\n                isNonPrintableCodePoint(codePoint)\n            ) {\n                this.consumeBadUrlRemnants();\n                return BAD_URL_TOKEN;\n            } else if (codePoint === REVERSE_SOLIDUS) {\n                if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                    value.push(this.consumeEscapedCodePoint());\n                } else {\n                    this.consumeBadUrlRemnants();\n                    return BAD_URL_TOKEN;\n                }\n            } else {\n                value.push(codePoint);\n            }\n        }\n    }\n\n    private consumeWhiteSpace(): void {\n        while (isWhiteSpace(this.peekCodePoint(0))) {\n            this.consumeCodePoint();\n        }\n    }\n\n    private consumeBadUrlRemnants(): void {\n        while (true) {\n            const codePoint = this.consumeCodePoint();\n            if (codePoint === RIGHT_PARENTHESIS || codePoint === EOF) {\n                return;\n            }\n\n            if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                this.consumeEscapedCodePoint();\n            }\n        }\n    }\n\n    private consumeStringSlice(count: number): string {\n        const SLICE_STACK_SIZE = 50000;\n        let value = '';\n        while (count > 0) {\n            const amount = Math.min(SLICE_STACK_SIZE, count);\n            value += fromCodePoint(...this._value.splice(0, amount));\n            count -= amount;\n        }\n        this._value.shift();\n\n        return value;\n    }\n\n    private consumeStringToken(endingCodePoint: number): StringValueToken | Token {\n        let value = '';\n        let i = 0;\n\n        do {\n            const codePoint = this._value[i];\n            if (codePoint === EOF || codePoint === undefined || codePoint === endingCodePoint) {\n                value += this.consumeStringSlice(i);\n                return {type: TokenType.STRING_TOKEN, value};\n            }\n\n            if (codePoint === LINE_FEED) {\n                this._value.splice(0, i);\n                return BAD_STRING_TOKEN;\n            }\n\n            if (codePoint === REVERSE_SOLIDUS) {\n                const next = this._value[i + 1];\n                if (next !== EOF && next !== undefined) {\n                    if (next === LINE_FEED) {\n                        value += this.consumeStringSlice(i);\n                        i = -1;\n                        this._value.shift();\n                    } else if (isValidEscape(codePoint, next)) {\n                        value += this.consumeStringSlice(i);\n                        value += fromCodePoint(this.consumeEscapedCodePoint());\n                        i = -1;\n                    }\n                }\n            }\n\n            i++;\n        } while (true);\n    }\n\n    private consumeNumber() {\n        const repr = [];\n        let type = FLAG_INTEGER;\n        let c1 = this.peekCodePoint(0);\n        if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {\n            repr.push(this.consumeCodePoint());\n        }\n\n        while (isDigit(this.peekCodePoint(0))) {\n            repr.push(this.consumeCodePoint());\n        }\n        c1 = this.peekCodePoint(0);\n        let c2 = this.peekCodePoint(1);\n        if (c1 === FULL_STOP && isDigit(c2)) {\n            repr.push(this.consumeCodePoint(), this.consumeCodePoint());\n            type = FLAG_NUMBER;\n            while (isDigit(this.peekCodePoint(0))) {\n                repr.push(this.consumeCodePoint());\n            }\n        }\n\n        c1 = this.peekCodePoint(0);\n        c2 = this.peekCodePoint(1);\n        const c3 = this.peekCodePoint(2);\n        if ((c1 === E || c1 === e) && (((c2 === PLUS_SIGN || c2 === HYPHEN_MINUS) && isDigit(c3)) || isDigit(c2))) {\n            repr.push(this.consumeCodePoint(), this.consumeCodePoint());\n            type = FLAG_NUMBER;\n            while (isDigit(this.peekCodePoint(0))) {\n                repr.push(this.consumeCodePoint());\n            }\n        }\n\n        return [stringToNumber(repr), type];\n    }\n\n    private consumeNumericToken(): NumberValueToken | DimensionToken {\n        const [number, flags] = this.consumeNumber();\n        const c1 = this.peekCodePoint(0);\n        const c2 = this.peekCodePoint(1);\n        const c3 = this.peekCodePoint(2);\n\n        if (isIdentifierStart(c1, c2, c3)) {\n            const unit = this.consumeName();\n            return {type: TokenType.DIMENSION_TOKEN, number, flags, unit};\n        }\n\n        if (c1 === PERCENTAGE_SIGN) {\n            this.consumeCodePoint();\n            return {type: TokenType.PERCENTAGE_TOKEN, number, flags};\n        }\n\n        return {type: TokenType.NUMBER_TOKEN, number, flags};\n    }\n\n    private consumeEscapedCodePoint(): number {\n        const codePoint = this.consumeCodePoint();\n\n        if (isHex(codePoint)) {\n            let hex = fromCodePoint(codePoint);\n            while (isHex(this.peekCodePoint(0)) && hex.length < 6) {\n                hex += fromCodePoint(this.consumeCodePoint());\n            }\n\n            if (isWhiteSpace(this.peekCodePoint(0))) {\n                this.consumeCodePoint();\n            }\n\n            const hexCodePoint = parseInt(hex, 16);\n\n            if (hexCodePoint === 0 || isSurrogateCodePoint(hexCodePoint) || hexCodePoint > 0x10ffff) {\n                return REPLACEMENT_CHARACTER;\n            }\n\n            return hexCodePoint;\n        }\n\n        if (codePoint === EOF) {\n            return REPLACEMENT_CHARACTER;\n        }\n\n        return codePoint;\n    }\n\n    private consumeName(): string {\n        let result = '';\n        while (true) {\n            const codePoint = this.consumeCodePoint();\n            if (isNameCodePoint(codePoint)) {\n                result += fromCodePoint(codePoint);\n            } else if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                result += fromCodePoint(this.consumeEscapedCodePoint());\n            } else {\n                this.reconsumeCodePoint(codePoint);\n                return result;\n            }\n        }\n    }\n}\n", "import {\n    CSSToken,\n    DimensionToken,\n    EOF_TOKEN,\n    NumberValueToken,\n    StringValueToken,\n    Tokenizer,\n    TokenType\n} from './tokenizer';\n\nexport type CSSBlockType =\n    | TokenType.LEFT_PARENTHESIS_TOKEN\n    | TokenType.LEFT_SQUARE_BRACKET_TOKEN\n    | TokenType.LEFT_CURLY_BRACKET_TOKEN;\n\nexport interface CSSBlock {\n    type: CSSBlockType;\n    values: CSSValue[];\n}\n\nexport interface CSSFunction {\n    type: TokenType.FUNCTION;\n    name: string;\n    values: CSSValue[];\n}\n\nexport type CSSValue = CSSFunction | CSSToken | CSSBlock;\n\nexport class Parser {\n    private _tokens: CSSToken[];\n\n    constructor(tokens: CSSToken[]) {\n        this._tokens = tokens;\n    }\n\n    static create(value: string): Parser {\n        const tokenizer = new Tokenizer();\n        tokenizer.write(value);\n        return new Parser(tokenizer.read());\n    }\n\n    static parseValue(value: string): CSSValue {\n        return Parser.create(value).parseComponentValue();\n    }\n\n    static parseValues(value: string): CSSValue[] {\n        return Parser.create(value).parseComponentValues();\n    }\n\n    parseComponentValue(): CSSValue {\n        let token = this.consumeToken();\n        while (token.type === TokenType.WHITESPACE_TOKEN) {\n            token = this.consumeToken();\n        }\n\n        if (token.type === TokenType.EOF_TOKEN) {\n            throw new SyntaxError(`Error parsing CSS component value, unexpected EOF`);\n        }\n\n        this.reconsumeToken(token);\n        const value = this.consumeComponentValue();\n\n        do {\n            token = this.consumeToken();\n        } while (token.type === TokenType.WHITESPACE_TOKEN);\n\n        if (token.type === TokenType.EOF_TOKEN) {\n            return value;\n        }\n\n        throw new SyntaxError(`Error parsing CSS component value, multiple values found when expecting only one`);\n    }\n\n    parseComponentValues(): CSSValue[] {\n        const values = [];\n        while (true) {\n            const value = this.consumeComponentValue();\n            if (value.type === TokenType.EOF_TOKEN) {\n                return values;\n            }\n            values.push(value);\n            values.push();\n        }\n    }\n\n    private consumeComponentValue(): CSSValue {\n        const token = this.consumeToken();\n\n        switch (token.type) {\n            case TokenType.LEFT_CURLY_BRACKET_TOKEN:\n            case TokenType.LEFT_SQUARE_BRACKET_TOKEN:\n            case TokenType.LEFT_PARENTHESIS_TOKEN:\n                return this.consumeSimpleBlock(token.type);\n            case TokenType.FUNCTION_TOKEN:\n                return this.consumeFunction(token);\n        }\n\n        return token;\n    }\n\n    private consumeSimpleBlock(type: CSSBlockType): CSSBlock {\n        const block: CSSBlock = {type, values: []};\n\n        let token = this.consumeToken();\n        while (true) {\n            if (token.type === TokenType.EOF_TOKEN || isEndingTokenFor(token, type)) {\n                return block;\n            }\n\n            this.reconsumeToken(token);\n            block.values.push(this.consumeComponentValue());\n            token = this.consumeToken();\n        }\n    }\n\n    private consumeFunction(functionToken: StringValueToken): CSSFunction {\n        const cssFunction: CSSFunction = {\n            name: functionToken.value,\n            values: [],\n            type: TokenType.FUNCTION\n        };\n\n        while (true) {\n            const token = this.consumeToken();\n            if (token.type === TokenType.EOF_TOKEN || token.type === TokenType.RIGHT_PARENTHESIS_TOKEN) {\n                return cssFunction;\n            }\n\n            this.reconsumeToken(token);\n            cssFunction.values.push(this.consumeComponentValue());\n        }\n    }\n\n    private consumeToken(): CSSToken {\n        const token = this._tokens.shift();\n        return typeof token === 'undefined' ? EOF_TOKEN : token;\n    }\n\n    private reconsumeToken(token: CSSToken): void {\n        this._tokens.unshift(token);\n    }\n}\n\nexport const isDimensionToken = (token: CSSValue): token is DimensionToken => token.type === TokenType.DIMENSION_TOKEN;\nexport const isNumberToken = (token: CSSValue): token is NumberValueToken => token.type === TokenType.NUMBER_TOKEN;\nexport const isIdentToken = (token: CSSValue): token is StringValueToken => token.type === TokenType.IDENT_TOKEN;\nexport const isStringToken = (token: CSSValue): token is StringValueToken => token.type === TokenType.STRING_TOKEN;\nexport const isIdentWithValue = (token: CSSValue, value: string): boolean =>\n    isIdentToken(token) && token.value === value;\n\nexport const nonWhiteSpace = (token: CSSValue): boolean => token.type !== TokenType.WHITESPACE_TOKEN;\nexport const nonFunctionArgSeparator = (token: CSSValue): boolean =>\n    token.type !== TokenType.WHITESPACE_TOKEN && token.type !== TokenType.COMMA_TOKEN;\n\nexport const parseFunctionArgs = (tokens: CSSValue[]): CSSValue[][] => {\n    const args: CSSValue[][] = [];\n    let arg: CSSValue[] = [];\n    tokens.forEach((token) => {\n        if (token.type === TokenType.COMMA_TOKEN) {\n            if (arg.length === 0) {\n                throw new Error(`Error parsing function args, zero tokens for arg`);\n            }\n            args.push(arg);\n            arg = [];\n            return;\n        }\n\n        if (token.type !== TokenType.WHITESPACE_TOKEN) {\n            arg.push(token);\n        }\n    });\n    if (arg.length) {\n        args.push(arg);\n    }\n\n    return args;\n};\n\nconst isEndingTokenFor = (token: CSSToken, type: CSSBlockType): boolean => {\n    if (type === TokenType.LEFT_CURLY_BRACKET_TOKEN && token.type === TokenType.RIGHT_CURLY_BRACKET_TOKEN) {\n        return true;\n    }\n    if (type === TokenType.LEFT_SQUARE_BRACKET_TOKEN && token.type === TokenType.RIGHT_SQUARE_BRACKET_TOKEN) {\n        return true;\n    }\n\n    return type === TokenType.LEFT_PARENTHESIS_TOKEN && token.type === TokenType.RIGHT_PARENTHESIS_TOKEN;\n};\n", "import {CSSValue} from '../syntax/parser';\nimport {DimensionToken, NumberValueToken, TokenType} from '../syntax/tokenizer';\n\nexport type Length = DimensionToken | NumberValueToken;\n\nexport const isLength = (token: CSSValue): token is Length =>\n    token.type === TokenType.NUMBER_TOKEN || token.type === TokenType.DIMENSION_TOKEN;\n", "import {DimensionToken, FLAG_INTEGER, NumberValueToken, TokenType} from '../syntax/tokenizer';\nimport {CSSValue, isDimensionToken} from '../syntax/parser';\nimport {isLength} from './length';\nexport type LengthPercentage = DimensionToken | NumberValueToken;\nexport type LengthPercentageTuple = [LengthPercentage] | [LengthPercentage, LengthPercentage];\n\nexport const isLengthPercentage = (token: CSSValue): token is LengthPercentage =>\n    token.type === TokenType.PERCENTAGE_TOKEN || isLength(token);\nexport const parseLengthPercentageTuple = (tokens: LengthPercentage[]): LengthPercentageTuple =>\n    tokens.length > 1 ? [tokens[0], tokens[1]] : [tokens[0]];\nexport const ZERO_LENGTH: NumberValueToken = {\n    type: TokenType.NUMBER_TOKEN,\n    number: 0,\n    flags: FLAG_INTEGER\n};\n\nexport const FIFTY_PERCENT: NumberValueToken = {\n    type: TokenType.PERCENTAGE_TOKEN,\n    number: 50,\n    flags: FLAG_INTEGER\n};\n\nexport const HUNDRED_PERCENT: NumberValueToken = {\n    type: TokenType.PERCENTAGE_TOKEN,\n    number: 100,\n    flags: FLAG_INTEGER\n};\n\nexport const getAbsoluteValueForTuple = (\n    tuple: LengthPercentageTuple,\n    width: number,\n    height: number\n): [number, number] => {\n    const [x, y] = tuple;\n    return [getAbsoluteValue(x, width), getAbsoluteValue(typeof y !== 'undefined' ? y : x, height)];\n};\nexport const getAbsoluteValue = (token: LengthPercentage, parent: number): number => {\n    if (token.type === TokenType.PERCENTAGE_TOKEN) {\n        return (token.number / 100) * parent;\n    }\n\n    if (isDimensionToken(token)) {\n        switch (token.unit) {\n            case 'rem':\n            case 'em':\n                return 16 * token.number; // TODO use correct font-size\n            case 'px':\n            default:\n                return token.number;\n        }\n    }\n\n    return token.number;\n};\n", "import {CSSValue, isIdentToken} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {ITypeDescriptor} from '../ITypeDescriptor';\nimport {HUNDRED_PERCENT, ZERO_LENGTH} from './length-percentage';\nimport {GradientCorner} from './image';\nimport {Context} from '../../core/context';\n\nconst DEG = 'deg';\nconst GRAD = 'grad';\nconst RAD = 'rad';\nconst TURN = 'turn';\n\nexport const angle: ITypeDescriptor<number> = {\n    name: 'angle',\n    parse: (_context: Context, value: CSSValue): number => {\n        if (value.type === TokenType.DIMENSION_TOKEN) {\n            switch (value.unit) {\n                case DEG:\n                    return (Math.PI * value.number) / 180;\n                case GRAD:\n                    return (Math.PI / 200) * value.number;\n                case RAD:\n                    return value.number;\n                case TURN:\n                    return Math.PI * 2 * value.number;\n            }\n        }\n\n        throw new Error(`Unsupported angle type`);\n    }\n};\n\nexport const isAngle = (value: CSSValue): boolean => {\n    if (value.type === TokenType.DIMENSION_TOKEN) {\n        if (value.unit === DEG || value.unit === GRAD || value.unit === RAD || value.unit === TURN) {\n            return true;\n        }\n    }\n    return false;\n};\n\nexport const parseNamedSide = (tokens: CSSValue[]): number | GradientCorner => {\n    const sideOrCorner = tokens\n        .filter(isIdentToken)\n        .map((ident) => ident.value)\n        .join(' ');\n\n    switch (sideOrCorner) {\n        case 'to bottom right':\n        case 'to right bottom':\n        case 'left top':\n        case 'top left':\n            return [ZERO_LENGTH, ZERO_LENGTH];\n        case 'to top':\n        case 'bottom':\n            return deg(0);\n        case 'to bottom left':\n        case 'to left bottom':\n        case 'right top':\n        case 'top right':\n            return [ZERO_LENGTH, HUNDRED_PERCENT];\n        case 'to right':\n        case 'left':\n            return deg(90);\n        case 'to top left':\n        case 'to left top':\n        case 'right bottom':\n        case 'bottom right':\n            return [HUNDRED_PERCENT, HUNDRED_PERCENT];\n        case 'to bottom':\n        case 'top':\n            return deg(180);\n        case 'to top right':\n        case 'to right top':\n        case 'left bottom':\n        case 'bottom left':\n            return [HUNDRED_PERCENT, ZERO_LENGTH];\n        case 'to left':\n        case 'right':\n            return deg(270);\n    }\n\n    return 0;\n};\n\nexport const deg = (deg: number): number => (Math.PI * deg) / 180;\n", "import {CSSValue, nonFunctionArgSeparator, Parser} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {ITypeDescriptor} from '../ITypeDescriptor';\nimport {angle, deg} from './angle';\nimport {getAbsoluteValue, isLengthPercentage} from './length-percentage';\nimport {Context} from '../../core/context';\nexport type Color = number;\n\nexport const color: ITypeDescriptor<Color> = {\n    name: 'color',\n    parse: (context: Context, value: CSSValue): Color => {\n        if (value.type === TokenType.FUNCTION) {\n            const colorFunction = SUPPORTED_COLOR_FUNCTIONS[value.name];\n            if (typeof colorFunction === 'undefined') {\n                throw new Error(`Attempting to parse an unsupported color function \"${value.name}\"`);\n            }\n            return colorFunction(context, value.values);\n        }\n\n        if (value.type === TokenType.HASH_TOKEN) {\n            if (value.value.length === 3) {\n                const r = value.value.substring(0, 1);\n                const g = value.value.substring(1, 2);\n                const b = value.value.substring(2, 3);\n                return pack(parseInt(r + r, 16), parseInt(g + g, 16), parseInt(b + b, 16), 1);\n            }\n\n            if (value.value.length === 4) {\n                const r = value.value.substring(0, 1);\n                const g = value.value.substring(1, 2);\n                const b = value.value.substring(2, 3);\n                const a = value.value.substring(3, 4);\n                return pack(parseInt(r + r, 16), parseInt(g + g, 16), parseInt(b + b, 16), parseInt(a + a, 16) / 255);\n            }\n\n            if (value.value.length === 6) {\n                const r = value.value.substring(0, 2);\n                const g = value.value.substring(2, 4);\n                const b = value.value.substring(4, 6);\n                return pack(parseInt(r, 16), parseInt(g, 16), parseInt(b, 16), 1);\n            }\n\n            if (value.value.length === 8) {\n                const r = value.value.substring(0, 2);\n                const g = value.value.substring(2, 4);\n                const b = value.value.substring(4, 6);\n                const a = value.value.substring(6, 8);\n                return pack(parseInt(r, 16), parseInt(g, 16), parseInt(b, 16), parseInt(a, 16) / 255);\n            }\n        }\n\n        if (value.type === TokenType.IDENT_TOKEN) {\n            const namedColor = COLORS[value.value.toUpperCase()];\n            if (typeof namedColor !== 'undefined') {\n                return namedColor;\n            }\n        }\n\n        return COLORS.TRANSPARENT;\n    }\n};\n\nexport const isTransparent = (color: Color): boolean => (0xff & color) === 0;\n\nexport const asString = (color: Color): string => {\n    const alpha = 0xff & color;\n    const blue = 0xff & (color >> 8);\n    const green = 0xff & (color >> 16);\n    const red = 0xff & (color >> 24);\n    return alpha < 255 ? `rgba(${red},${green},${blue},${alpha / 255})` : `rgb(${red},${green},${blue})`;\n};\n\nexport const pack = (r: number, g: number, b: number, a: number): Color =>\n    ((r << 24) | (g << 16) | (b << 8) | (Math.round(a * 255) << 0)) >>> 0;\n\nconst getTokenColorValue = (token: CSSValue, i: number): number => {\n    if (token.type === TokenType.NUMBER_TOKEN) {\n        return token.number;\n    }\n\n    if (token.type === TokenType.PERCENTAGE_TOKEN) {\n        const max = i === 3 ? 1 : 255;\n        return i === 3 ? (token.number / 100) * max : Math.round((token.number / 100) * max);\n    }\n\n    return 0;\n};\n\nconst rgb = (_context: Context, args: CSSValue[]): number => {\n    const tokens = args.filter(nonFunctionArgSeparator);\n\n    if (tokens.length === 3) {\n        const [r, g, b] = tokens.map(getTokenColorValue);\n        return pack(r, g, b, 1);\n    }\n\n    if (tokens.length === 4) {\n        const [r, g, b, a] = tokens.map(getTokenColorValue);\n        return pack(r, g, b, a);\n    }\n\n    return 0;\n};\n\nfunction hue2rgb(t1: number, t2: number, hue: number): number {\n    if (hue < 0) {\n        hue += 1;\n    }\n    if (hue >= 1) {\n        hue -= 1;\n    }\n\n    if (hue < 1 / 6) {\n        return (t2 - t1) * hue * 6 + t1;\n    } else if (hue < 1 / 2) {\n        return t2;\n    } else if (hue < 2 / 3) {\n        return (t2 - t1) * 6 * (2 / 3 - hue) + t1;\n    } else {\n        return t1;\n    }\n}\n\nconst hsl = (context: Context, args: CSSValue[]): number => {\n    const tokens = args.filter(nonFunctionArgSeparator);\n    const [hue, saturation, lightness, alpha] = tokens;\n\n    const h = (hue.type === TokenType.NUMBER_TOKEN ? deg(hue.number) : angle.parse(context, hue)) / (Math.PI * 2);\n    const s = isLengthPercentage(saturation) ? saturation.number / 100 : 0;\n    const l = isLengthPercentage(lightness) ? lightness.number / 100 : 0;\n    const a = typeof alpha !== 'undefined' && isLengthPercentage(alpha) ? getAbsoluteValue(alpha, 1) : 1;\n\n    if (s === 0) {\n        return pack(l * 255, l * 255, l * 255, 1);\n    }\n\n    const t2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n\n    const t1 = l * 2 - t2;\n    const r = hue2rgb(t1, t2, h + 1 / 3);\n    const g = hue2rgb(t1, t2, h);\n    const b = hue2rgb(t1, t2, h - 1 / 3);\n    return pack(r * 255, g * 255, b * 255, a);\n};\n\nconst SUPPORTED_COLOR_FUNCTIONS: {\n    [key: string]: (context: Context, args: CSSValue[]) => number;\n} = {\n    hsl: hsl,\n    hsla: hsl,\n    rgb: rgb,\n    rgba: rgb\n};\n\nexport const parseColor = (context: Context, value: string): Color =>\n    color.parse(context, Parser.create(value).parseComponentValue());\n\nexport const COLORS: {[key: string]: Color} = {\n    ALICEBLUE: 0xf0f8ffff,\n    ANTIQUEWHITE: 0xfaebd7ff,\n    AQUA: 0x00ffffff,\n    AQUAMARINE: 0x7fffd4ff,\n    AZURE: 0xf0ffffff,\n    BEIGE: 0xf5f5dcff,\n    BISQUE: 0xffe4c4ff,\n    BLACK: 0x000000ff,\n    BLANCHEDALMOND: 0xffebcdff,\n    BLUE: 0x0000ffff,\n    BLUEVIOLET: 0x8a2be2ff,\n    BROWN: 0xa52a2aff,\n    BURLYWOOD: 0xdeb887ff,\n    CADETBLUE: 0x5f9ea0ff,\n    CHARTREUSE: 0x7fff00ff,\n    CHOCOLATE: 0xd2691eff,\n    CORAL: 0xff7f50ff,\n    CORNFLOWERBLUE: 0x6495edff,\n    CORNSILK: 0xfff8dcff,\n    CRIMSON: 0xdc143cff,\n    CYAN: 0x00ffffff,\n    DARKBLUE: 0x00008bff,\n    DARKCYAN: 0x008b8bff,\n    DARKGOLDENROD: 0xb886bbff,\n    DARKGRAY: 0xa9a9a9ff,\n    DARKGREEN: 0x006400ff,\n    DARKGREY: 0xa9a9a9ff,\n    DARKKHAKI: 0xbdb76bff,\n    DARKMAGENTA: 0x8b008bff,\n    DARKOLIVEGREEN: 0x556b2fff,\n    DARKORANGE: 0xff8c00ff,\n    DARKORCHID: 0x9932ccff,\n    DARKRED: 0x8b0000ff,\n    DARKSALMON: 0xe9967aff,\n    DARKSEAGREEN: 0x8fbc8fff,\n    DARKSLATEBLUE: 0x483d8bff,\n    DARKSLATEGRAY: 0x2f4f4fff,\n    DARKSLATEGREY: 0x2f4f4fff,\n    DARKTURQUOISE: 0x00ced1ff,\n    DARKVIOLET: 0x9400d3ff,\n    DEEPPINK: 0xff1493ff,\n    DEEPSKYBLUE: 0x00bfffff,\n    DIMGRAY: 0x696969ff,\n    DIMGREY: 0x696969ff,\n    DODGERBLUE: 0x1e90ffff,\n    FIREBRICK: 0xb22222ff,\n    FLORALWHITE: 0xfffaf0ff,\n    FORESTGREEN: 0x228b22ff,\n    FUCHSIA: 0xff00ffff,\n    GAINSBORO: 0xdcdcdcff,\n    GHOSTWHITE: 0xf8f8ffff,\n    GOLD: 0xffd700ff,\n    GOLDENROD: 0xdaa520ff,\n    GRAY: 0x808080ff,\n    GREEN: 0x008000ff,\n    GREENYELLOW: 0xadff2fff,\n    GREY: 0x808080ff,\n    HONEYDEW: 0xf0fff0ff,\n    HOTPINK: 0xff69b4ff,\n    INDIANRED: 0xcd5c5cff,\n    INDIGO: 0x4b0082ff,\n    IVORY: 0xfffff0ff,\n    KHAKI: 0xf0e68cff,\n    LAVENDER: 0xe6e6faff,\n    LAVENDERBLUSH: 0xfff0f5ff,\n    LAWNGREEN: 0x7cfc00ff,\n    LEMONCHIFFON: 0xfffacdff,\n    LIGHTBLUE: 0xadd8e6ff,\n    LIGHTCORAL: 0xf08080ff,\n    LIGHTCYAN: 0xe0ffffff,\n    LIGHTGOLDENRODYELLOW: 0xfafad2ff,\n    LIGHTGRAY: 0xd3d3d3ff,\n    LIGHTGREEN: 0x90ee90ff,\n    LIGHTGREY: 0xd3d3d3ff,\n    LIGHTPINK: 0xffb6c1ff,\n    LIGHTSALMON: 0xffa07aff,\n    LIGHTSEAGREEN: 0x20b2aaff,\n    LIGHTSKYBLUE: 0x87cefaff,\n    LIGHTSLATEGRAY: 0x778899ff,\n    LIGHTSLATEGREY: 0x778899ff,\n    LIGHTSTEELBLUE: 0xb0c4deff,\n    LIGHTYELLOW: 0xffffe0ff,\n    LIME: 0x00ff00ff,\n    LIMEGREEN: 0x32cd32ff,\n    LINEN: 0xfaf0e6ff,\n    MAGENTA: 0xff00ffff,\n    MAROON: 0x800000ff,\n    MEDIUMAQUAMARINE: 0x66cdaaff,\n    MEDIUMBLUE: 0x0000cdff,\n    MEDIUMORCHID: 0xba55d3ff,\n    MEDIUMPURPLE: 0x9370dbff,\n    MEDIUMSEAGREEN: 0x3cb371ff,\n    MEDIUMSLATEBLUE: 0x7b68eeff,\n    MEDIUMSPRINGGREEN: 0x00fa9aff,\n    MEDIUMTURQUOISE: 0x48d1ccff,\n    MEDIUMVIOLETRED: 0xc71585ff,\n    MIDNIGHTBLUE: 0x191970ff,\n    MINTCREAM: 0xf5fffaff,\n    MISTYROSE: 0xffe4e1ff,\n    MOCCASIN: 0xffe4b5ff,\n    NAVAJOWHITE: 0xffdeadff,\n    NAVY: 0x000080ff,\n    OLDLACE: 0xfdf5e6ff,\n    OLIVE: 0x808000ff,\n    OLIVEDRAB: 0x6b8e23ff,\n    ORANGE: 0xffa500ff,\n    ORANGERED: 0xff4500ff,\n    ORCHID: 0xda70d6ff,\n    PALEGOLDENROD: 0xeee8aaff,\n    PALEGREEN: 0x98fb98ff,\n    PALETURQUOISE: 0xafeeeeff,\n    PALEVIOLETRED: 0xdb7093ff,\n    PAPAYAWHIP: 0xffefd5ff,\n    PEACHPUFF: 0xffdab9ff,\n    PERU: 0xcd853fff,\n    PINK: 0xffc0cbff,\n    PLUM: 0xdda0ddff,\n    POWDERBLUE: 0xb0e0e6ff,\n    PURPLE: 0x800080ff,\n    REBECCAPURPLE: 0x663399ff,\n    RED: 0xff0000ff,\n    ROSYBROWN: 0xbc8f8fff,\n    ROYALBLUE: 0x4169e1ff,\n    SADDLEBROWN: 0x8b4513ff,\n    SALMON: 0xfa8072ff,\n    SANDYBROWN: 0xf4a460ff,\n    SEAGREEN: 0x2e8b57ff,\n    SEASHELL: 0xfff5eeff,\n    SIENNA: 0xa0522dff,\n    SILVER: 0xc0c0c0ff,\n    SKYBLUE: 0x87ceebff,\n    SLATEBLUE: 0x6a5acdff,\n    SLATEGRAY: 0x708090ff,\n    SLATEGREY: 0x708090ff,\n    SNOW: 0xfffafaff,\n    SPRINGGREEN: 0x00ff7fff,\n    STEELBLUE: 0x4682b4ff,\n    TAN: 0xd2b48cff,\n    TEAL: 0x008080ff,\n    THISTLE: 0xd8bfd8ff,\n    TOMATO: 0xff6347ff,\n    TRANSPARENT: 0x00000000,\n    TURQUOISE: 0x40e0d0ff,\n    VIOLET: 0xee82eeff,\n    WHEAT: 0xf5deb3ff,\n    WHITE: 0xffffffff,\n    WHITESMOKE: 0xf5f5f5ff,\n    YELLOW: 0xffff00ff,\n    YELLOWGREEN: 0x9acd32ff\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const enum BACKGROUND_CLIP {\n    BORDER_BOX = 0,\n    PADDING_BOX = 1,\n    CONTENT_BOX = 2\n}\n\nexport type BackgroundClip = BACKGROUND_CLIP[];\n\nexport const backgroundClip: IPropertyListDescriptor<BackgroundClip> = {\n    name: 'background-clip',\n    initialValue: 'border-box',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): BackgroundClip => {\n        return tokens.map((token) => {\n            if (isIdentToken(token)) {\n                switch (token.value) {\n                    case 'padding-box':\n                        return BACKGROUND_CLIP.PADDING_BOX;\n                    case 'content-box':\n                        return BACKGROUND_CLIP.CONTENT_BOX;\n                }\n            }\n            return BACKGROUND_CLIP.BORDER_BOX;\n        });\n    }\n};\n", "import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\n\nexport const backgroundColor: IPropertyTypeValueDescriptor = {\n    name: `background-color`,\n    initialValue: 'transparent',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n};\n", "import {CSSValue} from '../../syntax/parser';\nimport {\n    CSSRadialExtent,\n    CSSRadialGradientImage,\n    CSSRadialShape,\n    GradientColorStop,\n    GradientCorner,\n    UnprocessedGradientColorStop\n} from '../image';\nimport {color as colorType} from '../color';\nimport {getAbsoluteValue, HUNDRED_PERCENT, isLengthPercentage, ZERO_LENGTH} from '../length-percentage';\nimport {Context} from '../../../core/context';\n\nexport const parseColorStop = (context: Context, args: CSSValue[]): UnprocessedGradientColorStop => {\n    const color = colorType.parse(context, args[0]);\n    const stop = args[1];\n    return stop && isLengthPercentage(stop) ? {color, stop} : {color, stop: null};\n};\n\nexport const processColorStops = (stops: UnprocessedGradientColorStop[], lineLength: number): GradientColorStop[] => {\n    const first = stops[0];\n    const last = stops[stops.length - 1];\n    if (first.stop === null) {\n        first.stop = ZERO_LENGTH;\n    }\n\n    if (last.stop === null) {\n        last.stop = HUNDRED_PERCENT;\n    }\n\n    const processStops: (number | null)[] = [];\n    let previous = 0;\n    for (let i = 0; i < stops.length; i++) {\n        const stop = stops[i].stop;\n        if (stop !== null) {\n            const absoluteValue = getAbsoluteValue(stop, lineLength);\n            if (absoluteValue > previous) {\n                processStops.push(absoluteValue);\n            } else {\n                processStops.push(previous);\n            }\n            previous = absoluteValue;\n        } else {\n            processStops.push(null);\n        }\n    }\n\n    let gapBegin = null;\n    for (let i = 0; i < processStops.length; i++) {\n        const stop = processStops[i];\n        if (stop === null) {\n            if (gapBegin === null) {\n                gapBegin = i;\n            }\n        } else if (gapBegin !== null) {\n            const gapLength = i - gapBegin;\n            const beforeGap = processStops[gapBegin - 1] as number;\n            const gapValue = (stop - beforeGap) / (gapLength + 1);\n            for (let g = 1; g <= gapLength; g++) {\n                processStops[gapBegin + g - 1] = gapValue * g;\n            }\n            gapBegin = null;\n        }\n    }\n\n    return stops.map(({color}, i) => {\n        return {color, stop: Math.max(Math.min(1, (processStops[i] as number) / lineLength), 0)};\n    });\n};\n\nconst getAngleFromCorner = (corner: GradientCorner, width: number, height: number): number => {\n    const centerX = width / 2;\n    const centerY = height / 2;\n    const x = getAbsoluteValue(corner[0], width) - centerX;\n    const y = centerY - getAbsoluteValue(corner[1], height);\n\n    return (Math.atan2(y, x) + Math.PI * 2) % (Math.PI * 2);\n};\n\nexport const calculateGradientDirection = (\n    angle: number | GradientCorner,\n    width: number,\n    height: number\n): [number, number, number, number, number] => {\n    const radian = typeof angle === 'number' ? angle : getAngleFromCorner(angle, width, height);\n\n    const lineLength = Math.abs(width * Math.sin(radian)) + Math.abs(height * Math.cos(radian));\n\n    const halfWidth = width / 2;\n    const halfHeight = height / 2;\n    const halfLineLength = lineLength / 2;\n\n    const yDiff = Math.sin(radian - Math.PI / 2) * halfLineLength;\n    const xDiff = Math.cos(radian - Math.PI / 2) * halfLineLength;\n\n    return [lineLength, halfWidth - xDiff, halfWidth + xDiff, halfHeight - yDiff, halfHeight + yDiff];\n};\n\nconst distance = (a: number, b: number): number => Math.sqrt(a * a + b * b);\n\nconst findCorner = (width: number, height: number, x: number, y: number, closest: boolean): [number, number] => {\n    const corners = [\n        [0, 0],\n        [0, height],\n        [width, 0],\n        [width, height]\n    ];\n\n    return corners.reduce(\n        (stat, corner) => {\n            const [cx, cy] = corner;\n            const d = distance(x - cx, y - cy);\n            if (closest ? d < stat.optimumDistance : d > stat.optimumDistance) {\n                return {\n                    optimumCorner: corner,\n                    optimumDistance: d\n                };\n            }\n\n            return stat;\n        },\n        {\n            optimumDistance: closest ? Infinity : -Infinity,\n            optimumCorner: null\n        }\n    ).optimumCorner as [number, number];\n};\n\nexport const calculateRadius = (\n    gradient: CSSRadialGradientImage,\n    x: number,\n    y: number,\n    width: number,\n    height: number\n): [number, number] => {\n    let rx = 0;\n    let ry = 0;\n\n    switch (gradient.size) {\n        case CSSRadialExtent.CLOSEST_SIDE:\n            // The ending shape is sized so that that it exactly meets the side of the gradient box closest to the gradients center.\n            // If the shape is an ellipse, it exactly meets the closest side in each dimension.\n            if (gradient.shape === CSSRadialShape.CIRCLE) {\n                rx = ry = Math.min(Math.abs(x), Math.abs(x - width), Math.abs(y), Math.abs(y - height));\n            } else if (gradient.shape === CSSRadialShape.ELLIPSE) {\n                rx = Math.min(Math.abs(x), Math.abs(x - width));\n                ry = Math.min(Math.abs(y), Math.abs(y - height));\n            }\n            break;\n\n        case CSSRadialExtent.CLOSEST_CORNER:\n            // The ending shape is sized so that that it passes through the corner of the gradient box closest to the gradients center.\n            // If the shape is an ellipse, the ending shape is given the same aspect-ratio it would have if closest-side were specified.\n            if (gradient.shape === CSSRadialShape.CIRCLE) {\n                rx = ry = Math.min(\n                    distance(x, y),\n                    distance(x, y - height),\n                    distance(x - width, y),\n                    distance(x - width, y - height)\n                );\n            } else if (gradient.shape === CSSRadialShape.ELLIPSE) {\n                // Compute the ratio ry/rx (which is to be the same as for \"closest-side\")\n                const c = Math.min(Math.abs(y), Math.abs(y - height)) / Math.min(Math.abs(x), Math.abs(x - width));\n                const [cx, cy] = findCorner(width, height, x, y, true);\n                rx = distance(cx - x, (cy - y) / c);\n                ry = c * rx;\n            }\n            break;\n\n        case CSSRadialExtent.FARTHEST_SIDE:\n            // Same as closest-side, except the ending shape is sized based on the farthest side(s)\n            if (gradient.shape === CSSRadialShape.CIRCLE) {\n                rx = ry = Math.max(Math.abs(x), Math.abs(x - width), Math.abs(y), Math.abs(y - height));\n            } else if (gradient.shape === CSSRadialShape.ELLIPSE) {\n                rx = Math.max(Math.abs(x), Math.abs(x - width));\n                ry = Math.max(Math.abs(y), Math.abs(y - height));\n            }\n            break;\n\n        case CSSRadialExtent.FARTHEST_CORNER:\n            // Same as closest-corner, except the ending shape is sized based on the farthest corner.\n            // If the shape is an ellipse, the ending shape is given the same aspect ratio it would have if farthest-side were specified.\n            if (gradient.shape === CSSRadialShape.CIRCLE) {\n                rx = ry = Math.max(\n                    distance(x, y),\n                    distance(x, y - height),\n                    distance(x - width, y),\n                    distance(x - width, y - height)\n                );\n            } else if (gradient.shape === CSSRadialShape.ELLIPSE) {\n                // Compute the ratio ry/rx (which is to be the same as for \"farthest-side\")\n                const c = Math.max(Math.abs(y), Math.abs(y - height)) / Math.max(Math.abs(x), Math.abs(x - width));\n                const [cx, cy] = findCorner(width, height, x, y, false);\n                rx = distance(cx - x, (cy - y) / c);\n                ry = c * rx;\n            }\n            break;\n    }\n\n    if (Array.isArray(gradient.size)) {\n        rx = getAbsoluteValue(gradient.size[0], width);\n        ry = gradient.size.length === 2 ? getAbsoluteValue(gradient.size[1], height) : rx;\n    }\n\n    return [rx, ry];\n};\n", "import {CSSValue, parseFunctionArgs} from '../../syntax/parser';\nimport {TokenType} from '../../syntax/tokenizer';\nimport {isAngle, angle as angleType, parseNamedSide, deg} from '../angle';\nimport {CSSImageType, CSSLinearGradientImage, GradientCorner, UnprocessedGradientColorStop} from '../image';\nimport {parseColorStop} from './gradient';\nimport {Context} from '../../../core/context';\n\nexport const linearGradient = (context: Context, tokens: CSSValue[]): CSSLinearGradientImage => {\n    let angle: number | GradientCorner = deg(180);\n    const stops: UnprocessedGradientColorStop[] = [];\n\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        if (i === 0) {\n            const firstToken = arg[0];\n            if (firstToken.type === TokenType.IDENT_TOKEN && firstToken.value === 'to') {\n                angle = parseNamedSide(arg);\n                return;\n            } else if (isAngle(firstToken)) {\n                angle = angleType.parse(context, firstToken);\n                return;\n            }\n        }\n        const colorStop = parseColorStop(context, arg);\n        stops.push(colorStop);\n    });\n\n    return {angle, stops, type: CSSImageType.LINEAR_GRADIENT};\n};\n", "import {CSSValue, parseFunctionArgs} from '../../syntax/parser';\nimport {CSSImageType, CSSLinearGradientImage, GradientCorner, UnprocessedGradientColorStop} from '../image';\nimport {TokenType} from '../../syntax/tokenizer';\nimport {isAngle, angle as angleType, parseNamedSide, deg} from '../angle';\nimport {parseColorStop} from './gradient';\nimport {Context} from '../../../core/context';\n\nexport const prefixLinearGradient = (context: Context, tokens: CSSValue[]): CSSLinearGradientImage => {\n    let angle: number | GradientCorner = deg(180);\n    const stops: UnprocessedGradientColorStop[] = [];\n\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        if (i === 0) {\n            const firstToken = arg[0];\n            if (\n                firstToken.type === TokenType.IDENT_TOKEN &&\n                ['top', 'left', 'right', 'bottom'].indexOf(firstToken.value) !== -1\n            ) {\n                angle = parseNamedSide(arg);\n                return;\n            } else if (isAngle(firstToken)) {\n                angle = (angleType.parse(context, firstToken) + deg(270)) % deg(360);\n                return;\n            }\n        }\n        const colorStop = parseColorStop(context, arg);\n        stops.push(colorStop);\n    });\n\n    return {\n        angle,\n        stops,\n        type: CSSImageType.LINEAR_GRADIENT\n    };\n};\n", "import {CSSValue, isIdentToken, isNumberToken, nonFunctionArgSeparator, parseFunctionArgs} from '../../syntax/parser';\nimport {\n    CSSImageType,\n    CSSLinearGradientImage,\n    CSSRadialExtent,\n    CSSRadialGradientImage,\n    CSSRadialShape,\n    CSSRadialSize,\n    UnprocessedGradientColorStop\n} from '../image';\nimport {deg} from '../angle';\nimport {TokenType} from '../../syntax/tokenizer';\nimport {color as colorType} from '../color';\nimport {HUNDRED_PERCENT, LengthPercentage, ZERO_LENGTH} from '../length-percentage';\nimport {Context} from '../../../core/context';\n\nexport const webkitGradient = (\n    context: Context,\n    tokens: CSSValue[]\n): CSSLinearGradientImage | CSSRadialGradientImage => {\n    const angle = deg(180);\n    const stops: UnprocessedGradientColorStop[] = [];\n    let type = CSSImageType.LINEAR_GRADIENT;\n    const shape: CSSRadialShape = CSSRadialShape.CIRCLE;\n    const size: CSSRadialSize = CSSRadialExtent.FARTHEST_CORNER;\n    const position: LengthPercentage[] = [];\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        const firstToken = arg[0];\n        if (i === 0) {\n            if (isIdentToken(firstToken) && firstToken.value === 'linear') {\n                type = CSSImageType.LINEAR_GRADIENT;\n                return;\n            } else if (isIdentToken(firstToken) && firstToken.value === 'radial') {\n                type = CSSImageType.RADIAL_GRADIENT;\n                return;\n            }\n        }\n\n        if (firstToken.type === TokenType.FUNCTION) {\n            if (firstToken.name === 'from') {\n                const color = colorType.parse(context, firstToken.values[0]);\n                stops.push({stop: ZERO_LENGTH, color});\n            } else if (firstToken.name === 'to') {\n                const color = colorType.parse(context, firstToken.values[0]);\n                stops.push({stop: HUNDRED_PERCENT, color});\n            } else if (firstToken.name === 'color-stop') {\n                const values = firstToken.values.filter(nonFunctionArgSeparator);\n                if (values.length === 2) {\n                    const color = colorType.parse(context, values[1]);\n                    const stop = values[0];\n                    if (isNumberToken(stop)) {\n                        stops.push({\n                            stop: {type: TokenType.PERCENTAGE_TOKEN, number: stop.number * 100, flags: stop.flags},\n                            color\n                        });\n                    }\n                }\n            }\n        }\n    });\n\n    return type === CSSImageType.LINEAR_GRADIENT\n        ? {\n              angle: (angle + deg(180)) % deg(360),\n              stops,\n              type\n          }\n        : {size, shape, stops, position, type};\n};\n", "import {CSSValue, isIdentToken, parseFunctionArgs} from '../../syntax/parser';\nimport {\n    CSSImageType,\n    CSSRadialExtent,\n    CSSRadialGradientImage,\n    CSSRadialShape,\n    CSSRadialSize,\n    UnprocessedGradientColorStop\n} from '../image';\nimport {parseColorStop} from './gradient';\nimport {FIFTY_PERCENT, HUNDRED_PERCENT, isLengthPercentage, LengthPercentage, ZERO_LENGTH} from '../length-percentage';\nimport {isLength} from '../length';\nimport {Context} from '../../../core/context';\nexport const CLOSEST_SIDE = 'closest-side';\nexport const FARTHEST_SIDE = 'farthest-side';\nexport const CLOSEST_CORNER = 'closest-corner';\nexport const FARTHEST_CORNER = 'farthest-corner';\nexport const CIRCLE = 'circle';\nexport const ELLIPSE = 'ellipse';\nexport const COVER = 'cover';\nexport const CONTAIN = 'contain';\n\nexport const radialGradient = (context: Context, tokens: CSSValue[]): CSSRadialGradientImage => {\n    let shape: CSSRadialShape = CSSRadialShape.CIRCLE;\n    let size: CSSRadialSize = CSSRadialExtent.FARTHEST_CORNER;\n    const stops: UnprocessedGradientColorStop[] = [];\n    const position: LengthPercentage[] = [];\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        let isColorStop = true;\n        if (i === 0) {\n            let isAtPosition = false;\n            isColorStop = arg.reduce((acc, token) => {\n                if (isAtPosition) {\n                    if (isIdentToken(token)) {\n                        switch (token.value) {\n                            case 'center':\n                                position.push(FIFTY_PERCENT);\n                                return acc;\n                            case 'top':\n                            case 'left':\n                                position.push(ZERO_LENGTH);\n                                return acc;\n                            case 'right':\n                            case 'bottom':\n                                position.push(HUNDRED_PERCENT);\n                                return acc;\n                        }\n                    } else if (isLengthPercentage(token) || isLength(token)) {\n                        position.push(token);\n                    }\n                } else if (isIdentToken(token)) {\n                    switch (token.value) {\n                        case CIRCLE:\n                            shape = CSSRadialShape.CIRCLE;\n                            return false;\n                        case ELLIPSE:\n                            shape = CSSRadialShape.ELLIPSE;\n                            return false;\n                        case 'at':\n                            isAtPosition = true;\n                            return false;\n                        case CLOSEST_SIDE:\n                            size = CSSRadialExtent.CLOSEST_SIDE;\n                            return false;\n                        case COVER:\n                        case FARTHEST_SIDE:\n                            size = CSSRadialExtent.FARTHEST_SIDE;\n                            return false;\n                        case CONTAIN:\n                        case CLOSEST_CORNER:\n                            size = CSSRadialExtent.CLOSEST_CORNER;\n                            return false;\n                        case FARTHEST_CORNER:\n                            size = CSSRadialExtent.FARTHEST_CORNER;\n                            return false;\n                    }\n                } else if (isLength(token) || isLengthPercentage(token)) {\n                    if (!Array.isArray(size)) {\n                        size = [];\n                    }\n                    size.push(token);\n                    return false;\n                }\n                return acc;\n            }, isColorStop);\n        }\n\n        if (isColorStop) {\n            const colorStop = parseColorStop(context, arg);\n            stops.push(colorStop);\n        }\n    });\n\n    return {size, shape, stops, position, type: CSSImageType.RADIAL_GRADIENT};\n};\n", "import {CSSValue, isIdentToken, parseFunctionArgs} from '../../syntax/parser';\nimport {\n    CSSImageType,\n    CSSRadialExtent,\n    CSSRadialGradientImage,\n    CSSRadialShape,\n    CSSRadialSize,\n    UnprocessedGradientColorStop\n} from '../image';\nimport {parseColorStop} from './gradient';\nimport {FIFTY_PERCENT, HUNDRED_PERCENT, isLengthPercentage, LengthPercentage, ZERO_LENGTH} from '../length-percentage';\nimport {isLength} from '../length';\nimport {\n    CIRCLE,\n    CLOSEST_CORNER,\n    CLOSEST_SIDE,\n    CONTAIN,\n    COVER,\n    ELLIPSE,\n    FARTHEST_CORNER,\n    FARTHEST_SIDE\n} from './radial-gradient';\nimport {Context} from '../../../core/context';\n\nexport const prefixRadialGradient = (context: Context, tokens: CSSValue[]): CSSRadialGradientImage => {\n    let shape: CSSRadialShape = CSSRadialShape.CIRCLE;\n    let size: CSSRadialSize = CSSRadialExtent.FARTHEST_CORNER;\n    const stops: UnprocessedGradientColorStop[] = [];\n    const position: LengthPercentage[] = [];\n\n    parseFunctionArgs(tokens).forEach((arg, i) => {\n        let isColorStop = true;\n        if (i === 0) {\n            isColorStop = arg.reduce((acc, token) => {\n                if (isIdentToken(token)) {\n                    switch (token.value) {\n                        case 'center':\n                            position.push(FIFTY_PERCENT);\n                            return false;\n                        case 'top':\n                        case 'left':\n                            position.push(ZERO_LENGTH);\n                            return false;\n                        case 'right':\n                        case 'bottom':\n                            position.push(HUNDRED_PERCENT);\n                            return false;\n                    }\n                } else if (isLengthPercentage(token) || isLength(token)) {\n                    position.push(token);\n                    return false;\n                }\n\n                return acc;\n            }, isColorStop);\n        } else if (i === 1) {\n            isColorStop = arg.reduce((acc, token) => {\n                if (isIdentToken(token)) {\n                    switch (token.value) {\n                        case CIRCLE:\n                            shape = CSSRadialShape.CIRCLE;\n                            return false;\n                        case ELLIPSE:\n                            shape = CSSRadialShape.ELLIPSE;\n                            return false;\n                        case CONTAIN:\n                        case CLOSEST_SIDE:\n                            size = CSSRadialExtent.CLOSEST_SIDE;\n                            return false;\n                        case FARTHEST_SIDE:\n                            size = CSSRadialExtent.FARTHEST_SIDE;\n                            return false;\n                        case CLOSEST_CORNER:\n                            size = CSSRadialExtent.CLOSEST_CORNER;\n                            return false;\n                        case COVER:\n                        case FARTHEST_CORNER:\n                            size = CSSRadialExtent.FARTHEST_CORNER;\n                            return false;\n                    }\n                } else if (isLength(token) || isLengthPercentage(token)) {\n                    if (!Array.isArray(size)) {\n                        size = [];\n                    }\n                    size.push(token);\n                    return false;\n                }\n\n                return acc;\n            }, isColorStop);\n        }\n\n        if (isColorStop) {\n            const colorStop = parseColorStop(context, arg);\n            stops.push(colorStop);\n        }\n    });\n\n    return {size, shape, stops, position, type: CSSImageType.RADIAL_GRADIENT};\n};\n", "import {CSSValue} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {Color} from './color';\nimport {linearGradient} from './functions/linear-gradient';\nimport {prefixLinearGradient} from './functions/-prefix-linear-gradient';\nimport {ITypeDescriptor} from '../ITypeDescriptor';\nimport {LengthPercentage} from './length-percentage';\nimport {webkitGradient} from './functions/-webkit-gradient';\nimport {radialGradient} from './functions/radial-gradient';\nimport {prefixRadialGradient} from './functions/-prefix-radial-gradient';\nimport {Context} from '../../core/context';\n\nexport const enum CSSImageType {\n    URL,\n    LINEAR_GRADIENT,\n    RADIAL_GRADIENT\n}\n\nexport const isLinearGradient = (background: ICSSImage): background is CSSLinearGradientImage => {\n    return background.type === CSSImageType.LINEAR_GRADIENT;\n};\n\nexport const isRadialGradient = (background: ICSSImage): background is CSSRadialGradientImage => {\n    return background.type === CSSImageType.RADIAL_GRADIENT;\n};\n\nexport interface UnprocessedGradientColorStop {\n    color: Color;\n    stop: LengthPercentage | null;\n}\n\nexport interface GradientColorStop {\n    color: Color;\n    stop: number;\n}\n\nexport interface ICSSImage {\n    type: CSSImageType;\n}\n\nexport interface CSSURLImage extends ICSSImage {\n    url: string;\n    type: CSSImageType.URL;\n}\n\n// interface ICSSGeneratedImage extends ICSSImage {}\n\nexport type GradientCorner = [LengthPercentage, LengthPercentage];\n\ninterface ICSSGradientImage extends ICSSImage {\n    stops: UnprocessedGradientColorStop[];\n}\n\nexport interface CSSLinearGradientImage extends ICSSGradientImage {\n    angle: number | GradientCorner;\n    type: CSSImageType.LINEAR_GRADIENT;\n}\n\nexport const enum CSSRadialShape {\n    CIRCLE,\n    ELLIPSE\n}\n\nexport const enum CSSRadialExtent {\n    CLOSEST_SIDE,\n    FARTHEST_SIDE,\n    CLOSEST_CORNER,\n    FARTHEST_CORNER\n}\n\nexport type CSSRadialSize = CSSRadialExtent | LengthPercentage[];\n\nexport interface CSSRadialGradientImage extends ICSSGradientImage {\n    type: CSSImageType.RADIAL_GRADIENT;\n    shape: CSSRadialShape;\n    size: CSSRadialSize;\n    position: LengthPercentage[];\n}\n\nexport const image: ITypeDescriptor<ICSSImage> = {\n    name: 'image',\n    parse: (context: Context, value: CSSValue): ICSSImage => {\n        if (value.type === TokenType.URL_TOKEN) {\n            const image: CSSURLImage = {url: value.value, type: CSSImageType.URL};\n            context.cache.addImage(value.value);\n            return image;\n        }\n\n        if (value.type === TokenType.FUNCTION) {\n            const imageFunction = SUPPORTED_IMAGE_FUNCTIONS[value.name];\n            if (typeof imageFunction === 'undefined') {\n                throw new Error(`Attempting to parse an unsupported image function \"${value.name}\"`);\n            }\n            return imageFunction(context, value.values);\n        }\n\n        throw new Error(`Unsupported image type ${value.type}`);\n    }\n};\n\nexport function isSupportedImage(value: CSSValue): boolean {\n    return (\n        !(value.type === TokenType.IDENT_TOKEN && value.value === 'none') &&\n        (value.type !== TokenType.FUNCTION || !!SUPPORTED_IMAGE_FUNCTIONS[value.name])\n    );\n}\n\nconst SUPPORTED_IMAGE_FUNCTIONS: Record<string, (context: Context, args: CSSValue[]) => ICSSImage> = {\n    'linear-gradient': linearGradient,\n    '-moz-linear-gradient': prefixLinearGradient,\n    '-ms-linear-gradient': prefixLinearGradient,\n    '-o-linear-gradient': prefixLinearGradient,\n    '-webkit-linear-gradient': prefixLinearGradient,\n    'radial-gradient': radialGradient,\n    '-moz-radial-gradient': prefixRadialGradient,\n    '-ms-radial-gradient': prefixRadialGradient,\n    '-o-radial-gradient': prefixRadialGradient,\n    '-webkit-radial-gradient': prefixRadialGradient,\n    '-webkit-gradient': webkitGradient\n};\n", "import {TokenType} from '../syntax/tokenizer';\nimport {ICSSImage, image, isSupportedImage} from '../types/image';\nimport {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, nonFunctionArgSeparator} from '../syntax/parser';\nimport {Context} from '../../core/context';\n\nexport const backgroundImage: IPropertyListDescriptor<ICSSImage[]> = {\n    name: 'background-image',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (context: Context, tokens: CSSValue[]) => {\n        if (tokens.length === 0) {\n            return [];\n        }\n\n        const first = tokens[0];\n\n        if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {\n            return [];\n        }\n\n        return tokens\n            .filter((value) => nonFunctionArgSeparator(value) && isSupportedImage(value))\n            .map((value) => image.parse(context, value));\n    }\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\n\nexport const enum BACKGROUND_ORIGIN {\n    BORDER_BOX = 0,\n    PADDING_BOX = 1,\n    CONTENT_BOX = 2\n}\n\nexport type BackgroundOrigin = BACKGROUND_ORIGIN[];\n\nexport const backgroundOrigin: IPropertyListDescriptor<BackgroundOrigin> = {\n    name: 'background-origin',\n    initialValue: 'border-box',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): BackgroundOrigin => {\n        return tokens.map((token) => {\n            if (isIdentToken(token)) {\n                switch (token.value) {\n                    case 'padding-box':\n                        return BACKGROUND_ORIGIN.PADDING_BOX;\n                    case 'content-box':\n                        return BACKGROUND_ORIGIN.CONTENT_BOX;\n                }\n            }\n            return BACKGROUND_ORIGIN.BORDER_BOX;\n        });\n    }\n};\n", "import {PropertyDescriptorParsingType, IPropertyListDescriptor} from '../IPropertyDescriptor';\nimport {CSSValue, parseFunctionArgs} from '../syntax/parser';\nimport {isLengthPercentage, LengthPercentageTuple, parseLengthPercentageTuple} from '../types/length-percentage';\nimport {Context} from '../../core/context';\nexport type BackgroundPosition = BackgroundImagePosition[];\n\nexport type BackgroundImagePosition = LengthPercentageTuple;\n\nexport const backgroundPosition: IPropertyListDescriptor<BackgroundPosition> = {\n    name: 'background-position',\n    initialValue: '0% 0%',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (_context: Context, tokens: CSSValue[]): BackgroundPosition => {\n        return parseFunctionArgs(tokens)\n            .map((values: CSSValue[]) => values.filter(isLengthPercentage))\n            .map(parseLengthPercentageTuple);\n    }\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken, parseFunctionArgs} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport type BackgroundRepeat = BACKGROUND_REPEAT[];\n\nexport const enum BACKGROUND_REPEAT {\n    REPEAT = 0,\n    NO_REPEAT = 1,\n    REPEAT_X = 2,\n    REPEAT_Y = 3\n}\n\nexport const backgroundRepeat: IPropertyListDescriptor<BackgroundRepeat> = {\n    name: 'background-repeat',\n    initialValue: 'repeat',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): BackgroundRepeat => {\n        return parseFunctionArgs(tokens)\n            .map((values) =>\n                values\n                    .filter(isIdentToken)\n                    .map((token) => token.value)\n                    .join(' ')\n            )\n            .map(parseBackgroundRepeat);\n    }\n};\n\nconst parseBackgroundRepeat = (value: string): BACKGROUND_REPEAT => {\n    switch (value) {\n        case 'no-repeat':\n            return BACKGROUND_REPEAT.NO_REPEAT;\n        case 'repeat-x':\n        case 'repeat no-repeat':\n            return BACKGROUND_REPEAT.REPEAT_X;\n        case 'repeat-y':\n        case 'no-repeat repeat':\n            return BACKGROUND_REPEAT.REPEAT_Y;\n        case 'repeat':\n        default:\n            return BACKGROUND_REPEAT.REPEAT;\n    }\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken, parseFunctionArgs} from '../syntax/parser';\nimport {isLengthPercentage, LengthPercentage} from '../types/length-percentage';\nimport {StringValueToken} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\n\nexport enum BACKGROUND_SIZE {\n    AUTO = 'auto',\n    CONTAIN = 'contain',\n    COVER = 'cover'\n}\n\nexport type BackgroundSizeInfo = LengthPercentage | StringValueToken;\nexport type BackgroundSize = BackgroundSizeInfo[][];\n\nexport const backgroundSize: IPropertyListDescriptor<BackgroundSize> = {\n    name: 'background-size',\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): BackgroundSize => {\n        return parseFunctionArgs(tokens).map((values) => values.filter(isBackgroundSizeInfoToken));\n    }\n};\n\nconst isBackgroundSizeInfoToken = (value: CSSValue): value is BackgroundSizeInfo =>\n    isIdentToken(value) || isLengthPercentage(value);\n", "import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nconst borderColorForSide = (side: string): IPropertyTypeValueDescriptor => ({\n    name: `border-${side}-color`,\n    initialValue: 'transparent',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n});\n\nexport const borderTopColor: IPropertyTypeValueDescriptor = borderColorForSide('top');\nexport const borderRightColor: IPropertyTypeValueDescriptor = borderColorForSide('right');\nexport const borderBottomColor: IPropertyTypeValueDescriptor = borderColorForSide('bottom');\nexport const borderLeftColor: IPropertyTypeValueDescriptor = borderColorForSide('left');\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {isLengthPercentage, LengthPercentageTuple, parseLengthPercentageTuple} from '../types/length-percentage';\nimport {Context} from '../../core/context';\nexport type BorderRadius = LengthPercentageTuple;\n\nconst borderRadiusForSide = (side: string): IPropertyListDescriptor<BorderRadius> => ({\n    name: `border-radius-${side}`,\n    initialValue: '0 0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): BorderRadius =>\n        parseLengthPercentageTuple(tokens.filter(isLengthPercentage))\n});\n\nexport const borderTopLeftRadius: IPropertyListDescriptor<BorderRadius> = borderRadiusForSide('top-left');\nexport const borderTopRightRadius: IPropertyListDescriptor<BorderRadius> = borderRadiusForSide('top-right');\nexport const borderBottomRightRadius: IPropertyListDescriptor<BorderRadius> = borderRadiusForSide('bottom-right');\nexport const borderBottomLeftRadius: IPropertyListDescriptor<BorderRadius> = borderRadiusForSide('bottom-left');\n", "import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum BORDER_STYLE {\n    NONE = 0,\n    SOLID = 1,\n    DASHED = 2,\n    DOTTED = 3,\n    DOUBLE = 4\n}\n\nconst borderStyleForSide = (side: string): IPropertyIdentValueDescriptor<BORDER_STYLE> => ({\n    name: `border-${side}-style`,\n    initialValue: 'solid',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, style: string): BORDER_STYLE => {\n        switch (style) {\n            case 'none':\n                return BORDER_STYLE.NONE;\n            case 'dashed':\n                return BORDER_STYLE.DASHED;\n            case 'dotted':\n                return BORDER_STYLE.DOTTED;\n            case 'double':\n                return BORDER_STYLE.DOUBLE;\n        }\n        return BORDER_STYLE.SOLID;\n    }\n});\n\nexport const borderTopStyle: IPropertyIdentValueDescriptor<BORDER_STYLE> = borderStyleForSide('top');\nexport const borderRightStyle: IPropertyIdentValueDescriptor<BORDER_STYLE> = borderStyleForSide('right');\nexport const borderBottomStyle: IPropertyIdentValueDescriptor<BORDER_STYLE> = borderStyleForSide('bottom');\nexport const borderLeftStyle: IPropertyIdentValueDescriptor<BORDER_STYLE> = borderStyleForSide('left');\n", "import {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isDimensionToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nconst borderWidthForSide = (side: string): IPropertyValueDescriptor<number> => ({\n    name: `border-${side}-width`,\n    initialValue: '0',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (_context: Context, token: CSSValue): number => {\n        if (isDimensionToken(token)) {\n            return token.number;\n        }\n        return 0;\n    }\n});\n\nexport const borderTopWidth: IPropertyValueDescriptor<number> = borderWidthForSide('top');\nexport const borderRightWidth: IPropertyValueDescriptor<number> = borderWidthForSide('right');\nexport const borderBottomWidth: IPropertyValueDescriptor<number> = borderWidthForSide('bottom');\nexport const borderLeftWidth: IPropertyValueDescriptor<number> = borderWidthForSide('left');\n", "import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\n\nexport const color: IPropertyTypeValueDescriptor = {\n    name: `color`,\n    initialValue: 'transparent',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n};\n", "import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\n\nexport const enum DIRECTION {\n    LTR = 0,\n    RTL = 1\n}\n\nexport const direction: IPropertyIdentValueDescriptor<DIRECTION> = {\n    name: 'direction',\n    initialValue: 'ltr',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, direction: string) => {\n        switch (direction) {\n            case 'rtl':\n                return DIRECTION.RTL;\n            case 'ltr':\n            default:\n                return DIRECTION.LTR;\n        }\n    }\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const enum DISPLAY {\n    NONE = 0,\n    BLOCK = 1 << 1,\n    INLINE = 1 << 2,\n    RUN_IN = 1 << 3,\n    FLOW = 1 << 4,\n    FLOW_ROOT = 1 << 5,\n    TABLE = 1 << 6,\n    FLEX = 1 << 7,\n    GRID = 1 << 8,\n    RUBY = 1 << 9,\n    SUBGRID = 1 << 10,\n    LIST_ITEM = 1 << 11,\n    TABLE_ROW_GROUP = 1 << 12,\n    TABLE_HEADER_GROUP = 1 << 13,\n    TABLE_FOOTER_GROUP = 1 << 14,\n    TABLE_ROW = 1 << 15,\n    TABLE_CELL = 1 << 16,\n    TABLE_COLUMN_GROUP = 1 << 17,\n    TABLE_COLUMN = 1 << 18,\n    TABLE_CAPTION = 1 << 19,\n    RUBY_BASE = 1 << 20,\n    RUBY_TEXT = 1 << 21,\n    RUBY_BASE_CONTAINER = 1 << 22,\n    RUBY_TEXT_CONTAINER = 1 << 23,\n    CONTENTS = 1 << 24,\n    INLINE_BLOCK = 1 << 25,\n    INLINE_LIST_ITEM = 1 << 26,\n    INLINE_TABLE = 1 << 27,\n    INLINE_FLEX = 1 << 28,\n    INLINE_GRID = 1 << 29\n}\n\nexport type Display = number;\n\nexport const display: IPropertyListDescriptor<Display> = {\n    name: 'display',\n    initialValue: 'inline-block',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): Display => {\n        return tokens.filter(isIdentToken).reduce((bit, token) => {\n            return bit | parseDisplayValue(token.value);\n        }, DISPLAY.NONE);\n    }\n};\n\nconst parseDisplayValue = (display: string): Display => {\n    switch (display) {\n        case 'block':\n        case '-webkit-box':\n            return DISPLAY.BLOCK;\n        case 'inline':\n            return DISPLAY.INLINE;\n        case 'run-in':\n            return DISPLAY.RUN_IN;\n        case 'flow':\n            return DISPLAY.FLOW;\n        case 'flow-root':\n            return DISPLAY.FLOW_ROOT;\n        case 'table':\n            return DISPLAY.TABLE;\n        case 'flex':\n        case '-webkit-flex':\n            return DISPLAY.FLEX;\n        case 'grid':\n        case '-ms-grid':\n            return DISPLAY.GRID;\n        case 'ruby':\n            return DISPLAY.RUBY;\n        case 'subgrid':\n            return DISPLAY.SUBGRID;\n        case 'list-item':\n            return DISPLAY.LIST_ITEM;\n        case 'table-row-group':\n            return DISPLAY.TABLE_ROW_GROUP;\n        case 'table-header-group':\n            return DISPLAY.TABLE_HEADER_GROUP;\n        case 'table-footer-group':\n            return DISPLAY.TABLE_FOOTER_GROUP;\n        case 'table-row':\n            return DISPLAY.TABLE_ROW;\n        case 'table-cell':\n            return DISPLAY.TABLE_CELL;\n        case 'table-column-group':\n            return DISPLAY.TABLE_COLUMN_GROUP;\n        case 'table-column':\n            return DISPLAY.TABLE_COLUMN;\n        case 'table-caption':\n            return DISPLAY.TABLE_CAPTION;\n        case 'ruby-base':\n            return DISPLAY.RUBY_BASE;\n        case 'ruby-text':\n            return DISPLAY.RUBY_TEXT;\n        case 'ruby-base-container':\n            return DISPLAY.RUBY_BASE_CONTAINER;\n        case 'ruby-text-container':\n            return DISPLAY.RUBY_TEXT_CONTAINER;\n        case 'contents':\n            return DISPLAY.CONTENTS;\n        case 'inline-block':\n            return DISPLAY.INLINE_BLOCK;\n        case 'inline-list-item':\n            return DISPLAY.INLINE_LIST_ITEM;\n        case 'inline-table':\n            return DISPLAY.INLINE_TABLE;\n        case 'inline-flex':\n            return DISPLAY.INLINE_FLEX;\n        case 'inline-grid':\n            return DISPLAY.INLINE_GRID;\n    }\n\n    return DISPLAY.NONE;\n};\n", "import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum FLOAT {\n    NONE = 0,\n    LEFT = 1,\n    RIGHT = 2,\n    INLINE_START = 3,\n    INLINE_END = 4\n}\n\nexport const float: IPropertyIdentValueDescriptor<FLOAT> = {\n    name: 'float',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, float: string) => {\n        switch (float) {\n            case 'left':\n                return FLOAT.LEFT;\n            case 'right':\n                return FLOAT.RIGHT;\n            case 'inline-start':\n                return FLOAT.INLINE_START;\n            case 'inline-end':\n                return FLOAT.INLINE_END;\n        }\n        return FLOAT.NONE;\n    }\n};\n", "import {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\nexport const letterSpacing: IPropertyValueDescriptor<number> = {\n    name: 'letter-spacing',\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.VALUE,\n    parse: (_context: Context, token: CSSValue) => {\n        if (token.type === TokenType.IDENT_TOKEN && token.value === 'normal') {\n            return 0;\n        }\n\n        if (token.type === TokenType.NUMBER_TOKEN) {\n            return token.number;\n        }\n\n        if (token.type === TokenType.DIMENSION_TOKEN) {\n            return token.number;\n        }\n\n        return 0;\n    }\n};\n", "import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport enum LINE_BREAK {\n    NORMAL = 'normal',\n    STRICT = 'strict'\n}\n\nexport const lineBreak: IPropertyIdentValueDescriptor<LINE_BREAK> = {\n    name: 'line-break',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, lineBreak: string): LINE_BREAK => {\n        switch (lineBreak) {\n            case 'strict':\n                return LINE_BREAK.STRICT;\n            case 'normal':\n            default:\n                return LINE_BREAK.NORMAL;\n        }\n    }\n};\n", "import {IPropertyTokenValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {getAbsoluteValue, isLengthPercentage} from '../types/length-percentage';\nexport const lineHeight: IPropertyTokenValueDescriptor = {\n    name: 'line-height',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TOKEN_VALUE\n};\n\nexport const computeLineHeight = (token: CSSValue, fontSize: number): number => {\n    if (isIdentToken(token) && token.value === 'normal') {\n        return 1.2 * fontSize;\n    } else if (token.type === TokenType.NUMBER_TOKEN) {\n        return fontSize * token.number;\n    } else if (isLengthPercentage(token)) {\n        return getAbsoluteValue(token, fontSize);\n    }\n\n    return fontSize;\n};\n", "import {TokenType} from '../syntax/tokenizer';\nimport {ICSSImage, image} from '../types/image';\nimport {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {Context} from '../../core/context';\n\nexport const listStyleImage: IPropertyValueDescriptor<ICSSImage | null> = {\n    name: 'list-style-image',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (context: Context, token: CSSValue) => {\n        if (token.type === TokenType.IDENT_TOKEN && token.value === 'none') {\n            return null;\n        }\n\n        return image.parse(context, token);\n    }\n};\n", "import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum LIST_STYLE_POSITION {\n    INSIDE = 0,\n    OUTSIDE = 1\n}\n\nexport const listStylePosition: IPropertyIdentValueDescriptor<LIST_STYLE_POSITION> = {\n    name: 'list-style-position',\n    initialValue: 'outside',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, position: string) => {\n        switch (position) {\n            case 'inside':\n                return LIST_STYLE_POSITION.INSIDE;\n            case 'outside':\n            default:\n                return LIST_STYLE_POSITION.OUTSIDE;\n        }\n    }\n};\n", "import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum LIST_STYLE_TYPE {\n    NONE = -1,\n    DISC = 0,\n    CIRCLE = 1,\n    SQUARE = 2,\n    DECIMAL = 3,\n    CJK_DECIMAL = 4,\n    DECIMAL_LEADING_ZERO = 5,\n    LOWER_ROMAN = 6,\n    UPPER_ROMAN = 7,\n    LOWER_GREEK = 8,\n    LOWER_ALPHA = 9,\n    UPPER_ALPHA = 10,\n    ARABIC_INDIC = 11,\n    ARMENIAN = 12,\n    BENGALI = 13,\n    CAMBODIAN = 14,\n    CJK_EARTHLY_BRANCH = 15,\n    CJK_HEAVENLY_STEM = 16,\n    CJK_IDEOGRAPHIC = 17,\n    DEVANAGARI = 18,\n    ETHIOPIC_NUMERIC = 19,\n    GEORGIAN = 20,\n    GUJARATI = 21,\n    GURMUKHI = 22,\n    HEBREW = 22,\n    HIRAGANA = 23,\n    HIRAGANA_IROHA = 24,\n    JAPANESE_FORMAL = 25,\n    JAPANESE_INFORMAL = 26,\n    KANNADA = 27,\n    KATAKANA = 28,\n    KATAKANA_IROHA = 29,\n    KHMER = 30,\n    KOREAN_HANGUL_FORMAL = 31,\n    KOREAN_HANJA_FORMAL = 32,\n    KOREAN_HANJA_INFORMAL = 33,\n    LAO = 34,\n    LOWER_ARMENIAN = 35,\n    MALAYALAM = 36,\n    MONGOLIAN = 37,\n    MYANMAR = 38,\n    ORIYA = 39,\n    PERSIAN = 40,\n    SIMP_CHINESE_FORMAL = 41,\n    SIMP_CHINESE_INFORMAL = 42,\n    TAMIL = 43,\n    TELUGU = 44,\n    THAI = 45,\n    TIBETAN = 46,\n    TRAD_CHINESE_FORMAL = 47,\n    TRAD_CHINESE_INFORMAL = 48,\n    UPPER_ARMENIAN = 49,\n    DISCLOSURE_OPEN = 50,\n    DISCLOSURE_CLOSED = 51\n}\n\nexport const listStyleType: IPropertyIdentValueDescriptor<LIST_STYLE_TYPE> = {\n    name: 'list-style-type',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, type: string) => {\n        switch (type) {\n            case 'disc':\n                return LIST_STYLE_TYPE.DISC;\n            case 'circle':\n                return LIST_STYLE_TYPE.CIRCLE;\n            case 'square':\n                return LIST_STYLE_TYPE.SQUARE;\n            case 'decimal':\n                return LIST_STYLE_TYPE.DECIMAL;\n            case 'cjk-decimal':\n                return LIST_STYLE_TYPE.CJK_DECIMAL;\n            case 'decimal-leading-zero':\n                return LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO;\n            case 'lower-roman':\n                return LIST_STYLE_TYPE.LOWER_ROMAN;\n            case 'upper-roman':\n                return LIST_STYLE_TYPE.UPPER_ROMAN;\n            case 'lower-greek':\n                return LIST_STYLE_TYPE.LOWER_GREEK;\n            case 'lower-alpha':\n                return LIST_STYLE_TYPE.LOWER_ALPHA;\n            case 'upper-alpha':\n                return LIST_STYLE_TYPE.UPPER_ALPHA;\n            case 'arabic-indic':\n                return LIST_STYLE_TYPE.ARABIC_INDIC;\n            case 'armenian':\n                return LIST_STYLE_TYPE.ARMENIAN;\n            case 'bengali':\n                return LIST_STYLE_TYPE.BENGALI;\n            case 'cambodian':\n                return LIST_STYLE_TYPE.CAMBODIAN;\n            case 'cjk-earthly-branch':\n                return LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH;\n            case 'cjk-heavenly-stem':\n                return LIST_STYLE_TYPE.CJK_HEAVENLY_STEM;\n            case 'cjk-ideographic':\n                return LIST_STYLE_TYPE.CJK_IDEOGRAPHIC;\n            case 'devanagari':\n                return LIST_STYLE_TYPE.DEVANAGARI;\n            case 'ethiopic-numeric':\n                return LIST_STYLE_TYPE.ETHIOPIC_NUMERIC;\n            case 'georgian':\n                return LIST_STYLE_TYPE.GEORGIAN;\n            case 'gujarati':\n                return LIST_STYLE_TYPE.GUJARATI;\n            case 'gurmukhi':\n                return LIST_STYLE_TYPE.GURMUKHI;\n            case 'hebrew':\n                return LIST_STYLE_TYPE.HEBREW;\n            case 'hiragana':\n                return LIST_STYLE_TYPE.HIRAGANA;\n            case 'hiragana-iroha':\n                return LIST_STYLE_TYPE.HIRAGANA_IROHA;\n            case 'japanese-formal':\n                return LIST_STYLE_TYPE.JAPANESE_FORMAL;\n            case 'japanese-informal':\n                return LIST_STYLE_TYPE.JAPANESE_INFORMAL;\n            case 'kannada':\n                return LIST_STYLE_TYPE.KANNADA;\n            case 'katakana':\n                return LIST_STYLE_TYPE.KATAKANA;\n            case 'katakana-iroha':\n                return LIST_STYLE_TYPE.KATAKANA_IROHA;\n            case 'khmer':\n                return LIST_STYLE_TYPE.KHMER;\n            case 'korean-hangul-formal':\n                return LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL;\n            case 'korean-hanja-formal':\n                return LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL;\n            case 'korean-hanja-informal':\n                return LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL;\n            case 'lao':\n                return LIST_STYLE_TYPE.LAO;\n            case 'lower-armenian':\n                return LIST_STYLE_TYPE.LOWER_ARMENIAN;\n            case 'malayalam':\n                return LIST_STYLE_TYPE.MALAYALAM;\n            case 'mongolian':\n                return LIST_STYLE_TYPE.MONGOLIAN;\n            case 'myanmar':\n                return LIST_STYLE_TYPE.MYANMAR;\n            case 'oriya':\n                return LIST_STYLE_TYPE.ORIYA;\n            case 'persian':\n                return LIST_STYLE_TYPE.PERSIAN;\n            case 'simp-chinese-formal':\n                return LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL;\n            case 'simp-chinese-informal':\n                return LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL;\n            case 'tamil':\n                return LIST_STYLE_TYPE.TAMIL;\n            case 'telugu':\n                return LIST_STYLE_TYPE.TELUGU;\n            case 'thai':\n                return LIST_STYLE_TYPE.THAI;\n            case 'tibetan':\n                return LIST_STYLE_TYPE.TIBETAN;\n            case 'trad-chinese-formal':\n                return LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL;\n            case 'trad-chinese-informal':\n                return LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL;\n            case 'upper-armenian':\n                return LIST_STYLE_TYPE.UPPER_ARMENIAN;\n            case 'disclosure-open':\n                return LIST_STYLE_TYPE.DISCLOSURE_OPEN;\n            case 'disclosure-closed':\n                return LIST_STYLE_TYPE.DISCLOSURE_CLOSED;\n            case 'none':\n            default:\n                return LIST_STYLE_TYPE.NONE;\n        }\n    }\n};\n", "import {IPropertyTokenValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\n\nconst marginForSide = (side: string): IPropertyTokenValueDescriptor => ({\n    name: `margin-${side}`,\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TOKEN_VALUE\n});\n\nexport const marginTop: IPropertyTokenValueDescriptor = marginForSide('top');\nexport const marginRight: IPropertyTokenValueDescriptor = marginForSide('right');\nexport const marginBottom: IPropertyTokenValueDescriptor = marginForSide('bottom');\nexport const marginLeft: IPropertyTokenValueDescriptor = marginForSide('left');\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const enum OVERFLOW {\n    VISIBLE = 0,\n    HIDDEN = 1,\n    SCROLL = 2,\n    CLIP = 3,\n    AUTO = 4\n}\n\nexport const overflow: IPropertyListDescriptor<OVERFLOW[]> = {\n    name: 'overflow',\n    initialValue: 'visible',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): OVERFLOW[] => {\n        return tokens.filter(isIdentToken).map((overflow) => {\n            switch (overflow.value) {\n                case 'hidden':\n                    return OVERFLOW.HIDDEN;\n                case 'scroll':\n                    return OVERFLOW.SCROLL;\n                case 'clip':\n                    return OVERFLOW.CLIP;\n                case 'auto':\n                    return OVERFLOW.AUTO;\n                case 'visible':\n                default:\n                    return OVERFLOW.VISIBLE;\n            }\n        });\n    }\n};\n", "import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum OVERFLOW_WRAP {\n    NORMAL = 'normal',\n    BREAK_WORD = 'break-word'\n}\n\nexport const overflowWrap: IPropertyIdentValueDescriptor<OVERFLOW_WRAP> = {\n    name: 'overflow-wrap',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, overflow: string) => {\n        switch (overflow) {\n            case 'break-word':\n                return OVERFLOW_WRAP.BREAK_WORD;\n            case 'normal':\n            default:\n                return OVERFLOW_WRAP.NORMAL;\n        }\n    }\n};\n", "import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\n\nconst paddingForSide = (side: string): IPropertyTypeValueDescriptor => ({\n    name: `padding-${side}`,\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'length-percentage'\n});\n\nexport const paddingTop: IPropertyTypeValueDescriptor = paddingForSide('top');\nexport const paddingRight: IPropertyTypeValueDescriptor = paddingForSide('right');\nexport const paddingBottom: IPropertyTypeValueDescriptor = paddingForSide('bottom');\nexport const paddingLeft: IPropertyTypeValueDescriptor = paddingForSide('left');\n", "import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum TEXT_ALIGN {\n    LEFT = 0,\n    CENTER = 1,\n    RIGHT = 2\n}\n\nexport const textAlign: IPropertyIdentValueDescriptor<TEXT_ALIGN> = {\n    name: 'text-align',\n    initialValue: 'left',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, textAlign: string) => {\n        switch (textAlign) {\n            case 'right':\n                return TEXT_ALIGN.RIGHT;\n            case 'center':\n            case 'justify':\n                return TEXT_ALIGN.CENTER;\n            case 'left':\n            default:\n                return TEXT_ALIGN.LEFT;\n        }\n    }\n};\n", "import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum POSITION {\n    STATIC = 0,\n    RELATIVE = 1,\n    ABSOLUTE = 2,\n    FIXED = 3,\n    STICKY = 4\n}\n\nexport const position: IPropertyIdentValueDescriptor<POSITION> = {\n    name: 'position',\n    initialValue: 'static',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, position: string) => {\n        switch (position) {\n            case 'relative':\n                return POSITION.RELATIVE;\n            case 'absolute':\n                return POSITION.ABSOLUTE;\n            case 'fixed':\n                return POSITION.FIXED;\n            case 'sticky':\n                return POSITION.STICKY;\n        }\n\n        return POSITION.STATIC;\n    }\n};\n", "import {PropertyDescriptorParsingType, IPropertyListDescriptor} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentWithValue, parseFunctionArgs} from '../syntax/parser';\nimport {ZERO_LENGTH} from '../types/length-percentage';\nimport {color, Color, COLORS} from '../types/color';\nimport {isLength, Length} from '../types/length';\nimport {Context} from '../../core/context';\n\nexport type TextShadow = TextShadowItem[];\ninterface TextShadowItem {\n    color: Color;\n    offsetX: Length;\n    offsetY: Length;\n    blur: Length;\n}\n\nexport const textShadow: IPropertyListDescriptor<TextShadow> = {\n    name: 'text-shadow',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (context: Context, tokens: CSSValue[]): TextShadow => {\n        if (tokens.length === 1 && isIdentWithValue(tokens[0], 'none')) {\n            return [];\n        }\n\n        return parseFunctionArgs(tokens).map((values: CSSValue[]) => {\n            const shadow: TextShadowItem = {\n                color: COLORS.TRANSPARENT,\n                offsetX: ZERO_LENGTH,\n                offsetY: ZERO_LENGTH,\n                blur: ZERO_LENGTH\n            };\n            let c = 0;\n            for (let i = 0; i < values.length; i++) {\n                const token = values[i];\n                if (isLength(token)) {\n                    if (c === 0) {\n                        shadow.offsetX = token;\n                    } else if (c === 1) {\n                        shadow.offsetY = token;\n                    } else {\n                        shadow.blur = token;\n                    }\n                    c++;\n                } else {\n                    shadow.color = color.parse(context, token);\n                }\n            }\n            return shadow;\n        });\n    }\n};\n", "import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum TEXT_TRANSFORM {\n    NONE = 0,\n    LOWERCASE = 1,\n    UPPERCASE = 2,\n    CAPITALIZE = 3\n}\n\nexport const textTransform: IPropertyIdentValueDescriptor<TEXT_TRANSFORM> = {\n    name: 'text-transform',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, textTransform: string) => {\n        switch (textTransform) {\n            case 'uppercase':\n                return TEXT_TRANSFORM.UPPERCASE;\n            case 'lowercase':\n                return TEXT_TRANSFORM.LOWERCASE;\n            case 'capitalize':\n                return TEXT_TRANSFORM.CAPITALIZE;\n        }\n\n        return TEXT_TRANSFORM.NONE;\n    }\n};\n", "import {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {NumberValueToken, TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\nexport type Matrix = [number, number, number, number, number, number];\nexport type Transform = Matrix | null;\n\nexport const transform: IPropertyValueDescriptor<Transform> = {\n    name: 'transform',\n    initialValue: 'none',\n    prefix: true,\n    type: PropertyDescriptorParsingType.VALUE,\n    parse: (_context: Context, token: CSSValue) => {\n        if (token.type === TokenType.IDENT_TOKEN && token.value === 'none') {\n            return null;\n        }\n\n        if (token.type === TokenType.FUNCTION) {\n            const transformFunction = SUPPORTED_TRANSFORM_FUNCTIONS[token.name];\n            if (typeof transformFunction === 'undefined') {\n                throw new Error(`Attempting to parse an unsupported transform function \"${token.name}\"`);\n            }\n            return transformFunction(token.values);\n        }\n\n        return null;\n    }\n};\n\nconst matrix = (args: CSSValue[]): Transform => {\n    const values = args.filter((arg) => arg.type === TokenType.NUMBER_TOKEN).map((arg: NumberValueToken) => arg.number);\n\n    return values.length === 6 ? (values as Matrix) : null;\n};\n\n// doesn't support 3D transforms at the moment\nconst matrix3d = (args: CSSValue[]): Transform => {\n    const values = args.filter((arg) => arg.type === TokenType.NUMBER_TOKEN).map((arg: NumberValueToken) => arg.number);\n\n    const [a1, b1, {}, {}, a2, b2, {}, {}, {}, {}, {}, {}, a4, b4, {}, {}] = values;\n\n    return values.length === 16 ? [a1, b1, a2, b2, a4, b4] : null;\n};\n\nconst SUPPORTED_TRANSFORM_FUNCTIONS: {\n    [key: string]: (args: CSSValue[]) => Transform;\n} = {\n    matrix: matrix,\n    matrix3d: matrix3d\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {isLengthPercentage, LengthPercentage} from '../types/length-percentage';\nimport {FLAG_INTEGER, TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\nexport type TransformOrigin = [LengthPercentage, LengthPercentage];\n\nconst DEFAULT_VALUE: LengthPercentage = {\n    type: TokenType.PERCENTAGE_TOKEN,\n    number: 50,\n    flags: FLAG_INTEGER\n};\nconst DEFAULT: TransformOrigin = [DEFAULT_VALUE, DEFAULT_VALUE];\n\nexport const transformOrigin: IPropertyListDescriptor<TransformOrigin> = {\n    name: 'transform-origin',\n    initialValue: '50% 50%',\n    prefix: true,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]) => {\n        const origins: LengthPercentage[] = tokens.filter(isLengthPercentage);\n\n        if (origins.length !== 2) {\n            return DEFAULT;\n        }\n\n        return [origins[0], origins[1]];\n    }\n};\n", "import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum VISIBILITY {\n    VISIBLE = 0,\n    HIDDEN = 1,\n    COLLAPSE = 2\n}\n\nexport const visibility: IPropertyIdentValueDescriptor<VISIBILITY> = {\n    name: 'visible',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, visibility: string) => {\n        switch (visibility) {\n            case 'hidden':\n                return VISIBILITY.HIDDEN;\n            case 'collapse':\n                return VISIBILITY.COLLAPSE;\n            case 'visible':\n            default:\n                return VISIBILITY.VISIBLE;\n        }\n    }\n};\n", "import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport enum WORD_BREAK {\n    NORMAL = 'normal',\n    BREAK_ALL = 'break-all',\n    KEEP_ALL = 'keep-all'\n}\n\nexport const wordBreak: IPropertyIdentValueDescriptor<WORD_BREAK> = {\n    name: 'word-break',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, wordBreak: string): WORD_BREAK => {\n        switch (wordBreak) {\n            case 'break-all':\n                return WORD_BREAK.BREAK_ALL;\n            case 'keep-all':\n                return WORD_BREAK.KEEP_ALL;\n            case 'normal':\n            default:\n                return WORD_BREAK.NORMAL;\n        }\n    }\n};\n", "import {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isNumberToken} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\n\ninterface zIndex {\n    order: number;\n    auto: boolean;\n}\n\nexport const zIndex: IPropertyValueDescriptor<zIndex> = {\n    name: 'z-index',\n    initialValue: 'auto',\n    prefix: false,\n    type: PropertyDescriptorParsingType.VALUE,\n    parse: (_context: Context, token: CSSValue): zIndex => {\n        if (token.type === TokenType.IDENT_TOKEN) {\n            return {auto: true, order: 0};\n        }\n\n        if (isNumberToken(token)) {\n            return {auto: false, order: token.number};\n        }\n\n        throw new Error(`Invalid z-index number parsed`);\n    }\n};\n", "import {CSSValue} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {ITypeDescriptor} from '../ITypeDescriptor';\nimport {Context} from '../../core/context';\n\nexport const time: ITypeDescriptor<number> = {\n    name: 'time',\n    parse: (_context: Context, value: CSSValue): number => {\n        if (value.type === TokenType.DIMENSION_TOKEN) {\n            switch (value.unit.toLowerCase()) {\n                case 's':\n                    return 1000 * value.number;\n                case 'ms':\n                    return value.number;\n            }\n        }\n\n        throw new Error(`Unsupported time type`);\n    }\n};\n", "import {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isNumberToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const opacity: IPropertyValueDescriptor<number> = {\n    name: 'opacity',\n    initialValue: '1',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (_context: Context, token: CSSValue): number => {\n        if (isNumberToken(token)) {\n            return token.number;\n        }\n        return 1;\n    }\n};\n", "import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\n\nexport const textDecorationColor: IPropertyTypeValueDescriptor = {\n    name: `text-decoration-color`,\n    initialValue: 'transparent',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\n\nexport const enum TEXT_DECORATION_LINE {\n    NONE = 0,\n    UNDERLINE = 1,\n    OVERLINE = 2,\n    LINE_THROUGH = 3,\n    BLINK = 4\n}\n\nexport type TextDecorationLine = TEXT_DECORATION_LINE[];\n\nexport const textDecorationLine: IPropertyListDescriptor<TextDecorationLine> = {\n    name: 'text-decoration-line',\n    initialValue: 'none',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): TextDecorationLine => {\n        return tokens\n            .filter(isIdentToken)\n            .map((token) => {\n                switch (token.value) {\n                    case 'underline':\n                        return TEXT_DECORATION_LINE.UNDERLINE;\n                    case 'overline':\n                        return TEXT_DECORATION_LINE.OVERLINE;\n                    case 'line-through':\n                        return TEXT_DECORATION_LINE.LINE_THROUGH;\n                    case 'none':\n                        return TEXT_DECORATION_LINE.BLINK;\n                }\n                return TEXT_DECORATION_LINE.NONE;\n            })\n            .filter((line) => line !== TEXT_DECORATION_LINE.NONE);\n    }\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\n\nexport type FONT_FAMILY = string;\n\nexport type FontFamily = FONT_FAMILY[];\n\nexport const fontFamily: IPropertyListDescriptor<FontFamily> = {\n    name: `font-family`,\n    initialValue: '',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]) => {\n        const accumulator: string[] = [];\n        const results: string[] = [];\n        tokens.forEach((token) => {\n            switch (token.type) {\n                case TokenType.IDENT_TOKEN:\n                case TokenType.STRING_TOKEN:\n                    accumulator.push(token.value);\n                    break;\n                case TokenType.NUMBER_TOKEN:\n                    accumulator.push(token.number.toString());\n                    break;\n                case TokenType.COMMA_TOKEN:\n                    results.push(accumulator.join(' '));\n                    accumulator.length = 0;\n                    break;\n            }\n        });\n        if (accumulator.length) {\n            results.push(accumulator.join(' '));\n        }\n        return results.map((result) => (result.indexOf(' ') === -1 ? result : `'${result}'`));\n    }\n};\n", "import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\n\nexport const fontSize: IPropertyTypeValueDescriptor = {\n    name: `font-size`,\n    initialValue: '0',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'length'\n};\n", "import {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken, isNumberToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const fontWeight: IPropertyValueDescriptor<number> = {\n    name: 'font-weight',\n    initialValue: 'normal',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (_context: Context, token: CSSValue): number => {\n        if (isNumberToken(token)) {\n            return token.number;\n        }\n\n        if (isIdentToken(token)) {\n            switch (token.value) {\n                case 'bold':\n                    return 700;\n                case 'normal':\n                default:\n                    return 400;\n            }\n        }\n\n        return 400;\n    }\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const fontVariant: IPropertyListDescriptor<string[]> = {\n    name: 'font-variant',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (_context: Context, tokens: CSSValue[]): string[] => {\n        return tokens.filter(isIdentToken).map((token) => token.value);\n    }\n};\n", "import {IPropertyIdentValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const enum FONT_STYLE {\n    NORMAL = 'normal',\n    ITALIC = 'italic',\n    OBLIQUE = 'oblique'\n}\n\nexport const fontStyle: IPropertyIdentValueDescriptor<FONT_STYLE> = {\n    name: 'font-style',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.IDENT_VALUE,\n    parse: (_context: Context, overflow: string) => {\n        switch (overflow) {\n            case 'oblique':\n                return FONT_STYLE.OBLIQUE;\n            case 'italic':\n                return FONT_STYLE.ITALIC;\n            case 'normal':\n            default:\n                return FONT_STYLE.NORMAL;\n        }\n    }\n};\n", "export const contains = (bit: number, value: number): boolean => (bit & value) !== 0;\n", "import {TokenType} from '../syntax/tokenizer';\nimport {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue} from '../syntax/parser';\nimport {Context} from '../../core/context';\n\nexport type Content = CSSValue[];\n\nexport const content: IPropertyListDescriptor<Content> = {\n    name: 'content',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (_context: Context, tokens: CSSValue[]) => {\n        if (tokens.length === 0) {\n            return [];\n        }\n\n        const first = tokens[0];\n\n        if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {\n            return [];\n        }\n\n        return tokens;\n    }\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isNumberToken, nonWhiteSpace} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\n\nexport interface COUNTER_INCREMENT {\n    counter: string;\n    increment: number;\n}\n\nexport type CounterIncrement = COUNTER_INCREMENT[] | null;\n\nexport const counterIncrement: IPropertyListDescriptor<CounterIncrement> = {\n    name: 'counter-increment',\n    initialValue: 'none',\n    prefix: true,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]) => {\n        if (tokens.length === 0) {\n            return null;\n        }\n\n        const first = tokens[0];\n\n        if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {\n            return null;\n        }\n\n        const increments = [];\n        const filtered = tokens.filter(nonWhiteSpace);\n\n        for (let i = 0; i < filtered.length; i++) {\n            const counter = filtered[i];\n            const next = filtered[i + 1];\n            if (counter.type === TokenType.IDENT_TOKEN) {\n                const increment = next && isNumberToken(next) ? next.number : 1;\n                increments.push({counter: counter.value, increment});\n            }\n        }\n\n        return increments;\n    }\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken, isNumberToken, nonWhiteSpace} from '../syntax/parser';\nimport {Context} from '../../core/context';\n\nexport interface COUNTER_RESET {\n    counter: string;\n    reset: number;\n}\n\nexport type CounterReset = COUNTER_RESET[];\n\nexport const counterReset: IPropertyListDescriptor<CounterReset> = {\n    name: 'counter-reset',\n    initialValue: 'none',\n    prefix: true,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]) => {\n        if (tokens.length === 0) {\n            return [];\n        }\n\n        const resets = [];\n        const filtered = tokens.filter(nonWhiteSpace);\n\n        for (let i = 0; i < filtered.length; i++) {\n            const counter = filtered[i];\n            const next = filtered[i + 1];\n            if (isIdentToken(counter) && counter.value !== 'none') {\n                const reset = next && isNumberToken(next) ? next.number : 0;\n                resets.push({counter: counter.value, reset});\n            }\n        }\n\n        return resets;\n    }\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nimport {CSSValue, isDimensionToken} from '../syntax/parser';\nimport {time} from '../types/time';\n\nexport const duration: IPropertyListDescriptor<number[]> = {\n    name: 'duration',\n    initialValue: '0s',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (context: Context, tokens: CSSValue[]) => {\n        return tokens.filter(isDimensionToken).map((token) => time.parse(context, token));\n    }\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isStringToken} from '../syntax/parser';\nimport {TokenType} from '../syntax/tokenizer';\nimport {Context} from '../../core/context';\n\nexport interface QUOTE {\n    open: string;\n    close: string;\n}\n\nexport type Quotes = QUOTE[] | null;\n\nexport const quotes: IPropertyListDescriptor<Quotes> = {\n    name: 'quotes',\n    initialValue: 'none',\n    prefix: true,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]) => {\n        if (tokens.length === 0) {\n            return null;\n        }\n\n        const first = tokens[0];\n\n        if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {\n            return null;\n        }\n\n        const quotes = [];\n        const filtered = tokens.filter(isStringToken);\n\n        if (filtered.length % 2 !== 0) {\n            return null;\n        }\n\n        for (let i = 0; i < filtered.length; i += 2) {\n            const open = filtered[i].value;\n            const close = filtered[i + 1].value;\n            quotes.push({open, close});\n        }\n\n        return quotes;\n    }\n};\n\nexport const getQuote = (quotes: Quotes, depth: number, open: boolean): string => {\n    if (!quotes) {\n        return '';\n    }\n\n    const quote = quotes[Math.min(depth, quotes.length - 1)];\n    if (!quote) {\n        return '';\n    }\n\n    return open ? quote.open : quote.close;\n};\n", "import {PropertyDescriptorParsingType, IPropertyListDescriptor} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentWithValue, parseFunctionArgs} from '../syntax/parser';\nimport {ZERO_LENGTH} from '../types/length-percentage';\nimport {color, Color} from '../types/color';\nimport {isLength, Length} from '../types/length';\nimport {Context} from '../../core/context';\n\nexport type BoxShadow = BoxShadowItem[];\ninterface BoxShadowItem {\n    inset: boolean;\n    color: Color;\n    offsetX: Length;\n    offsetY: Length;\n    blur: Length;\n    spread: Length;\n}\n\nexport const boxShadow: IPropertyListDescriptor<BoxShadow> = {\n    name: 'box-shadow',\n    initialValue: 'none',\n    type: PropertyDescriptorParsingType.LIST,\n    prefix: false,\n    parse: (context: Context, tokens: CSSValue[]): BoxShadow => {\n        if (tokens.length === 1 && isIdentWithValue(tokens[0], 'none')) {\n            return [];\n        }\n\n        return parseFunctionArgs(tokens).map((values: CSSValue[]) => {\n            const shadow: BoxShadowItem = {\n                color: 0x000000ff,\n                offsetX: ZERO_LENGTH,\n                offsetY: ZERO_LENGTH,\n                blur: ZERO_LENGTH,\n                spread: ZERO_LENGTH,\n                inset: false\n            };\n            let c = 0;\n            for (let i = 0; i < values.length; i++) {\n                const token = values[i];\n                if (isIdentWithValue(token, 'inset')) {\n                    shadow.inset = true;\n                } else if (isLength(token)) {\n                    if (c === 0) {\n                        shadow.offsetX = token;\n                    } else if (c === 1) {\n                        shadow.offsetY = token;\n                    } else if (c === 2) {\n                        shadow.blur = token;\n                    } else {\n                        shadow.spread = token;\n                    }\n                    c++;\n                } else {\n                    shadow.color = color.parse(context, token);\n                }\n            }\n            return shadow;\n        });\n    }\n};\n", "import {IPropertyListDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {CSSValue, isIdentToken} from '../syntax/parser';\nimport {Context} from '../../core/context';\nexport const enum PAINT_ORDER_LAYER {\n    FILL,\n    STROKE,\n    MARKERS\n}\n\nexport type PaintOrder = PAINT_ORDER_LAYER[];\n\nexport const paintOrder: IPropertyListDescriptor<PaintOrder> = {\n    name: 'paint-order',\n    initialValue: 'normal',\n    prefix: false,\n    type: PropertyDescriptorParsingType.LIST,\n    parse: (_context: Context, tokens: CSSValue[]): PaintOrder => {\n        const DEFAULT_VALUE = [PAINT_ORDER_LAYER.FILL, PAINT_ORDER_LAYER.STROKE, PAINT_ORDER_LAYER.MARKERS];\n        const layers: PaintOrder = [];\n\n        tokens.filter(isIdentToken).forEach((token) => {\n            switch (token.value) {\n                case 'stroke':\n                    layers.push(PAINT_ORDER_LAYER.STROKE);\n                    break;\n                case 'fill':\n                    layers.push(PAINT_ORDER_LAYER.FILL);\n                    break;\n                case 'markers':\n                    layers.push(PAINT_ORDER_LAYER.MARKERS);\n                    break;\n            }\n        });\n        DEFAULT_VALUE.forEach((value) => {\n            if (layers.indexOf(value) === -1) {\n                layers.push(value);\n            }\n        });\n\n        return layers;\n    }\n};\n", "import {IPropertyTypeValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nexport const webkitTextStrokeColor: IPropertyTypeValueDescriptor = {\n    name: `-webkit-text-stroke-color`,\n    initialValue: 'currentcolor',\n    prefix: false,\n    type: PropertyDescriptorParsingType.TYPE_VALUE,\n    format: 'color'\n};\n", "import {CSSValue, isDimensionToken} from '../syntax/parser';\nimport {IPropertyValueDescriptor, PropertyDescriptorParsingType} from '../IPropertyDescriptor';\nimport {Context} from '../../core/context';\nexport const webkitTextStrokeWidth: IPropertyValueDescriptor<number> = {\n    name: `-webkit-text-stroke-width`,\n    initialValue: '0',\n    type: PropertyDescriptorParsingType.VALUE,\n    prefix: false,\n    parse: (_context: Context, token: CSSValue): number => {\n        if (isDimensionToken(token)) {\n            return token.number;\n        }\n        return 0;\n    }\n};\n", "import {CSSPropertyDescriptor, PropertyDescriptorParsingType} from './IPropertyDescriptor';\nimport {backgroundClip} from './property-descriptors/background-clip';\nimport {backgroundColor} from './property-descriptors/background-color';\nimport {backgroundImage} from './property-descriptors/background-image';\nimport {backgroundOrigin} from './property-descriptors/background-origin';\nimport {backgroundPosition} from './property-descriptors/background-position';\nimport {backgroundRepeat} from './property-descriptors/background-repeat';\nimport {backgroundSize} from './property-descriptors/background-size';\nimport {\n    borderBottomColor,\n    borderLeftColor,\n    borderRightColor,\n    borderTopColor\n} from './property-descriptors/border-color';\nimport {\n    borderBottomLeftRadius,\n    borderBottomRightRadius,\n    borderTopLeftRadius,\n    borderTopRightRadius\n} from './property-descriptors/border-radius';\nimport {\n    borderBottomStyle,\n    borderLeftStyle,\n    borderRightStyle,\n    borderTopStyle\n} from './property-descriptors/border-style';\nimport {\n    borderBottomWidth,\n    borderLeftWidth,\n    borderRightWidth,\n    borderTopWidth\n} from './property-descriptors/border-width';\nimport {color} from './property-descriptors/color';\nimport {direction} from './property-descriptors/direction';\nimport {display, DISPLAY} from './property-descriptors/display';\nimport {float, FLOAT} from './property-descriptors/float';\nimport {letterSpacing} from './property-descriptors/letter-spacing';\nimport {lineBreak} from './property-descriptors/line-break';\nimport {lineHeight} from './property-descriptors/line-height';\nimport {listStyleImage} from './property-descriptors/list-style-image';\nimport {listStylePosition} from './property-descriptors/list-style-position';\nimport {listStyleType} from './property-descriptors/list-style-type';\nimport {marginBottom, marginLeft, marginRight, marginTop} from './property-descriptors/margin';\nimport {overflow, OVERFLOW} from './property-descriptors/overflow';\nimport {overflowWrap} from './property-descriptors/overflow-wrap';\nimport {paddingBottom, paddingLeft, paddingRight, paddingTop} from './property-descriptors/padding';\nimport {textAlign} from './property-descriptors/text-align';\nimport {position, POSITION} from './property-descriptors/position';\nimport {textShadow} from './property-descriptors/text-shadow';\nimport {textTransform} from './property-descriptors/text-transform';\nimport {transform} from './property-descriptors/transform';\nimport {transformOrigin} from './property-descriptors/transform-origin';\nimport {visibility, VISIBILITY} from './property-descriptors/visibility';\nimport {wordBreak} from './property-descriptors/word-break';\nimport {zIndex} from './property-descriptors/z-index';\nimport {CSSValue, isIdentToken, Parser} from './syntax/parser';\nimport {Tokenizer} from './syntax/tokenizer';\nimport {Color, color as colorType, isTransparent} from './types/color';\nimport {angle} from './types/angle';\nimport {image} from './types/image';\nimport {time} from './types/time';\nimport {opacity} from './property-descriptors/opacity';\nimport {textDecorationColor} from './property-descriptors/text-decoration-color';\nimport {textDecorationLine} from './property-descriptors/text-decoration-line';\nimport {isLengthPercentage, LengthPercentage, ZERO_LENGTH} from './types/length-percentage';\nimport {fontFamily} from './property-descriptors/font-family';\nimport {fontSize} from './property-descriptors/font-size';\nimport {isLength} from './types/length';\nimport {fontWeight} from './property-descriptors/font-weight';\nimport {fontVariant} from './property-descriptors/font-variant';\nimport {fontStyle} from './property-descriptors/font-style';\nimport {contains} from '../core/bitwise';\nimport {content} from './property-descriptors/content';\nimport {counterIncrement} from './property-descriptors/counter-increment';\nimport {counterReset} from './property-descriptors/counter-reset';\nimport {duration} from './property-descriptors/duration';\nimport {quotes} from './property-descriptors/quotes';\nimport {boxShadow} from './property-descriptors/box-shadow';\nimport {paintOrder} from './property-descriptors/paint-order';\nimport {webkitTextStrokeColor} from './property-descriptors/webkit-text-stroke-color';\nimport {webkitTextStrokeWidth} from './property-descriptors/webkit-text-stroke-width';\nimport {Context} from '../core/context';\n\nexport class CSSParsedDeclaration {\n    animationDuration: ReturnType<typeof duration.parse>;\n    backgroundClip: ReturnType<typeof backgroundClip.parse>;\n    backgroundColor: Color;\n    backgroundImage: ReturnType<typeof backgroundImage.parse>;\n    backgroundOrigin: ReturnType<typeof backgroundOrigin.parse>;\n    backgroundPosition: ReturnType<typeof backgroundPosition.parse>;\n    backgroundRepeat: ReturnType<typeof backgroundRepeat.parse>;\n    backgroundSize: ReturnType<typeof backgroundSize.parse>;\n    borderTopColor: Color;\n    borderRightColor: Color;\n    borderBottomColor: Color;\n    borderLeftColor: Color;\n    borderTopLeftRadius: ReturnType<typeof borderTopLeftRadius.parse>;\n    borderTopRightRadius: ReturnType<typeof borderTopRightRadius.parse>;\n    borderBottomRightRadius: ReturnType<typeof borderBottomRightRadius.parse>;\n    borderBottomLeftRadius: ReturnType<typeof borderBottomLeftRadius.parse>;\n    borderTopStyle: ReturnType<typeof borderTopStyle.parse>;\n    borderRightStyle: ReturnType<typeof borderRightStyle.parse>;\n    borderBottomStyle: ReturnType<typeof borderBottomStyle.parse>;\n    borderLeftStyle: ReturnType<typeof borderLeftStyle.parse>;\n    borderTopWidth: ReturnType<typeof borderTopWidth.parse>;\n    borderRightWidth: ReturnType<typeof borderRightWidth.parse>;\n    borderBottomWidth: ReturnType<typeof borderBottomWidth.parse>;\n    borderLeftWidth: ReturnType<typeof borderLeftWidth.parse>;\n    boxShadow: ReturnType<typeof boxShadow.parse>;\n    color: Color;\n    direction: ReturnType<typeof direction.parse>;\n    display: ReturnType<typeof display.parse>;\n    float: ReturnType<typeof float.parse>;\n    fontFamily: ReturnType<typeof fontFamily.parse>;\n    fontSize: LengthPercentage;\n    fontStyle: ReturnType<typeof fontStyle.parse>;\n    fontVariant: ReturnType<typeof fontVariant.parse>;\n    fontWeight: ReturnType<typeof fontWeight.parse>;\n    letterSpacing: ReturnType<typeof letterSpacing.parse>;\n    lineBreak: ReturnType<typeof lineBreak.parse>;\n    lineHeight: CSSValue;\n    listStyleImage: ReturnType<typeof listStyleImage.parse>;\n    listStylePosition: ReturnType<typeof listStylePosition.parse>;\n    listStyleType: ReturnType<typeof listStyleType.parse>;\n    marginTop: CSSValue;\n    marginRight: CSSValue;\n    marginBottom: CSSValue;\n    marginLeft: CSSValue;\n    opacity: ReturnType<typeof opacity.parse>;\n    overflowX: OVERFLOW;\n    overflowY: OVERFLOW;\n    overflowWrap: ReturnType<typeof overflowWrap.parse>;\n    paddingTop: LengthPercentage;\n    paddingRight: LengthPercentage;\n    paddingBottom: LengthPercentage;\n    paddingLeft: LengthPercentage;\n    paintOrder: ReturnType<typeof paintOrder.parse>;\n    position: ReturnType<typeof position.parse>;\n    textAlign: ReturnType<typeof textAlign.parse>;\n    textDecorationColor: Color;\n    textDecorationLine: ReturnType<typeof textDecorationLine.parse>;\n    textShadow: ReturnType<typeof textShadow.parse>;\n    textTransform: ReturnType<typeof textTransform.parse>;\n    transform: ReturnType<typeof transform.parse>;\n    transformOrigin: ReturnType<typeof transformOrigin.parse>;\n    visibility: ReturnType<typeof visibility.parse>;\n    webkitTextStrokeColor: Color;\n    webkitTextStrokeWidth: ReturnType<typeof webkitTextStrokeWidth.parse>;\n    wordBreak: ReturnType<typeof wordBreak.parse>;\n    zIndex: ReturnType<typeof zIndex.parse>;\n\n    constructor(context: Context, declaration: CSSStyleDeclaration) {\n        this.animationDuration = parse(context, duration, declaration.animationDuration);\n        this.backgroundClip = parse(context, backgroundClip, declaration.backgroundClip);\n        this.backgroundColor = parse(context, backgroundColor, declaration.backgroundColor);\n        this.backgroundImage = parse(context, backgroundImage, declaration.backgroundImage);\n        this.backgroundOrigin = parse(context, backgroundOrigin, declaration.backgroundOrigin);\n        this.backgroundPosition = parse(context, backgroundPosition, declaration.backgroundPosition);\n        this.backgroundRepeat = parse(context, backgroundRepeat, declaration.backgroundRepeat);\n        this.backgroundSize = parse(context, backgroundSize, declaration.backgroundSize);\n        this.borderTopColor = parse(context, borderTopColor, declaration.borderTopColor);\n        this.borderRightColor = parse(context, borderRightColor, declaration.borderRightColor);\n        this.borderBottomColor = parse(context, borderBottomColor, declaration.borderBottomColor);\n        this.borderLeftColor = parse(context, borderLeftColor, declaration.borderLeftColor);\n        this.borderTopLeftRadius = parse(context, borderTopLeftRadius, declaration.borderTopLeftRadius);\n        this.borderTopRightRadius = parse(context, borderTopRightRadius, declaration.borderTopRightRadius);\n        this.borderBottomRightRadius = parse(context, borderBottomRightRadius, declaration.borderBottomRightRadius);\n        this.borderBottomLeftRadius = parse(context, borderBottomLeftRadius, declaration.borderBottomLeftRadius);\n        this.borderTopStyle = parse(context, borderTopStyle, declaration.borderTopStyle);\n        this.borderRightStyle = parse(context, borderRightStyle, declaration.borderRightStyle);\n        this.borderBottomStyle = parse(context, borderBottomStyle, declaration.borderBottomStyle);\n        this.borderLeftStyle = parse(context, borderLeftStyle, declaration.borderLeftStyle);\n        this.borderTopWidth = parse(context, borderTopWidth, declaration.borderTopWidth);\n        this.borderRightWidth = parse(context, borderRightWidth, declaration.borderRightWidth);\n        this.borderBottomWidth = parse(context, borderBottomWidth, declaration.borderBottomWidth);\n        this.borderLeftWidth = parse(context, borderLeftWidth, declaration.borderLeftWidth);\n        this.boxShadow = parse(context, boxShadow, declaration.boxShadow);\n        this.color = parse(context, color, declaration.color);\n        this.direction = parse(context, direction, declaration.direction);\n        this.display = parse(context, display, declaration.display);\n        this.float = parse(context, float, declaration.cssFloat);\n        this.fontFamily = parse(context, fontFamily, declaration.fontFamily);\n        this.fontSize = parse(context, fontSize, declaration.fontSize);\n        this.fontStyle = parse(context, fontStyle, declaration.fontStyle);\n        this.fontVariant = parse(context, fontVariant, declaration.fontVariant);\n        this.fontWeight = parse(context, fontWeight, declaration.fontWeight);\n        this.letterSpacing = parse(context, letterSpacing, declaration.letterSpacing);\n        this.lineBreak = parse(context, lineBreak, declaration.lineBreak);\n        this.lineHeight = parse(context, lineHeight, declaration.lineHeight);\n        this.listStyleImage = parse(context, listStyleImage, declaration.listStyleImage);\n        this.listStylePosition = parse(context, listStylePosition, declaration.listStylePosition);\n        this.listStyleType = parse(context, listStyleType, declaration.listStyleType);\n        this.marginTop = parse(context, marginTop, declaration.marginTop);\n        this.marginRight = parse(context, marginRight, declaration.marginRight);\n        this.marginBottom = parse(context, marginBottom, declaration.marginBottom);\n        this.marginLeft = parse(context, marginLeft, declaration.marginLeft);\n        this.opacity = parse(context, opacity, declaration.opacity);\n        const overflowTuple = parse(context, overflow, declaration.overflow);\n        this.overflowX = overflowTuple[0];\n        this.overflowY = overflowTuple[overflowTuple.length > 1 ? 1 : 0];\n        this.overflowWrap = parse(context, overflowWrap, declaration.overflowWrap);\n        this.paddingTop = parse(context, paddingTop, declaration.paddingTop);\n        this.paddingRight = parse(context, paddingRight, declaration.paddingRight);\n        this.paddingBottom = parse(context, paddingBottom, declaration.paddingBottom);\n        this.paddingLeft = parse(context, paddingLeft, declaration.paddingLeft);\n        this.paintOrder = parse(context, paintOrder, declaration.paintOrder);\n        this.position = parse(context, position, declaration.position);\n        this.textAlign = parse(context, textAlign, declaration.textAlign);\n        this.textDecorationColor = parse(\n            context,\n            textDecorationColor,\n            declaration.textDecorationColor ?? declaration.color\n        );\n        this.textDecorationLine = parse(\n            context,\n            textDecorationLine,\n            declaration.textDecorationLine ?? declaration.textDecoration\n        );\n        this.textShadow = parse(context, textShadow, declaration.textShadow);\n        this.textTransform = parse(context, textTransform, declaration.textTransform);\n        this.transform = parse(context, transform, declaration.transform);\n        this.transformOrigin = parse(context, transformOrigin, declaration.transformOrigin);\n        this.visibility = parse(context, visibility, declaration.visibility);\n        this.webkitTextStrokeColor = parse(context, webkitTextStrokeColor, declaration.webkitTextStrokeColor);\n        this.webkitTextStrokeWidth = parse(context, webkitTextStrokeWidth, declaration.webkitTextStrokeWidth);\n        this.wordBreak = parse(context, wordBreak, declaration.wordBreak);\n        this.zIndex = parse(context, zIndex, declaration.zIndex);\n    }\n\n    isVisible(): boolean {\n        return this.display > 0 && this.opacity > 0 && this.visibility === VISIBILITY.VISIBLE;\n    }\n\n    isTransparent(): boolean {\n        return isTransparent(this.backgroundColor);\n    }\n\n    isTransformed(): boolean {\n        return this.transform !== null;\n    }\n\n    isPositioned(): boolean {\n        return this.position !== POSITION.STATIC;\n    }\n\n    isPositionedWithZIndex(): boolean {\n        return this.isPositioned() && !this.zIndex.auto;\n    }\n\n    isFloating(): boolean {\n        return this.float !== FLOAT.NONE;\n    }\n\n    isInlineLevel(): boolean {\n        return (\n            contains(this.display, DISPLAY.INLINE) ||\n            contains(this.display, DISPLAY.INLINE_BLOCK) ||\n            contains(this.display, DISPLAY.INLINE_FLEX) ||\n            contains(this.display, DISPLAY.INLINE_GRID) ||\n            contains(this.display, DISPLAY.INLINE_LIST_ITEM) ||\n            contains(this.display, DISPLAY.INLINE_TABLE)\n        );\n    }\n}\n\nexport class CSSParsedPseudoDeclaration {\n    content: ReturnType<typeof content.parse>;\n    quotes: ReturnType<typeof quotes.parse>;\n\n    constructor(context: Context, declaration: CSSStyleDeclaration) {\n        this.content = parse(context, content, declaration.content);\n        this.quotes = parse(context, quotes, declaration.quotes);\n    }\n}\n\nexport class CSSParsedCounterDeclaration {\n    counterIncrement: ReturnType<typeof counterIncrement.parse>;\n    counterReset: ReturnType<typeof counterReset.parse>;\n\n    constructor(context: Context, declaration: CSSStyleDeclaration) {\n        this.counterIncrement = parse(context, counterIncrement, declaration.counterIncrement);\n        this.counterReset = parse(context, counterReset, declaration.counterReset);\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst parse = (context: Context, descriptor: CSSPropertyDescriptor<any>, style?: string | null) => {\n    const tokenizer = new Tokenizer();\n    const value = style !== null && typeof style !== 'undefined' ? style.toString() : descriptor.initialValue;\n    tokenizer.write(value);\n    const parser = new Parser(tokenizer.read());\n    switch (descriptor.type) {\n        case PropertyDescriptorParsingType.IDENT_VALUE:\n            const token = parser.parseComponentValue();\n            return descriptor.parse(context, isIdentToken(token) ? token.value : descriptor.initialValue);\n        case PropertyDescriptorParsingType.VALUE:\n            return descriptor.parse(context, parser.parseComponentValue());\n        case PropertyDescriptorParsingType.LIST:\n            return descriptor.parse(context, parser.parseComponentValues());\n        case PropertyDescriptorParsingType.TOKEN_VALUE:\n            return parser.parseComponentValue();\n        case PropertyDescriptorParsingType.TYPE_VALUE:\n            switch (descriptor.format) {\n                case 'angle':\n                    return angle.parse(context, parser.parseComponentValue());\n                case 'color':\n                    return colorType.parse(context, parser.parseComponentValue());\n                case 'image':\n                    return image.parse(context, parser.parseComponentValue());\n                case 'length':\n                    const length = parser.parseComponentValue();\n                    return isLength(length) ? length : ZERO_LENGTH;\n                case 'length-percentage':\n                    const value = parser.parseComponentValue();\n                    return isLengthPercentage(value) ? value : ZERO_LENGTH;\n                case 'time':\n                    return time.parse(context, parser.parseComponentValue());\n            }\n            break;\n    }\n};\n", "const elementDebuggerAttribute = 'data-html2canvas-debug';\nexport const enum DebuggerType {\n    NONE,\n    ALL,\n    CLONE,\n    PARSE,\n    RENDER\n}\n\nconst getElementDebugType = (element: Element): DebuggerType => {\n    const attribute = element.getAttribute(elementDebuggerAttribute);\n    switch (attribute) {\n        case 'all':\n            return DebuggerType.ALL;\n        case 'clone':\n            return DebuggerType.CLONE;\n        case 'parse':\n            return DebuggerType.PARSE;\n        case 'render':\n            return DebuggerType.RENDER;\n        default:\n            return DebuggerType.NONE;\n    }\n};\n\nexport const isDebugging = (element: Element, type: Omit<DebuggerType, DebuggerType.NONE>): boolean => {\n    const elementType = getElementDebugType(element);\n    return elementType === DebuggerType.ALL || type === elementType;\n};\n", "import {CSSParsedDeclaration} from '../css/index';\nimport {TextContainer} from './text-container';\nimport {Bounds, parseBounds} from '../css/layout/bounds';\nimport {isHTMLElementNode} from './node-parser';\nimport {Context} from '../core/context';\nimport {DebuggerType, isDebugging} from '../core/debugger';\n\nexport const enum FLAGS {\n    CREATES_STACKING_CONTEXT = 1 << 1,\n    CREATES_REAL_STACKING_CONTEXT = 1 << 2,\n    IS_LIST_OWNER = 1 << 3,\n    DEBUG_RENDER = 1 << 4\n}\n\nexport class ElementContainer {\n    readonly styles: CSSParsedDeclaration;\n    readonly textNodes: TextContainer[] = [];\n    readonly elements: ElementContainer[] = [];\n    bounds: Bounds;\n    flags = 0;\n\n    constructor(protected readonly context: Context, element: Element) {\n        if (isDebugging(element, DebuggerType.PARSE)) {\n            debugger;\n        }\n\n        this.styles = new CSSParsedDeclaration(context, window.getComputedStyle(element, null));\n\n        if (isHTMLElementNode(element)) {\n            if (this.styles.animationDuration.some((duration) => duration > 0)) {\n                element.style.animationDuration = '0s';\n            }\n\n            if (this.styles.transform !== null) {\n                // getBoundingClientRect takes transforms into account\n                element.style.transform = 'none';\n            }\n        }\n\n        this.bounds = parseBounds(this.context, element);\n\n        if (isDebugging(element, DebuggerType.RENDER)) {\n            this.flags |= FLAGS.DEBUG_RENDER;\n        }\n    }\n}\n", "export const base64 =\n    'AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=';\nexport const byteLength = 19616;\n", "const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\n\nexport const decode = (base64: string): ArrayBuffer | number[] => {\n    let bufferLength = base64.length * 0.75,\n        len = base64.length,\n        i,\n        p = 0,\n        encoded1,\n        encoded2,\n        encoded3,\n        encoded4;\n\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    const buffer =\n        typeof ArrayBuffer !== 'undefined' &&\n        typeof Uint8Array !== 'undefined' &&\n        typeof Uint8Array.prototype.slice !== 'undefined'\n            ? new ArrayBuffer(bufferLength)\n            : new Array(bufferLength);\n    const bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return buffer;\n};\n\nexport const polyUint16Array = (buffer: number[]): number[] => {\n    const length = buffer.length;\n    const bytes = [];\n    for (let i = 0; i < length; i += 2) {\n        bytes.push((buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n\nexport const polyUint32Array = (buffer: number[]): number[] => {\n    const length = buffer.length;\n    const bytes = [];\n    for (let i = 0; i < length; i += 4) {\n        bytes.push((buffer[i + 3] << 24) | (buffer[i + 2] << 16) | (buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n", "import {decode, polyUint16Array, polyUint32Array} from './Util';\n\nexport type int = number;\n\n/** Shift size for getting the index-2 table offset. */\nexport const UTRIE2_SHIFT_2 = 5;\n\n/** Shift size for getting the index-1 table offset. */\nexport const UTRIE2_SHIFT_1 = 6 + 5;\n\n/**\n * Shift size for shifting left the index array values.\n * Increases possible data size with 16-bit index values at the cost\n * of compactability.\n * This requires data blocks to be aligned by UTRIE2_DATA_GRANULARITY.\n */\nexport const UTRIE2_INDEX_SHIFT = 2;\n\n/**\n * Difference between the two shift sizes,\n * for getting an index-1 offset from an index-2 offset. 6=11-5\n */\nexport const UTRIE2_SHIFT_1_2 = UTRIE2_SHIFT_1 - UTRIE2_SHIFT_2;\n\n/**\n * The part of the index-2 table for U+D800..U+DBFF stores values for\n * lead surrogate code _units_ not code _points_.\n * Values for lead surrogate code _points_ are indexed with this portion of the table.\n * Length=32=0x20=0x400>>UTRIE2_SHIFT_2. (There are 1024=0x400 lead surrogates.)\n */\nexport const UTRIE2_LSCP_INDEX_2_OFFSET = 0x10000 >> UTRIE2_SHIFT_2;\n\n/** Number of entries in a data block. 32=0x20 */\nexport const UTRIE2_DATA_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_2;\n/** Mask for getting the lower bits for the in-data-block offset. */\nexport const UTRIE2_DATA_MASK = UTRIE2_DATA_BLOCK_LENGTH - 1;\n\nexport const UTRIE2_LSCP_INDEX_2_LENGTH = 0x400 >> UTRIE2_SHIFT_2;\n/** Count the lengths of both BMP pieces. 2080=0x820 */\nexport const UTRIE2_INDEX_2_BMP_LENGTH = UTRIE2_LSCP_INDEX_2_OFFSET + UTRIE2_LSCP_INDEX_2_LENGTH;\n/**\n * The 2-byte UTF-8 version of the index-2 table follows at offset 2080=0x820.\n * Length 32=0x20 for lead bytes C0..DF, regardless of UTRIE2_SHIFT_2.\n */\nexport const UTRIE2_UTF8_2B_INDEX_2_OFFSET = UTRIE2_INDEX_2_BMP_LENGTH;\nexport const UTRIE2_UTF8_2B_INDEX_2_LENGTH = 0x800 >> 6; /* U+0800 is the first code point after 2-byte UTF-8 */\n/**\n * The index-1 table, only used for supplementary code points, at offset 2112=0x840.\n * Variable length, for code points up to highStart, where the last single-value range starts.\n * Maximum length 512=0x200=0x100000>>UTRIE2_SHIFT_1.\n * (For 0x100000 supplementary code points U+10000..U+10ffff.)\n *\n * The part of the index-2 table for supplementary code points starts\n * after this index-1 table.\n *\n * Both the index-1 table and the following part of the index-2 table\n * are omitted completely if there is only BMP data.\n */\nexport const UTRIE2_INDEX_1_OFFSET = UTRIE2_UTF8_2B_INDEX_2_OFFSET + UTRIE2_UTF8_2B_INDEX_2_LENGTH;\n\n/**\n * Number of index-1 entries for the BMP. 32=0x20\n * This part of the index-1 table is omitted from the serialized form.\n */\nexport const UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = 0x10000 >> UTRIE2_SHIFT_1;\n\n/** Number of entries in an index-2 block. 64=0x40 */\nexport const UTRIE2_INDEX_2_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_1_2;\n/** Mask for getting the lower bits for the in-index-2-block offset. */\nexport const UTRIE2_INDEX_2_MASK = UTRIE2_INDEX_2_BLOCK_LENGTH - 1;\n\nconst slice16 = (view: number[] | Uint16Array, start: number, end?: number) => {\n    if (view.slice) {\n        return view.slice(start, end);\n    }\n\n    return new Uint16Array(Array.prototype.slice.call(view, start, end));\n};\n\nconst slice32 = (view: number[] | Uint32Array, start: number, end?: number) => {\n    if (view.slice) {\n        return view.slice(start, end);\n    }\n\n    return new Uint32Array(Array.prototype.slice.call(view, start, end));\n};\n\nexport const createTrieFromBase64 = (base64: string, _byteLength: number): Trie => {\n    const buffer = decode(base64);\n    const view32 = Array.isArray(buffer) ? polyUint32Array(buffer) : new Uint32Array(buffer);\n    const view16 = Array.isArray(buffer) ? polyUint16Array(buffer) : new Uint16Array(buffer);\n    const headerLength = 24;\n\n    const index = slice16(view16, headerLength / 2, view32[4] / 2);\n    const data =\n        view32[5] === 2\n            ? slice16(view16, (headerLength + view32[4]) / 2)\n            : slice32(view32, Math.ceil((headerLength + view32[4]) / 4));\n\n    return new Trie(view32[0], view32[1], view32[2], view32[3], index, data);\n};\n\nexport class Trie {\n    initialValue: int;\n    errorValue: int;\n    highStart: int;\n    highValueIndex: int;\n    index: Uint16Array | number[];\n    data: Uint32Array | Uint16Array | number[];\n\n    constructor(\n        initialValue: int,\n        errorValue: int,\n        highStart: int,\n        highValueIndex: int,\n        index: Uint16Array | number[],\n        data: Uint32Array | Uint16Array | number[]\n    ) {\n        this.initialValue = initialValue;\n        this.errorValue = errorValue;\n        this.highStart = highStart;\n        this.highValueIndex = highValueIndex;\n        this.index = index;\n        this.data = data;\n    }\n\n    /**\n     * Get the value for a code point as stored in the Trie.\n     *\n     * @param codePoint the code point\n     * @return the value\n     */\n    get(codePoint: number): number {\n        let ix;\n        if (codePoint >= 0) {\n            if (codePoint < 0x0d800 || (codePoint > 0x0dbff && codePoint <= 0x0ffff)) {\n                // Ordinary BMP code point, excluding leading surrogates.\n                // BMP uses a single level lookup.  BMP index starts at offset 0 in the Trie2 index.\n                // 16 bit data is stored in the index array itself.\n                ix = this.index[codePoint >> UTRIE2_SHIFT_2];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n\n            if (codePoint <= 0xffff) {\n                // Lead Surrogate Code Point.  A Separate index section is stored for\n                // lead surrogate code units and code points.\n                //   The main index has the code unit data.\n                //   For this function, we need the code point data.\n                // Note: this expression could be refactored for slightly improved efficiency, but\n                //       surrogate code points will be so rare in practice that it's not worth it.\n                ix = this.index[UTRIE2_LSCP_INDEX_2_OFFSET + ((codePoint - 0xd800) >> UTRIE2_SHIFT_2)];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n\n            if (codePoint < this.highStart) {\n                // Supplemental code point, use two-level lookup.\n                ix = UTRIE2_INDEX_1_OFFSET - UTRIE2_OMITTED_BMP_INDEX_1_LENGTH + (codePoint >> UTRIE2_SHIFT_1);\n                ix = this.index[ix];\n                ix += (codePoint >> UTRIE2_SHIFT_2) & UTRIE2_INDEX_2_MASK;\n                ix = this.index[ix];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n            if (codePoint <= 0x10ffff) {\n                return this.data[this.highValueIndex];\n            }\n        }\n\n        // Fall through.  The code point is outside of the legal range of 0..0x10ffff.\n        return this.errorValue;\n    }\n}\n", "const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\n\nexport const encode = (arraybuffer: ArrayBuffer): string => {\n    let bytes = new Uint8Array(arraybuffer),\n        i,\n        len = bytes.length,\n        base64 = '';\n\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    } else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n\n    return base64;\n};\n\nexport const decode = (base64: string): ArrayBuffer => {\n    let bufferLength = base64.length * 0.75,\n        len = base64.length,\n        i,\n        p = 0,\n        encoded1,\n        encoded2,\n        encoded3,\n        encoded4;\n\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n\n    const arraybuffer = new ArrayBuffer(bufferLength),\n        bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n};\n", "import {base64, byteLength} from './grapheme-break-trie';\nimport {createTrieFromBase64} from 'utrie';\n\nconst Other = 0;\nconst Prepend = 1;\nconst CR = 2;\nconst LF = 3;\nconst Control = 4;\nconst Extend = 5;\nconst Regional_Indicator = 6;\nconst SpacingMark = 7;\nconst L = 8;\nconst V = 9;\nconst T = 10;\nconst LV = 11;\nconst LVT = 12;\nconst ZWJ = 13;\nconst Extended_Pictographic = 14;\nconst RI = 15;\n\nexport const classes: {[key: string]: number} = {\n    Other,\n    Prepend,\n    CR,\n    LF,\n    Control,\n    Extend,\n    Regional_Indicator,\n    SpacingMark,\n    L,\n    V,\n    T,\n    LV,\n    LVT,\n    ZWJ,\n    Extended_Pictographic,\n    RI,\n};\n\nexport const toCodePoints = (str: string): number[] => {\n    const codePoints = [];\n    let i = 0;\n    const length = str.length;\n    while (i < length) {\n        const value = str.charCodeAt(i++);\n        if (value >= 0xd800 && value <= 0xdbff && i < length) {\n            const extra = str.charCodeAt(i++);\n            if ((extra & 0xfc00) === 0xdc00) {\n                codePoints.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);\n            } else {\n                codePoints.push(value);\n                i--;\n            }\n        } else {\n            codePoints.push(value);\n        }\n    }\n    return codePoints;\n};\n\nexport const fromCodePoint = (...codePoints: number[]): string => {\n    if (String.fromCodePoint) {\n        return String.fromCodePoint(...codePoints);\n    }\n\n    const length = codePoints.length;\n    if (!length) {\n        return '';\n    }\n\n    const codeUnits = [];\n\n    let index = -1;\n    let result = '';\n    while (++index < length) {\n        let codePoint = codePoints[index];\n        if (codePoint <= 0xffff) {\n            codeUnits.push(codePoint);\n        } else {\n            codePoint -= 0x10000;\n            codeUnits.push((codePoint >> 10) + 0xd800, (codePoint % 0x400) + 0xdc00);\n        }\n        if (index + 1 === length || codeUnits.length > 0x4000) {\n            result += String.fromCharCode(...codeUnits);\n            codeUnits.length = 0;\n        }\n    }\n    return result;\n};\n\nexport const UnicodeTrie = createTrieFromBase64(base64, byteLength);\n\nexport const BREAK_NOT_ALLOWED = '';\nexport const BREAK_ALLOWED = '';\n\nexport type BREAK_OPPORTUNITIES = typeof BREAK_NOT_ALLOWED | typeof BREAK_ALLOWED;\n\nexport const codePointToClass = (codePoint: number): number => UnicodeTrie.get(codePoint);\n\nconst _graphemeBreakAtIndex = (_codePoints: number[], classTypes: number[], index: number): BREAK_OPPORTUNITIES => {\n    let prevIndex = index - 2;\n    let prev = classTypes[prevIndex];\n    const current = classTypes[index - 1];\n    const next = classTypes[index];\n    // GB3 Do not break between a CR and LF\n    if (current === CR && next === LF) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // GB4 Otherwise, break before and after controls.\n    if (current === CR || current === LF || current === Control) {\n        return BREAK_ALLOWED;\n    }\n\n    // GB5\n    if (next === CR || next === LF || next === Control) {\n        return BREAK_ALLOWED;\n    }\n\n    // Do not break Hangul syllable sequences.\n    // GB6\n    if (current === L && [L, V, LV, LVT].indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // GB7\n    if ((current === LV || current === V) && (next === V || next === T)) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // GB8\n    if ((current === LVT || current === T) && next === T) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // GB9 Do not break before extending characters or ZWJ.\n    if (next === ZWJ || next === Extend) {\n        return BREAK_NOT_ALLOWED;\n    }\n    // Do not break before SpacingMarks, or after Prepend characters.\n    // GB9a\n    if (next === SpacingMark) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // GB9a\n    if (current === Prepend) {\n        return BREAK_NOT_ALLOWED;\n    }\n\n    // GB11 Do not break within emoji modifier sequences or emoji zwj sequences.\n    if (current === ZWJ && next === Extended_Pictographic) {\n        while (prev === Extend) {\n            prev = classTypes[--prevIndex];\n        }\n        if (prev === Extended_Pictographic) {\n            return BREAK_NOT_ALLOWED;\n        }\n    }\n\n    // GB12 Do not break within emoji flag sequences.\n    // That is, do not break between regional indicator (RI) symbols\n    // if there is an odd number of RI characters before the break point.\n    if (current === RI && next === RI) {\n        let countRI = 0;\n        while (prev === RI) {\n            countRI++;\n            prev = classTypes[--prevIndex];\n        }\n        if (countRI % 2 === 0) {\n            return BREAK_NOT_ALLOWED;\n        }\n    }\n\n    return BREAK_ALLOWED;\n};\n\nexport const graphemeBreakAtIndex = (codePoints: number[], index: number): BREAK_OPPORTUNITIES => {\n    // GB1 Break at the start and end of text, unless the text is empty.\n    if (index === 0) {\n        return BREAK_ALLOWED;\n    }\n\n    // GB2\n    if (index >= codePoints.length) {\n        return BREAK_ALLOWED;\n    }\n\n    const classTypes = codePoints.map(codePointToClass);\n    return _graphemeBreakAtIndex(codePoints, classTypes, index);\n};\n\nexport const GraphemeBreaker = (str: string) => {\n    const codePoints = toCodePoints(str);\n    const length = codePoints.length;\n    let index = 0;\n    let lastEnd = 0;\n    const classTypes = codePoints.map(codePointToClass);\n\n    return {\n        next: () => {\n            if (index >= length) {\n                return {done: true, value: null};\n            }\n\n            let graphemeBreak = BREAK_NOT_ALLOWED;\n            while (\n                index < length &&\n                (graphemeBreak = _graphemeBreakAtIndex(codePoints, classTypes, ++index)) === BREAK_NOT_ALLOWED\n            ) {}\n\n            if (graphemeBreak !== BREAK_NOT_ALLOWED || index === length) {\n                const value = fromCodePoint.apply(null, codePoints.slice(lastEnd, index));\n                lastEnd = index;\n                return {value, done: false};\n            }\n\n            return {done: true, value: null};\n            while (index < length) {}\n\n            return {done: true, value: null};\n        },\n    };\n};\n\nexport const splitGraphemes = (str: string): string[] => {\n    const breaker = GraphemeBreaker(str);\n\n    const graphemes = [];\n    let bk;\n\n    while (!(bk = breaker.next()).done) {\n        if (bk.value) {\n            graphemes.push(bk.value.slice());\n        }\n    }\n\n    return graphemes;\n};\n", "import {fromCodePoint, toCodePoints} from 'css-line-break';\n\nconst testRangeBounds = (document: Document) => {\n    const TEST_HEIGHT = 123;\n\n    if (document.createRange) {\n        const range = document.createRange();\n        if (range.getBoundingClientRect) {\n            const testElement = document.createElement('boundtest');\n            testElement.style.height = `${TEST_HEIGHT}px`;\n            testElement.style.display = 'block';\n            document.body.appendChild(testElement);\n\n            range.selectNode(testElement);\n            const rangeBounds = range.getBoundingClientRect();\n            const rangeHeight = Math.round(rangeBounds.height);\n            document.body.removeChild(testElement);\n            if (rangeHeight === TEST_HEIGHT) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n};\n\nconst testIOSLineBreak = (document: Document) => {\n    const testElement = document.createElement('boundtest');\n    testElement.style.width = '50px';\n    testElement.style.display = 'block';\n    testElement.style.fontSize = '12px';\n    testElement.style.letterSpacing = '0px';\n    testElement.style.wordSpacing = '0px';\n    document.body.appendChild(testElement);\n    const range = document.createRange();\n\n    testElement.innerHTML = typeof ''.repeat === 'function' ? '&#128104;'.repeat(10) : '';\n\n    const node = testElement.firstChild as Text;\n\n    const textList = toCodePoints(node.data).map((i) => fromCodePoint(i));\n    let offset = 0;\n    let prev: DOMRect = {} as DOMRect;\n\n    // ios 13 does not handle range getBoundingClientRect line changes correctly #2177\n    const supports = textList.every((text, i) => {\n        range.setStart(node, offset);\n        range.setEnd(node, offset + text.length);\n        const rect = range.getBoundingClientRect();\n\n        offset += text.length;\n        const boundAhead = rect.x > prev.x || rect.y > prev.y;\n\n        prev = rect;\n        if (i === 0) {\n            return true;\n        }\n\n        return boundAhead;\n    });\n\n    document.body.removeChild(testElement);\n    return supports;\n};\n\nconst testCORS = (): boolean => typeof new Image().crossOrigin !== 'undefined';\n\nconst testResponseType = (): boolean => typeof new XMLHttpRequest().responseType === 'string';\n\nconst testSVG = (document: Document): boolean => {\n    const img = new Image();\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n        return false;\n    }\n\n    img.src = `data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>`;\n\n    try {\n        ctx.drawImage(img, 0, 0);\n        canvas.toDataURL();\n    } catch (e) {\n        return false;\n    }\n    return true;\n};\n\nconst isGreenPixel = (data: Uint8ClampedArray): boolean =>\n    data[0] === 0 && data[1] === 255 && data[2] === 0 && data[3] === 255;\n\nconst testForeignObject = (document: Document): Promise<boolean> => {\n    const canvas = document.createElement('canvas');\n    const size = 100;\n    canvas.width = size;\n    canvas.height = size;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n        return Promise.reject(false);\n    }\n    ctx.fillStyle = 'rgb(0, 255, 0)';\n    ctx.fillRect(0, 0, size, size);\n\n    const img = new Image();\n    const greenImageSrc = canvas.toDataURL();\n    img.src = greenImageSrc;\n    const svg = createForeignObjectSVG(size, size, 0, 0, img);\n    ctx.fillStyle = 'red';\n    ctx.fillRect(0, 0, size, size);\n\n    return loadSerializedSVG(svg)\n        .then((img: HTMLImageElement) => {\n            ctx.drawImage(img, 0, 0);\n            const data = ctx.getImageData(0, 0, size, size).data;\n            ctx.fillStyle = 'red';\n            ctx.fillRect(0, 0, size, size);\n\n            const node = document.createElement('div');\n            node.style.backgroundImage = `url(${greenImageSrc})`;\n            node.style.height = `${size}px`;\n            // Firefox 55 does not render inline <img /> tags\n            return isGreenPixel(data)\n                ? loadSerializedSVG(createForeignObjectSVG(size, size, 0, 0, node))\n                : Promise.reject(false);\n        })\n        .then((img: HTMLImageElement) => {\n            ctx.drawImage(img, 0, 0);\n            // Edge does not render background-images\n            return isGreenPixel(ctx.getImageData(0, 0, size, size).data);\n        })\n        .catch(() => false);\n};\n\nexport const createForeignObjectSVG = (\n    width: number,\n    height: number,\n    x: number,\n    y: number,\n    node: Node\n): SVGForeignObjectElement => {\n    const xmlns = 'http://www.w3.org/2000/svg';\n    const svg = document.createElementNS(xmlns, 'svg');\n    const foreignObject = document.createElementNS(xmlns, 'foreignObject');\n    svg.setAttributeNS(null, 'width', width.toString());\n    svg.setAttributeNS(null, 'height', height.toString());\n\n    foreignObject.setAttributeNS(null, 'width', '100%');\n    foreignObject.setAttributeNS(null, 'height', '100%');\n    foreignObject.setAttributeNS(null, 'x', x.toString());\n    foreignObject.setAttributeNS(null, 'y', y.toString());\n    foreignObject.setAttributeNS(null, 'externalResourcesRequired', 'true');\n    svg.appendChild(foreignObject);\n\n    foreignObject.appendChild(node);\n\n    return svg;\n};\n\nexport const loadSerializedSVG = (svg: Node): Promise<HTMLImageElement> => {\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => resolve(img);\n        img.onerror = reject;\n\n        img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(new XMLSerializer().serializeToString(svg))}`;\n    });\n};\n\nexport const FEATURES = {\n    get SUPPORT_RANGE_BOUNDS(): boolean {\n        'use strict';\n        const value = testRangeBounds(document);\n        Object.defineProperty(FEATURES, 'SUPPORT_RANGE_BOUNDS', {value});\n        return value;\n    },\n    get SUPPORT_WORD_BREAKING(): boolean {\n        'use strict';\n        const value = FEATURES.SUPPORT_RANGE_BOUNDS && testIOSLineBreak(document);\n        Object.defineProperty(FEATURES, 'SUPPORT_WORD_BREAKING', {value});\n        return value;\n    },\n    get SUPPORT_SVG_DRAWING(): boolean {\n        'use strict';\n        const value = testSVG(document);\n        Object.defineProperty(FEATURES, 'SUPPORT_SVG_DRAWING', {value});\n        return value;\n    },\n    get SUPPORT_FOREIGNOBJECT_DRAWING(): Promise<boolean> {\n        'use strict';\n        const value =\n            typeof Array.from === 'function' && typeof window.fetch === 'function'\n                ? testForeignObject(document)\n                : Promise.resolve(false);\n        Object.defineProperty(FEATURES, 'SUPPORT_FOREIGNOBJECT_DRAWING', {value});\n        return value;\n    },\n    get SUPPORT_CORS_IMAGES(): boolean {\n        'use strict';\n        const value = testCORS();\n        Object.defineProperty(FEATURES, 'SUPPORT_CORS_IMAGES', {value});\n        return value;\n    },\n    get SUPPORT_RESPONSE_TYPE(): boolean {\n        'use strict';\n        const value = testResponseType();\n        Object.defineProperty(FEATURES, 'SUPPORT_RESPONSE_TYPE', {value});\n        return value;\n    },\n    get SUPPORT_CORS_XHR(): boolean {\n        'use strict';\n        const value = 'withCredentials' in new XMLHttpRequest();\n        Object.defineProperty(FEATURES, 'SUPPORT_CORS_XHR', {value});\n        return value;\n    },\n    get SUPPORT_NATIVE_TEXT_SEGMENTATION(): boolean {\n        'use strict';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const value = !!(typeof Intl !== 'undefined' && (Intl as any).Segmenter);\n        Object.defineProperty(FEATURES, 'SUPPORT_NATIVE_TEXT_SEGMENTATION', {value});\n        return value;\n    }\n};\n", "import {OVERFLOW_WRAP} from '../property-descriptors/overflow-wrap';\nimport {CSSParsedDeclaration} from '../index';\nimport {fromCodePoint, LineBreaker, toCodePoints} from 'css-line-break';\nimport {splitGraphemes} from 'text-segmentation';\nimport {Bounds, parseBounds} from './bounds';\nimport {FEATURES} from '../../core/features';\nimport {Context} from '../../core/context';\n\nexport class TextBounds {\n    readonly text: string;\n    readonly bounds: Bounds;\n\n    constructor(text: string, bounds: Bounds) {\n        this.text = text;\n        this.bounds = bounds;\n    }\n}\n\nexport const parseTextBounds = (\n    context: Context,\n    value: string,\n    styles: CSSParsedDeclaration,\n    node: Text\n): TextBounds[] => {\n    const textList = breakText(value, styles);\n    const textBounds: TextBounds[] = [];\n    let offset = 0;\n    textList.forEach((text) => {\n        if (styles.textDecorationLine.length || text.trim().length > 0) {\n            if (FEATURES.SUPPORT_RANGE_BOUNDS) {\n                const clientRects = createRange(node, offset, text.length).getClientRects();\n                if (clientRects.length > 1) {\n                    const subSegments = segmentGraphemes(text);\n                    let subOffset = 0;\n                    subSegments.forEach((subSegment) => {\n                        textBounds.push(\n                            new TextBounds(\n                                subSegment,\n                                Bounds.fromDOMRectList(\n                                    context,\n                                    createRange(node, subOffset + offset, subSegment.length).getClientRects()\n                                )\n                            )\n                        );\n                        subOffset += subSegment.length;\n                    });\n                } else {\n                    textBounds.push(new TextBounds(text, Bounds.fromDOMRectList(context, clientRects)));\n                }\n            } else {\n                const replacementNode = node.splitText(text.length);\n                textBounds.push(new TextBounds(text, getWrapperBounds(context, node)));\n                node = replacementNode;\n            }\n        } else if (!FEATURES.SUPPORT_RANGE_BOUNDS) {\n            node = node.splitText(text.length);\n        }\n        offset += text.length;\n    });\n\n    return textBounds;\n};\n\nconst getWrapperBounds = (context: Context, node: Text): Bounds => {\n    const ownerDocument = node.ownerDocument;\n    if (ownerDocument) {\n        const wrapper = ownerDocument.createElement('html2canvaswrapper');\n        wrapper.appendChild(node.cloneNode(true));\n        const parentNode = node.parentNode;\n        if (parentNode) {\n            parentNode.replaceChild(wrapper, node);\n            const bounds = parseBounds(context, wrapper);\n            if (wrapper.firstChild) {\n                parentNode.replaceChild(wrapper.firstChild, wrapper);\n            }\n            return bounds;\n        }\n    }\n\n    return Bounds.EMPTY;\n};\n\nconst createRange = (node: Text, offset: number, length: number): Range => {\n    const ownerDocument = node.ownerDocument;\n    if (!ownerDocument) {\n        throw new Error('Node has no owner document');\n    }\n    const range = ownerDocument.createRange();\n    range.setStart(node, offset);\n    range.setEnd(node, offset + length);\n    return range;\n};\n\nexport const segmentGraphemes = (value: string): string[] => {\n    if (FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const segmenter = new (Intl as any).Segmenter(void 0, {granularity: 'grapheme'});\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Array.from(segmenter.segment(value)).map((segment: any) => segment.segment);\n    }\n\n    return splitGraphemes(value);\n};\n\nconst segmentWords = (value: string, styles: CSSParsedDeclaration): string[] => {\n    if (FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const segmenter = new (Intl as any).Segmenter(void 0, {\n            granularity: 'word'\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Array.from(segmenter.segment(value)).map((segment: any) => segment.segment);\n    }\n\n    return breakWords(value, styles);\n};\n\nconst breakText = (value: string, styles: CSSParsedDeclaration): string[] => {\n    return styles.letterSpacing !== 0 ? segmentGraphemes(value) : segmentWords(value, styles);\n};\n\n// https://drafts.csswg.org/css-text/#word-separator\nconst wordSeparators = [0x0020, 0x00a0, 0x1361, 0x10100, 0x10101, 0x1039, 0x1091];\n\nconst breakWords = (str: string, styles: CSSParsedDeclaration): string[] => {\n    const breaker = LineBreaker(str, {\n        lineBreak: styles.lineBreak,\n        wordBreak: styles.overflowWrap === OVERFLOW_WRAP.BREAK_WORD ? 'break-word' : styles.wordBreak\n    });\n\n    const words = [];\n    let bk;\n\n    while (!(bk = breaker.next()).done) {\n        if (bk.value) {\n            const value = bk.value.slice();\n            const codePoints = toCodePoints(value);\n            let word = '';\n            codePoints.forEach((codePoint) => {\n                if (wordSeparators.indexOf(codePoint) === -1) {\n                    word += fromCodePoint(codePoint);\n                } else {\n                    if (word.length) {\n                        words.push(word);\n                    }\n                    words.push(fromCodePoint(codePoint));\n                    word = '';\n                }\n            });\n\n            if (word.length) {\n                words.push(word);\n            }\n        }\n    }\n\n    return words;\n};\n", "import {CSSParsedDeclaration} from '../css/index';\nimport {TEXT_TRANSFORM} from '../css/property-descriptors/text-transform';\nimport {parseTextBounds, TextBounds} from '../css/layout/text';\nimport {Context} from '../core/context';\n\nexport class TextContainer {\n    text: string;\n    textBounds: TextBounds[];\n\n    constructor(context: Context, node: Text, styles: CSSParsedDeclaration) {\n        this.text = transform(node.data, styles.textTransform);\n        this.textBounds = parseTextBounds(context, this.text, styles, node);\n    }\n}\n\nconst transform = (text: string, transform: TEXT_TRANSFORM) => {\n    switch (transform) {\n        case TEXT_TRANSFORM.LOWERCASE:\n            return text.toLowerCase();\n        case TEXT_TRANSFORM.CAPITALIZE:\n            return text.replace(CAPITALIZE, capitalize);\n        case TEXT_TRANSFORM.UPPERCASE:\n            return text.toUpperCase();\n        default:\n            return text;\n    }\n};\n\nconst CAPITALIZE = /(^|\\s|:|-|\\(|\\))([a-z])/g;\n\nconst capitalize = (m: string, p1: string, p2: string) => {\n    if (m.length > 0) {\n        return p1 + p2.toUpperCase();\n    }\n\n    return m;\n};\n", "import {ElementContainer} from '../element-container';\nimport {Context} from '../../core/context';\n\nexport class ImageElementContainer extends ElementContainer {\n    src: string;\n    intrinsicWidth: number;\n    intrinsicHeight: number;\n\n    constructor(context: Context, img: HTMLImageElement) {\n        super(context, img);\n        this.src = img.currentSrc || img.src;\n        this.intrinsicWidth = img.naturalWidth;\n        this.intrinsicHeight = img.naturalHeight;\n        this.context.cache.addImage(this.src);\n    }\n}\n", "import {ElementContainer} from '../element-container';\nimport {Context} from '../../core/context';\n\nexport class CanvasElementContainer extends ElementContainer {\n    canvas: HTMLCanvasElement;\n    intrinsicWidth: number;\n    intrinsicHeight: number;\n\n    constructor(context: Context, canvas: HTMLCanvasElement) {\n        super(context, canvas);\n        this.canvas = canvas;\n        this.intrinsicWidth = canvas.width;\n        this.intrinsicHeight = canvas.height;\n    }\n}\n", "import {ElementContainer} from '../element-container';\nimport {parseBounds} from '../../css/layout/bounds';\nimport {Context} from '../../core/context';\n\nexport class SVGElementContainer extends ElementContainer {\n    svg: string;\n    intrinsicWidth: number;\n    intrinsicHeight: number;\n\n    constructor(context: Context, img: SVGSVGElement) {\n        super(context, img);\n        const s = new XMLSerializer();\n        const bounds = parseBounds(context, img);\n        img.setAttribute('width', `${bounds.width}px`);\n        img.setAttribute('height', `${bounds.height}px`);\n\n        this.svg = `data:image/svg+xml,${encodeURIComponent(s.serializeToString(img))}`;\n        this.intrinsicWidth = img.width.baseVal.value;\n        this.intrinsicHeight = img.height.baseVal.value;\n\n        this.context.cache.addImage(this.svg);\n    }\n}\n", "import {ElementContainer} from '../element-container';\nimport {Context} from '../../core/context';\nexport class LIElementContainer extends ElementContainer {\n    readonly value: number;\n\n    constructor(context: Context, element: HTMLLIElement) {\n        super(context, element);\n        this.value = element.value;\n    }\n}\n", "import {ElementContainer} from '../element-container';\nimport {Context} from '../../core/context';\nexport class OLElementContainer extends ElementContainer {\n    readonly start: number;\n    readonly reversed: boolean;\n\n    constructor(context: Context, element: HTMLOListElement) {\n        super(context, element);\n        this.start = element.start;\n        this.reversed = typeof element.reversed === 'boolean' && element.reversed === true;\n    }\n}\n", "import {ElementContainer} from '../element-container';\nimport {BORDER_STYLE} from '../../css/property-descriptors/border-style';\nimport {BACKGROUND_CLIP} from '../../css/property-descriptors/background-clip';\nimport {BACKGROUND_ORIGIN} from '../../css/property-descriptors/background-origin';\nimport {TokenType} from '../../css/syntax/tokenizer';\nimport {LengthPercentageTuple} from '../../css/types/length-percentage';\nimport {Bounds} from '../../css/layout/bounds';\nimport {Context} from '../../core/context';\n\nconst CHECKBOX_BORDER_RADIUS: LengthPercentageTuple = [\n    {\n        type: TokenType.DIMENSION_TOKEN,\n        flags: 0,\n        unit: 'px',\n        number: 3\n    }\n];\n\nconst RADIO_BORDER_RADIUS: LengthPercentageTuple = [\n    {\n        type: TokenType.PERCENTAGE_TOKEN,\n        flags: 0,\n        number: 50\n    }\n];\n\nconst reformatInputBounds = (bounds: Bounds): Bounds => {\n    if (bounds.width > bounds.height) {\n        return new Bounds(bounds.left + (bounds.width - bounds.height) / 2, bounds.top, bounds.height, bounds.height);\n    } else if (bounds.width < bounds.height) {\n        return new Bounds(bounds.left, bounds.top + (bounds.height - bounds.width) / 2, bounds.width, bounds.width);\n    }\n    return bounds;\n};\n\nconst getInputValue = (node: HTMLInputElement): string => {\n    const value = node.type === PASSWORD ? new Array(node.value.length + 1).join('\\u2022') : node.value;\n\n    return value.length === 0 ? node.placeholder || '' : value;\n};\n\nexport const CHECKBOX = 'checkbox';\nexport const RADIO = 'radio';\nexport const PASSWORD = 'password';\nexport const INPUT_COLOR = 0x2a2a2aff;\n\nexport class InputElementContainer extends ElementContainer {\n    readonly type: string;\n    readonly checked: boolean;\n    readonly value: string;\n\n    constructor(context: Context, input: HTMLInputElement) {\n        super(context, input);\n        this.type = input.type.toLowerCase();\n        this.checked = input.checked;\n        this.value = getInputValue(input);\n\n        if (this.type === CHECKBOX || this.type === RADIO) {\n            this.styles.backgroundColor = 0xdededeff;\n            this.styles.borderTopColor =\n                this.styles.borderRightColor =\n                this.styles.borderBottomColor =\n                this.styles.borderLeftColor =\n                    0xa5a5a5ff;\n            this.styles.borderTopWidth =\n                this.styles.borderRightWidth =\n                this.styles.borderBottomWidth =\n                this.styles.borderLeftWidth =\n                    1;\n            this.styles.borderTopStyle =\n                this.styles.borderRightStyle =\n                this.styles.borderBottomStyle =\n                this.styles.borderLeftStyle =\n                    BORDER_STYLE.SOLID;\n            this.styles.backgroundClip = [BACKGROUND_CLIP.BORDER_BOX];\n            this.styles.backgroundOrigin = [BACKGROUND_ORIGIN.BORDER_BOX];\n            this.bounds = reformatInputBounds(this.bounds);\n        }\n\n        switch (this.type) {\n            case CHECKBOX:\n                this.styles.borderTopRightRadius =\n                    this.styles.borderTopLeftRadius =\n                    this.styles.borderBottomRightRadius =\n                    this.styles.borderBottomLeftRadius =\n                        CHECKBOX_BORDER_RADIUS;\n                break;\n            case RADIO:\n                this.styles.borderTopRightRadius =\n                    this.styles.borderTopLeftRadius =\n                    this.styles.borderBottomRightRadius =\n                    this.styles.borderBottomLeftRadius =\n                        RADIO_BORDER_RADIUS;\n                break;\n        }\n    }\n}\n", "import {ElementContainer} from '../element-container';\nimport {Context} from '../../core/context';\nexport class SelectElementContainer extends ElementContainer {\n    readonly value: string;\n    constructor(context: Context, element: HTMLSelectElement) {\n        super(context, element);\n        const option = element.options[element.selectedIndex || 0];\n        this.value = option ? option.text || '' : '';\n    }\n}\n", "import {ElementContainer} from '../element-container';\nimport {Context} from '../../core/context';\nexport class TextareaElementContainer extends ElementContainer {\n    readonly value: string;\n    constructor(context: Context, element: HTMLTextAreaElement) {\n        super(context, element);\n        this.value = element.value;\n    }\n}\n", "import {ElementContainer} from '../element-container';\nimport {parseTree} from '../node-parser';\nimport {Color, parseColor, COLORS, isTransparent} from '../../css/types/color';\nimport {Context} from '../../core/context';\n\nexport class IFrameElementContainer extends ElementContainer {\n    src: string;\n    width: number;\n    height: number;\n    tree?: ElementContainer;\n    backgroundColor: Color;\n\n    constructor(context: Context, iframe: HTMLIFrameElement) {\n        super(context, iframe);\n        this.src = iframe.src;\n        this.width = parseInt(iframe.width, 10) || 0;\n        this.height = parseInt(iframe.height, 10) || 0;\n        this.backgroundColor = this.styles.backgroundColor;\n        try {\n            if (\n                iframe.contentWindow &&\n                iframe.contentWindow.document &&\n                iframe.contentWindow.document.documentElement\n            ) {\n                this.tree = parseTree(context, iframe.contentWindow.document.documentElement);\n\n                // http://www.w3.org/TR/css3-background/#special-backgrounds\n                const documentBackgroundColor = iframe.contentWindow.document.documentElement\n                    ? parseColor(\n                          context,\n                          getComputedStyle(iframe.contentWindow.document.documentElement).backgroundColor as string\n                      )\n                    : COLORS.TRANSPARENT;\n                const bodyBackgroundColor = iframe.contentWindow.document.body\n                    ? parseColor(\n                          context,\n                          getComputedStyle(iframe.contentWindow.document.body).backgroundColor as string\n                      )\n                    : COLORS.TRANSPARENT;\n\n                this.backgroundColor = isTransparent(documentBackgroundColor)\n                    ? isTransparent(bodyBackgroundColor)\n                        ? this.styles.backgroundColor\n                        : bodyBackgroundColor\n                    : documentBackgroundColor;\n            }\n        } catch (e) {}\n    }\n}\n", "import {CSSParsedDeclaration} from '../css';\nimport {ElementContainer, FLAGS} from './element-container';\nimport {TextContainer} from './text-container';\nimport {ImageElementContainer} from './replaced-elements/image-element-container';\nimport {CanvasElementContainer} from './replaced-elements/canvas-element-container';\nimport {SVGElementContainer} from './replaced-elements/svg-element-container';\nimport {LIElementContainer} from './elements/li-element-container';\nimport {OLElementContainer} from './elements/ol-element-container';\nimport {InputElementContainer} from './replaced-elements/input-element-container';\nimport {SelectElementContainer} from './elements/select-element-container';\nimport {TextareaElementContainer} from './elements/textarea-element-container';\nimport {IFrameElementContainer} from './replaced-elements/iframe-element-container';\nimport {Context} from '../core/context';\n\nconst LIST_OWNERS = ['OL', 'UL', 'MENU'];\n\nconst parseNodeTree = (context: Context, node: Node, parent: ElementContainer, root: ElementContainer) => {\n    for (let childNode = node.firstChild, nextNode; childNode; childNode = nextNode) {\n        nextNode = childNode.nextSibling;\n\n        if (isTextNode(childNode) && childNode.data.trim().length > 0) {\n            parent.textNodes.push(new TextContainer(context, childNode, parent.styles));\n        } else if (isElementNode(childNode)) {\n            if (isSlotElement(childNode) && childNode.assignedNodes) {\n                childNode.assignedNodes().forEach((childNode) => parseNodeTree(context, childNode, parent, root));\n            } else {\n                const container = createContainer(context, childNode);\n                if (container.styles.isVisible()) {\n                    if (createsRealStackingContext(childNode, container, root)) {\n                        container.flags |= FLAGS.CREATES_REAL_STACKING_CONTEXT;\n                    } else if (createsStackingContext(container.styles)) {\n                        container.flags |= FLAGS.CREATES_STACKING_CONTEXT;\n                    }\n\n                    if (LIST_OWNERS.indexOf(childNode.tagName) !== -1) {\n                        container.flags |= FLAGS.IS_LIST_OWNER;\n                    }\n\n                    parent.elements.push(container);\n                    childNode.slot;\n                    if (childNode.shadowRoot) {\n                        parseNodeTree(context, childNode.shadowRoot, container, root);\n                    } else if (\n                        !isTextareaElement(childNode) &&\n                        !isSVGElement(childNode) &&\n                        !isSelectElement(childNode)\n                    ) {\n                        parseNodeTree(context, childNode, container, root);\n                    }\n                }\n            }\n        }\n    }\n};\n\nconst createContainer = (context: Context, element: Element): ElementContainer => {\n    if (isImageElement(element)) {\n        return new ImageElementContainer(context, element);\n    }\n\n    if (isCanvasElement(element)) {\n        return new CanvasElementContainer(context, element);\n    }\n\n    if (isSVGElement(element)) {\n        return new SVGElementContainer(context, element);\n    }\n\n    if (isLIElement(element)) {\n        return new LIElementContainer(context, element);\n    }\n\n    if (isOLElement(element)) {\n        return new OLElementContainer(context, element);\n    }\n\n    if (isInputElement(element)) {\n        return new InputElementContainer(context, element);\n    }\n\n    if (isSelectElement(element)) {\n        return new SelectElementContainer(context, element);\n    }\n\n    if (isTextareaElement(element)) {\n        return new TextareaElementContainer(context, element);\n    }\n\n    if (isIFrameElement(element)) {\n        return new IFrameElementContainer(context, element);\n    }\n\n    return new ElementContainer(context, element);\n};\n\nexport const parseTree = (context: Context, element: HTMLElement): ElementContainer => {\n    const container = createContainer(context, element);\n    container.flags |= FLAGS.CREATES_REAL_STACKING_CONTEXT;\n    parseNodeTree(context, element, container, container);\n    return container;\n};\n\nconst createsRealStackingContext = (node: Element, container: ElementContainer, root: ElementContainer): boolean => {\n    return (\n        container.styles.isPositionedWithZIndex() ||\n        container.styles.opacity < 1 ||\n        container.styles.isTransformed() ||\n        (isBodyElement(node) && root.styles.isTransparent())\n    );\n};\n\nconst createsStackingContext = (styles: CSSParsedDeclaration): boolean => styles.isPositioned() || styles.isFloating();\n\nexport const isTextNode = (node: Node): node is Text => node.nodeType === Node.TEXT_NODE;\nexport const isElementNode = (node: Node): node is Element => node.nodeType === Node.ELEMENT_NODE;\nexport const isHTMLElementNode = (node: Node): node is HTMLElement =>\n    isElementNode(node) && typeof (node as HTMLElement).style !== 'undefined' && !isSVGElementNode(node);\nexport const isSVGElementNode = (element: Element): element is SVGElement =>\n    typeof (element as SVGElement).className === 'object';\nexport const isLIElement = (node: Element): node is HTMLLIElement => node.tagName === 'LI';\nexport const isOLElement = (node: Element): node is HTMLOListElement => node.tagName === 'OL';\nexport const isInputElement = (node: Element): node is HTMLInputElement => node.tagName === 'INPUT';\nexport const isHTMLElement = (node: Element): node is HTMLHtmlElement => node.tagName === 'HTML';\nexport const isSVGElement = (node: Element): node is SVGSVGElement => node.tagName === 'svg';\nexport const isBodyElement = (node: Element): node is HTMLBodyElement => node.tagName === 'BODY';\nexport const isCanvasElement = (node: Element): node is HTMLCanvasElement => node.tagName === 'CANVAS';\nexport const isVideoElement = (node: Element): node is HTMLVideoElement => node.tagName === 'VIDEO';\nexport const isImageElement = (node: Element): node is HTMLImageElement => node.tagName === 'IMG';\nexport const isIFrameElement = (node: Element): node is HTMLIFrameElement => node.tagName === 'IFRAME';\nexport const isStyleElement = (node: Element): node is HTMLStyleElement => node.tagName === 'STYLE';\nexport const isScriptElement = (node: Element): node is HTMLScriptElement => node.tagName === 'SCRIPT';\nexport const isTextareaElement = (node: Element): node is HTMLTextAreaElement => node.tagName === 'TEXTAREA';\nexport const isSelectElement = (node: Element): node is HTMLSelectElement => node.tagName === 'SELECT';\nexport const isSlotElement = (node: Element): node is HTMLSlotElement => node.tagName === 'SLOT';\n// https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\nexport const isCustomElement = (node: Element): node is HTMLElement => node.tagName.indexOf('-') > 0;\n", "import {LIST_STYLE_TYPE} from '../../property-descriptors/list-style-type';\nimport {fromCodePoint} from 'css-line-break';\nimport {contains} from '../../../core/bitwise';\nimport {CSSParsedCounterDeclaration} from '../../index';\n\nexport class CounterState {\n    private readonly counters: {[key: string]: number[]} = {};\n\n    getCounterValue(name: string): number {\n        const counter = this.counters[name];\n\n        if (counter && counter.length) {\n            return counter[counter.length - 1];\n        }\n        return 1;\n    }\n\n    getCounterValues(name: string): readonly number[] {\n        const counter = this.counters[name];\n        return counter ? counter : [];\n    }\n\n    pop(counters: string[]): void {\n        counters.forEach((counter) => this.counters[counter].pop());\n    }\n\n    parse(style: CSSParsedCounterDeclaration): string[] {\n        const counterIncrement = style.counterIncrement;\n        const counterReset = style.counterReset;\n        let canReset = true;\n\n        if (counterIncrement !== null) {\n            counterIncrement.forEach((entry) => {\n                const counter = this.counters[entry.counter];\n                if (counter && entry.increment !== 0) {\n                    canReset = false;\n                    if (!counter.length) {\n                        counter.push(1);\n                    }\n                    counter[Math.max(0, counter.length - 1)] += entry.increment;\n                }\n            });\n        }\n\n        const counterNames: string[] = [];\n        if (canReset) {\n            counterReset.forEach((entry) => {\n                let counter = this.counters[entry.counter];\n                counterNames.push(entry.counter);\n                if (!counter) {\n                    counter = this.counters[entry.counter] = [];\n                }\n                counter.push(entry.reset);\n            });\n        }\n\n        return counterNames;\n    }\n}\n\ninterface CounterSymbols {\n    integers: number[];\n    values: string[];\n}\n\nconst ROMAN_UPPER: CounterSymbols = {\n    integers: [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],\n    values: ['M', 'CM', 'D', 'CD', 'C', 'XC', 'L', 'XL', 'X', 'IX', 'V', 'IV', 'I']\n};\n\nconst ARMENIAN: CounterSymbols = {\n    integers: [\n        9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90, 80, 70,\n        60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1\n    ],\n    values: [\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        ''\n    ]\n};\n\nconst HEBREW: CounterSymbols = {\n    integers: [\n        10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20,\n        19, 18, 17, 16, 15, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1\n    ],\n    values: [\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        ''\n    ]\n};\n\nconst GEORGIAN: CounterSymbols = {\n    integers: [\n        10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90,\n        80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1\n    ],\n    values: [\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        ''\n    ]\n};\n\nconst createAdditiveCounter = (\n    value: number,\n    min: number,\n    max: number,\n    symbols: CounterSymbols,\n    fallback: LIST_STYLE_TYPE,\n    suffix: string\n) => {\n    if (value < min || value > max) {\n        return createCounterText(value, fallback, suffix.length > 0);\n    }\n\n    return (\n        symbols.integers.reduce((string, integer, index) => {\n            while (value >= integer) {\n                value -= integer;\n                string += symbols.values[index];\n            }\n            return string;\n        }, '') + suffix\n    );\n};\n\nconst createCounterStyleWithSymbolResolver = (\n    value: number,\n    codePointRangeLength: number,\n    isNumeric: boolean,\n    resolver: (codePoint: number) => string\n): string => {\n    let string = '';\n\n    do {\n        if (!isNumeric) {\n            value--;\n        }\n        string = resolver(value) + string;\n        value /= codePointRangeLength;\n    } while (value * codePointRangeLength >= codePointRangeLength);\n\n    return string;\n};\n\nconst createCounterStyleFromRange = (\n    value: number,\n    codePointRangeStart: number,\n    codePointRangeEnd: number,\n    isNumeric: boolean,\n    suffix: string\n): string => {\n    const codePointRangeLength = codePointRangeEnd - codePointRangeStart + 1;\n\n    return (\n        (value < 0 ? '-' : '') +\n        (createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, isNumeric, (codePoint) =>\n            fromCodePoint(Math.floor(codePoint % codePointRangeLength) + codePointRangeStart)\n        ) +\n            suffix)\n    );\n};\n\nconst createCounterStyleFromSymbols = (value: number, symbols: string, suffix = '. '): string => {\n    const codePointRangeLength = symbols.length;\n    return (\n        createCounterStyleWithSymbolResolver(\n            Math.abs(value),\n            codePointRangeLength,\n            false,\n            (codePoint) => symbols[Math.floor(codePoint % codePointRangeLength)]\n        ) + suffix\n    );\n};\n\nconst CJK_ZEROS = 1 << 0;\nconst CJK_TEN_COEFFICIENTS = 1 << 1;\nconst CJK_TEN_HIGH_COEFFICIENTS = 1 << 2;\nconst CJK_HUNDRED_COEFFICIENTS = 1 << 3;\n\nconst createCJKCounter = (\n    value: number,\n    numbers: string,\n    multipliers: string,\n    negativeSign: string,\n    suffix: string,\n    flags: number\n): string => {\n    if (value < -9999 || value > 9999) {\n        return createCounterText(value, LIST_STYLE_TYPE.CJK_DECIMAL, suffix.length > 0);\n    }\n    let tmp = Math.abs(value);\n    let string = suffix;\n\n    if (tmp === 0) {\n        return numbers[0] + string;\n    }\n\n    for (let digit = 0; tmp > 0 && digit <= 4; digit++) {\n        const coefficient = tmp % 10;\n\n        if (coefficient === 0 && contains(flags, CJK_ZEROS) && string !== '') {\n            string = numbers[coefficient] + string;\n        } else if (\n            coefficient > 1 ||\n            (coefficient === 1 && digit === 0) ||\n            (coefficient === 1 && digit === 1 && contains(flags, CJK_TEN_COEFFICIENTS)) ||\n            (coefficient === 1 && digit === 1 && contains(flags, CJK_TEN_HIGH_COEFFICIENTS) && value > 100) ||\n            (coefficient === 1 && digit > 1 && contains(flags, CJK_HUNDRED_COEFFICIENTS))\n        ) {\n            string = numbers[coefficient] + (digit > 0 ? multipliers[digit - 1] : '') + string;\n        } else if (coefficient === 1 && digit > 0) {\n            string = multipliers[digit - 1] + string;\n        }\n        tmp = Math.floor(tmp / 10);\n    }\n\n    return (value < 0 ? negativeSign : '') + string;\n};\n\nconst CHINESE_INFORMAL_MULTIPLIERS = '';\nconst CHINESE_FORMAL_MULTIPLIERS = '';\nconst JAPANESE_NEGATIVE = '';\nconst KOREAN_NEGATIVE = '';\n\nexport const createCounterText = (value: number, type: LIST_STYLE_TYPE, appendSuffix: boolean): string => {\n    const defaultSuffix = appendSuffix ? '. ' : '';\n    const cjkSuffix = appendSuffix ? '' : '';\n    const koreanSuffix = appendSuffix ? ', ' : '';\n    const spaceSuffix = appendSuffix ? ' ' : '';\n    switch (type) {\n        case LIST_STYLE_TYPE.DISC:\n            return '' + spaceSuffix;\n        case LIST_STYLE_TYPE.CIRCLE:\n            return '' + spaceSuffix;\n        case LIST_STYLE_TYPE.SQUARE:\n            return '' + spaceSuffix;\n        case LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:\n            const string = createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);\n            return string.length < 4 ? `0${string}` : string;\n        case LIST_STYLE_TYPE.CJK_DECIMAL:\n            return createCounterStyleFromSymbols(value, '', cjkSuffix);\n        case LIST_STYLE_TYPE.LOWER_ROMAN:\n            return createAdditiveCounter(\n                value,\n                1,\n                3999,\n                ROMAN_UPPER,\n                LIST_STYLE_TYPE.DECIMAL,\n                defaultSuffix\n            ).toLowerCase();\n        case LIST_STYLE_TYPE.UPPER_ROMAN:\n            return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);\n        case LIST_STYLE_TYPE.LOWER_GREEK:\n            return createCounterStyleFromRange(value, 945, 969, false, defaultSuffix);\n        case LIST_STYLE_TYPE.LOWER_ALPHA:\n            return createCounterStyleFromRange(value, 97, 122, false, defaultSuffix);\n        case LIST_STYLE_TYPE.UPPER_ALPHA:\n            return createCounterStyleFromRange(value, 65, 90, false, defaultSuffix);\n        case LIST_STYLE_TYPE.ARABIC_INDIC:\n            return createCounterStyleFromRange(value, 1632, 1641, true, defaultSuffix);\n        case LIST_STYLE_TYPE.ARMENIAN:\n        case LIST_STYLE_TYPE.UPPER_ARMENIAN:\n            return createAdditiveCounter(value, 1, 9999, ARMENIAN, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);\n        case LIST_STYLE_TYPE.LOWER_ARMENIAN:\n            return createAdditiveCounter(\n                value,\n                1,\n                9999,\n                ARMENIAN,\n                LIST_STYLE_TYPE.DECIMAL,\n                defaultSuffix\n            ).toLowerCase();\n        case LIST_STYLE_TYPE.BENGALI:\n            return createCounterStyleFromRange(value, 2534, 2543, true, defaultSuffix);\n        case LIST_STYLE_TYPE.CAMBODIAN:\n        case LIST_STYLE_TYPE.KHMER:\n            return createCounterStyleFromRange(value, 6112, 6121, true, defaultSuffix);\n        case LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:\n            return createCounterStyleFromSymbols(value, '', cjkSuffix);\n        case LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:\n            return createCounterStyleFromSymbols(value, '', cjkSuffix);\n        case LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:\n        case LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:\n            return createCJKCounter(\n                value,\n                '',\n                CHINESE_INFORMAL_MULTIPLIERS,\n                '',\n                cjkSuffix,\n                CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:\n            return createCJKCounter(\n                value,\n                '',\n                CHINESE_FORMAL_MULTIPLIERS,\n                '',\n                cjkSuffix,\n                CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:\n            return createCJKCounter(\n                value,\n                '',\n                CHINESE_INFORMAL_MULTIPLIERS,\n                '',\n                cjkSuffix,\n                CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:\n            return createCJKCounter(\n                value,\n                '',\n                CHINESE_FORMAL_MULTIPLIERS,\n                '',\n                cjkSuffix,\n                CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.JAPANESE_INFORMAL:\n            return createCJKCounter(value, '', '', JAPANESE_NEGATIVE, cjkSuffix, 0);\n        case LIST_STYLE_TYPE.JAPANESE_FORMAL:\n            return createCJKCounter(\n                value,\n                '',\n                '',\n                JAPANESE_NEGATIVE,\n                cjkSuffix,\n                CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:\n            return createCJKCounter(\n                value,\n                '',\n                '',\n                KOREAN_NEGATIVE,\n                koreanSuffix,\n                CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:\n            return createCJKCounter(value, '', '', KOREAN_NEGATIVE, koreanSuffix, 0);\n        case LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:\n            return createCJKCounter(\n                value,\n                '',\n                '',\n                KOREAN_NEGATIVE,\n                koreanSuffix,\n                CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS\n            );\n        case LIST_STYLE_TYPE.DEVANAGARI:\n            return createCounterStyleFromRange(value, 0x966, 0x96f, true, defaultSuffix);\n        case LIST_STYLE_TYPE.GEORGIAN:\n            return createAdditiveCounter(value, 1, 19999, GEORGIAN, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);\n        case LIST_STYLE_TYPE.GUJARATI:\n            return createCounterStyleFromRange(value, 0xae6, 0xaef, true, defaultSuffix);\n        case LIST_STYLE_TYPE.GURMUKHI:\n            return createCounterStyleFromRange(value, 0xa66, 0xa6f, true, defaultSuffix);\n        case LIST_STYLE_TYPE.HEBREW:\n            return createAdditiveCounter(value, 1, 10999, HEBREW, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);\n        case LIST_STYLE_TYPE.HIRAGANA:\n            return createCounterStyleFromSymbols(\n                value,\n                ''\n            );\n        case LIST_STYLE_TYPE.HIRAGANA_IROHA:\n            return createCounterStyleFromSymbols(\n                value,\n                ''\n            );\n        case LIST_STYLE_TYPE.KANNADA:\n            return createCounterStyleFromRange(value, 0xce6, 0xcef, true, defaultSuffix);\n        case LIST_STYLE_TYPE.KATAKANA:\n            return createCounterStyleFromSymbols(\n                value,\n                '',\n                cjkSuffix\n            );\n        case LIST_STYLE_TYPE.KATAKANA_IROHA:\n            return createCounterStyleFromSymbols(\n                value,\n                '',\n                cjkSuffix\n            );\n        case LIST_STYLE_TYPE.LAO:\n            return createCounterStyleFromRange(value, 0xed0, 0xed9, true, defaultSuffix);\n        case LIST_STYLE_TYPE.MONGOLIAN:\n            return createCounterStyleFromRange(value, 0x1810, 0x1819, true, defaultSuffix);\n        case LIST_STYLE_TYPE.MYANMAR:\n            return createCounterStyleFromRange(value, 0x1040, 0x1049, true, defaultSuffix);\n        case LIST_STYLE_TYPE.ORIYA:\n            return createCounterStyleFromRange(value, 0xb66, 0xb6f, true, defaultSuffix);\n        case LIST_STYLE_TYPE.PERSIAN:\n            return createCounterStyleFromRange(value, 0x6f0, 0x6f9, true, defaultSuffix);\n        case LIST_STYLE_TYPE.TAMIL:\n            return createCounterStyleFromRange(value, 0xbe6, 0xbef, true, defaultSuffix);\n        case LIST_STYLE_TYPE.TELUGU:\n            return createCounterStyleFromRange(value, 0xc66, 0xc6f, true, defaultSuffix);\n        case LIST_STYLE_TYPE.THAI:\n            return createCounterStyleFromRange(value, 0xe50, 0xe59, true, defaultSuffix);\n        case LIST_STYLE_TYPE.TIBETAN:\n            return createCounterStyleFromRange(value, 0xf20, 0xf29, true, defaultSuffix);\n        case LIST_STYLE_TYPE.DECIMAL:\n        default:\n            return createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);\n    }\n};\n", "import {Bounds} from '../css/layout/bounds';\nimport {\n    isBodyElement,\n    isCanvasElement,\n    isCustomElement,\n    isElementNode,\n    isHTMLElementNode,\n    isIFrameElement,\n    isImageElement,\n    isScriptElement,\n    isSelectElement,\n    isSlotElement,\n    isStyleElement,\n    isSVGElementNode,\n    isTextareaElement,\n    isTextNode,\n    isVideoElement\n} from './node-parser';\nimport {isIdentToken, nonFunctionArgSeparator} from '../css/syntax/parser';\nimport {TokenType} from '../css/syntax/tokenizer';\nimport {CounterState, createCounterText} from '../css/types/functions/counter';\nimport {LIST_STYLE_TYPE, listStyleType} from '../css/property-descriptors/list-style-type';\nimport {CSSParsedCounterDeclaration, CSSParsedPseudoDeclaration} from '../css/index';\nimport {getQuote} from '../css/property-descriptors/quotes';\nimport {Context} from '../core/context';\nimport {DebuggerType, isDebugging} from '../core/debugger';\n\nexport interface CloneOptions {\n    ignoreElements?: (element: Element) => boolean;\n    onclone?: (document: Document, element: HTMLElement) => void;\n    allowTaint?: boolean;\n}\n\nexport interface WindowOptions {\n    scrollX: number;\n    scrollY: number;\n    windowWidth: number;\n    windowHeight: number;\n}\n\nexport type CloneConfigurations = CloneOptions & {\n    inlineImages: boolean;\n    copyStyles: boolean;\n};\n\nconst IGNORE_ATTRIBUTE = 'data-html2canvas-ignore';\n\nexport class DocumentCloner {\n    private readonly scrolledElements: [Element, number, number][];\n    private readonly referenceElement: HTMLElement;\n    clonedReferenceElement?: HTMLElement;\n    private readonly documentElement: HTMLElement;\n    private readonly counters: CounterState;\n    private quoteDepth: number;\n\n    constructor(\n        private readonly context: Context,\n        element: HTMLElement,\n        private readonly options: CloneConfigurations\n    ) {\n        this.scrolledElements = [];\n        this.referenceElement = element;\n        this.counters = new CounterState();\n        this.quoteDepth = 0;\n        if (!element.ownerDocument) {\n            throw new Error('Cloned element does not have an owner document');\n        }\n\n        this.documentElement = this.cloneNode(element.ownerDocument.documentElement, false) as HTMLElement;\n    }\n\n    toIFrame(ownerDocument: Document, windowSize: Bounds): Promise<HTMLIFrameElement> {\n        const iframe: HTMLIFrameElement = createIFrameContainer(ownerDocument, windowSize);\n\n        if (!iframe.contentWindow) {\n            return Promise.reject(`Unable to find iframe window`);\n        }\n\n        const scrollX = (ownerDocument.defaultView as Window).pageXOffset;\n        const scrollY = (ownerDocument.defaultView as Window).pageYOffset;\n\n        const cloneWindow = iframe.contentWindow;\n        const documentClone: Document = cloneWindow.document;\n\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n         if window url is about:blank, we can assign the url to current by writing onto the document\n         */\n\n        const iframeLoad = iframeLoader(iframe).then(async () => {\n            this.scrolledElements.forEach(restoreNodeScroll);\n            if (cloneWindow) {\n                cloneWindow.scrollTo(windowSize.left, windowSize.top);\n                if (\n                    /(iPad|iPhone|iPod)/g.test(navigator.userAgent) &&\n                    (cloneWindow.scrollY !== windowSize.top || cloneWindow.scrollX !== windowSize.left)\n                ) {\n                    this.context.logger.warn('Unable to restore scroll position for cloned document');\n                    this.context.windowBounds = this.context.windowBounds.add(\n                        cloneWindow.scrollX - windowSize.left,\n                        cloneWindow.scrollY - windowSize.top,\n                        0,\n                        0\n                    );\n                }\n            }\n\n            const onclone = this.options.onclone;\n\n            const referenceElement = this.clonedReferenceElement;\n\n            if (typeof referenceElement === 'undefined') {\n                return Promise.reject(`Error finding the ${this.referenceElement.nodeName} in the cloned document`);\n            }\n\n            if (documentClone.fonts && documentClone.fonts.ready) {\n                await documentClone.fonts.ready;\n            }\n\n            if (/(AppleWebKit)/g.test(navigator.userAgent)) {\n                await imagesReady(documentClone);\n            }\n\n            if (typeof onclone === 'function') {\n                return Promise.resolve()\n                    .then(() => onclone(documentClone, referenceElement))\n                    .then(() => iframe);\n            }\n\n            return iframe;\n        });\n\n        documentClone.open();\n        documentClone.write(`${serializeDoctype(document.doctype)}<html></html>`);\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\n        restoreOwnerScroll(this.referenceElement.ownerDocument, scrollX, scrollY);\n        documentClone.replaceChild(documentClone.adoptNode(this.documentElement), documentClone.documentElement);\n        documentClone.close();\n\n        return iframeLoad;\n    }\n\n    createElementClone<T extends HTMLElement | SVGElement>(node: T): HTMLElement | SVGElement {\n        if (isDebugging(node, DebuggerType.CLONE)) {\n            debugger;\n        }\n        if (isCanvasElement(node)) {\n            return this.createCanvasClone(node);\n        }\n        if (isVideoElement(node)) {\n            return this.createVideoClone(node);\n        }\n        if (isStyleElement(node)) {\n            return this.createStyleClone(node);\n        }\n\n        const clone = node.cloneNode(false) as T;\n        if (isImageElement(clone)) {\n            if (isImageElement(node) && node.currentSrc && node.currentSrc !== node.src) {\n                clone.src = node.currentSrc;\n                clone.srcset = '';\n            }\n\n            if (clone.loading === 'lazy') {\n                clone.loading = 'eager';\n            }\n        }\n\n        if (isCustomElement(clone)) {\n            return this.createCustomElementClone(clone);\n        }\n\n        return clone;\n    }\n\n    createCustomElementClone(node: HTMLElement): HTMLElement {\n        const clone = document.createElement('html2canvascustomelement');\n        copyCSSStyles(node.style, clone);\n\n        return clone;\n    }\n\n    createStyleClone(node: HTMLStyleElement): HTMLStyleElement {\n        try {\n            const sheet = node.sheet as CSSStyleSheet | undefined;\n            if (sheet && sheet.cssRules) {\n                const css: string = [].slice.call(sheet.cssRules, 0).reduce((css: string, rule: CSSRule) => {\n                    if (rule && typeof rule.cssText === 'string') {\n                        return css + rule.cssText;\n                    }\n                    return css;\n                }, '');\n                const style = node.cloneNode(false) as HTMLStyleElement;\n                style.textContent = css;\n                return style;\n            }\n        } catch (e) {\n            // accessing node.sheet.cssRules throws a DOMException\n            this.context.logger.error('Unable to access cssRules property', e);\n            if (e.name !== 'SecurityError') {\n                throw e;\n            }\n        }\n        return node.cloneNode(false) as HTMLStyleElement;\n    }\n\n    createCanvasClone(canvas: HTMLCanvasElement): HTMLImageElement | HTMLCanvasElement {\n        if (this.options.inlineImages && canvas.ownerDocument) {\n            const img = canvas.ownerDocument.createElement('img');\n            try {\n                img.src = canvas.toDataURL();\n                return img;\n            } catch (e) {\n                this.context.logger.info(`Unable to inline canvas contents, canvas is tainted`, canvas);\n            }\n        }\n\n        const clonedCanvas = canvas.cloneNode(false) as HTMLCanvasElement;\n\n        try {\n            clonedCanvas.width = canvas.width;\n            clonedCanvas.height = canvas.height;\n            const ctx = canvas.getContext('2d');\n            const clonedCtx = clonedCanvas.getContext('2d');\n            if (clonedCtx) {\n                if (!this.options.allowTaint && ctx) {\n                    clonedCtx.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n                } else {\n                    const gl = canvas.getContext('webgl2') ?? canvas.getContext('webgl');\n                    if (gl) {\n                        const attribs = gl.getContextAttributes();\n                        if (attribs?.preserveDrawingBuffer === false) {\n                            this.context.logger.warn(\n                                'Unable to clone WebGL context as it has preserveDrawingBuffer=false',\n                                canvas\n                            );\n                        }\n                    }\n\n                    clonedCtx.drawImage(canvas, 0, 0);\n                }\n            }\n            return clonedCanvas;\n        } catch (e) {\n            this.context.logger.info(`Unable to clone canvas as it is tainted`, canvas);\n        }\n\n        return clonedCanvas;\n    }\n\n    createVideoClone(video: HTMLVideoElement): HTMLCanvasElement {\n        const canvas = video.ownerDocument.createElement('canvas');\n\n        canvas.width = video.offsetWidth;\n        canvas.height = video.offsetHeight;\n        const ctx = canvas.getContext('2d');\n\n        try {\n            if (ctx) {\n                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n                if (!this.options.allowTaint) {\n                    ctx.getImageData(0, 0, canvas.width, canvas.height);\n                }\n            }\n            return canvas;\n        } catch (e) {\n            this.context.logger.info(`Unable to clone video as it is tainted`, video);\n        }\n\n        const blankCanvas = video.ownerDocument.createElement('canvas');\n\n        blankCanvas.width = video.offsetWidth;\n        blankCanvas.height = video.offsetHeight;\n        return blankCanvas;\n    }\n\n    appendChildNode(clone: HTMLElement | SVGElement, child: Node, copyStyles: boolean): void {\n        if (\n            !isElementNode(child) ||\n            (!isScriptElement(child) &&\n                !child.hasAttribute(IGNORE_ATTRIBUTE) &&\n                (typeof this.options.ignoreElements !== 'function' || !this.options.ignoreElements(child)))\n        ) {\n            if (!this.options.copyStyles || !isElementNode(child) || !isStyleElement(child)) {\n                clone.appendChild(this.cloneNode(child, copyStyles));\n            }\n        }\n    }\n\n    cloneChildNodes(node: Element, clone: HTMLElement | SVGElement, copyStyles: boolean): void {\n        for (\n            let child = node.shadowRoot ? node.shadowRoot.firstChild : node.firstChild;\n            child;\n            child = child.nextSibling\n        ) {\n            if (isElementNode(child) && isSlotElement(child) && typeof child.assignedNodes === 'function') {\n                const assignedNodes = child.assignedNodes() as ChildNode[];\n                if (assignedNodes.length) {\n                    assignedNodes.forEach((assignedNode) => this.appendChildNode(clone, assignedNode, copyStyles));\n                }\n            } else {\n                this.appendChildNode(clone, child, copyStyles);\n            }\n        }\n    }\n\n    cloneNode(node: Node, copyStyles: boolean): Node {\n        if (isTextNode(node)) {\n            return document.createTextNode(node.data);\n        }\n\n        if (!node.ownerDocument) {\n            return node.cloneNode(false);\n        }\n\n        const window = node.ownerDocument.defaultView;\n\n        if (window && isElementNode(node) && (isHTMLElementNode(node) || isSVGElementNode(node))) {\n            const clone = this.createElementClone(node);\n            clone.style.transitionProperty = 'none';\n\n            const style = window.getComputedStyle(node);\n            const styleBefore = window.getComputedStyle(node, ':before');\n            const styleAfter = window.getComputedStyle(node, ':after');\n\n            if (this.referenceElement === node && isHTMLElementNode(clone)) {\n                this.clonedReferenceElement = clone;\n            }\n            if (isBodyElement(clone)) {\n                createPseudoHideStyles(clone);\n            }\n\n            const counters = this.counters.parse(new CSSParsedCounterDeclaration(this.context, style));\n            const before = this.resolvePseudoContent(node, clone, styleBefore, PseudoElementType.BEFORE);\n\n            if (isCustomElement(node)) {\n                copyStyles = true;\n            }\n\n            if (!isVideoElement(node)) {\n                this.cloneChildNodes(node, clone, copyStyles);\n            }\n\n            if (before) {\n                clone.insertBefore(before, clone.firstChild);\n            }\n\n            const after = this.resolvePseudoContent(node, clone, styleAfter, PseudoElementType.AFTER);\n            if (after) {\n                clone.appendChild(after);\n            }\n\n            this.counters.pop(counters);\n\n            if (\n                (style && (this.options.copyStyles || isSVGElementNode(node)) && !isIFrameElement(node)) ||\n                copyStyles\n            ) {\n                copyCSSStyles(style, clone);\n            }\n\n            if (node.scrollTop !== 0 || node.scrollLeft !== 0) {\n                this.scrolledElements.push([clone, node.scrollLeft, node.scrollTop]);\n            }\n\n            if (\n                (isTextareaElement(node) || isSelectElement(node)) &&\n                (isTextareaElement(clone) || isSelectElement(clone))\n            ) {\n                clone.value = node.value;\n            }\n\n            return clone;\n        }\n\n        return node.cloneNode(false);\n    }\n\n    resolvePseudoContent(\n        node: Element,\n        clone: Element,\n        style: CSSStyleDeclaration,\n        pseudoElt: PseudoElementType\n    ): HTMLElement | void {\n        if (!style) {\n            return;\n        }\n\n        const value = style.content;\n        const document = clone.ownerDocument;\n        if (!document || !value || value === 'none' || value === '-moz-alt-content' || style.display === 'none') {\n            return;\n        }\n\n        this.counters.parse(new CSSParsedCounterDeclaration(this.context, style));\n        const declaration = new CSSParsedPseudoDeclaration(this.context, style);\n\n        const anonymousReplacedElement = document.createElement('html2canvaspseudoelement');\n        copyCSSStyles(style, anonymousReplacedElement);\n\n        declaration.content.forEach((token) => {\n            if (token.type === TokenType.STRING_TOKEN) {\n                anonymousReplacedElement.appendChild(document.createTextNode(token.value));\n            } else if (token.type === TokenType.URL_TOKEN) {\n                const img = document.createElement('img');\n                img.src = token.value;\n                img.style.opacity = '1';\n                anonymousReplacedElement.appendChild(img);\n            } else if (token.type === TokenType.FUNCTION) {\n                if (token.name === 'attr') {\n                    const attr = token.values.filter(isIdentToken);\n                    if (attr.length) {\n                        anonymousReplacedElement.appendChild(\n                            document.createTextNode(node.getAttribute(attr[0].value) || '')\n                        );\n                    }\n                } else if (token.name === 'counter') {\n                    const [counter, counterStyle] = token.values.filter(nonFunctionArgSeparator);\n                    if (counter && isIdentToken(counter)) {\n                        const counterState = this.counters.getCounterValue(counter.value);\n                        const counterType =\n                            counterStyle && isIdentToken(counterStyle)\n                                ? listStyleType.parse(this.context, counterStyle.value)\n                                : LIST_STYLE_TYPE.DECIMAL;\n\n                        anonymousReplacedElement.appendChild(\n                            document.createTextNode(createCounterText(counterState, counterType, false))\n                        );\n                    }\n                } else if (token.name === 'counters') {\n                    const [counter, delim, counterStyle] = token.values.filter(nonFunctionArgSeparator);\n                    if (counter && isIdentToken(counter)) {\n                        const counterStates = this.counters.getCounterValues(counter.value);\n                        const counterType =\n                            counterStyle && isIdentToken(counterStyle)\n                                ? listStyleType.parse(this.context, counterStyle.value)\n                                : LIST_STYLE_TYPE.DECIMAL;\n                        const separator = delim && delim.type === TokenType.STRING_TOKEN ? delim.value : '';\n                        const text = counterStates\n                            .map((value) => createCounterText(value, counterType, false))\n                            .join(separator);\n\n                        anonymousReplacedElement.appendChild(document.createTextNode(text));\n                    }\n                } else {\n                    //   console.log('FUNCTION_TOKEN', token);\n                }\n            } else if (token.type === TokenType.IDENT_TOKEN) {\n                switch (token.value) {\n                    case 'open-quote':\n                        anonymousReplacedElement.appendChild(\n                            document.createTextNode(getQuote(declaration.quotes, this.quoteDepth++, true))\n                        );\n                        break;\n                    case 'close-quote':\n                        anonymousReplacedElement.appendChild(\n                            document.createTextNode(getQuote(declaration.quotes, --this.quoteDepth, false))\n                        );\n                        break;\n                    default:\n                        // safari doesn't parse string tokens correctly because of lack of quotes\n                        anonymousReplacedElement.appendChild(document.createTextNode(token.value));\n                }\n            }\n        });\n\n        anonymousReplacedElement.className = `${PSEUDO_HIDE_ELEMENT_CLASS_BEFORE} ${PSEUDO_HIDE_ELEMENT_CLASS_AFTER}`;\n        const newClassName =\n            pseudoElt === PseudoElementType.BEFORE\n                ? ` ${PSEUDO_HIDE_ELEMENT_CLASS_BEFORE}`\n                : ` ${PSEUDO_HIDE_ELEMENT_CLASS_AFTER}`;\n\n        if (isSVGElementNode(clone)) {\n            clone.className.baseValue += newClassName;\n        } else {\n            clone.className += newClassName;\n        }\n\n        return anonymousReplacedElement;\n    }\n\n    static destroy(container: HTMLIFrameElement): boolean {\n        if (container.parentNode) {\n            container.parentNode.removeChild(container);\n            return true;\n        }\n        return false;\n    }\n}\n\nenum PseudoElementType {\n    BEFORE,\n    AFTER\n}\n\nconst createIFrameContainer = (ownerDocument: Document, bounds: Bounds): HTMLIFrameElement => {\n    const cloneIframeContainer = ownerDocument.createElement('iframe');\n\n    cloneIframeContainer.className = 'html2canvas-container';\n    cloneIframeContainer.style.visibility = 'hidden';\n    cloneIframeContainer.style.position = 'fixed';\n    cloneIframeContainer.style.left = '-10000px';\n    cloneIframeContainer.style.top = '0px';\n    cloneIframeContainer.style.border = '0';\n    cloneIframeContainer.width = bounds.width.toString();\n    cloneIframeContainer.height = bounds.height.toString();\n    cloneIframeContainer.scrolling = 'no'; // ios won't scroll without it\n    cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, 'true');\n    ownerDocument.body.appendChild(cloneIframeContainer);\n\n    return cloneIframeContainer;\n};\n\nconst imageReady = (img: HTMLImageElement): Promise<Event | void | string> => {\n    return new Promise((resolve) => {\n        if (img.complete) {\n            resolve();\n            return;\n        }\n        if (!img.src) {\n            resolve();\n            return;\n        }\n        img.onload = resolve;\n        img.onerror = resolve;\n    });\n};\n\nconst imagesReady = (document: HTMLDocument): Promise<unknown[]> => {\n    return Promise.all([].slice.call(document.images, 0).map(imageReady));\n};\n\nconst iframeLoader = (iframe: HTMLIFrameElement): Promise<HTMLIFrameElement> => {\n    return new Promise((resolve, reject) => {\n        const cloneWindow = iframe.contentWindow;\n\n        if (!cloneWindow) {\n            return reject(`No window assigned for iframe`);\n        }\n\n        const documentClone = cloneWindow.document;\n\n        cloneWindow.onload = iframe.onload = () => {\n            cloneWindow.onload = iframe.onload = null;\n            const interval = setInterval(() => {\n                if (documentClone.body.childNodes.length > 0 && documentClone.readyState === 'complete') {\n                    clearInterval(interval);\n                    resolve(iframe);\n                }\n            }, 50);\n        };\n    });\n};\n\nconst ignoredStyleProperties = [\n    'all', // #2476\n    'd', // #2483\n    'content' // Safari shows pseudoelements if content is set\n];\n\nexport const copyCSSStyles = <T extends HTMLElement | SVGElement>(style: CSSStyleDeclaration, target: T): T => {\n    // Edge does not provide value for cssText\n    for (let i = style.length - 1; i >= 0; i--) {\n        const property = style.item(i);\n        if (ignoredStyleProperties.indexOf(property) === -1) {\n            target.style.setProperty(property, style.getPropertyValue(property));\n        }\n    }\n    return target;\n};\n\nconst serializeDoctype = (doctype?: DocumentType | null): string => {\n    let str = '';\n    if (doctype) {\n        str += '<!DOCTYPE ';\n        if (doctype.name) {\n            str += doctype.name;\n        }\n\n        if (doctype.internalSubset) {\n            str += doctype.internalSubset;\n        }\n\n        if (doctype.publicId) {\n            str += `\"${doctype.publicId}\"`;\n        }\n\n        if (doctype.systemId) {\n            str += `\"${doctype.systemId}\"`;\n        }\n\n        str += '>';\n    }\n\n    return str;\n};\n\nconst restoreOwnerScroll = (ownerDocument: Document | null, x: number, y: number) => {\n    if (\n        ownerDocument &&\n        ownerDocument.defaultView &&\n        (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)\n    ) {\n        ownerDocument.defaultView.scrollTo(x, y);\n    }\n};\n\nconst restoreNodeScroll = ([element, x, y]: [HTMLElement, number, number]) => {\n    element.scrollLeft = x;\n    element.scrollTop = y;\n};\n\nconst PSEUDO_BEFORE = ':before';\nconst PSEUDO_AFTER = ':after';\nconst PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = '___html2canvas___pseudoelement_before';\nconst PSEUDO_HIDE_ELEMENT_CLASS_AFTER = '___html2canvas___pseudoelement_after';\n\nconst PSEUDO_HIDE_ELEMENT_STYLE = `{\n    content: \"\" !important;\n    display: none !important;\n}`;\n\nconst createPseudoHideStyles = (body: HTMLElement) => {\n    createStyles(\n        body,\n        `.${PSEUDO_HIDE_ELEMENT_CLASS_BEFORE}${PSEUDO_BEFORE}${PSEUDO_HIDE_ELEMENT_STYLE}\n         .${PSEUDO_HIDE_ELEMENT_CLASS_AFTER}${PSEUDO_AFTER}${PSEUDO_HIDE_ELEMENT_STYLE}`\n    );\n};\n\nconst createStyles = (body: HTMLElement, styles: string) => {\n    const document = body.ownerDocument;\n    if (document) {\n        const style = document.createElement('style');\n        style.textContent = styles;\n        body.appendChild(style);\n    }\n};\n", "import {FEATURES} from './features';\nimport {Context} from './context';\n\nexport class CacheStorage {\n    private static _link?: HTMLAnchorElement;\n    private static _origin = 'about:blank';\n\n    static getOrigin(url: string): string {\n        const link = CacheStorage._link;\n        if (!link) {\n            return 'about:blank';\n        }\n\n        link.href = url;\n        link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\n        return link.protocol + link.hostname + link.port;\n    }\n\n    static isSameOrigin(src: string): boolean {\n        return CacheStorage.getOrigin(src) === CacheStorage._origin;\n    }\n\n    static setContext(window: Window): void {\n        CacheStorage._link = window.document.createElement('a');\n        CacheStorage._origin = CacheStorage.getOrigin(window.location.href);\n    }\n}\n\nexport interface ResourceOptions {\n    imageTimeout: number;\n    useCORS: boolean;\n    allowTaint: boolean;\n    proxy?: string;\n}\n\nexport class Cache {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private readonly _cache: {[key: string]: Promise<any>} = {};\n\n    constructor(private readonly context: Context, private readonly _options: ResourceOptions) {}\n\n    addImage(src: string): Promise<void> {\n        const result = Promise.resolve();\n        if (this.has(src)) {\n            return result;\n        }\n\n        if (isBlobImage(src) || isRenderable(src)) {\n            (this._cache[src] = this.loadImage(src)).catch(() => {\n                // prevent unhandled rejection\n            });\n            return result;\n        }\n\n        return result;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    match(src: string): Promise<any> {\n        return this._cache[src];\n    }\n\n    private async loadImage(key: string) {\n        const isSameOrigin = CacheStorage.isSameOrigin(key);\n        const useCORS =\n            !isInlineImage(key) && this._options.useCORS === true && FEATURES.SUPPORT_CORS_IMAGES && !isSameOrigin;\n        const useProxy =\n            !isInlineImage(key) &&\n            !isSameOrigin &&\n            !isBlobImage(key) &&\n            typeof this._options.proxy === 'string' &&\n            FEATURES.SUPPORT_CORS_XHR &&\n            !useCORS;\n        if (\n            !isSameOrigin &&\n            this._options.allowTaint === false &&\n            !isInlineImage(key) &&\n            !isBlobImage(key) &&\n            !useProxy &&\n            !useCORS\n        ) {\n            return;\n        }\n\n        let src = key;\n        if (useProxy) {\n            src = await this.proxy(src);\n        }\n\n        this.context.logger.debug(`Added image ${key.substring(0, 256)}`);\n\n        return await new Promise((resolve, reject) => {\n            const img = new Image();\n            img.onload = () => resolve(img);\n            img.onerror = reject;\n            //ios safari 10.3 taints canvas with data urls unless crossOrigin is set to anonymous\n            if (isInlineBase64Image(src) || useCORS) {\n                img.crossOrigin = 'anonymous';\n            }\n            img.src = src;\n            if (img.complete === true) {\n                // Inline XML images may fail to parse, throwing an Error later on\n                setTimeout(() => resolve(img), 500);\n            }\n            if (this._options.imageTimeout > 0) {\n                setTimeout(\n                    () => reject(`Timed out (${this._options.imageTimeout}ms) loading image`),\n                    this._options.imageTimeout\n                );\n            }\n        });\n    }\n\n    private has(key: string): boolean {\n        return typeof this._cache[key] !== 'undefined';\n    }\n\n    keys(): Promise<string[]> {\n        return Promise.resolve(Object.keys(this._cache));\n    }\n\n    private proxy(src: string): Promise<string> {\n        const proxy = this._options.proxy;\n\n        if (!proxy) {\n            throw new Error('No proxy defined');\n        }\n\n        const key = src.substring(0, 256);\n\n        return new Promise((resolve, reject) => {\n            const responseType = FEATURES.SUPPORT_RESPONSE_TYPE ? 'blob' : 'text';\n            const xhr = new XMLHttpRequest();\n            xhr.onload = () => {\n                if (xhr.status === 200) {\n                    if (responseType === 'text') {\n                        resolve(xhr.response);\n                    } else {\n                        const reader = new FileReader();\n                        reader.addEventListener('load', () => resolve(reader.result as string), false);\n                        reader.addEventListener('error', (e) => reject(e), false);\n                        reader.readAsDataURL(xhr.response);\n                    }\n                } else {\n                    reject(`Failed to proxy resource ${key} with status code ${xhr.status}`);\n                }\n            };\n\n            xhr.onerror = reject;\n            const queryString = proxy.indexOf('?') > -1 ? '&' : '?';\n            xhr.open('GET', `${proxy}${queryString}url=${encodeURIComponent(src)}&responseType=${responseType}`);\n\n            if (responseType !== 'text' && xhr instanceof XMLHttpRequest) {\n                xhr.responseType = responseType;\n            }\n\n            if (this._options.imageTimeout) {\n                const timeout = this._options.imageTimeout;\n                xhr.timeout = timeout;\n                xhr.ontimeout = () => reject(`Timed out (${timeout}ms) proxying ${key}`);\n            }\n\n            xhr.send();\n        });\n    }\n}\n\nconst INLINE_SVG = /^data:image\\/svg\\+xml/i;\nconst INLINE_BASE64 = /^data:image\\/.*;base64,/i;\nconst INLINE_IMG = /^data:image\\/.*/i;\n\nconst isRenderable = (src: string): boolean => FEATURES.SUPPORT_SVG_DRAWING || !isSVG(src);\nconst isInlineImage = (src: string): boolean => INLINE_IMG.test(src);\nconst isInlineBase64Image = (src: string): boolean => INLINE_BASE64.test(src);\nconst isBlobImage = (src: string): boolean => src.substr(0, 4) === 'blob';\n\nconst isSVG = (src: string): boolean => src.substr(-3).toLowerCase() === 'svg' || INLINE_SVG.test(src);\n", "import {IPath, Path, PathType} from './path';\n\nexport class Vector implements IPath {\n    type: PathType;\n    x: number;\n    y: number;\n\n    constructor(x: number, y: number) {\n        this.type = PathType.VECTOR;\n        this.x = x;\n        this.y = y;\n    }\n\n    add(deltaX: number, deltaY: number): Vector {\n        return new Vector(this.x + deltaX, this.y + deltaY);\n    }\n}\n\nexport const isVector = (path: Path): path is Vector => path.type === PathType.VECTOR;\n", "import {Vector} from './vector';\nimport {IPath, PathType, Path} from './path';\n\nconst lerp = (a: Vector, b: Vector, t: number): Vector => {\n    return new Vector(a.x + (b.x - a.x) * t, a.y + (b.y - a.y) * t);\n};\n\nexport class BezierCurve implements IPath {\n    type: PathType;\n    start: Vector;\n    startControl: Vector;\n    endControl: Vector;\n    end: Vector;\n\n    constructor(start: Vector, startControl: Vector, endControl: Vector, end: Vector) {\n        this.type = PathType.BEZIER_CURVE;\n        this.start = start;\n        this.startControl = startControl;\n        this.endControl = endControl;\n        this.end = end;\n    }\n\n    subdivide(t: number, firstHalf: boolean): BezierCurve {\n        const ab = lerp(this.start, this.startControl, t);\n        const bc = lerp(this.startControl, this.endControl, t);\n        const cd = lerp(this.endControl, this.end, t);\n        const abbc = lerp(ab, bc, t);\n        const bccd = lerp(bc, cd, t);\n        const dest = lerp(abbc, bccd, t);\n        return firstHalf ? new BezierCurve(this.start, ab, abbc, dest) : new BezierCurve(dest, bccd, cd, this.end);\n    }\n\n    add(deltaX: number, deltaY: number): BezierCurve {\n        return new BezierCurve(\n            this.start.add(deltaX, deltaY),\n            this.startControl.add(deltaX, deltaY),\n            this.endControl.add(deltaX, deltaY),\n            this.end.add(deltaX, deltaY)\n        );\n    }\n\n    reverse(): BezierCurve {\n        return new BezierCurve(this.end, this.endControl, this.startControl, this.start);\n    }\n}\n\nexport const isBezierCurve = (path: Path): path is BezierCurve => path.type === PathType.BEZIER_CURVE;\n", "import {ElementContainer} from '../dom/element-container';\nimport {getAbsoluteValue, getAbsoluteValueForTuple} from '../css/types/length-percentage';\nimport {Vector} from './vector';\nimport {BezierCurve} from './bezier-curve';\nimport {Path} from './path';\n\nexport class BoundCurves {\n    readonly topLeftBorderDoubleOuterBox: Path;\n    readonly topRightBorderDoubleOuterBox: Path;\n    readonly bottomRightBorderDoubleOuterBox: Path;\n    readonly bottomLeftBorderDoubleOuterBox: Path;\n    readonly topLeftBorderDoubleInnerBox: Path;\n    readonly topRightBorderDoubleInnerBox: Path;\n    readonly bottomRightBorderDoubleInnerBox: Path;\n    readonly bottomLeftBorderDoubleInnerBox: Path;\n    readonly topLeftBorderStroke: Path;\n    readonly topRightBorderStroke: Path;\n    readonly bottomRightBorderStroke: Path;\n    readonly bottomLeftBorderStroke: Path;\n    readonly topLeftBorderBox: Path;\n    readonly topRightBorderBox: Path;\n    readonly bottomRightBorderBox: Path;\n    readonly bottomLeftBorderBox: Path;\n    readonly topLeftPaddingBox: Path;\n    readonly topRightPaddingBox: Path;\n    readonly bottomRightPaddingBox: Path;\n    readonly bottomLeftPaddingBox: Path;\n    readonly topLeftContentBox: Path;\n    readonly topRightContentBox: Path;\n    readonly bottomRightContentBox: Path;\n    readonly bottomLeftContentBox: Path;\n\n    constructor(element: ElementContainer) {\n        const styles = element.styles;\n        const bounds = element.bounds;\n\n        let [tlh, tlv] = getAbsoluteValueForTuple(styles.borderTopLeftRadius, bounds.width, bounds.height);\n        let [trh, trv] = getAbsoluteValueForTuple(styles.borderTopRightRadius, bounds.width, bounds.height);\n        let [brh, brv] = getAbsoluteValueForTuple(styles.borderBottomRightRadius, bounds.width, bounds.height);\n        let [blh, blv] = getAbsoluteValueForTuple(styles.borderBottomLeftRadius, bounds.width, bounds.height);\n\n        const factors = [];\n        factors.push((tlh + trh) / bounds.width);\n        factors.push((blh + brh) / bounds.width);\n        factors.push((tlv + blv) / bounds.height);\n        factors.push((trv + brv) / bounds.height);\n        const maxFactor = Math.max(...factors);\n\n        if (maxFactor > 1) {\n            tlh /= maxFactor;\n            tlv /= maxFactor;\n            trh /= maxFactor;\n            trv /= maxFactor;\n            brh /= maxFactor;\n            brv /= maxFactor;\n            blh /= maxFactor;\n            blv /= maxFactor;\n        }\n\n        const topWidth = bounds.width - trh;\n        const rightHeight = bounds.height - brv;\n        const bottomWidth = bounds.width - brh;\n        const leftHeight = bounds.height - blv;\n\n        const borderTopWidth = styles.borderTopWidth;\n        const borderRightWidth = styles.borderRightWidth;\n        const borderBottomWidth = styles.borderBottomWidth;\n        const borderLeftWidth = styles.borderLeftWidth;\n\n        const paddingTop = getAbsoluteValue(styles.paddingTop, element.bounds.width);\n        const paddingRight = getAbsoluteValue(styles.paddingRight, element.bounds.width);\n        const paddingBottom = getAbsoluteValue(styles.paddingBottom, element.bounds.width);\n        const paddingLeft = getAbsoluteValue(styles.paddingLeft, element.bounds.width);\n\n        this.topLeftBorderDoubleOuterBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth / 3,\n                      bounds.top + borderTopWidth / 3,\n                      tlh - borderLeftWidth / 3,\n                      tlv - borderTopWidth / 3,\n                      CORNER.TOP_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth / 3, bounds.top + borderTopWidth / 3);\n        this.topRightBorderDoubleOuterBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + topWidth,\n                      bounds.top + borderTopWidth / 3,\n                      trh - borderRightWidth / 3,\n                      trv - borderTopWidth / 3,\n                      CORNER.TOP_RIGHT\n                  )\n                : new Vector(bounds.left + bounds.width - borderRightWidth / 3, bounds.top + borderTopWidth / 3);\n        this.bottomRightBorderDoubleOuterBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(\n                      bounds.left + bottomWidth,\n                      bounds.top + rightHeight,\n                      brh - borderRightWidth / 3,\n                      brv - borderBottomWidth / 3,\n                      CORNER.BOTTOM_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - borderRightWidth / 3,\n                      bounds.top + bounds.height - borderBottomWidth / 3\n                  );\n        this.bottomLeftBorderDoubleOuterBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth / 3,\n                      bounds.top + leftHeight,\n                      blh - borderLeftWidth / 3,\n                      blv - borderBottomWidth / 3,\n                      CORNER.BOTTOM_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth / 3, bounds.top + bounds.height - borderBottomWidth / 3);\n        this.topLeftBorderDoubleInnerBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + (borderLeftWidth * 2) / 3,\n                      bounds.top + (borderTopWidth * 2) / 3,\n                      tlh - (borderLeftWidth * 2) / 3,\n                      tlv - (borderTopWidth * 2) / 3,\n                      CORNER.TOP_LEFT\n                  )\n                : new Vector(bounds.left + (borderLeftWidth * 2) / 3, bounds.top + (borderTopWidth * 2) / 3);\n        this.topRightBorderDoubleInnerBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + topWidth,\n                      bounds.top + (borderTopWidth * 2) / 3,\n                      trh - (borderRightWidth * 2) / 3,\n                      trv - (borderTopWidth * 2) / 3,\n                      CORNER.TOP_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - (borderRightWidth * 2) / 3,\n                      bounds.top + (borderTopWidth * 2) / 3\n                  );\n        this.bottomRightBorderDoubleInnerBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(\n                      bounds.left + bottomWidth,\n                      bounds.top + rightHeight,\n                      brh - (borderRightWidth * 2) / 3,\n                      brv - (borderBottomWidth * 2) / 3,\n                      CORNER.BOTTOM_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - (borderRightWidth * 2) / 3,\n                      bounds.top + bounds.height - (borderBottomWidth * 2) / 3\n                  );\n        this.bottomLeftBorderDoubleInnerBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(\n                      bounds.left + (borderLeftWidth * 2) / 3,\n                      bounds.top + leftHeight,\n                      blh - (borderLeftWidth * 2) / 3,\n                      blv - (borderBottomWidth * 2) / 3,\n                      CORNER.BOTTOM_LEFT\n                  )\n                : new Vector(\n                      bounds.left + (borderLeftWidth * 2) / 3,\n                      bounds.top + bounds.height - (borderBottomWidth * 2) / 3\n                  );\n        this.topLeftBorderStroke =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth / 2,\n                      bounds.top + borderTopWidth / 2,\n                      tlh - borderLeftWidth / 2,\n                      tlv - borderTopWidth / 2,\n                      CORNER.TOP_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth / 2, bounds.top + borderTopWidth / 2);\n        this.topRightBorderStroke =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + topWidth,\n                      bounds.top + borderTopWidth / 2,\n                      trh - borderRightWidth / 2,\n                      trv - borderTopWidth / 2,\n                      CORNER.TOP_RIGHT\n                  )\n                : new Vector(bounds.left + bounds.width - borderRightWidth / 2, bounds.top + borderTopWidth / 2);\n        this.bottomRightBorderStroke =\n            brh > 0 || brv > 0\n                ? getCurvePoints(\n                      bounds.left + bottomWidth,\n                      bounds.top + rightHeight,\n                      brh - borderRightWidth / 2,\n                      brv - borderBottomWidth / 2,\n                      CORNER.BOTTOM_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - borderRightWidth / 2,\n                      bounds.top + bounds.height - borderBottomWidth / 2\n                  );\n        this.bottomLeftBorderStroke =\n            blh > 0 || blv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth / 2,\n                      bounds.top + leftHeight,\n                      blh - borderLeftWidth / 2,\n                      blv - borderBottomWidth / 2,\n                      CORNER.BOTTOM_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth / 2, bounds.top + bounds.height - borderBottomWidth / 2);\n        this.topLeftBorderBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left, bounds.top, tlh, tlv, CORNER.TOP_LEFT)\n                : new Vector(bounds.left, bounds.top);\n        this.topRightBorderBox =\n            trh > 0 || trv > 0\n                ? getCurvePoints(bounds.left + topWidth, bounds.top, trh, trv, CORNER.TOP_RIGHT)\n                : new Vector(bounds.left + bounds.width, bounds.top);\n        this.bottomRightBorderBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh, brv, CORNER.BOTTOM_RIGHT)\n                : new Vector(bounds.left + bounds.width, bounds.top + bounds.height);\n        this.bottomLeftBorderBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(bounds.left, bounds.top + leftHeight, blh, blv, CORNER.BOTTOM_LEFT)\n                : new Vector(bounds.left, bounds.top + bounds.height);\n        this.topLeftPaddingBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth,\n                      bounds.top + borderTopWidth,\n                      Math.max(0, tlh - borderLeftWidth),\n                      Math.max(0, tlv - borderTopWidth),\n                      CORNER.TOP_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth, bounds.top + borderTopWidth);\n        this.topRightPaddingBox =\n            trh > 0 || trv > 0\n                ? getCurvePoints(\n                      bounds.left + Math.min(topWidth, bounds.width - borderRightWidth),\n                      bounds.top + borderTopWidth,\n                      topWidth > bounds.width + borderRightWidth ? 0 : Math.max(0, trh - borderRightWidth),\n                      Math.max(0, trv - borderTopWidth),\n                      CORNER.TOP_RIGHT\n                  )\n                : new Vector(bounds.left + bounds.width - borderRightWidth, bounds.top + borderTopWidth);\n        this.bottomRightPaddingBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(\n                      bounds.left + Math.min(bottomWidth, bounds.width - borderLeftWidth),\n                      bounds.top + Math.min(rightHeight, bounds.height - borderBottomWidth),\n                      Math.max(0, brh - borderRightWidth),\n                      Math.max(0, brv - borderBottomWidth),\n                      CORNER.BOTTOM_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - borderRightWidth,\n                      bounds.top + bounds.height - borderBottomWidth\n                  );\n        this.bottomLeftPaddingBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth,\n                      bounds.top + Math.min(leftHeight, bounds.height - borderBottomWidth),\n                      Math.max(0, blh - borderLeftWidth),\n                      Math.max(0, blv - borderBottomWidth),\n                      CORNER.BOTTOM_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth, bounds.top + bounds.height - borderBottomWidth);\n        this.topLeftContentBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth + paddingLeft,\n                      bounds.top + borderTopWidth + paddingTop,\n                      Math.max(0, tlh - (borderLeftWidth + paddingLeft)),\n                      Math.max(0, tlv - (borderTopWidth + paddingTop)),\n                      CORNER.TOP_LEFT\n                  )\n                : new Vector(bounds.left + borderLeftWidth + paddingLeft, bounds.top + borderTopWidth + paddingTop);\n        this.topRightContentBox =\n            trh > 0 || trv > 0\n                ? getCurvePoints(\n                      bounds.left + Math.min(topWidth, bounds.width + borderLeftWidth + paddingLeft),\n                      bounds.top + borderTopWidth + paddingTop,\n                      topWidth > bounds.width + borderLeftWidth + paddingLeft ? 0 : trh - borderLeftWidth + paddingLeft,\n                      trv - (borderTopWidth + paddingTop),\n                      CORNER.TOP_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - (borderRightWidth + paddingRight),\n                      bounds.top + borderTopWidth + paddingTop\n                  );\n        this.bottomRightContentBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(\n                      bounds.left + Math.min(bottomWidth, bounds.width - (borderLeftWidth + paddingLeft)),\n                      bounds.top + Math.min(rightHeight, bounds.height + borderTopWidth + paddingTop),\n                      Math.max(0, brh - (borderRightWidth + paddingRight)),\n                      brv - (borderBottomWidth + paddingBottom),\n                      CORNER.BOTTOM_RIGHT\n                  )\n                : new Vector(\n                      bounds.left + bounds.width - (borderRightWidth + paddingRight),\n                      bounds.top + bounds.height - (borderBottomWidth + paddingBottom)\n                  );\n        this.bottomLeftContentBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(\n                      bounds.left + borderLeftWidth + paddingLeft,\n                      bounds.top + leftHeight,\n                      Math.max(0, blh - (borderLeftWidth + paddingLeft)),\n                      blv - (borderBottomWidth + paddingBottom),\n                      CORNER.BOTTOM_LEFT\n                  )\n                : new Vector(\n                      bounds.left + borderLeftWidth + paddingLeft,\n                      bounds.top + bounds.height - (borderBottomWidth + paddingBottom)\n                  );\n    }\n}\n\nenum CORNER {\n    TOP_LEFT = 0,\n    TOP_RIGHT = 1,\n    BOTTOM_RIGHT = 2,\n    BOTTOM_LEFT = 3\n}\n\nconst getCurvePoints = (x: number, y: number, r1: number, r2: number, position: CORNER): BezierCurve => {\n    const kappa = 4 * ((Math.sqrt(2) - 1) / 3);\n    const ox = r1 * kappa; // control point offset horizontal\n    const oy = r2 * kappa; // control point offset vertical\n    const xm = x + r1; // x-middle\n    const ym = y + r2; // y-middle\n\n    switch (position) {\n        case CORNER.TOP_LEFT:\n            return new BezierCurve(\n                new Vector(x, ym),\n                new Vector(x, ym - oy),\n                new Vector(xm - ox, y),\n                new Vector(xm, y)\n            );\n        case CORNER.TOP_RIGHT:\n            return new BezierCurve(\n                new Vector(x, y),\n                new Vector(x + ox, y),\n                new Vector(xm, ym - oy),\n                new Vector(xm, ym)\n            );\n        case CORNER.BOTTOM_RIGHT:\n            return new BezierCurve(\n                new Vector(xm, y),\n                new Vector(xm, y + oy),\n                new Vector(x + ox, ym),\n                new Vector(x, ym)\n            );\n        case CORNER.BOTTOM_LEFT:\n        default:\n            return new BezierCurve(\n                new Vector(xm, ym),\n                new Vector(xm - ox, ym),\n                new Vector(x, y + oy),\n                new Vector(x, y)\n            );\n    }\n};\n\nexport const calculateBorderBoxPath = (curves: BoundCurves): Path[] => {\n    return [curves.topLeftBorderBox, curves.topRightBorderBox, curves.bottomRightBorderBox, curves.bottomLeftBorderBox];\n};\n\nexport const calculateContentBoxPath = (curves: BoundCurves): Path[] => {\n    return [\n        curves.topLeftContentBox,\n        curves.topRightContentBox,\n        curves.bottomRightContentBox,\n        curves.bottomLeftContentBox\n    ];\n};\n\nexport const calculatePaddingBoxPath = (curves: BoundCurves): Path[] => {\n    return [\n        curves.topLeftPaddingBox,\n        curves.topRightPaddingBox,\n        curves.bottomRightPaddingBox,\n        curves.bottomLeftPaddingBox\n    ];\n};\n", "import {Matrix} from '../css/property-descriptors/transform';\nimport {Path} from './path';\n\nexport const enum EffectType {\n    TRANSFORM = 0,\n    CLIP = 1,\n    OPACITY = 2\n}\n\nexport const enum EffectTarget {\n    BACKGROUND_BORDERS = 1 << 1,\n    CONTENT = 1 << 2\n}\n\nexport interface IElementEffect {\n    readonly type: EffectType;\n    readonly target: number;\n}\n\nexport class TransformEffect implements IElementEffect {\n    readonly type: EffectType = EffectType.TRANSFORM;\n    readonly target: number = EffectTarget.BACKGROUND_BORDERS | EffectTarget.CONTENT;\n\n    constructor(readonly offsetX: number, readonly offsetY: number, readonly matrix: Matrix) {}\n}\n\nexport class ClipEffect implements IElementEffect {\n    readonly type: EffectType = EffectType.CLIP;\n\n    constructor(readonly path: Path[], readonly target: EffectTarget) {}\n}\n\nexport class OpacityEffect implements IElementEffect {\n    readonly type: EffectType = EffectType.OPACITY;\n    readonly target: number = EffectTarget.BACKGROUND_BORDERS | EffectTarget.CONTENT;\n\n    constructor(readonly opacity: number) {}\n}\n\nexport const isTransformEffect = (effect: IElementEffect): effect is TransformEffect =>\n    effect.type === EffectType.TRANSFORM;\nexport const isClipEffect = (effect: IElementEffect): effect is ClipEffect => effect.type === EffectType.CLIP;\nexport const isOpacityEffect = (effect: IElementEffect): effect is OpacityEffect => effect.type === EffectType.OPACITY;\n", "import {BezierCurve} from './bezier-curve';\nimport {Vector} from './vector';\nexport const enum PathType {\n    VECTOR = 0,\n    BEZIER_CURVE = 1\n}\n\nexport interface IPath {\n    type: PathType;\n    add(deltaX: number, deltaY: number): IPath;\n}\n\nexport const equalPath = (a: Path[], b: Path[]): boolean => {\n    if (a.length === b.length) {\n        return a.some((v, i) => v === b[i]);\n    }\n\n    return false;\n};\n\nexport const transformPath = (path: Path[], deltaX: number, deltaY: number, deltaW: number, deltaH: number): Path[] => {\n    return path.map((point, index) => {\n        switch (index) {\n            case 0:\n                return point.add(deltaX, deltaY);\n            case 1:\n                return point.add(deltaX + deltaW, deltaY);\n            case 2:\n                return point.add(deltaX + deltaW, deltaY + deltaH);\n            case 3:\n                return point.add(deltaX, deltaY + deltaH);\n        }\n        return point;\n    });\n};\n\nexport type Path = Vector | BezierCurve;\n", "import {ElementContainer, FLAGS} from '../dom/element-container';\nimport {contains} from '../core/bitwise';\nimport {BoundCurves, calculateBorderBoxPath, calculatePaddingBoxPath} from './bound-curves';\nimport {ClipEffect, EffectTarget, IElementEffect, isClipEffect, OpacityEffect, TransformEffect} from './effects';\nimport {OVERFLOW} from '../css/property-descriptors/overflow';\nimport {equalPath} from './path';\nimport {DISPLAY} from '../css/property-descriptors/display';\nimport {OLElementContainer} from '../dom/elements/ol-element-container';\nimport {LIElementContainer} from '../dom/elements/li-element-container';\nimport {createCounterText} from '../css/types/functions/counter';\nimport {POSITION} from '../css/property-descriptors/position';\n\nexport class StackingContext {\n    element: ElementPaint;\n    negativeZIndex: StackingContext[];\n    zeroOrAutoZIndexOrTransformedOrOpacity: StackingContext[];\n    positiveZIndex: StackingContext[];\n    nonPositionedFloats: StackingContext[];\n    nonPositionedInlineLevel: StackingContext[];\n    inlineLevel: ElementPaint[];\n    nonInlineLevel: ElementPaint[];\n\n    constructor(container: ElementPaint) {\n        this.element = container;\n        this.inlineLevel = [];\n        this.nonInlineLevel = [];\n        this.negativeZIndex = [];\n        this.zeroOrAutoZIndexOrTransformedOrOpacity = [];\n        this.positiveZIndex = [];\n        this.nonPositionedFloats = [];\n        this.nonPositionedInlineLevel = [];\n    }\n}\n\nexport class ElementPaint {\n    readonly effects: IElementEffect[] = [];\n    readonly curves: BoundCurves;\n    listValue?: string;\n\n    constructor(readonly container: ElementContainer, readonly parent: ElementPaint | null) {\n        this.curves = new BoundCurves(this.container);\n        if (this.container.styles.opacity < 1) {\n            this.effects.push(new OpacityEffect(this.container.styles.opacity));\n        }\n\n        if (this.container.styles.transform !== null) {\n            const offsetX = this.container.bounds.left + this.container.styles.transformOrigin[0].number;\n            const offsetY = this.container.bounds.top + this.container.styles.transformOrigin[1].number;\n            const matrix = this.container.styles.transform;\n            this.effects.push(new TransformEffect(offsetX, offsetY, matrix));\n        }\n\n        if (this.container.styles.overflowX !== OVERFLOW.VISIBLE) {\n            const borderBox = calculateBorderBoxPath(this.curves);\n            const paddingBox = calculatePaddingBoxPath(this.curves);\n\n            if (equalPath(borderBox, paddingBox)) {\n                this.effects.push(new ClipEffect(borderBox, EffectTarget.BACKGROUND_BORDERS | EffectTarget.CONTENT));\n            } else {\n                this.effects.push(new ClipEffect(borderBox, EffectTarget.BACKGROUND_BORDERS));\n                this.effects.push(new ClipEffect(paddingBox, EffectTarget.CONTENT));\n            }\n        }\n    }\n\n    getEffects(target: EffectTarget): IElementEffect[] {\n        let inFlow = [POSITION.ABSOLUTE, POSITION.FIXED].indexOf(this.container.styles.position) === -1;\n        let parent = this.parent;\n        const effects = this.effects.slice(0);\n        while (parent) {\n            const croplessEffects = parent.effects.filter((effect) => !isClipEffect(effect));\n            if (inFlow || parent.container.styles.position !== POSITION.STATIC || !parent.parent) {\n                effects.unshift(...croplessEffects);\n                inFlow = [POSITION.ABSOLUTE, POSITION.FIXED].indexOf(parent.container.styles.position) === -1;\n                if (parent.container.styles.overflowX !== OVERFLOW.VISIBLE) {\n                    const borderBox = calculateBorderBoxPath(parent.curves);\n                    const paddingBox = calculatePaddingBoxPath(parent.curves);\n                    if (!equalPath(borderBox, paddingBox)) {\n                        effects.unshift(\n                            new ClipEffect(paddingBox, EffectTarget.BACKGROUND_BORDERS | EffectTarget.CONTENT)\n                        );\n                    }\n                }\n            } else {\n                effects.unshift(...croplessEffects);\n            }\n\n            parent = parent.parent;\n        }\n\n        return effects.filter((effect) => contains(effect.target, target));\n    }\n}\n\nconst parseStackTree = (\n    parent: ElementPaint,\n    stackingContext: StackingContext,\n    realStackingContext: StackingContext,\n    listItems: ElementPaint[]\n) => {\n    parent.container.elements.forEach((child) => {\n        const treatAsRealStackingContext = contains(child.flags, FLAGS.CREATES_REAL_STACKING_CONTEXT);\n        const createsStackingContext = contains(child.flags, FLAGS.CREATES_STACKING_CONTEXT);\n        const paintContainer = new ElementPaint(child, parent);\n        if (contains(child.styles.display, DISPLAY.LIST_ITEM)) {\n            listItems.push(paintContainer);\n        }\n\n        const listOwnerItems = contains(child.flags, FLAGS.IS_LIST_OWNER) ? [] : listItems;\n\n        if (treatAsRealStackingContext || createsStackingContext) {\n            const parentStack =\n                treatAsRealStackingContext || child.styles.isPositioned() ? realStackingContext : stackingContext;\n\n            const stack = new StackingContext(paintContainer);\n\n            if (child.styles.isPositioned() || child.styles.opacity < 1 || child.styles.isTransformed()) {\n                const order = child.styles.zIndex.order;\n                if (order < 0) {\n                    let index = 0;\n\n                    parentStack.negativeZIndex.some((current, i) => {\n                        if (order > current.element.container.styles.zIndex.order) {\n                            index = i;\n                            return false;\n                        } else if (index > 0) {\n                            return true;\n                        }\n\n                        return false;\n                    });\n                    parentStack.negativeZIndex.splice(index, 0, stack);\n                } else if (order > 0) {\n                    let index = 0;\n                    parentStack.positiveZIndex.some((current, i) => {\n                        if (order >= current.element.container.styles.zIndex.order) {\n                            index = i + 1;\n                            return false;\n                        } else if (index > 0) {\n                            return true;\n                        }\n\n                        return false;\n                    });\n                    parentStack.positiveZIndex.splice(index, 0, stack);\n                } else {\n                    parentStack.zeroOrAutoZIndexOrTransformedOrOpacity.push(stack);\n                }\n            } else {\n                if (child.styles.isFloating()) {\n                    parentStack.nonPositionedFloats.push(stack);\n                } else {\n                    parentStack.nonPositionedInlineLevel.push(stack);\n                }\n            }\n\n            parseStackTree(\n                paintContainer,\n                stack,\n                treatAsRealStackingContext ? stack : realStackingContext,\n                listOwnerItems\n            );\n        } else {\n            if (child.styles.isInlineLevel()) {\n                stackingContext.inlineLevel.push(paintContainer);\n            } else {\n                stackingContext.nonInlineLevel.push(paintContainer);\n            }\n\n            parseStackTree(paintContainer, stackingContext, realStackingContext, listOwnerItems);\n        }\n\n        if (contains(child.flags, FLAGS.IS_LIST_OWNER)) {\n            processListItems(child, listOwnerItems);\n        }\n    });\n};\n\nconst processListItems = (owner: ElementContainer, elements: ElementPaint[]) => {\n    let numbering = owner instanceof OLElementContainer ? owner.start : 1;\n    const reversed = owner instanceof OLElementContainer ? owner.reversed : false;\n    for (let i = 0; i < elements.length; i++) {\n        const item = elements[i];\n        if (\n            item.container instanceof LIElementContainer &&\n            typeof item.container.value === 'number' &&\n            item.container.value !== 0\n        ) {\n            numbering = item.container.value;\n        }\n\n        item.listValue = createCounterText(numbering, item.container.styles.listStyleType, true);\n\n        numbering += reversed ? -1 : 1;\n    }\n};\n\nexport const parseStackingContexts = (container: ElementContainer): StackingContext => {\n    const paintContainer = new ElementPaint(container, null);\n    const root = new StackingContext(paintContainer);\n    const listItems: ElementPaint[] = [];\n    parseStackTree(paintContainer, root, root, listItems);\n    processListItems(paintContainer.container, listItems);\n    return root;\n};\n", "import {Path} from './path';\nimport {BoundCurves} from './bound-curves';\nimport {isBezierCurve} from './bezier-curve';\n\nexport const parsePathForBorder = (curves: BoundCurves, borderSide: number): Path[] => {\n    switch (borderSide) {\n        case 0:\n            return createPathFromCurves(\n                curves.topLeftBorderBox,\n                curves.topLeftPaddingBox,\n                curves.topRightBorderBox,\n                curves.topRightPaddingBox\n            );\n        case 1:\n            return createPathFromCurves(\n                curves.topRightBorderBox,\n                curves.topRightPaddingBox,\n                curves.bottomRightBorderBox,\n                curves.bottomRightPaddingBox\n            );\n        case 2:\n            return createPathFromCurves(\n                curves.bottomRightBorderBox,\n                curves.bottomRightPaddingBox,\n                curves.bottomLeftBorderBox,\n                curves.bottomLeftPaddingBox\n            );\n        case 3:\n        default:\n            return createPathFromCurves(\n                curves.bottomLeftBorderBox,\n                curves.bottomLeftPaddingBox,\n                curves.topLeftBorderBox,\n                curves.topLeftPaddingBox\n            );\n    }\n};\n\nexport const parsePathForBorderDoubleOuter = (curves: BoundCurves, borderSide: number): Path[] => {\n    switch (borderSide) {\n        case 0:\n            return createPathFromCurves(\n                curves.topLeftBorderBox,\n                curves.topLeftBorderDoubleOuterBox,\n                curves.topRightBorderBox,\n                curves.topRightBorderDoubleOuterBox\n            );\n        case 1:\n            return createPathFromCurves(\n                curves.topRightBorderBox,\n                curves.topRightBorderDoubleOuterBox,\n                curves.bottomRightBorderBox,\n                curves.bottomRightBorderDoubleOuterBox\n            );\n        case 2:\n            return createPathFromCurves(\n                curves.bottomRightBorderBox,\n                curves.bottomRightBorderDoubleOuterBox,\n                curves.bottomLeftBorderBox,\n                curves.bottomLeftBorderDoubleOuterBox\n            );\n        case 3:\n        default:\n            return createPathFromCurves(\n                curves.bottomLeftBorderBox,\n                curves.bottomLeftBorderDoubleOuterBox,\n                curves.topLeftBorderBox,\n                curves.topLeftBorderDoubleOuterBox\n            );\n    }\n};\n\nexport const parsePathForBorderDoubleInner = (curves: BoundCurves, borderSide: number): Path[] => {\n    switch (borderSide) {\n        case 0:\n            return createPathFromCurves(\n                curves.topLeftBorderDoubleInnerBox,\n                curves.topLeftPaddingBox,\n                curves.topRightBorderDoubleInnerBox,\n                curves.topRightPaddingBox\n            );\n        case 1:\n            return createPathFromCurves(\n                curves.topRightBorderDoubleInnerBox,\n                curves.topRightPaddingBox,\n                curves.bottomRightBorderDoubleInnerBox,\n                curves.bottomRightPaddingBox\n            );\n        case 2:\n            return createPathFromCurves(\n                curves.bottomRightBorderDoubleInnerBox,\n                curves.bottomRightPaddingBox,\n                curves.bottomLeftBorderDoubleInnerBox,\n                curves.bottomLeftPaddingBox\n            );\n        case 3:\n        default:\n            return createPathFromCurves(\n                curves.bottomLeftBorderDoubleInnerBox,\n                curves.bottomLeftPaddingBox,\n                curves.topLeftBorderDoubleInnerBox,\n                curves.topLeftPaddingBox\n            );\n    }\n};\n\nexport const parsePathForBorderStroke = (curves: BoundCurves, borderSide: number): Path[] => {\n    switch (borderSide) {\n        case 0:\n            return createStrokePathFromCurves(curves.topLeftBorderStroke, curves.topRightBorderStroke);\n        case 1:\n            return createStrokePathFromCurves(curves.topRightBorderStroke, curves.bottomRightBorderStroke);\n        case 2:\n            return createStrokePathFromCurves(curves.bottomRightBorderStroke, curves.bottomLeftBorderStroke);\n        case 3:\n        default:\n            return createStrokePathFromCurves(curves.bottomLeftBorderStroke, curves.topLeftBorderStroke);\n    }\n};\n\nconst createStrokePathFromCurves = (outer1: Path, outer2: Path): Path[] => {\n    const path = [];\n    if (isBezierCurve(outer1)) {\n        path.push(outer1.subdivide(0.5, false));\n    } else {\n        path.push(outer1);\n    }\n\n    if (isBezierCurve(outer2)) {\n        path.push(outer2.subdivide(0.5, true));\n    } else {\n        path.push(outer2);\n    }\n\n    return path;\n};\n\nconst createPathFromCurves = (outer1: Path, inner1: Path, outer2: Path, inner2: Path): Path[] => {\n    const path = [];\n    if (isBezierCurve(outer1)) {\n        path.push(outer1.subdivide(0.5, false));\n    } else {\n        path.push(outer1);\n    }\n\n    if (isBezierCurve(outer2)) {\n        path.push(outer2.subdivide(0.5, true));\n    } else {\n        path.push(outer2);\n    }\n\n    if (isBezierCurve(inner2)) {\n        path.push(inner2.subdivide(0.5, true).reverse());\n    } else {\n        path.push(inner2);\n    }\n\n    if (isBezierCurve(inner1)) {\n        path.push(inner1.subdivide(0.5, false).reverse());\n    } else {\n        path.push(inner1);\n    }\n\n    return path;\n};\n", "import {getAbsoluteValue} from '../css/types/length-percentage';\nimport {Bounds} from '../css/layout/bounds';\nimport {ElementContainer} from '../dom/element-container';\n\nexport const paddingBox = (element: ElementContainer): Bounds => {\n    const bounds = element.bounds;\n    const styles = element.styles;\n    return bounds.add(\n        styles.borderLeftWidth,\n        styles.borderTopWidth,\n        -(styles.borderRightWidth + styles.borderLeftWidth),\n        -(styles.borderTopWidth + styles.borderBottomWidth)\n    );\n};\n\nexport const contentBox = (element: ElementContainer): Bounds => {\n    const styles = element.styles;\n    const bounds = element.bounds;\n\n    const paddingLeft = getAbsoluteValue(styles.paddingLeft, bounds.width);\n    const paddingRight = getAbsoluteValue(styles.paddingRight, bounds.width);\n    const paddingTop = getAbsoluteValue(styles.paddingTop, bounds.width);\n    const paddingBottom = getAbsoluteValue(styles.paddingBottom, bounds.width);\n\n    return bounds.add(\n        paddingLeft + styles.borderLeftWidth,\n        paddingTop + styles.borderTopWidth,\n        -(styles.borderRightWidth + styles.borderLeftWidth + paddingLeft + paddingRight),\n        -(styles.borderTopWidth + styles.borderBottomWidth + paddingTop + paddingBottom)\n    );\n};\n", "import {Bounds} from '../css/layout/bounds';\nimport {BACKGROUND_ORIGIN} from '../css/property-descriptors/background-origin';\nimport {ElementContainer} from '../dom/element-container';\nimport {BACKGROUND_SIZE, BackgroundSizeInfo} from '../css/property-descriptors/background-size';\nimport {Vector} from './vector';\nimport {BACKGROUND_REPEAT} from '../css/property-descriptors/background-repeat';\nimport {getAbsoluteValue, getAbsoluteValueForTuple, isLengthPercentage} from '../css/types/length-percentage';\nimport {CSSValue, isIdentToken} from '../css/syntax/parser';\nimport {contentBox, paddingBox} from './box-sizing';\nimport {Path} from './path';\nimport {BACKGROUND_CLIP} from '../css/property-descriptors/background-clip';\n\nexport const calculateBackgroundPositioningArea = (\n    backgroundOrigin: BACKGROUND_ORIGIN,\n    element: ElementContainer\n): Bounds => {\n    if (backgroundOrigin === BACKGROUND_ORIGIN.BORDER_BOX) {\n        return element.bounds;\n    }\n\n    if (backgroundOrigin === BACKGROUND_ORIGIN.CONTENT_BOX) {\n        return contentBox(element);\n    }\n\n    return paddingBox(element);\n};\n\nexport const calculateBackgroundPaintingArea = (backgroundClip: BACKGROUND_CLIP, element: ElementContainer): Bounds => {\n    if (backgroundClip === BACKGROUND_CLIP.BORDER_BOX) {\n        return element.bounds;\n    }\n\n    if (backgroundClip === BACKGROUND_CLIP.CONTENT_BOX) {\n        return contentBox(element);\n    }\n\n    return paddingBox(element);\n};\n\nexport const calculateBackgroundRendering = (\n    container: ElementContainer,\n    index: number,\n    intrinsicSize: [number | null, number | null, number | null]\n): [Path[], number, number, number, number] => {\n    const backgroundPositioningArea = calculateBackgroundPositioningArea(\n        getBackgroundValueForIndex(container.styles.backgroundOrigin, index),\n        container\n    );\n\n    const backgroundPaintingArea = calculateBackgroundPaintingArea(\n        getBackgroundValueForIndex(container.styles.backgroundClip, index),\n        container\n    );\n\n    const backgroundImageSize = calculateBackgroundSize(\n        getBackgroundValueForIndex(container.styles.backgroundSize, index),\n        intrinsicSize,\n        backgroundPositioningArea\n    );\n\n    const [sizeWidth, sizeHeight] = backgroundImageSize;\n\n    const position = getAbsoluteValueForTuple(\n        getBackgroundValueForIndex(container.styles.backgroundPosition, index),\n        backgroundPositioningArea.width - sizeWidth,\n        backgroundPositioningArea.height - sizeHeight\n    );\n\n    const path = calculateBackgroundRepeatPath(\n        getBackgroundValueForIndex(container.styles.backgroundRepeat, index),\n        position,\n        backgroundImageSize,\n        backgroundPositioningArea,\n        backgroundPaintingArea\n    );\n\n    const offsetX = Math.round(backgroundPositioningArea.left + position[0]);\n    const offsetY = Math.round(backgroundPositioningArea.top + position[1]);\n\n    return [path, offsetX, offsetY, sizeWidth, sizeHeight];\n};\n\nexport const isAuto = (token: CSSValue): boolean => isIdentToken(token) && token.value === BACKGROUND_SIZE.AUTO;\n\nconst hasIntrinsicValue = (value: number | null): value is number => typeof value === 'number';\n\nexport const calculateBackgroundSize = (\n    size: BackgroundSizeInfo[],\n    [intrinsicWidth, intrinsicHeight, intrinsicProportion]: [number | null, number | null, number | null],\n    bounds: Bounds\n): [number, number] => {\n    const [first, second] = size;\n\n    if (!first) {\n        return [0, 0];\n    }\n\n    if (isLengthPercentage(first) && second && isLengthPercentage(second)) {\n        return [getAbsoluteValue(first, bounds.width), getAbsoluteValue(second, bounds.height)];\n    }\n\n    const hasIntrinsicProportion = hasIntrinsicValue(intrinsicProportion);\n\n    if (isIdentToken(first) && (first.value === BACKGROUND_SIZE.CONTAIN || first.value === BACKGROUND_SIZE.COVER)) {\n        if (hasIntrinsicValue(intrinsicProportion)) {\n            const targetRatio = bounds.width / bounds.height;\n\n            return targetRatio < intrinsicProportion !== (first.value === BACKGROUND_SIZE.COVER)\n                ? [bounds.width, bounds.width / intrinsicProportion]\n                : [bounds.height * intrinsicProportion, bounds.height];\n        }\n\n        return [bounds.width, bounds.height];\n    }\n\n    const hasIntrinsicWidth = hasIntrinsicValue(intrinsicWidth);\n    const hasIntrinsicHeight = hasIntrinsicValue(intrinsicHeight);\n    const hasIntrinsicDimensions = hasIntrinsicWidth || hasIntrinsicHeight;\n\n    // If the background-size is auto or auto auto:\n    if (isAuto(first) && (!second || isAuto(second))) {\n        // If the image has both horizontal and vertical intrinsic dimensions, it's rendered at that size.\n        if (hasIntrinsicWidth && hasIntrinsicHeight) {\n            return [intrinsicWidth as number, intrinsicHeight as number];\n        }\n\n        // If the image has no intrinsic dimensions and has no intrinsic proportions,\n        // it's rendered at the size of the background positioning area.\n\n        if (!hasIntrinsicProportion && !hasIntrinsicDimensions) {\n            return [bounds.width, bounds.height];\n        }\n\n        // TODO If the image has no intrinsic dimensions but has intrinsic proportions, it's rendered as if contain had been specified instead.\n\n        // If the image has only one intrinsic dimension and has intrinsic proportions, it's rendered at the size corresponding to that one dimension.\n        // The other dimension is computed using the specified dimension and the intrinsic proportions.\n        if (hasIntrinsicDimensions && hasIntrinsicProportion) {\n            const width = hasIntrinsicWidth\n                ? (intrinsicWidth as number)\n                : (intrinsicHeight as number) * (intrinsicProportion as number);\n            const height = hasIntrinsicHeight\n                ? (intrinsicHeight as number)\n                : (intrinsicWidth as number) / (intrinsicProportion as number);\n            return [width, height];\n        }\n\n        // If the image has only one intrinsic dimension but has no intrinsic proportions,\n        // it's rendered using the specified dimension and the other dimension of the background positioning area.\n        const width = hasIntrinsicWidth ? (intrinsicWidth as number) : bounds.width;\n        const height = hasIntrinsicHeight ? (intrinsicHeight as number) : bounds.height;\n        return [width, height];\n    }\n\n    // If the image has intrinsic proportions, it's stretched to the specified dimension.\n    // The unspecified dimension is computed using the specified dimension and the intrinsic proportions.\n    if (hasIntrinsicProportion) {\n        let width = 0;\n        let height = 0;\n        if (isLengthPercentage(first)) {\n            width = getAbsoluteValue(first, bounds.width);\n        } else if (isLengthPercentage(second)) {\n            height = getAbsoluteValue(second, bounds.height);\n        }\n\n        if (isAuto(first)) {\n            width = height * (intrinsicProportion as number);\n        } else if (!second || isAuto(second)) {\n            height = width / (intrinsicProportion as number);\n        }\n\n        return [width, height];\n    }\n\n    // If the image has no intrinsic proportions, it's stretched to the specified dimension.\n    // The unspecified dimension is computed using the image's corresponding intrinsic dimension,\n    // if there is one. If there is no such intrinsic dimension,\n    // it becomes the corresponding dimension of the background positioning area.\n\n    let width = null;\n    let height = null;\n\n    if (isLengthPercentage(first)) {\n        width = getAbsoluteValue(first, bounds.width);\n    } else if (second && isLengthPercentage(second)) {\n        height = getAbsoluteValue(second, bounds.height);\n    }\n\n    if (width !== null && (!second || isAuto(second))) {\n        height =\n            hasIntrinsicWidth && hasIntrinsicHeight\n                ? (width / (intrinsicWidth as number)) * (intrinsicHeight as number)\n                : bounds.height;\n    }\n\n    if (height !== null && isAuto(first)) {\n        width =\n            hasIntrinsicWidth && hasIntrinsicHeight\n                ? (height / (intrinsicHeight as number)) * (intrinsicWidth as number)\n                : bounds.width;\n    }\n\n    if (width !== null && height !== null) {\n        return [width, height];\n    }\n\n    throw new Error(`Unable to calculate background-size for element`);\n};\n\nexport const getBackgroundValueForIndex = <T>(values: T[], index: number): T => {\n    const value = values[index];\n    if (typeof value === 'undefined') {\n        return values[0];\n    }\n\n    return value;\n};\n\nexport const calculateBackgroundRepeatPath = (\n    repeat: BACKGROUND_REPEAT,\n    [x, y]: [number, number],\n    [width, height]: [number, number],\n    backgroundPositioningArea: Bounds,\n    backgroundPaintingArea: Bounds\n): [Vector, Vector, Vector, Vector] => {\n    switch (repeat) {\n        case BACKGROUND_REPEAT.REPEAT_X:\n            return [\n                new Vector(Math.round(backgroundPositioningArea.left), Math.round(backgroundPositioningArea.top + y)),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + backgroundPositioningArea.width),\n                    Math.round(backgroundPositioningArea.top + y)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + backgroundPositioningArea.width),\n                    Math.round(height + backgroundPositioningArea.top + y)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left),\n                    Math.round(height + backgroundPositioningArea.top + y)\n                )\n            ];\n        case BACKGROUND_REPEAT.REPEAT_Y:\n            return [\n                new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.top)),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x + width),\n                    Math.round(backgroundPositioningArea.top)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x + width),\n                    Math.round(backgroundPositioningArea.height + backgroundPositioningArea.top)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x),\n                    Math.round(backgroundPositioningArea.height + backgroundPositioningArea.top)\n                )\n            ];\n        case BACKGROUND_REPEAT.NO_REPEAT:\n            return [\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x),\n                    Math.round(backgroundPositioningArea.top + y)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x + width),\n                    Math.round(backgroundPositioningArea.top + y)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x + width),\n                    Math.round(backgroundPositioningArea.top + y + height)\n                ),\n                new Vector(\n                    Math.round(backgroundPositioningArea.left + x),\n                    Math.round(backgroundPositioningArea.top + y + height)\n                )\n            ];\n        default:\n            return [\n                new Vector(Math.round(backgroundPaintingArea.left), Math.round(backgroundPaintingArea.top)),\n                new Vector(\n                    Math.round(backgroundPaintingArea.left + backgroundPaintingArea.width),\n                    Math.round(backgroundPaintingArea.top)\n                ),\n                new Vector(\n                    Math.round(backgroundPaintingArea.left + backgroundPaintingArea.width),\n                    Math.round(backgroundPaintingArea.height + backgroundPaintingArea.top)\n                ),\n                new Vector(\n                    Math.round(backgroundPaintingArea.left),\n                    Math.round(backgroundPaintingArea.height + backgroundPaintingArea.top)\n                )\n            ];\n    }\n};\n", "export const SMALL_IMAGE = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n", "import {SMALL_IMAGE} from '../core/util';\nexport interface FontMetric {\n    baseline: number;\n    middle: number;\n}\n\nconst SAMPLE_TEXT = 'Hidden Text';\n\nexport class FontMetrics {\n    private readonly _data: {[key: string]: FontMetric};\n    private readonly _document: Document;\n\n    constructor(document: Document) {\n        this._data = {};\n        this._document = document;\n    }\n\n    private parseMetrics(fontFamily: string, fontSize: string): FontMetric {\n        const container = this._document.createElement('div');\n        const img = this._document.createElement('img');\n        const span = this._document.createElement('span');\n\n        const body = this._document.body as HTMLBodyElement;\n\n        container.style.visibility = 'hidden';\n        container.style.fontFamily = fontFamily;\n        container.style.fontSize = fontSize;\n        container.style.margin = '0';\n        container.style.padding = '0';\n        container.style.whiteSpace = 'nowrap';\n\n        body.appendChild(container);\n\n        img.src = SMALL_IMAGE;\n        img.width = 1;\n        img.height = 1;\n\n        img.style.margin = '0';\n        img.style.padding = '0';\n        img.style.verticalAlign = 'baseline';\n\n        span.style.fontFamily = fontFamily;\n        span.style.fontSize = fontSize;\n        span.style.margin = '0';\n        span.style.padding = '0';\n\n        span.appendChild(this._document.createTextNode(SAMPLE_TEXT));\n        container.appendChild(span);\n        container.appendChild(img);\n        const baseline = img.offsetTop - span.offsetTop + 2;\n\n        container.removeChild(span);\n        container.appendChild(this._document.createTextNode(SAMPLE_TEXT));\n\n        container.style.lineHeight = 'normal';\n        img.style.verticalAlign = 'super';\n\n        const middle = img.offsetTop - container.offsetTop + 2;\n\n        body.removeChild(container);\n\n        return {baseline, middle};\n    }\n    getMetrics(fontFamily: string, fontSize: string): FontMetric {\n        const key = `${fontFamily} ${fontSize}`;\n        if (typeof this._data[key] === 'undefined') {\n            this._data[key] = this.parseMetrics(fontFamily, fontSize);\n        }\n\n        return this._data[key];\n    }\n}\n", "import {Context} from '../core/context';\nimport {RenderConfigurations} from './canvas/canvas-renderer';\n\nexport class Renderer {\n    constructor(protected readonly context: Context, protected readonly options: RenderConfigurations) {}\n}\n", "import {ElementPaint, parseStackingContexts, StackingContext} from '../stacking-context';\nimport {asString, Color, isTransparent} from '../../css/types/color';\nimport {ElementContainer, FLAGS} from '../../dom/element-container';\nimport {BORDER_STYLE} from '../../css/property-descriptors/border-style';\nimport {CSSParsedDeclaration} from '../../css';\nimport {TextContainer} from '../../dom/text-container';\nimport {Path, transformPath} from '../path';\nimport {BACKGROUND_CLIP} from '../../css/property-descriptors/background-clip';\nimport {BoundCurves, calculateBorderBoxPath, calculateContentBoxPath, calculatePaddingBoxPath} from '../bound-curves';\nimport {BezierCurve, isBezierCurve} from '../bezier-curve';\nimport {Vector} from '../vector';\nimport {CSSImageType, CSSURLImage, isLinearGradient, isRadialGradient} from '../../css/types/image';\nimport {\n    parsePathForBorder,\n    parsePathForBorderDoubleInner,\n    parsePathForBorderDoubleOuter,\n    parsePathForBorderStroke\n} from '../border';\nimport {calculateBackgroundRendering, getBackgroundValueForIndex} from '../background';\nimport {isDimensionToken} from '../../css/syntax/parser';\nimport {segmentGraphemes, TextBounds} from '../../css/layout/text';\nimport {ImageElementContainer} from '../../dom/replaced-elements/image-element-container';\nimport {contentBox} from '../box-sizing';\nimport {CanvasElementContainer} from '../../dom/replaced-elements/canvas-element-container';\nimport {SVGElementContainer} from '../../dom/replaced-elements/svg-element-container';\nimport {ReplacedElementContainer} from '../../dom/replaced-elements';\nimport {EffectTarget, IElementEffect, isClipEffect, isOpacityEffect, isTransformEffect} from '../effects';\nimport {contains} from '../../core/bitwise';\nimport {calculateGradientDirection, calculateRadius, processColorStops} from '../../css/types/functions/gradient';\nimport {FIFTY_PERCENT, getAbsoluteValue} from '../../css/types/length-percentage';\nimport {TEXT_DECORATION_LINE} from '../../css/property-descriptors/text-decoration-line';\nimport {FontMetrics} from '../font-metrics';\nimport {DISPLAY} from '../../css/property-descriptors/display';\nimport {Bounds} from '../../css/layout/bounds';\nimport {LIST_STYLE_TYPE} from '../../css/property-descriptors/list-style-type';\nimport {computeLineHeight} from '../../css/property-descriptors/line-height';\nimport {CHECKBOX, INPUT_COLOR, InputElementContainer, RADIO} from '../../dom/replaced-elements/input-element-container';\nimport {TEXT_ALIGN} from '../../css/property-descriptors/text-align';\nimport {TextareaElementContainer} from '../../dom/elements/textarea-element-container';\nimport {SelectElementContainer} from '../../dom/elements/select-element-container';\nimport {IFrameElementContainer} from '../../dom/replaced-elements/iframe-element-container';\nimport {TextShadow} from '../../css/property-descriptors/text-shadow';\nimport {PAINT_ORDER_LAYER} from '../../css/property-descriptors/paint-order';\nimport {Renderer} from '../renderer';\nimport {Context} from '../../core/context';\nimport {DIRECTION} from '../../css/property-descriptors/direction';\n\nexport type RenderConfigurations = RenderOptions & {\n    backgroundColor: Color | null;\n};\n\nexport interface RenderOptions {\n    scale: number;\n    canvas?: HTMLCanvasElement;\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\n\nconst MASK_OFFSET = 10000;\n\nexport class CanvasRenderer extends Renderer {\n    canvas: HTMLCanvasElement;\n    ctx: CanvasRenderingContext2D;\n    private readonly _activeEffects: IElementEffect[] = [];\n    private readonly fontMetrics: FontMetrics;\n\n    constructor(context: Context, options: RenderConfigurations) {\n        super(context, options);\n        this.canvas = options.canvas ? options.canvas : document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\n        if (!options.canvas) {\n            this.canvas.width = Math.floor(options.width * options.scale);\n            this.canvas.height = Math.floor(options.height * options.scale);\n            this.canvas.style.width = `${options.width}px`;\n            this.canvas.style.height = `${options.height}px`;\n        }\n        this.fontMetrics = new FontMetrics(document);\n        this.ctx.scale(this.options.scale, this.options.scale);\n        this.ctx.translate(-options.x, -options.y);\n        this.ctx.textBaseline = 'bottom';\n        this._activeEffects = [];\n        this.context.logger.debug(\n            `Canvas renderer initialized (${options.width}x${options.height}) with scale ${options.scale}`\n        );\n    }\n\n    applyEffects(effects: IElementEffect[]): void {\n        while (this._activeEffects.length) {\n            this.popEffect();\n        }\n\n        effects.forEach((effect) => this.applyEffect(effect));\n    }\n\n    applyEffect(effect: IElementEffect): void {\n        this.ctx.save();\n        if (isOpacityEffect(effect)) {\n            this.ctx.globalAlpha = effect.opacity;\n        }\n\n        if (isTransformEffect(effect)) {\n            this.ctx.translate(effect.offsetX, effect.offsetY);\n            this.ctx.transform(\n                effect.matrix[0],\n                effect.matrix[1],\n                effect.matrix[2],\n                effect.matrix[3],\n                effect.matrix[4],\n                effect.matrix[5]\n            );\n            this.ctx.translate(-effect.offsetX, -effect.offsetY);\n        }\n\n        if (isClipEffect(effect)) {\n            this.path(effect.path);\n            this.ctx.clip();\n        }\n\n        this._activeEffects.push(effect);\n    }\n\n    popEffect(): void {\n        this._activeEffects.pop();\n        this.ctx.restore();\n    }\n\n    async renderStack(stack: StackingContext): Promise<void> {\n        const styles = stack.element.container.styles;\n        if (styles.isVisible()) {\n            await this.renderStackContent(stack);\n        }\n    }\n\n    async renderNode(paint: ElementPaint): Promise<void> {\n        if (contains(paint.container.flags, FLAGS.DEBUG_RENDER)) {\n            debugger;\n        }\n\n        if (paint.container.styles.isVisible()) {\n            await this.renderNodeBackgroundAndBorders(paint);\n            await this.renderNodeContent(paint);\n        }\n    }\n\n    renderTextWithLetterSpacing(text: TextBounds, letterSpacing: number, baseline: number): void {\n        if (letterSpacing === 0) {\n            this.ctx.fillText(text.text, text.bounds.left, text.bounds.top + baseline);\n        } else {\n            const letters = segmentGraphemes(text.text);\n            letters.reduce((left, letter) => {\n                this.ctx.fillText(letter, left, text.bounds.top + baseline);\n\n                return left + this.ctx.measureText(letter).width;\n            }, text.bounds.left);\n        }\n    }\n\n    private createFontStyle(styles: CSSParsedDeclaration): string[] {\n        const fontVariant = styles.fontVariant\n            .filter((variant) => variant === 'normal' || variant === 'small-caps')\n            .join('');\n        const fontFamily = fixIOSSystemFonts(styles.fontFamily).join(', ');\n        const fontSize = isDimensionToken(styles.fontSize)\n            ? `${styles.fontSize.number}${styles.fontSize.unit}`\n            : `${styles.fontSize.number}px`;\n\n        return [\n            [styles.fontStyle, fontVariant, styles.fontWeight, fontSize, fontFamily].join(' '),\n            fontFamily,\n            fontSize\n        ];\n    }\n\n    async renderTextNode(text: TextContainer, styles: CSSParsedDeclaration): Promise<void> {\n        const [font, fontFamily, fontSize] = this.createFontStyle(styles);\n\n        this.ctx.font = font;\n\n        this.ctx.direction = styles.direction === DIRECTION.RTL ? 'rtl' : 'ltr';\n        this.ctx.textAlign = 'left';\n        this.ctx.textBaseline = 'alphabetic';\n        const {baseline, middle} = this.fontMetrics.getMetrics(fontFamily, fontSize);\n        const paintOrder = styles.paintOrder;\n\n        text.textBounds.forEach((text) => {\n            paintOrder.forEach((paintOrderLayer) => {\n                switch (paintOrderLayer) {\n                    case PAINT_ORDER_LAYER.FILL:\n                        this.ctx.fillStyle = asString(styles.color);\n                        this.renderTextWithLetterSpacing(text, styles.letterSpacing, baseline);\n                        const textShadows: TextShadow = styles.textShadow;\n\n                        if (textShadows.length && text.text.trim().length) {\n                            textShadows\n                                .slice(0)\n                                .reverse()\n                                .forEach((textShadow) => {\n                                    this.ctx.shadowColor = asString(textShadow.color);\n                                    this.ctx.shadowOffsetX = textShadow.offsetX.number * this.options.scale;\n                                    this.ctx.shadowOffsetY = textShadow.offsetY.number * this.options.scale;\n                                    this.ctx.shadowBlur = textShadow.blur.number;\n\n                                    this.renderTextWithLetterSpacing(text, styles.letterSpacing, baseline);\n                                });\n\n                            this.ctx.shadowColor = '';\n                            this.ctx.shadowOffsetX = 0;\n                            this.ctx.shadowOffsetY = 0;\n                            this.ctx.shadowBlur = 0;\n                        }\n\n                        if (styles.textDecorationLine.length) {\n                            this.ctx.fillStyle = asString(styles.textDecorationColor || styles.color);\n                            styles.textDecorationLine.forEach((textDecorationLine) => {\n                                switch (textDecorationLine) {\n                                    case TEXT_DECORATION_LINE.UNDERLINE:\n                                        // Draws a line at the baseline of the font\n                                        // TODO As some browsers display the line as more than 1px if the font-size is big,\n                                        // need to take that into account both in position and size\n                                        this.ctx.fillRect(\n                                            text.bounds.left,\n                                            Math.round(text.bounds.top + baseline),\n                                            text.bounds.width,\n                                            1\n                                        );\n\n                                        break;\n                                    case TEXT_DECORATION_LINE.OVERLINE:\n                                        this.ctx.fillRect(\n                                            text.bounds.left,\n                                            Math.round(text.bounds.top),\n                                            text.bounds.width,\n                                            1\n                                        );\n                                        break;\n                                    case TEXT_DECORATION_LINE.LINE_THROUGH:\n                                        // TODO try and find exact position for line-through\n                                        this.ctx.fillRect(\n                                            text.bounds.left,\n                                            Math.ceil(text.bounds.top + middle),\n                                            text.bounds.width,\n                                            1\n                                        );\n                                        break;\n                                }\n                            });\n                        }\n                        break;\n                    case PAINT_ORDER_LAYER.STROKE:\n                        if (styles.webkitTextStrokeWidth && text.text.trim().length) {\n                            this.ctx.strokeStyle = asString(styles.webkitTextStrokeColor);\n                            this.ctx.lineWidth = styles.webkitTextStrokeWidth;\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            this.ctx.lineJoin = !!(window as any).chrome ? 'miter' : 'round';\n                            this.ctx.strokeText(text.text, text.bounds.left, text.bounds.top + baseline);\n                        }\n                        this.ctx.strokeStyle = '';\n                        this.ctx.lineWidth = 0;\n                        this.ctx.lineJoin = 'miter';\n                        break;\n                }\n            });\n        });\n    }\n\n    renderReplacedElement(\n        container: ReplacedElementContainer,\n        curves: BoundCurves,\n        image: HTMLImageElement | HTMLCanvasElement\n    ): void {\n        if (image && container.intrinsicWidth > 0 && container.intrinsicHeight > 0) {\n            const box = contentBox(container);\n            const path = calculatePaddingBoxPath(curves);\n            this.path(path);\n            this.ctx.save();\n            this.ctx.clip();\n            this.ctx.drawImage(\n                image,\n                0,\n                0,\n                container.intrinsicWidth,\n                container.intrinsicHeight,\n                box.left,\n                box.top,\n                box.width,\n                box.height\n            );\n            this.ctx.restore();\n        }\n    }\n\n    async renderNodeContent(paint: ElementPaint): Promise<void> {\n        this.applyEffects(paint.getEffects(EffectTarget.CONTENT));\n        const container = paint.container;\n        const curves = paint.curves;\n        const styles = container.styles;\n        for (const child of container.textNodes) {\n            await this.renderTextNode(child, styles);\n        }\n\n        if (container instanceof ImageElementContainer) {\n            try {\n                const image = await this.context.cache.match(container.src);\n                this.renderReplacedElement(container, curves, image);\n            } catch (e) {\n                this.context.logger.error(`Error loading image ${container.src}`);\n            }\n        }\n\n        if (container instanceof CanvasElementContainer) {\n            this.renderReplacedElement(container, curves, container.canvas);\n        }\n\n        if (container instanceof SVGElementContainer) {\n            try {\n                const image = await this.context.cache.match(container.svg);\n                this.renderReplacedElement(container, curves, image);\n            } catch (e) {\n                this.context.logger.error(`Error loading svg ${container.svg.substring(0, 255)}`);\n            }\n        }\n\n        if (container instanceof IFrameElementContainer && container.tree) {\n            const iframeRenderer = new CanvasRenderer(this.context, {\n                scale: this.options.scale,\n                backgroundColor: container.backgroundColor,\n                x: 0,\n                y: 0,\n                width: container.width,\n                height: container.height\n            });\n\n            const canvas = await iframeRenderer.render(container.tree);\n            if (container.width && container.height) {\n                this.ctx.drawImage(\n                    canvas,\n                    0,\n                    0,\n                    container.width,\n                    container.height,\n                    container.bounds.left,\n                    container.bounds.top,\n                    container.bounds.width,\n                    container.bounds.height\n                );\n            }\n        }\n\n        if (container instanceof InputElementContainer) {\n            const size = Math.min(container.bounds.width, container.bounds.height);\n\n            if (container.type === CHECKBOX) {\n                if (container.checked) {\n                    this.ctx.save();\n                    this.path([\n                        new Vector(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79),\n                        new Vector(container.bounds.left + size * 0.16, container.bounds.top + size * 0.5549),\n                        new Vector(container.bounds.left + size * 0.27347, container.bounds.top + size * 0.44071),\n                        new Vector(container.bounds.left + size * 0.39694, container.bounds.top + size * 0.5649),\n                        new Vector(container.bounds.left + size * 0.72983, container.bounds.top + size * 0.23),\n                        new Vector(container.bounds.left + size * 0.84, container.bounds.top + size * 0.34085),\n                        new Vector(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79)\n                    ]);\n\n                    this.ctx.fillStyle = asString(INPUT_COLOR);\n                    this.ctx.fill();\n                    this.ctx.restore();\n                }\n            } else if (container.type === RADIO) {\n                if (container.checked) {\n                    this.ctx.save();\n                    this.ctx.beginPath();\n                    this.ctx.arc(\n                        container.bounds.left + size / 2,\n                        container.bounds.top + size / 2,\n                        size / 4,\n                        0,\n                        Math.PI * 2,\n                        true\n                    );\n                    this.ctx.fillStyle = asString(INPUT_COLOR);\n                    this.ctx.fill();\n                    this.ctx.restore();\n                }\n            }\n        }\n\n        if (isTextInputElement(container) && container.value.length) {\n            const [fontFamily, fontSize] = this.createFontStyle(styles);\n            const {baseline} = this.fontMetrics.getMetrics(fontFamily, fontSize);\n\n            this.ctx.font = fontFamily;\n            this.ctx.fillStyle = asString(styles.color);\n\n            this.ctx.textBaseline = 'alphabetic';\n            this.ctx.textAlign = canvasTextAlign(container.styles.textAlign);\n\n            const bounds = contentBox(container);\n\n            let x = 0;\n\n            switch (container.styles.textAlign) {\n                case TEXT_ALIGN.CENTER:\n                    x += bounds.width / 2;\n                    break;\n                case TEXT_ALIGN.RIGHT:\n                    x += bounds.width;\n                    break;\n            }\n\n            const textBounds = bounds.add(x, 0, 0, -bounds.height / 2 + 1);\n\n            this.ctx.save();\n            this.path([\n                new Vector(bounds.left, bounds.top),\n                new Vector(bounds.left + bounds.width, bounds.top),\n                new Vector(bounds.left + bounds.width, bounds.top + bounds.height),\n                new Vector(bounds.left, bounds.top + bounds.height)\n            ]);\n\n            this.ctx.clip();\n            this.renderTextWithLetterSpacing(\n                new TextBounds(container.value, textBounds),\n                styles.letterSpacing,\n                baseline\n            );\n            this.ctx.restore();\n            this.ctx.textBaseline = 'alphabetic';\n            this.ctx.textAlign = 'left';\n        }\n\n        if (contains(container.styles.display, DISPLAY.LIST_ITEM)) {\n            if (container.styles.listStyleImage !== null) {\n                const img = container.styles.listStyleImage;\n                if (img.type === CSSImageType.URL) {\n                    let image;\n                    const url = (img as CSSURLImage).url;\n                    try {\n                        image = await this.context.cache.match(url);\n                        this.ctx.drawImage(image, container.bounds.left - (image.width + 10), container.bounds.top);\n                    } catch (e) {\n                        this.context.logger.error(`Error loading list-style-image ${url}`);\n                    }\n                }\n            } else if (paint.listValue && container.styles.listStyleType !== LIST_STYLE_TYPE.NONE) {\n                const [fontFamily] = this.createFontStyle(styles);\n\n                this.ctx.font = fontFamily;\n                this.ctx.fillStyle = asString(styles.color);\n\n                this.ctx.textBaseline = 'middle';\n                this.ctx.textAlign = 'right';\n                const bounds = new Bounds(\n                    container.bounds.left,\n                    container.bounds.top + getAbsoluteValue(container.styles.paddingTop, container.bounds.width),\n                    container.bounds.width,\n                    computeLineHeight(styles.lineHeight, styles.fontSize.number) / 2 + 1\n                );\n\n                this.renderTextWithLetterSpacing(\n                    new TextBounds(paint.listValue, bounds),\n                    styles.letterSpacing,\n                    computeLineHeight(styles.lineHeight, styles.fontSize.number) / 2 + 2\n                );\n                this.ctx.textBaseline = 'bottom';\n                this.ctx.textAlign = 'left';\n            }\n        }\n    }\n\n    async renderStackContent(stack: StackingContext): Promise<void> {\n        if (contains(stack.element.container.flags, FLAGS.DEBUG_RENDER)) {\n            debugger;\n        }\n        // https://www.w3.org/TR/css-position-3/#painting-order\n        // 1. the background and borders of the element forming the stacking context.\n        await this.renderNodeBackgroundAndBorders(stack.element);\n        // 2. the child stacking contexts with negative stack levels (most negative first).\n        for (const child of stack.negativeZIndex) {\n            await this.renderStack(child);\n        }\n        // 3. For all its in-flow, non-positioned, block-level descendants in tree order:\n        await this.renderNodeContent(stack.element);\n\n        for (const child of stack.nonInlineLevel) {\n            await this.renderNode(child);\n        }\n        // 4. All non-positioned floating descendants, in tree order. For each one of these,\n        // treat the element as if it created a new stacking context, but any positioned descendants and descendants\n        // which actually create a new stacking context should be considered part of the parent stacking context,\n        // not this new one.\n        for (const child of stack.nonPositionedFloats) {\n            await this.renderStack(child);\n        }\n        // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\n        for (const child of stack.nonPositionedInlineLevel) {\n            await this.renderStack(child);\n        }\n        for (const child of stack.inlineLevel) {\n            await this.renderNode(child);\n        }\n        // 6. All positioned, opacity or transform descendants, in tree order that fall into the following categories:\n        //  All positioned descendants with 'z-index: auto' or 'z-index: 0', in tree order.\n        //  For those with 'z-index: auto', treat the element as if it created a new stacking context,\n        //  but any positioned descendants and descendants which actually create a new stacking context should be\n        //  considered part of the parent stacking context, not this new one. For those with 'z-index: 0',\n        //  treat the stacking context generated atomically.\n        //\n        //  All opacity descendants with opacity less than 1\n        //\n        //  All transform descendants with transform other than none\n        for (const child of stack.zeroOrAutoZIndexOrTransformedOrOpacity) {\n            await this.renderStack(child);\n        }\n        // 7. Stacking contexts formed by positioned descendants with z-indices greater than or equal to 1 in z-index\n        // order (smallest first) then tree order.\n        for (const child of stack.positiveZIndex) {\n            await this.renderStack(child);\n        }\n    }\n\n    mask(paths: Path[]): void {\n        this.ctx.beginPath();\n        this.ctx.moveTo(0, 0);\n        this.ctx.lineTo(this.canvas.width, 0);\n        this.ctx.lineTo(this.canvas.width, this.canvas.height);\n        this.ctx.lineTo(0, this.canvas.height);\n        this.ctx.lineTo(0, 0);\n        this.formatPath(paths.slice(0).reverse());\n        this.ctx.closePath();\n    }\n\n    path(paths: Path[]): void {\n        this.ctx.beginPath();\n        this.formatPath(paths);\n        this.ctx.closePath();\n    }\n\n    formatPath(paths: Path[]): void {\n        paths.forEach((point, index) => {\n            const start: Vector = isBezierCurve(point) ? point.start : point;\n            if (index === 0) {\n                this.ctx.moveTo(start.x, start.y);\n            } else {\n                this.ctx.lineTo(start.x, start.y);\n            }\n\n            if (isBezierCurve(point)) {\n                this.ctx.bezierCurveTo(\n                    point.startControl.x,\n                    point.startControl.y,\n                    point.endControl.x,\n                    point.endControl.y,\n                    point.end.x,\n                    point.end.y\n                );\n            }\n        });\n    }\n\n    renderRepeat(path: Path[], pattern: CanvasPattern | CanvasGradient, offsetX: number, offsetY: number): void {\n        this.path(path);\n        this.ctx.fillStyle = pattern;\n        this.ctx.translate(offsetX, offsetY);\n        this.ctx.fill();\n        this.ctx.translate(-offsetX, -offsetY);\n    }\n\n    resizeImage(image: HTMLImageElement, width: number, height: number): HTMLCanvasElement | HTMLImageElement {\n        if (image.width === width && image.height === height) {\n            return image;\n        }\n\n        const ownerDocument = this.canvas.ownerDocument ?? document;\n        const canvas = ownerDocument.createElement('canvas');\n        canvas.width = Math.max(1, width);\n        canvas.height = Math.max(1, height);\n        const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n        ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, width, height);\n        return canvas;\n    }\n\n    async renderBackgroundImage(container: ElementContainer): Promise<void> {\n        let index = container.styles.backgroundImage.length - 1;\n        for (const backgroundImage of container.styles.backgroundImage.slice(0).reverse()) {\n            if (backgroundImage.type === CSSImageType.URL) {\n                let image;\n                const url = (backgroundImage as CSSURLImage).url;\n                try {\n                    image = await this.context.cache.match(url);\n                } catch (e) {\n                    this.context.logger.error(`Error loading background-image ${url}`);\n                }\n\n                if (image) {\n                    const [path, x, y, width, height] = calculateBackgroundRendering(container, index, [\n                        image.width,\n                        image.height,\n                        image.width / image.height\n                    ]);\n                    const pattern = this.ctx.createPattern(\n                        this.resizeImage(image, width, height),\n                        'repeat'\n                    ) as CanvasPattern;\n                    this.renderRepeat(path, pattern, x, y);\n                }\n            } else if (isLinearGradient(backgroundImage)) {\n                const [path, x, y, width, height] = calculateBackgroundRendering(container, index, [null, null, null]);\n                const [lineLength, x0, x1, y0, y1] = calculateGradientDirection(backgroundImage.angle, width, height);\n\n                const canvas = document.createElement('canvas');\n                canvas.width = width;\n                canvas.height = height;\n                const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n                const gradient = ctx.createLinearGradient(x0, y0, x1, y1);\n\n                processColorStops(backgroundImage.stops, lineLength).forEach((colorStop) =>\n                    gradient.addColorStop(colorStop.stop, asString(colorStop.color))\n                );\n\n                ctx.fillStyle = gradient;\n                ctx.fillRect(0, 0, width, height);\n                if (width > 0 && height > 0) {\n                    const pattern = this.ctx.createPattern(canvas, 'repeat') as CanvasPattern;\n                    this.renderRepeat(path, pattern, x, y);\n                }\n            } else if (isRadialGradient(backgroundImage)) {\n                const [path, left, top, width, height] = calculateBackgroundRendering(container, index, [\n                    null,\n                    null,\n                    null\n                ]);\n                const position = backgroundImage.position.length === 0 ? [FIFTY_PERCENT] : backgroundImage.position;\n                const x = getAbsoluteValue(position[0], width);\n                const y = getAbsoluteValue(position[position.length - 1], height);\n\n                const [rx, ry] = calculateRadius(backgroundImage, x, y, width, height);\n                if (rx > 0 && ry > 0) {\n                    const radialGradient = this.ctx.createRadialGradient(left + x, top + y, 0, left + x, top + y, rx);\n\n                    processColorStops(backgroundImage.stops, rx * 2).forEach((colorStop) =>\n                        radialGradient.addColorStop(colorStop.stop, asString(colorStop.color))\n                    );\n\n                    this.path(path);\n                    this.ctx.fillStyle = radialGradient;\n                    if (rx !== ry) {\n                        // transforms for elliptical radial gradient\n                        const midX = container.bounds.left + 0.5 * container.bounds.width;\n                        const midY = container.bounds.top + 0.5 * container.bounds.height;\n                        const f = ry / rx;\n                        const invF = 1 / f;\n\n                        this.ctx.save();\n                        this.ctx.translate(midX, midY);\n                        this.ctx.transform(1, 0, 0, f, 0, 0);\n                        this.ctx.translate(-midX, -midY);\n\n                        this.ctx.fillRect(left, invF * (top - midY) + midY, width, height * invF);\n                        this.ctx.restore();\n                    } else {\n                        this.ctx.fill();\n                    }\n                }\n            }\n            index--;\n        }\n    }\n\n    async renderSolidBorder(color: Color, side: number, curvePoints: BoundCurves): Promise<void> {\n        this.path(parsePathForBorder(curvePoints, side));\n        this.ctx.fillStyle = asString(color);\n        this.ctx.fill();\n    }\n\n    async renderDoubleBorder(color: Color, width: number, side: number, curvePoints: BoundCurves): Promise<void> {\n        if (width < 3) {\n            await this.renderSolidBorder(color, side, curvePoints);\n            return;\n        }\n\n        const outerPaths = parsePathForBorderDoubleOuter(curvePoints, side);\n        this.path(outerPaths);\n        this.ctx.fillStyle = asString(color);\n        this.ctx.fill();\n        const innerPaths = parsePathForBorderDoubleInner(curvePoints, side);\n        this.path(innerPaths);\n        this.ctx.fill();\n    }\n\n    async renderNodeBackgroundAndBorders(paint: ElementPaint): Promise<void> {\n        this.applyEffects(paint.getEffects(EffectTarget.BACKGROUND_BORDERS));\n        const styles = paint.container.styles;\n        const hasBackground = !isTransparent(styles.backgroundColor) || styles.backgroundImage.length;\n\n        const borders = [\n            {style: styles.borderTopStyle, color: styles.borderTopColor, width: styles.borderTopWidth},\n            {style: styles.borderRightStyle, color: styles.borderRightColor, width: styles.borderRightWidth},\n            {style: styles.borderBottomStyle, color: styles.borderBottomColor, width: styles.borderBottomWidth},\n            {style: styles.borderLeftStyle, color: styles.borderLeftColor, width: styles.borderLeftWidth}\n        ];\n\n        const backgroundPaintingArea = calculateBackgroundCurvedPaintingArea(\n            getBackgroundValueForIndex(styles.backgroundClip, 0),\n            paint.curves\n        );\n\n        if (hasBackground || styles.boxShadow.length) {\n            this.ctx.save();\n            this.path(backgroundPaintingArea);\n            this.ctx.clip();\n\n            if (!isTransparent(styles.backgroundColor)) {\n                this.ctx.fillStyle = asString(styles.backgroundColor);\n                this.ctx.fill();\n            }\n\n            await this.renderBackgroundImage(paint.container);\n\n            this.ctx.restore();\n\n            styles.boxShadow\n                .slice(0)\n                .reverse()\n                .forEach((shadow) => {\n                    this.ctx.save();\n                    const borderBoxArea = calculateBorderBoxPath(paint.curves);\n                    const maskOffset = shadow.inset ? 0 : MASK_OFFSET;\n                    const shadowPaintingArea = transformPath(\n                        borderBoxArea,\n                        -maskOffset + (shadow.inset ? 1 : -1) * shadow.spread.number,\n                        (shadow.inset ? 1 : -1) * shadow.spread.number,\n                        shadow.spread.number * (shadow.inset ? -2 : 2),\n                        shadow.spread.number * (shadow.inset ? -2 : 2)\n                    );\n\n                    if (shadow.inset) {\n                        this.path(borderBoxArea);\n                        this.ctx.clip();\n                        this.mask(shadowPaintingArea);\n                    } else {\n                        this.mask(borderBoxArea);\n                        this.ctx.clip();\n                        this.path(shadowPaintingArea);\n                    }\n\n                    this.ctx.shadowOffsetX = shadow.offsetX.number + maskOffset;\n                    this.ctx.shadowOffsetY = shadow.offsetY.number;\n                    this.ctx.shadowColor = asString(shadow.color);\n                    this.ctx.shadowBlur = shadow.blur.number;\n                    this.ctx.fillStyle = shadow.inset ? asString(shadow.color) : 'rgba(0,0,0,1)';\n\n                    this.ctx.fill();\n                    this.ctx.restore();\n                });\n        }\n\n        let side = 0;\n        for (const border of borders) {\n            if (border.style !== BORDER_STYLE.NONE && !isTransparent(border.color) && border.width > 0) {\n                if (border.style === BORDER_STYLE.DASHED) {\n                    await this.renderDashedDottedBorder(\n                        border.color,\n                        border.width,\n                        side,\n                        paint.curves,\n                        BORDER_STYLE.DASHED\n                    );\n                } else if (border.style === BORDER_STYLE.DOTTED) {\n                    await this.renderDashedDottedBorder(\n                        border.color,\n                        border.width,\n                        side,\n                        paint.curves,\n                        BORDER_STYLE.DOTTED\n                    );\n                } else if (border.style === BORDER_STYLE.DOUBLE) {\n                    await this.renderDoubleBorder(border.color, border.width, side, paint.curves);\n                } else {\n                    await this.renderSolidBorder(border.color, side, paint.curves);\n                }\n            }\n            side++;\n        }\n    }\n\n    async renderDashedDottedBorder(\n        color: Color,\n        width: number,\n        side: number,\n        curvePoints: BoundCurves,\n        style: BORDER_STYLE\n    ): Promise<void> {\n        this.ctx.save();\n\n        const strokePaths = parsePathForBorderStroke(curvePoints, side);\n        const boxPaths = parsePathForBorder(curvePoints, side);\n\n        if (style === BORDER_STYLE.DASHED) {\n            this.path(boxPaths);\n            this.ctx.clip();\n        }\n\n        let startX, startY, endX, endY;\n        if (isBezierCurve(boxPaths[0])) {\n            startX = (boxPaths[0] as BezierCurve).start.x;\n            startY = (boxPaths[0] as BezierCurve).start.y;\n        } else {\n            startX = (boxPaths[0] as Vector).x;\n            startY = (boxPaths[0] as Vector).y;\n        }\n        if (isBezierCurve(boxPaths[1])) {\n            endX = (boxPaths[1] as BezierCurve).end.x;\n            endY = (boxPaths[1] as BezierCurve).end.y;\n        } else {\n            endX = (boxPaths[1] as Vector).x;\n            endY = (boxPaths[1] as Vector).y;\n        }\n\n        let length;\n        if (side === 0 || side === 2) {\n            length = Math.abs(startX - endX);\n        } else {\n            length = Math.abs(startY - endY);\n        }\n\n        this.ctx.beginPath();\n        if (style === BORDER_STYLE.DOTTED) {\n            this.formatPath(strokePaths);\n        } else {\n            this.formatPath(boxPaths.slice(0, 2));\n        }\n\n        let dashLength = width < 3 ? width * 3 : width * 2;\n        let spaceLength = width < 3 ? width * 2 : width;\n        if (style === BORDER_STYLE.DOTTED) {\n            dashLength = width;\n            spaceLength = width;\n        }\n\n        let useLineDash = true;\n        if (length <= dashLength * 2) {\n            useLineDash = false;\n        } else if (length <= dashLength * 2 + spaceLength) {\n            const multiplier = length / (2 * dashLength + spaceLength);\n            dashLength *= multiplier;\n            spaceLength *= multiplier;\n        } else {\n            const numberOfDashes = Math.floor((length + spaceLength) / (dashLength + spaceLength));\n            const minSpace = (length - numberOfDashes * dashLength) / (numberOfDashes - 1);\n            const maxSpace = (length - (numberOfDashes + 1) * dashLength) / numberOfDashes;\n            spaceLength =\n                maxSpace <= 0 || Math.abs(spaceLength - minSpace) < Math.abs(spaceLength - maxSpace)\n                    ? minSpace\n                    : maxSpace;\n        }\n\n        if (useLineDash) {\n            if (style === BORDER_STYLE.DOTTED) {\n                this.ctx.setLineDash([0, dashLength + spaceLength]);\n            } else {\n                this.ctx.setLineDash([dashLength, spaceLength]);\n            }\n        }\n\n        if (style === BORDER_STYLE.DOTTED) {\n            this.ctx.lineCap = 'round';\n            this.ctx.lineWidth = width;\n        } else {\n            this.ctx.lineWidth = width * 2 + 1.1;\n        }\n        this.ctx.strokeStyle = asString(color);\n        this.ctx.stroke();\n        this.ctx.setLineDash([]);\n\n        // dashed round edge gap\n        if (style === BORDER_STYLE.DASHED) {\n            if (isBezierCurve(boxPaths[0])) {\n                const path1 = boxPaths[3] as BezierCurve;\n                const path2 = boxPaths[0] as BezierCurve;\n                this.ctx.beginPath();\n                this.formatPath([new Vector(path1.end.x, path1.end.y), new Vector(path2.start.x, path2.start.y)]);\n                this.ctx.stroke();\n            }\n            if (isBezierCurve(boxPaths[1])) {\n                const path1 = boxPaths[1] as BezierCurve;\n                const path2 = boxPaths[2] as BezierCurve;\n                this.ctx.beginPath();\n                this.formatPath([new Vector(path1.end.x, path1.end.y), new Vector(path2.start.x, path2.start.y)]);\n                this.ctx.stroke();\n            }\n        }\n\n        this.ctx.restore();\n    }\n\n    async render(element: ElementContainer): Promise<HTMLCanvasElement> {\n        if (this.options.backgroundColor) {\n            this.ctx.fillStyle = asString(this.options.backgroundColor);\n            this.ctx.fillRect(this.options.x, this.options.y, this.options.width, this.options.height);\n        }\n\n        const stack = parseStackingContexts(element);\n\n        await this.renderStack(stack);\n        this.applyEffects([]);\n        return this.canvas;\n    }\n}\n\nconst isTextInputElement = (\n    container: ElementContainer\n): container is InputElementContainer | TextareaElementContainer | SelectElementContainer => {\n    if (container instanceof TextareaElementContainer) {\n        return true;\n    } else if (container instanceof SelectElementContainer) {\n        return true;\n    } else if (container instanceof InputElementContainer && container.type !== RADIO && container.type !== CHECKBOX) {\n        return true;\n    }\n    return false;\n};\n\nconst calculateBackgroundCurvedPaintingArea = (clip: BACKGROUND_CLIP, curves: BoundCurves): Path[] => {\n    switch (clip) {\n        case BACKGROUND_CLIP.BORDER_BOX:\n            return calculateBorderBoxPath(curves);\n        case BACKGROUND_CLIP.CONTENT_BOX:\n            return calculateContentBoxPath(curves);\n        case BACKGROUND_CLIP.PADDING_BOX:\n        default:\n            return calculatePaddingBoxPath(curves);\n    }\n};\n\nconst canvasTextAlign = (textAlign: TEXT_ALIGN): CanvasTextAlign => {\n    switch (textAlign) {\n        case TEXT_ALIGN.CENTER:\n            return 'center';\n        case TEXT_ALIGN.RIGHT:\n            return 'right';\n        case TEXT_ALIGN.LEFT:\n        default:\n            return 'left';\n    }\n};\n\n// see https://github.com/niklasvh/html2canvas/pull/2645\nconst iOSBrokenFonts = ['-apple-system', 'system-ui'];\n\nconst fixIOSSystemFonts = (fontFamilies: string[]): string[] => {\n    return /iPhone OS 15_(0|1)/.test(window.navigator.userAgent)\n        ? fontFamilies.filter((fontFamily) => iOSBrokenFonts.indexOf(fontFamily) === -1)\n        : fontFamilies;\n};\n", "import {RenderConfigurations} from './canvas-renderer';\nimport {createForeignObjectSVG} from '../../core/features';\nimport {asString} from '../../css/types/color';\nimport {Renderer} from '../renderer';\nimport {Context} from '../../core/context';\n\nexport class ForeignObjectRenderer extends Renderer {\n    canvas: HTMLCanvasElement;\n    ctx: CanvasRenderingContext2D;\n    options: RenderConfigurations;\n\n    constructor(context: Context, options: RenderConfigurations) {\n        super(context, options);\n        this.canvas = options.canvas ? options.canvas : document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\n        this.options = options;\n        this.canvas.width = Math.floor(options.width * options.scale);\n        this.canvas.height = Math.floor(options.height * options.scale);\n        this.canvas.style.width = `${options.width}px`;\n        this.canvas.style.height = `${options.height}px`;\n\n        this.ctx.scale(this.options.scale, this.options.scale);\n        this.ctx.translate(-options.x, -options.y);\n        this.context.logger.debug(\n            `EXPERIMENTAL ForeignObject renderer initialized (${options.width}x${options.height} at ${options.x},${options.y}) with scale ${options.scale}`\n        );\n    }\n\n    async render(element: HTMLElement): Promise<HTMLCanvasElement> {\n        const svg = createForeignObjectSVG(\n            this.options.width * this.options.scale,\n            this.options.height * this.options.scale,\n            this.options.scale,\n            this.options.scale,\n            element\n        );\n\n        const img = await loadSerializedSVG(svg);\n\n        if (this.options.backgroundColor) {\n            this.ctx.fillStyle = asString(this.options.backgroundColor);\n            this.ctx.fillRect(0, 0, this.options.width * this.options.scale, this.options.height * this.options.scale);\n        }\n\n        this.ctx.drawImage(img, -this.options.x * this.options.scale, -this.options.y * this.options.scale);\n\n        return this.canvas;\n    }\n}\n\nexport const loadSerializedSVG = (svg: Node): Promise<HTMLImageElement> =>\n    new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => {\n            resolve(img);\n        };\n        img.onerror = reject;\n\n        img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(new XMLSerializer().serializeToString(svg))}`;\n    });\n", "export interface LoggerOptions {\n    id: string;\n    enabled: boolean;\n}\n\nexport class Logger {\n    static instances: {[key: string]: Logger} = {};\n\n    private readonly id: string;\n    private readonly enabled: boolean;\n    private readonly start: number;\n\n    constructor({id, enabled}: LoggerOptions) {\n        this.id = id;\n        this.enabled = enabled;\n        this.start = Date.now();\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    debug(...args: unknown[]): void {\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.debug === 'function') {\n                // eslint-disable-next-line no-console\n                console.debug(this.id, `${this.getTime()}ms`, ...args);\n            } else {\n                this.info(...args);\n            }\n        }\n    }\n\n    getTime(): number {\n        return Date.now() - this.start;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    info(...args: unknown[]): void {\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.info === 'function') {\n                // eslint-disable-next-line no-console\n                console.info(this.id, `${this.getTime()}ms`, ...args);\n            }\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    warn(...args: unknown[]): void {\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.warn === 'function') {\n                // eslint-disable-next-line no-console\n                console.warn(this.id, `${this.getTime()}ms`, ...args);\n            } else {\n                this.info(...args);\n            }\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error(...args: unknown[]): void {\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.error === 'function') {\n                // eslint-disable-next-line no-console\n                console.error(this.id, `${this.getTime()}ms`, ...args);\n            } else {\n                this.info(...args);\n            }\n        }\n    }\n}\n", "import {Logger} from './logger';\nimport {Cache, ResourceOptions} from './cache-storage';\nimport {Bounds} from '../css/layout/bounds';\n\nexport type ContextOptions = {\n    logging: boolean;\n    cache?: Cache;\n} & ResourceOptions;\n\nexport class Context {\n    private readonly instanceName = `#${Context.instanceCount++}`;\n    readonly logger: Logger;\n    readonly cache: Cache;\n\n    private static instanceCount = 1;\n\n    constructor(options: ContextOptions, public windowBounds: Bounds) {\n        this.logger = new Logger({id: this.instanceName, enabled: options.logging});\n        this.cache = options.cache ?? new Cache(this, options);\n    }\n}\n", "import {Bounds, parseBounds, parseDocumentSize} from './css/layout/bounds';\nimport {COLORS, isTransparent, parseColor} from './css/types/color';\nimport {CloneConfigurations, CloneOptions, DocumentCloner, WindowOptions} from './dom/document-cloner';\nimport {isBodyElement, isHTMLElement, parseTree} from './dom/node-parser';\nimport {CacheStorage} from './core/cache-storage';\nimport {CanvasRenderer, RenderConfigurations, RenderOptions} from './render/canvas/canvas-renderer';\nimport {ForeignObjectRenderer} from './render/canvas/foreignobject-renderer';\nimport {Context, ContextOptions} from './core/context';\n\nexport type Options = CloneOptions &\n    WindowOptions &\n    RenderOptions &\n    ContextOptions & {\n        backgroundColor: string | null;\n        foreignObjectRendering: boolean;\n        removeContainer?: boolean;\n    };\n\nconst html2canvas = (element: HTMLElement, options: Partial<Options> = {}): Promise<HTMLCanvasElement> => {\n    return renderElement(element, options);\n};\n\nexport default html2canvas;\n\nif (typeof window !== 'undefined') {\n    CacheStorage.setContext(window);\n}\n\nconst renderElement = async (element: HTMLElement, opts: Partial<Options>): Promise<HTMLCanvasElement> => {\n    if (!element || typeof element !== 'object') {\n        return Promise.reject('Invalid element provided as first argument');\n    }\n    const ownerDocument = element.ownerDocument;\n\n    if (!ownerDocument) {\n        throw new Error(`Element is not attached to a Document`);\n    }\n\n    const defaultView = ownerDocument.defaultView;\n\n    if (!defaultView) {\n        throw new Error(`Document is not attached to a Window`);\n    }\n\n    const resourceOptions = {\n        allowTaint: opts.allowTaint ?? false,\n        imageTimeout: opts.imageTimeout ?? 15000,\n        proxy: opts.proxy,\n        useCORS: opts.useCORS ?? false\n    };\n\n    const contextOptions = {\n        logging: opts.logging ?? true,\n        cache: opts.cache,\n        ...resourceOptions\n    };\n\n    const windowOptions = {\n        windowWidth: opts.windowWidth ?? defaultView.innerWidth,\n        windowHeight: opts.windowHeight ?? defaultView.innerHeight,\n        scrollX: opts.scrollX ?? defaultView.pageXOffset,\n        scrollY: opts.scrollY ?? defaultView.pageYOffset\n    };\n\n    const windowBounds = new Bounds(\n        windowOptions.scrollX,\n        windowOptions.scrollY,\n        windowOptions.windowWidth,\n        windowOptions.windowHeight\n    );\n\n    const context = new Context(contextOptions, windowBounds);\n\n    const foreignObjectRendering = opts.foreignObjectRendering ?? false;\n\n    const cloneOptions: CloneConfigurations = {\n        allowTaint: opts.allowTaint ?? false,\n        onclone: opts.onclone,\n        ignoreElements: opts.ignoreElements,\n        inlineImages: foreignObjectRendering,\n        copyStyles: foreignObjectRendering\n    };\n\n    context.logger.debug(\n        `Starting document clone with size ${windowBounds.width}x${\n            windowBounds.height\n        } scrolled to ${-windowBounds.left},${-windowBounds.top}`\n    );\n\n    const documentCloner = new DocumentCloner(context, element, cloneOptions);\n    const clonedElement = documentCloner.clonedReferenceElement;\n    if (!clonedElement) {\n        return Promise.reject(`Unable to find element in cloned iframe`);\n    }\n\n    const container = await documentCloner.toIFrame(ownerDocument, windowBounds);\n\n    const {width, height, left, top} =\n        isBodyElement(clonedElement) || isHTMLElement(clonedElement)\n            ? parseDocumentSize(clonedElement.ownerDocument)\n            : parseBounds(context, clonedElement);\n\n    const backgroundColor = parseBackgroundColor(context, clonedElement, opts.backgroundColor);\n\n    const renderOptions: RenderConfigurations = {\n        canvas: opts.canvas,\n        backgroundColor,\n        scale: opts.scale ?? defaultView.devicePixelRatio ?? 1,\n        x: (opts.x ?? 0) + left,\n        y: (opts.y ?? 0) + top,\n        width: opts.width ?? Math.ceil(width),\n        height: opts.height ?? Math.ceil(height)\n    };\n\n    let canvas;\n\n    if (foreignObjectRendering) {\n        context.logger.debug(`Document cloned, using foreign object rendering`);\n        const renderer = new ForeignObjectRenderer(context, renderOptions);\n        canvas = await renderer.render(clonedElement);\n    } else {\n        context.logger.debug(\n            `Document cloned, element located at ${left},${top} with size ${width}x${height} using computed rendering`\n        );\n\n        context.logger.debug(`Starting DOM parsing`);\n        const root = parseTree(context, clonedElement);\n\n        if (backgroundColor === root.styles.backgroundColor) {\n            root.styles.backgroundColor = COLORS.TRANSPARENT;\n        }\n\n        context.logger.debug(\n            `Starting renderer for element at ${renderOptions.x},${renderOptions.y} with size ${renderOptions.width}x${renderOptions.height}`\n        );\n\n        const renderer = new CanvasRenderer(context, renderOptions);\n        canvas = await renderer.render(root);\n    }\n\n    if (opts.removeContainer ?? true) {\n        if (!DocumentCloner.destroy(container)) {\n            context.logger.error(`Cannot detach cloned iframe as it is not in the DOM anymore`);\n        }\n    }\n\n    context.logger.debug(`Finished rendering`);\n    return canvas;\n};\n\nconst parseBackgroundColor = (context: Context, element: HTMLElement, backgroundColorOverride?: string | null) => {\n    const ownerDocument = element.ownerDocument;\n    // http://www.w3.org/TR/css3-background/#special-backgrounds\n    const documentBackgroundColor = ownerDocument.documentElement\n        ? parseColor(context, getComputedStyle(ownerDocument.documentElement).backgroundColor as string)\n        : COLORS.TRANSPARENT;\n    const bodyBackgroundColor = ownerDocument.body\n        ? parseColor(context, getComputedStyle(ownerDocument.body).backgroundColor as string)\n        : COLORS.TRANSPARENT;\n\n    const defaultBackgroundColor =\n        typeof backgroundColorOverride === 'string'\n            ? parseColor(context, backgroundColorOverride)\n            : backgroundColorOverride === null\n            ? COLORS.TRANSPARENT\n            : 0xffffffff;\n\n    return element === ownerDocument.documentElement\n        ? isTransparent(documentBackgroundColor)\n            ? isTransparent(bodyBackgroundColor)\n                ? defaultBackgroundColor\n                : bodyBackgroundColor\n            : documentBackgroundColor\n        : defaultBackgroundColor;\n};\n", "// Extracted from content.js - DOM utility functions (Shadow DOM traversal & visibility)\r\n// NOTE: Logic must remain identical to original implementation.\r\n\r\nexport function deepQuerySelectorAll(selector, root = document) {\r\n  const results = [];\r\n  \r\n  try {\r\n    // \uC77C\uBC18 \uC140\uB809\uD130\uB85C \uCC3E\uAE30\r\n    const normalResults = root.querySelectorAll(selector);\r\n    results.push(...Array.from(normalResults));\r\n    \r\n    // Shadow DOM \uB0B4\uBD80 \uD0D0\uC0C9\r\n    const allElements = root.querySelectorAll('*');\r\n    for (const el of allElements) {\r\n      // ShadowRoot\uAC00 \uC788\uB294\uC9C0 \uD655\uC778\r\n      if (el.shadowRoot) {\r\n        // ShadowRoot \uB0B4\uBD80 \uC7AC\uADC0 \uD0D0\uC0C9\r\n        const shadowResults = deepQuerySelectorAll(selector, el.shadowRoot);\r\n        results.push(...shadowResults);\r\n      }\r\n      \r\n      // Web Components\uC758 \uC5EC\uB7EC ShadowRoot (assignedNodes)\r\n      if (el.assignedNodes) {\r\n        const assignedNodes = el.assignedNodes();\r\n        for (const node of assignedNodes) {\r\n          if (node.shadowRoot) {\r\n            const assignedShadowResults = deepQuerySelectorAll(selector, node.shadowRoot);\r\n            results.push(...assignedShadowResults);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.warn('[SAT PDF Exporter] deepQuerySelectorAll \uC624\uB958:', error);\r\n  }\r\n  \r\n  return results;\r\n}\r\n\r\nexport function isElementVisible(el) {\r\n  if (!el) return false;\r\n  \r\n  try {\r\n    const rect = el.getBoundingClientRect();\r\n    // \uB108\uBE44\uB098 \uB192\uC774\uAC00 0\uBCF4\uB2E4 \uD06C\uBA74 \uC874\uC7AC\uD558\uB294 \uAC83\uC73C\uB85C \uAC04\uC8FC\r\n    return rect.width > 0 && rect.height > 0;\r\n  } catch (error) {\r\n    // getBoundingClientRect \uC2E4\uD328 \uC2DC offsetParent\uB85C \uD3F4\uBC31\r\n    return !!el.offsetParent;\r\n  }\r\n}\r\n\r\nexport function dumpHTMLStructure(container = document.body, maxLength = 50000) {\r\n  try {\r\n    const mainContainer = container.querySelector('[role=\\\"main\\\"], main, [class*=\\\"main\\\"], [class*=\\\"content\\\"]') || container;\r\n    const html = mainContainer.innerHTML;\r\n    const truncated = html.length > maxLength ? html.substring(0, maxLength) + '... (truncated)' : html;\r\n    \r\n    console.log('[SAT PDF Exporter] ===== HTML \uAD6C\uC870 \uB364\uD504 \uC2DC\uC791 =====');\r\n    console.log(truncated);\r\n    console.log('[SAT PDF Exporter] ===== HTML \uAD6C\uC870 \uB364\uD504 \uB05D =====');\r\n    \r\n    return truncated;\r\n  } catch (error) {\r\n    console.error('[SAT PDF Exporter] HTML \uB364\uD504 \uC2E4\uD328:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n\r\n", "// DOM query utilities - shared \"finding elements\" logic\r\n// This module breaks the circular dependency between extract.js and buttons.js\r\n// by providing shared query/selector functions.\r\n\r\nimport { deepQuerySelectorAll, isElementVisible } from './deepQuery.js';\r\n\r\n/**\r\n * SAT \uBB38\uC81C \uC601\uC5ED root container \uCC3E\uAE30\r\n * progress \uD14D\uC2A4\uD2B8\uC640 choices\uB97C \uBAA8\uB450 \uD3EC\uD568\uD558\uB294 \uAC00\uC7A5 \uC791\uC740 ancestor \uCEE8\uD14C\uC774\uB108\r\n * @returns {HTMLElement|null} SAT root container \uB610\uB294 null\r\n */\r\nexport function findSatRoot() {\r\n  // \uBC29\uBC95 1: data-testid\uB85C \uCC3E\uAE30\r\n  const testIdRoot = document.querySelector('[data-testid*=\"sat\"], [data-testid*=\"question\"], [data-testid*=\"problem\"]');\r\n  if (testIdRoot) {\r\n    console.log('[DIAG] satRoot found by data-testid:', testIdRoot.tagName, testIdRoot.className);\r\n    return testIdRoot;\r\n  }\r\n  \r\n  // \uBC29\uBC95 2: progress \uD14D\uC2A4\uD2B8\uB97C \uD3EC\uD568\uD558\uB294 \uAC00\uC7A5 \uC791\uC740 \uCEE8\uD14C\uC774\uB108 \uCC3E\uAE30\r\n  const progressElements = deepQuerySelectorAll('[class*=\"progress\"], [aria-label*=\"progress\"], [class*=\"indicator\"]');\r\n  const choicesElements = deepQuerySelectorAll('[role=\"radio\"], [class*=\"choice\"], [class*=\"option\"], button[aria-label*=\"Choice\"]');\r\n  \r\n  // progress\uC640 choices\uB97C \uBAA8\uB450 \uD3EC\uD568\uD558\uB294 \uACF5\uD1B5 \uC870\uC0C1 \uCC3E\uAE30\r\n  for (const progressEl of progressElements) {\r\n    if (!isElementVisible(progressEl)) continue;\r\n    \r\n    // progress \uD14D\uC2A4\uD2B8 \uD655\uC778 (\uC608: \"1 / 27\")\r\n    const progressText = (progressEl.innerText || progressEl.textContent || '').trim();\r\n    if (!/\\d+\\s*\\/\\s*\\d+/.test(progressText)) continue;\r\n    \r\n    for (const choiceEl of choicesElements) {\r\n      if (!isElementVisible(choiceEl)) continue;\r\n      \r\n      // \uACF5\uD1B5 \uC870\uC0C1 \uCC3E\uAE30\r\n      let commonAncestor = progressEl;\r\n      while (commonAncestor && commonAncestor !== document.body) {\r\n        if (commonAncestor.contains(choiceEl)) {\r\n          // \uAC00\uC7A5 \uC791\uC740 \uCEE8\uD14C\uC774\uB108\uB97C \uCC3E\uAE30 \uC704\uD574 \uB354 \uC791\uC740 \uAC83\uC744 \uCC3E\uC74C\r\n          const children = Array.from(commonAncestor.children);\r\n          for (const child of children) {\r\n            if (child.contains(progressEl) && child.contains(choiceEl)) {\r\n              commonAncestor = child;\r\n              break;\r\n            }\r\n          }\r\n          \r\n          const rect = commonAncestor.getBoundingClientRect();\r\n          console.log('[DIAG] satRoot found by progress+choices:', {\r\n            tag: commonAncestor.tagName,\r\n            class: commonAncestor.className?.split(' ')[0] || 'none',\r\n            testid: commonAncestor.getAttribute('data-testid') || 'none',\r\n            rect: { x: rect.x, y: rect.y, width: rect.width, height: rect.height }\r\n          });\r\n          return commonAncestor;\r\n        }\r\n        commonAncestor = commonAncestor.parentElement;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // \uBC29\uBC95 3: main \uB610\uB294 [role=\"main\"] \uC694\uC18C\r\n  const main = document.querySelector('main, [role=\"main\"]');\r\n  if (main) {\r\n    const rect = main.getBoundingClientRect();\r\n    console.log('[DIAG] satRoot found by main:', {\r\n      tag: main.tagName,\r\n      class: main.className?.split(' ')[0] || 'none',\r\n      testid: main.getAttribute('data-testid') || 'none',\r\n      rect: { x: rect.x, y: rect.y, width: rect.width, height: rect.height }\r\n    });\r\n    return main;\r\n  }\r\n  \r\n  // \uBC29\uBC95 4: \uCD5C\uD6C4\uC758 \uD3F4\uBC31 - body\r\n  console.warn('[DIAG] satRoot not found, using body as fallback');\r\n  return document.body;\r\n}\r\n\r\n// STEP 1: \uC5C4\uACA9\uD55C Next \uBC84\uD2BC \uC120\uD0DD \uB85C\uC9C1\r\nexport function selectNextButton() {\r\n  const allButtons = deepQuerySelectorAll('button, [role=\"button\"], div[role=\"button\"]');\r\n  const satRoot = findSatRoot();\r\n  \r\n  console.log(`[SAT-DEBUG] selectNextButton: \uC804\uCCB4 \uD6C4\uBCF4 ${allButtons.length}\uAC1C, SAT root:`, satRoot ? satRoot.tagName : 'null');\r\n  \r\n  // STEP 1-A: \uD544\uD130\uB9C1 - SAT root \uB0B4\uBD80\uB9CC, header/nav/sidebar \uC81C\uC678\r\n  const filteredCandidates = [];\r\n  \r\n  for (const btn of allButtons) {\r\n    // \uAE30\uBCF8 \uAC00\uC2DC\uC131 \uCCB4\uD06C\r\n    if (!isElementVisible(btn) || btn.disabled || btn.getAttribute('aria-disabled') === 'true') continue;\r\n    \r\n    // \uC678\uBD80 \uB9C1\uD06C \uC81C\uC678\r\n    if (btn.tagName === 'A') {\r\n      const href = btn.getAttribute('href');\r\n      if (href && (href.startsWith('http') || href !== '#' && !href.startsWith('javascript:'))) continue;\r\n    }\r\n    \r\n    // header/nav/sidebar \uC81C\uC678\r\n    const headerNav = btn.closest('header, nav, [aria-label*=\"navigation\"], [data-testid*=\"sidebar\"], [class*=\"sidebar\"], [class*=\"header\"]');\r\n    if (headerNav) {\r\n      console.log('[SAT-DEBUG] header/nav/sidebar \uB0B4\uBD80 \uC694\uC18C \uC81C\uC678:', btn.tagName);\r\n      continue;\r\n    }\r\n    \r\n    // SAT root \uB0B4\uBD80\uC778\uC9C0 \uD655\uC778\r\n    if (!satRoot || !satRoot.contains(btn)) {\r\n      console.log('[SAT-DEBUG] SAT root \uC678\uBD80 \uC694\uC18C \uC81C\uC678:', btn.tagName);\r\n      continue;\r\n    }\r\n    \r\n    // \"\uB2E4\uC74C\" \uAD00\uB828 \uD14D\uC2A4\uD2B8/\uC18D\uC131 \uD655\uC778\r\n    const text = (btn.innerText || btn.textContent || '').trim();\r\n    const ariaLabel = (btn.getAttribute('aria-label') || '').trim();\r\n    const dataTestId = (btn.getAttribute('data-test-id') || btn.getAttribute('data-testid') || '').trim();\r\n    \r\n    const hasNextText = text.includes('\uB2E4\uC74C') || text.toLowerCase().includes('next') || \r\n                       text.toLowerCase().includes('continue') || text.includes('\uACC4\uC18D');\r\n    const hasNextAria = ariaLabel && (\r\n      ariaLabel.includes('\uB2E4\uC74C') || \r\n      ariaLabel.toLowerCase().includes('next') ||\r\n      ariaLabel.toLowerCase().includes('continue') ||\r\n      ariaLabel.toLowerCase().includes('\uACC4\uC18D')\r\n    );\r\n    const hasTestId = dataTestId && (\r\n      dataTestId.includes('next') || \r\n      dataTestId === 'next-button' ||\r\n      dataTestId.includes('continue')\r\n    );\r\n    \r\n    if (!hasNextText && !hasNextAria && !hasTestId) continue;\r\n    \r\n    // progress\uC640 choices\uB97C \uBAA8\uB450 \uD3EC\uD568\uD558\uB294 \uBD80\uBAA8 \uD655\uC778\r\n    const progressInParent = satRoot.innerText && satRoot.innerText.match(/\\d+\\s*\\/\\s*27/);\r\n    const choicesInParent = satRoot.querySelector('[role=\"radio\"], [class*=\"choice\"]');\r\n    \r\n    const rect = btn.getBoundingClientRect();\r\n    const satRootRect = satRoot.getBoundingClientRect();\r\n    \r\n    filteredCandidates.push({\r\n      button: btn,\r\n      dataTestId: dataTestId,\r\n      hasTestId: dataTestId === 'next-button',\r\n      rect: rect,\r\n      area: rect.width * rect.height,\r\n      distanceFromBottomRight: {\r\n        x: satRootRect.right - rect.right,\r\n        y: satRootRect.bottom - rect.bottom\r\n      },\r\n      hasProgressInParent: !!progressInParent,\r\n      hasChoicesInParent: !!choicesInParent\r\n    });\r\n  }\r\n  \r\n  console.log(`[SAT-DEBUG] selectNextButton: \uD544\uD130\uB9C1 \uD6C4 ${filteredCandidates.length}\uAC1C \uD6C4\uBCF4`);\r\n  \r\n  if (filteredCandidates.length === 0) {\r\n    console.warn('[SAT-DEBUG] selectNextButton: \uD544\uD130\uB9C1 \uD6C4 \uD6C4\uBCF4 \uC5C6\uC74C');\r\n    return null;\r\n  }\r\n  \r\n  // STEP 1-B: \uC6B0\uC120\uC21C\uC704 \uC815\uB82C\r\n  // 1. data-testid=\"next-button\" \uC6B0\uC120\r\n  const withTestId = filteredCandidates.filter(c => c.hasTestId);\r\n  if (withTestId.length > 0) {\r\n    console.log('[SAT-DEBUG] selectNextButton: data-testid=\"next-button\" \uD6C4\uBCF4 \uC120\uD0DD');\r\n    return withTestId[0].button;\r\n  }\r\n  \r\n  // 2. \uAC00\uC7A5 \uD070 rect area + bottom-right \uC704\uCE58\r\n  filteredCandidates.sort((a, b) => {\r\n    // area \uC6B0\uC120\r\n    if (Math.abs(a.area - b.area) > 1000) {\r\n      return b.area - a.area;\r\n    }\r\n    // bottom-right \uAC70\uB9AC (\uC791\uC744\uC218\uB85D \uC88B\uC74C)\r\n    const distA = Math.sqrt(a.distanceFromBottomRight.x ** 2 + a.distanceFromBottomRight.y ** 2);\r\n    const distB = Math.sqrt(b.distanceFromBottomRight.x ** 2 + b.distanceFromBottomRight.y ** 2);\r\n    return distA - distB;\r\n  });\r\n  \r\n  const selected = filteredCandidates[0];\r\n  console.log('[SAT-DEBUG] selectNextButton: \uC120\uD0DD\uB41C \uBC84\uD2BC:', {\r\n    dataTestId: selected.dataTestId,\r\n    area: selected.area,\r\n    distanceFromBottomRight: selected.distanceFromBottomRight\r\n  });\r\n  \r\n  return selected.button;\r\n}\r\n\r\n// \uB124\uBE44\uAC8C\uC774\uC158 \uBC84\uD2BC \uCC3E\uAE30 (aria-label/data-testid \uC6B0\uC120, Shadow DOM \uD3EC\uD568)\r\nexport function findNavigationButton(type, ...keywords) {\r\n  // \uB2E4\uC74C \uBC84\uD2BC \uCC3E\uAE30 (aria-label/data-testid \uC6B0\uC120)\r\n  if (type === 'next') {\r\n    const allButtons = deepQuerySelectorAll('button, [role=\"button\"], div[role=\"button\"]');\r\n    const candidates = [];\r\n    const DEBUG = true; // \uB514\uBC84\uAE45 \uD50C\uB798\uADF8\r\n    \r\n    console.log(`[SAT] Next \uBC84\uD2BC \uAC80\uC0C9 \uC2DC\uC791 (\uD6C4\uBCF4: ${allButtons.length}\uAC1C)`);\r\n    \r\n    // SAT root \uCEE8\uD14C\uC774\uB108 \uCC3E\uAE30\r\n    const satRoot = findSatRoot();\r\n    console.log(`[SAT-DEBUG] SAT root \uCEE8\uD14C\uC774\uB108:`, satRoot ? satRoot.tagName + (satRoot.className ? '.' + satRoot.className.split(' ')[0] : '') : 'null');\r\n    \r\n    for (const btn of allButtons) {\r\n      // \uBCF4\uC774\uB294 \uBC84\uD2BC\uB9CC \uD655\uC778\r\n      if (!isElementVisible(btn)) continue;\r\n      \r\n      // disabled/aria-disabled \uCCB4\uD06C\r\n      if (btn.disabled || btn.getAttribute('aria-disabled') === 'true') continue;\r\n      \r\n      // \uB2E4\uB978 \uCC3D\uC73C\uB85C \uB118\uC5B4\uAC00\uB294 \uC694\uC18C \uC81C\uC678\r\n      if (btn.tagName === 'A') {\r\n        const href = btn.getAttribute('href');\r\n        const target = btn.getAttribute('target');\r\n        if (href && (href.startsWith('http') || target === '_blank' || target === '_new')) {\r\n          if (DEBUG) console.log('[SAT-DEBUG] \uB124\uBE44\uAC8C\uC774\uC158 \uB9C1\uD06C \uC81C\uC678:', href);\r\n          continue;\r\n        }\r\n      }\r\n      \r\n      if (btn.hasAttribute('href') && btn.getAttribute('href') !== '#' && !btn.getAttribute('href').startsWith('javascript:')) {\r\n        continue;\r\n      }\r\n      \r\n      if (btn.getAttribute('target') === '_blank' || btn.getAttribute('target') === '_new') {\r\n        continue;\r\n      }\r\n      \r\n      // aria-label, data-testid, title, innerText \uBAA8\uB450 \uD655\uC778\r\n      const text = (btn.innerText || btn.textContent || '').trim();\r\n      const ariaLabel = (btn.getAttribute('aria-label') || '').trim();\r\n      const dataTestId = (btn.getAttribute('data-test-id') || btn.getAttribute('data-testid') || '').trim();\r\n      const title = (btn.getAttribute('title') || '').trim();\r\n      const role = btn.getAttribute('role') || '';\r\n      const tabindex = btn.getAttribute('tabindex') || '';\r\n      const className = (btn.className || '').toLowerCase();\r\n      \r\n      // \uBAA8\uB4E0 \uD14D\uC2A4\uD2B8\uB97C \uD569\uCCD0\uC11C \uAC80\uC0C9\r\n      const combinedText = `${text} ${ariaLabel} ${dataTestId} ${title}`.toLowerCase();\r\n      \r\n      // aria-label \uC6B0\uC120 \uB9E4\uCE6D (\uAC00\uC7A5 \uC2E0\uB8B0\uB3C4 \uB192\uC74C)\r\n      const hasNextAria = ariaLabel && (\r\n        ariaLabel.includes('\uB2E4\uC74C') || \r\n        ariaLabel.toLowerCase().includes('next') ||\r\n        ariaLabel.toLowerCase().includes('continue') ||\r\n        ariaLabel.toLowerCase().includes('\uACC4\uC18D')\r\n      );\r\n      \r\n      // data-testid \uB9E4\uCE6D (\uB450 \uBC88\uC9F8\uB85C \uC2E0\uB8B0\uB3C4 \uB192\uC74C)\r\n      const hasTestId = dataTestId && (\r\n        dataTestId.includes('next') || \r\n        dataTestId === 'next-button' ||\r\n        dataTestId.includes('continue')\r\n      );\r\n      \r\n      // \uD14D\uC2A4\uD2B8 \uB9E4\uCE6D\r\n      const hasNextText = text === '\uB2E4\uC74C' || text.toLowerCase() === 'next' || \r\n                         text.includes('\uB2E4\uC74C') || text.toLowerCase().includes('next') ||\r\n                         text.toLowerCase().includes('continue') || text.includes('\uACC4\uC18D');\r\n      \r\n      // \uD074\uB798\uC2A4\uBA85 \uB9E4\uCE6D\r\n      const hasNextClass = className.includes('next') || className.includes('side-step');\r\n      \r\n      // .mdc-button__label \uB0B4\uBD80 \uD14D\uC2A4\uD2B8\uB3C4 \uD655\uC778\r\n      let hasLabelText = false;\r\n      const label = btn.querySelector('.mdc-button__label');\r\n      if (label) {\r\n        const labelText = (label.textContent || '').trim();\r\n        if (labelText === '\uB2E4\uC74C' || labelText.toLowerCase() === 'next' || \r\n            labelText.includes('\uB2E4\uC74C') || labelText.toLowerCase().includes('next')) {\r\n          hasLabelText = true;\r\n        }\r\n      }\r\n      \r\n      // \uC810\uC218 \uACC4\uC0B0 (aria-label/data-testid \uC6B0\uC120)\r\n      let score = 0;\r\n      if (hasNextAria) score += 10; // aria-label \uCD5C\uC6B0\uC120\r\n      if (hasTestId) score += 8;    // data-testid \uB450 \uBC88\uC9F8\r\n      if (hasNextText) score += 5;   // \uD14D\uC2A4\uD2B8 \uB9E4\uCE6D\r\n      if (hasLabelText) score += 4;  // label \uB0B4\uBD80 \uD14D\uC2A4\uD2B8\r\n      if (hasNextClass) score += 2;   // \uD074\uB798\uC2A4\uBA85\r\n      if (role === 'button') score += 1;\r\n      \r\n      if (score > 0) {\r\n        // STEP 0: \uC0C1\uC138 \uB514\uBC84\uAE45 \uC815\uBCF4 \uC218\uC9D1\r\n        const rect = btn.getBoundingClientRect();\r\n        const style = window.getComputedStyle(btn);\r\n        const isVisible = style.display !== 'none' && \r\n                         style.visibility !== 'hidden' && \r\n                         parseFloat(style.opacity) > 0 &&\r\n                         rect.width > 0 && rect.height > 0;\r\n        \r\n        // \uCEE8\uD14C\uC774\uB108 \uC815\uBCF4 \uC218\uC9D1\r\n        const satRootAncestor = btn.closest('[data-sat-root]');\r\n        const mainAncestor = btn.closest('main, [role=\"main\"]');\r\n        const progressContainer = satRoot && satRoot.contains(btn) ? satRoot : null;\r\n        \r\n        // progress UI \uD3EC\uD568 \uC5EC\uBD80 \uD655\uC778\r\n        const progressText = (satRoot ? satRoot.innerText || satRoot.textContent : '').match(/\\d+\\s*\\/\\s*27/);\r\n        const hasProgressInContainer = !!progressText;\r\n        \r\n        // dataset \uC815\uBCF4\r\n        const dataset = {};\r\n        for (const key in btn.dataset) {\r\n          dataset[key] = btn.dataset[key];\r\n        }\r\n        \r\n        // CSS path \uC0DD\uC131 (\uAC04\uB2E8 \uBC84\uC804)\r\n        let cssPath = btn.tagName.toLowerCase();\r\n        if (btn.id) cssPath += '#' + btn.id;\r\n        if (btn.className) {\r\n          const firstClass = btn.className.split(' ')[0];\r\n          if (firstClass) cssPath += '.' + firstClass;\r\n        }\r\n        \r\n        // outerHTML \uC77C\uBD80 (\uCC98\uC74C 200\uC790)\r\n        const outerHTMLSlice = btn.outerHTML.substring(0, 200);\r\n        \r\n        const candidateInfo = {\r\n          button: btn,\r\n          score: score,\r\n          text: text.substring(0, 30),\r\n          ariaLabel: ariaLabel.substring(0, 30),\r\n          dataTestId: dataTestId.substring(0, 30),\r\n          // STEP 0: \uC0C1\uC138 \uC815\uBCF4\r\n          dataset: dataset,\r\n          role: role,\r\n          tabindex: tabindex,\r\n          disabled: btn.disabled,\r\n          ariaDisabled: btn.getAttribute('aria-disabled'),\r\n          boundingClientRect: {\r\n            x: rect.x,\r\n            y: rect.y,\r\n            width: rect.width,\r\n            height: rect.height\r\n          },\r\n          isVisible: isVisible,\r\n          cssPath: cssPath,\r\n          outerHTMLSlice: outerHTMLSlice,\r\n          satRootAncestor: satRootAncestor ? 'found' : 'none',\r\n          mainAncestor: mainAncestor ? 'found' : 'none',\r\n          inSatRoot: satRoot && satRoot.contains(btn),\r\n          hasProgressInContainer: hasProgressInContainer\r\n        };\r\n        \r\n        candidates.push(candidateInfo);\r\n      }\r\n    }\r\n    \r\n    // STEP 0: \uBAA8\uB4E0 \uD6C4\uBCF4 \uC0C1\uC138 \uB85C\uADF8 \uCD9C\uB825\r\n    if (DEBUG && candidates.length > 0) {\r\n      console.log(`[SAT-DEBUG] Next \uBC84\uD2BC \uD6C4\uBCF4 \uC804\uCCB4 \uBAA9\uB85D (${candidates.length}\uAC1C):`);\r\n      candidates.forEach((c, idx) => {\r\n        console.log(`[SAT-DEBUG] \uD6C4\uBCF4 #${idx + 1}:`, {\r\n          score: c.score,\r\n          text: c.text,\r\n          dataTestId: c.dataTestId,\r\n          ariaLabel: c.ariaLabel,\r\n          dataset: c.dataset,\r\n          role: c.role,\r\n          tabindex: c.tabindex,\r\n          disabled: c.disabled,\r\n          ariaDisabled: c.ariaDisabled,\r\n          boundingClientRect: c.boundingClientRect,\r\n          isVisible: c.isVisible,\r\n          cssPath: c.cssPath,\r\n          satRootAncestor: c.satRootAncestor,\r\n          mainAncestor: c.mainAncestor,\r\n          inSatRoot: c.inSatRoot,\r\n          hasProgressInContainer: c.hasProgressInContainer,\r\n          outerHTMLSlice: c.outerHTMLSlice\r\n        });\r\n      });\r\n    }\r\n    \r\n    // \uC810\uC218 \uC21C\uC73C\uB85C \uC815\uB82C\uD558\uC5EC \uAC00\uC7A5 \uB192\uC740 \uC810\uC218\uC758 \uBC84\uD2BC \uBC18\uD658\r\n    if (candidates.length > 0) {\r\n      // \uD6C4\uBCF4 \uC120\uD0DD \uADDC\uCE59: data-testid=\"next-button\" \uCD5C\uC6B0\uC120, \uB3D9\uC77C\uD558\uBA74 \uC704\uCE58 \uAE30\uBC18\r\n      candidates.sort((a, b) => {\r\n        // 1\uC21C\uC704: data-testid=\"next-button\" \uC6B0\uC120\r\n        const aHasTestId = a.dataTestId === 'next-button' || a.dataTestId.includes('next-button');\r\n        const bHasTestId = b.dataTestId === 'next-button' || b.dataTestId.includes('next-button');\r\n        if (aHasTestId && !bHasTestId) return -1;\r\n        if (!aHasTestId && bHasTestId) return 1;\r\n        \r\n        // 2\uC21C\uC704: \uC810\uC218\r\n        if (b.score !== a.score) return b.score - a.score;\r\n        \r\n        // 3\uC21C\uC704: \uD654\uBA74 \uC6B0\uD558\uB2E8\uC5D0 \uC704\uCE58\uD55C \uAC83 (\uD070 left/top \uAC12)\r\n        const aRect = a.boundingClientRect;\r\n        const bRect = b.boundingClientRect;\r\n        const aPos = aRect.x + aRect.y;\r\n        const bPos = bRect.x + bRect.y;\r\n        return bPos - aPos;\r\n      });\r\n      \r\n      const bestMatch = candidates[0];\r\n      console.log(`[SAT] Next \uBC84\uD2BC \uBC1C\uACAC (\uC810\uC218: ${bestMatch.score}, \uD6C4\uBCF4: ${candidates.length}\uAC1C)`);\r\n      console.log(`[SAT] \uC120\uD0DD\uB41C \uBC84\uD2BC: text=\"${bestMatch.text}\", aria-label=\"${bestMatch.ariaLabel}\", data-testid=\"${bestMatch.dataTestId}\"`);\r\n      console.log(`[NEXT-DEBUG] \uC120\uD0DD\uB41C \uBC84\uD2BC \uC0C1\uC138:`, {\r\n        index: 0,\r\n        textContent: bestMatch.text,\r\n        ariaLabel: bestMatch.ariaLabel,\r\n        role: bestMatch.role,\r\n        dataTestId: bestMatch.dataTestId,\r\n        className: bestMatch.cssPath,\r\n        boundingClientRect: bestMatch.boundingClientRect,\r\n        isVisible: bestMatch.isVisible,\r\n        outerHTML: bestMatch.outerHTMLSlice,\r\n        timestamp: Date.now()\r\n      });\r\n      \r\n      // \uC0C1\uC704 3\uAC1C \uD6C4\uBCF4 \uB85C\uADF8 \uCD9C\uB825 (\uC2E4\uD328 \uC2DC \uB514\uBC84\uAE45\uC6A9)\r\n      if (candidates.length > 1) {\r\n        console.log('[SAT] Next \uBC84\uD2BC \uD6C4\uBCF4 (top 3):', candidates.slice(0, 3).map((c, idx) => ({\r\n          index: idx,\r\n          score: c.score,\r\n          text: c.text,\r\n          ariaLabel: c.ariaLabel,\r\n          dataTestId: c.dataTestId,\r\n          role: c.role,\r\n          boundingClientRect: c.boundingClientRect,\r\n          isVisible: c.isVisible,\r\n          inSatRoot: c.inSatRoot,\r\n          hasProgressInContainer: c.hasProgressInContainer,\r\n          outerHTML: c.outerHTMLSlice.substring(0, 100)\r\n        })));\r\n      }\r\n      \r\n      return bestMatch.button;\r\n    }\r\n    \r\n    console.warn('[SAT] Next \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uD6C4\uBCF4:', candidates.length);\r\n    return null;\r\n  }\r\n  \r\n  // \uC81C\uCD9C \uBC84\uD2BC \uCC3E\uAE30 (aria-label/data-testid \uC6B0\uC120)\r\n  if (type === 'submit') {\r\n    const allButtons = deepQuerySelectorAll('button, [role=\"button\"]');\r\n    const candidates = [];\r\n    \r\n    console.log(`[SAT] Submit \uBC84\uD2BC \uAC80\uC0C9 \uC2DC\uC791 (\uD6C4\uBCF4: ${allButtons.length}\uAC1C)`);\r\n    \r\n    for (const btn of allButtons) {\r\n      if (!isElementVisible(btn) || btn.disabled) continue;\r\n      \r\n      const text = (btn.innerText || btn.textContent || '').trim();\r\n      const ariaLabel = (btn.getAttribute('aria-label') || '').trim();\r\n      const dataTestId = (btn.getAttribute('data-test-id') || btn.getAttribute('data-testid') || '').trim();\r\n      const title = (btn.getAttribute('title') || '').trim();\r\n      const className = (btn.className || '').toLowerCase();\r\n      \r\n      // aria-label \uC6B0\uC120 \uB9E4\uCE6D\r\n      const hasSubmitAria = ariaLabel && (\r\n        ariaLabel.includes('\uC81C\uCD9C') || \r\n        ariaLabel.toLowerCase().includes('submit') ||\r\n        ariaLabel.toLowerCase().includes('confirm')\r\n      );\r\n      \r\n      // data-testid \uB9E4\uCE6D\r\n      const hasTestId = dataTestId && (\r\n        dataTestId.includes('submit') || \r\n        dataTestId.includes('confirm') ||\r\n        dataTestId === 'submit-button'\r\n      );\r\n      \r\n      // \uD14D\uC2A4\uD2B8 \uB9E4\uCE6D\r\n      const hasSubmitText = text === '\uC81C\uCD9C' || text.toLowerCase() === 'submit' ||\r\n                           text.includes('\uC81C\uCD9C') || text.toLowerCase().includes('submit') ||\r\n                           text.includes('\uD655\uC778') || text.toLowerCase().includes('confirm');\r\n      \r\n      // \uD074\uB798\uC2A4\uBA85 \uB9E4\uCE6D\r\n      const hasSubmitClass = className.includes('submit') || className.includes('confirm-submit');\r\n      \r\n      // .mdc-button__label \uB0B4\uBD80 \uD14D\uC2A4\uD2B8 \uD655\uC778\r\n      let hasLabelText = false;\r\n      const label = btn.querySelector('.mdc-button__label');\r\n      if (label) {\r\n        const labelText = (label.textContent || '').trim();\r\n        if (labelText === '\uC81C\uCD9C' || labelText.toLowerCase() === 'submit') {\r\n          hasLabelText = true;\r\n        }\r\n      }\r\n      \r\n      // \uC810\uC218 \uACC4\uC0B0\r\n      let score = 0;\r\n      if (hasSubmitAria) score += 10;\r\n      if (hasTestId) score += 8;\r\n      if (hasSubmitText) score += 5;\r\n      if (hasLabelText) score += 4;\r\n      if (hasSubmitClass) score += 2;\r\n      \r\n      // \uBAA8\uB2EC \uB0B4\uBD80 \uBC84\uD2BC \uAC00\uC0B0\uC810\r\n      const dialog = btn.closest('.confirm-submit-dialog, [role=\"dialog\"]');\r\n      if (dialog) score += 3;\r\n      \r\n      if (score > 0) {\r\n        candidates.push({ \r\n          button: btn, \r\n          score: score,\r\n          text: text.substring(0, 30),\r\n          ariaLabel: ariaLabel.substring(0, 30),\r\n          dataTestId: dataTestId.substring(0, 30)\r\n        });\r\n      }\r\n    }\r\n    \r\n    if (candidates.length > 0) {\r\n      candidates.sort((a, b) => b.score - a.score);\r\n      const bestMatch = candidates[0];\r\n      console.log(`[SAT] Submit \uBC84\uD2BC \uBC1C\uACAC (\uC810\uC218: ${bestMatch.score}, \uD6C4\uBCF4: ${candidates.length}\uAC1C)`);\r\n      console.log(`[SAT] \uC120\uD0DD\uB41C \uBC84\uD2BC: text=\"${bestMatch.text}\", aria-label=\"${bestMatch.ariaLabel}\", data-testid=\"${bestMatch.dataTestId}\"`);\r\n      \r\n      if (candidates.length > 1) {\r\n        console.log('[SAT] Submit \uBC84\uD2BC \uD6C4\uBCF4 (top 3):', candidates.slice(0, 3).map(c => ({\r\n          score: c.score,\r\n          text: c.text,\r\n          ariaLabel: c.ariaLabel\r\n        })));\r\n      }\r\n      \r\n      return bestMatch.button;\r\n    }\r\n    \r\n    console.warn('[SAT] Submit \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uD6C4\uBCF4:', candidates.length);\r\n    return null;\r\n  }\r\n  \r\n  // \uCCAB \uBB38\uC81C \uBC84\uD2BC \uCC3E\uAE30\r\n  if (type === 'first') {\r\n    const allButtons = document.querySelectorAll('button');\r\n    for (const btn of allButtons) {\r\n      const text = (btn.innerText || btn.textContent || '').trim().toLowerCase();\r\n      if (text.includes('\uCC98\uC74C') || text.includes('first') || text === '1') {\r\n        if (!btn.disabled && btn.offsetParent !== null) {\r\n          return btn;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  \r\n  return null;\r\n}\r\n\r\n", "// Extracted DOM extraction utilities from content.js\r\n// NOTE: Logic must remain identical to original implementation.\r\n\r\nimport { deepQuerySelectorAll, isElementVisible } from './deepQuery.js';\r\nimport { findSatRoot } from './query.js';\r\n\r\n// ============================================================================\r\n// Figure \uCD94\uCD9C \uC720\uD2F8\uB9AC\uD2F0 \uD568\uC218\uB4E4\r\n// ============================================================================\r\n\r\n/**\r\n * Blob\uC744 DataURL\uB85C \uBCC0\uD658\r\n * @param {Blob} blob\r\n * @returns {Promise<string>}\r\n */\r\nfunction blobToDataURL(blob) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => resolve(reader.result);\r\n    reader.onerror = reject;\r\n    reader.readAsDataURL(blob);\r\n  });\r\n}\r\n\r\n/**\r\n * <img> \uC694\uC18C\uB97C DataURL\uB85C \uBCC0\uD658\r\n * @param {HTMLImageElement} img\r\n * @returns {Promise<{dataUrl: string, width: number, height: number} | null>}\r\n */\r\nasync function extractImageFromImg(img) {\r\n  try {\r\n    const src = img.currentSrc || img.src;\r\n    if (!src) return null;\r\n\r\n    // data: URL\uC774\uBA74 \uADF8\uB300\uB85C \uC0AC\uC6A9\r\n    if (src.startsWith('data:')) {\r\n      const rect = img.getBoundingClientRect();\r\n      return {\r\n        dataUrl: src,\r\n        width: rect.width || img.naturalWidth || 100,\r\n        height: rect.height || img.naturalHeight || 100\r\n      };\r\n    }\r\n\r\n    // blob: \uB610\uB294 https: URL\uC774\uBA74 fetch\uB85C \uBCC0\uD658\r\n    if (src.startsWith('blob:') || src.startsWith('http://') || src.startsWith('https://')) {\r\n      // CORS \uC124\uC815 \uC2DC\uB3C4\r\n      if (img.tagName === 'IMG') {\r\n        img.crossOrigin = 'anonymous';\r\n      }\r\n\r\n      try {\r\n        const response = await fetch(src);\r\n        if (!response.ok) {\r\n          console.warn(`[FIGURE] \uC774\uBBF8\uC9C0 fetch \uC2E4\uD328: ${src} (status: ${response.status})`);\r\n          return null;\r\n        }\r\n        const blob = await response.blob();\r\n        const dataUrl = await blobToDataURL(blob);\r\n        const rect = img.getBoundingClientRect();\r\n        return {\r\n          dataUrl,\r\n          width: rect.width || img.naturalWidth || 100,\r\n          height: rect.height || img.naturalHeight || 100\r\n        };\r\n      } catch (fetchError) {\r\n        console.warn(`[FIGURE] \uC774\uBBF8\uC9C0 fetch \uC624\uB958: ${src}`, fetchError);\r\n        return null;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  } catch (error) {\r\n    console.warn('[FIGURE] extractImageFromImg \uC624\uB958:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * <canvas> \uC694\uC18C\uB97C DataURL\uB85C \uBCC0\uD658\r\n * @param {HTMLCanvasElement} canvas\r\n * @returns {{dataUrl: string, width: number, height: number} | null}\r\n */\r\nfunction extractImageFromCanvas(canvas) {\r\n  try {\r\n    const dataUrl = canvas.toDataURL('image/png');\r\n    return {\r\n      dataUrl,\r\n      width: canvas.width || canvas.getBoundingClientRect().width,\r\n      height: canvas.height || canvas.getBoundingClientRect().height\r\n    };\r\n  } catch (error) {\r\n    // tainted canvas \uC5D0\uB7EC \uB4F1\r\n    console.warn('[FIGURE] extractImageFromCanvas \uC624\uB958 (tainted canvas \uAC00\uB2A5):', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * <svg> \uC694\uC18C\uB97C DataURL\uB85C \uBCC0\uD658\r\n * @param {SVGElement} svg\r\n * @returns {Promise<{dataUrl: string, width: number, height: number} | null>}\r\n */\r\nasync function extractImageFromSVG(svg) {\r\n  try {\r\n    const rect = svg.getBoundingClientRect();\r\n    const width = rect.width || 100;\r\n    const height = rect.height || 100;\r\n\r\n    // SVG outerHTML\uC744 \uC9C1\uB82C\uD654\r\n    const svgString = new XMLSerializer().serializeToString(svg);\r\n    const svgBlob = new Blob([svgString], { type: 'image/svg+xml;charset=utf-8' });\r\n    const svgUrl = URL.createObjectURL(svgBlob);\r\n\r\n    // \uC774\uBBF8\uC9C0\uB85C \uB85C\uB4DC \uD6C4 canvas\uC5D0 \uADF8\uB9AC\uAE30\r\n    return new Promise((resolve) => {\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        try {\r\n          const canvas = document.createElement('canvas');\r\n          canvas.width = width;\r\n          canvas.height = height;\r\n          const ctx = canvas.getContext('2d');\r\n          ctx.drawImage(img, 0, 0, width, height);\r\n          const dataUrl = canvas.toDataURL('image/png');\r\n          URL.revokeObjectURL(svgUrl);\r\n          resolve({ dataUrl, width, height });\r\n        } catch (error) {\r\n          console.warn('[FIGURE] SVG canvas draw \uC624\uB958:', error);\r\n          URL.revokeObjectURL(svgUrl);\r\n          resolve(null);\r\n        }\r\n      };\r\n      img.onerror = () => {\r\n        console.warn('[FIGURE] SVG \uC774\uBBF8\uC9C0 \uB85C\uB4DC \uC2E4\uD328');\r\n        URL.revokeObjectURL(svgUrl);\r\n        resolve(null);\r\n      };\r\n      img.src = svgUrl;\r\n    });\r\n  } catch (error) {\r\n    console.warn('[FIGURE] extractImageFromSVG \uC624\uB958:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * background-image CSS \uC18D\uC131\uC5D0\uC11C \uC774\uBBF8\uC9C0 \uCD94\uCD9C\r\n * @param {HTMLElement} el\r\n * @returns {Promise<{dataUrl: string, width: number, height: number} | null>}\r\n */\r\nasync function extractImageFromBackground(el) {\r\n  try {\r\n    const style = window.getComputedStyle(el);\r\n    const bgImage = style.backgroundImage;\r\n    if (!bgImage || bgImage === 'none') return null;\r\n\r\n    // url(\"...\") \uB610\uB294 url(...) \uD328\uD134 \uD30C\uC2F1\r\n    const match = bgImage.match(/url\\([\"']?([^\"']+)[\"']?\\)/);\r\n    if (!match) return null;\r\n\r\n    const url = match[1];\r\n    if (url.startsWith('data:')) {\r\n      const rect = el.getBoundingClientRect();\r\n      return {\r\n        dataUrl: url,\r\n        width: rect.width,\r\n        height: rect.height\r\n      };\r\n    }\r\n\r\n    // http/https/blob URL\uC774\uBA74 fetch\r\n    if (url.startsWith('http://') || url.startsWith('https://') || url.startsWith('blob:')) {\r\n      try {\r\n        const response = await fetch(url);\r\n        if (!response.ok) return null;\r\n        const blob = await response.blob();\r\n        const dataUrl = await blobToDataURL(blob);\r\n        const rect = el.getBoundingClientRect();\r\n        return {\r\n          dataUrl,\r\n          width: rect.width,\r\n          height: rect.height\r\n        };\r\n      } catch (error) {\r\n        console.warn('[FIGURE] background-image fetch \uC624\uB958:', error);\r\n        return null;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  } catch (error) {\r\n    console.warn('[FIGURE] extractImageFromBackground \uC624\uB958:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * html2canvas\uB85C DOM \uC694\uC18C\uB97C \uC774\uBBF8\uC9C0\uB85C \uBCC0\uD658 (\uCD5C\uC885 \uD3F4\uBC31)\r\n * @param {HTMLElement} el\r\n * @returns {Promise<{dataUrl: string, width: number, height: number} | null>}\r\n */\r\nasync function extractImageWithHtml2Canvas(el) {\r\n  try {\r\n    // html2canvas\uAC00 \uB85C\uB4DC\uB418\uC5B4 \uC788\uB294\uC9C0 \uD655\uC778\r\n    let html2canvas = null;\r\n    if (window.html2canvas) {\r\n      html2canvas = window.html2canvas;\r\n    } else if (window.jspdf && window.jspdf.html2canvas) {\r\n      html2canvas = window.jspdf.html2canvas;\r\n    } else {\r\n      console.warn('[FIGURE] html2canvas\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4');\r\n      return null;\r\n    }\r\n\r\n    const canvas = await html2canvas(el, {\r\n      backgroundColor: '#fff',\r\n      scale: 2, // \uD574\uC0C1\uB3C4 \uD5A5\uC0C1\r\n      useCORS: true,\r\n      allowTaint: false,\r\n      logging: false\r\n    });\r\n\r\n    const dataUrl = canvas.toDataURL('image/png');\r\n    return {\r\n      dataUrl,\r\n      width: canvas.width,\r\n      height: canvas.height\r\n    };\r\n  } catch (error) {\r\n    console.warn('[FIGURE] html2canvas \uC624\uB958:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * figure \uD6C4\uBCF4 \uC694\uC18C \uCC3E\uAE30\r\n * @param {HTMLElement} satRoot\r\n * @returns {Array<HTMLElement>}\r\n */\r\nfunction findFigureCandidates(satRoot) {\r\n  const candidates = [];\r\n  const MIN_SIZE = 60; // \uCD5C\uC18C \uD06C\uAE30 (px) - \uC791\uC740 \uCC28\uD2B8/\uADF8\uB798\uD504\uB3C4 \uD3EC\uD568\r\n\r\n  // \uC6B0\uC120\uC21C\uC704 1: figure, .figure, data-testid, class\uC5D0 figure/image \uD3EC\uD568 (Shadow DOM \uD3EC\uD568)\r\n  const figureSelectors = [\r\n    'figure',\r\n    '.figure',\r\n    '[data-testid*=\"figure\"]',\r\n    '[data-testid*=\"image\"]',\r\n    '[data-testid*=\"graph\"]',\r\n    '[data-testid*=\"chart\"]',\r\n    '[class*=\"figure\"]',\r\n    '[class*=\"image\"]',\r\n    '[class*=\"illustration\"]',\r\n    '[class*=\"diagram\"]',\r\n    '[class*=\"media\"]'\r\n  ];\r\n\r\n  for (const selector of figureSelectors) {\r\n    const elements = deepQuerySelectorAll(selector, satRoot);\r\n    for (const el of elements) {\r\n      if (!isElementVisible(el)) continue;\r\n      const rect = el.getBoundingClientRect();\r\n      if (rect.width >= MIN_SIZE && rect.height >= MIN_SIZE) {\r\n        if (!candidates.find(c => c.element === el)) {\r\n          candidates.push({ element: el, type: 'container', selector });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // \uC6B0\uC120\uC21C\uC704 2: img, svg, canvas (\uC9C1\uC811 \uC774\uBBF8\uC9C0 \uC694\uC18C, Shadow DOM \uD3EC\uD568)\r\n  const imageSelectors = ['img', 'svg', 'canvas'];\r\n  for (const selector of imageSelectors) {\r\n    const elements = deepQuerySelectorAll(selector, satRoot);\r\n    for (const el of elements) {\r\n      if (!isElementVisible(el)) continue;\r\n      const rect = el.getBoundingClientRect();\r\n      // \uB108\uBB34 \uC791\uC740 \uC694\uC18C \uC81C\uC678\r\n      if (rect.width >= MIN_SIZE && rect.height >= MIN_SIZE) {\r\n        // \uC120\uD0DD\uC9C0 \uC601\uC5ED\uC774\uB098 UI \uBC84\uD2BC\uC774 \uC544\uB2CC\uC9C0 \uD655\uC778\r\n        const parent = el.closest('[role=\"radio\"], button, [class*=\"button\"], [class*=\"icon\"]');\r\n        if (parent && (parent.getBoundingClientRect().width < 100 || parent.getBoundingClientRect().height < 100)) {\r\n          continue; // \uC791\uC740 \uBC84\uD2BC/\uC544\uC774\uCF58 \uB0B4\uBD80 \uC774\uBBF8\uC9C0\uB294 \uC81C\uC678\r\n        }\r\n\r\n        if (!candidates.find(c => c.element === el)) {\r\n          candidates.push({ element: el, type: selector, selector });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // \uB514\uBC84\uADF8: \uD6C4\uBCF4\uBCC4 \uC815\uBCF4 \uCD9C\uB825\r\n  console.log(`[FIGURE] figure \uD6C4\uBCF4 \uBC1C\uACAC: ${candidates.length}\uAC1C`);\r\n  candidates.forEach((candidate, idx) => {\r\n    const rect = candidate.element.getBoundingClientRect();\r\n    const tagName = candidate.element.tagName;\r\n    const className = candidate.element.className ? candidate.element.className.substring(0, 50) : '';\r\n    const src = candidate.element.src || candidate.element.getAttribute('src') || '';\r\n    console.log(`[FIGURE] \uD6C4\uBCF4 ${idx + 1}: tagName=${tagName}, type=${candidate.type}, rect=(${rect.width.toFixed(0)}x${rect.height.toFixed(0)}), src=${src.substring(0, 50)}, className=${className}`);\r\n  });\r\n\r\n  return candidates;\r\n}\r\n\r\n/**\r\n * figure \uC694\uC18C\uB97C \uC774\uBBF8\uC9C0\uB85C \uBCC0\uD658\r\n * @param {HTMLElement} element\r\n * @returns {Promise<{dataUrl: string, width: number, height: number} | null>}\r\n */\r\nasync function convertFigureToImage(element) {\r\n  const tagName = element.tagName.toLowerCase();\r\n\r\n  // A. <img> \uC694\uC18C\r\n  if (tagName === 'img') {\r\n    const result = await extractImageFromImg(element);\r\n    if (result) {\r\n      console.log(`[FIGURE] <img> \uCD94\uCD9C \uC131\uACF5: ${result.width}x${result.height}`);\r\n      return result;\r\n    }\r\n    // fetch \uC2E4\uD328(CORS \uB4F1) \uC2DC \uC544\uB798 E \uB2E8\uACC4 html2canvas \uD3F4\uBC31\uC73C\uB85C \uC9C4\uD589\r\n  }\r\n\r\n  // B. <canvas> \uC694\uC18C\r\n  if (tagName === 'canvas') {\r\n    const result = extractImageFromCanvas(element);\r\n    if (result) {\r\n      console.log(`[FIGURE] <canvas> \uCD94\uCD9C \uC131\uACF5: ${result.width}x${result.height}`);\r\n      return result;\r\n    }\r\n  }\r\n\r\n  // C. <svg> \uC694\uC18C\r\n  if (tagName === 'svg') {\r\n    const result = await extractImageFromSVG(element);\r\n    if (result) {\r\n      console.log(`[FIGURE] <svg> \uCD94\uCD9C \uC131\uACF5: ${result.width}x${result.height}`);\r\n      return result;\r\n    }\r\n  }\r\n\r\n  // D. background-image \uD655\uC778\r\n  const bgResult = await extractImageFromBackground(element);\r\n  if (bgResult) {\r\n    console.log(`[FIGURE] background-image \uCD94\uCD9C \uC131\uACF5: ${bgResult.width}x${bgResult.height}`);\r\n    return bgResult;\r\n  }\r\n\r\n  // E. html2canvas \uD3F4\uBC31 (\uBCF5\uD569 DOM)\r\n  console.log(`[FIGURE] html2canvas \uD3F4\uBC31 \uC2DC\uB3C4: ${tagName}`);\r\n  const html2canvasResult = await extractImageWithHtml2Canvas(element);\r\n  if (html2canvasResult) {\r\n    console.log(`[FIGURE] html2canvas \uCD94\uCD9C \uC131\uACF5: ${html2canvasResult.width}x${html2canvasResult.height}`);\r\n    return html2canvasResult;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * \uBB38\uC81C\uC5D0\uC11C figure \uC774\uBBF8\uC9C0 \uCD94\uCD9C\r\n * @param {HTMLElement} satRoot\r\n * @returns {Promise<Array<{dataUrl: string, width: number, height: number}>>}\r\n */\r\nexport async function extractFigures(satRoot) {\r\n  const figures = [];\r\n  let html2canvasCount = 0;\r\n\r\n  // #region agent log - DEBUG STEP 2: extractFigures \uC9C4\uC785\r\n  console.log(`[DEBUG STEP 2] extractFigures \uC9C4\uC785`);\r\n  fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractFigures:entry',message:'DEBUG STEP 2: extractFigures \uC9C4\uC785',data:{satRootFound:!!satRoot},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n  // #endregion\r\n\r\n  try {\r\n    // #region agent log - DEBUG STEP 2: \uD6C4\uBCF4 \uD0D0\uC0C9 \uC804 \uAE30\uBCF8 \uC140\uB809\uD130 \uAC80\uC99D\r\n    const imgCount = satRoot.querySelectorAll('img').length;\r\n    const canvasCount = satRoot.querySelectorAll('canvas').length;\r\n    const svgCount = satRoot.querySelectorAll('svg').length;\r\n    const bgImageElements = Array.from(satRoot.querySelectorAll('*')).filter(el => {\r\n      try {\r\n        const style = window.getComputedStyle(el);\r\n        return style.backgroundImage && style.backgroundImage !== 'none';\r\n      } catch { return false; }\r\n    }).length;\r\n    console.log(`[DEBUG STEP 2] \uAE30\uBCF8 \uC140\uB809\uD130 \uACB0\uACFC: img=${imgCount}, canvas=${canvasCount}, svg=${svgCount}, background-image=${bgImageElements}`);\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractFigures:beforeFindCandidates',message:'DEBUG STEP 2: \uD6C4\uBCF4 \uD0D0\uC0C9 \uC804 \uAE30\uBCF8 \uC140\uB809\uD130 \uAC80\uC99D',data:{imgCount,canvasCount,svgCount,bgImageElements},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n    // #endregion\r\n\r\n    const candidates = findFigureCandidates(satRoot);\r\n\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7245/ingest/4830a523-40c3-4932-aa61-ce8aa2b3d853',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractFigures:afterFindCandidates',message:'math image extract: candidates count',data:{imgCount,canvasCount,svgCount,candidatesCount:candidates.length},timestamp:Date.now(),hypothesisId:'H3'})}).catch(()=>{});\r\n    // #endregion\r\n    // #region agent log - DEBUG STEP 2: \uD6C4\uBCF4 \uD0D0\uC0C9 \uACB0\uACFC\r\n    console.log(`[DEBUG STEP 2] findFigureCandidates \uACB0\uACFC: ${candidates.length}\uAC1C \uD6C4\uBCF4`);\r\n    const candidateDetails = candidates.map((c, idx) => {\r\n      const rect = c.element.getBoundingClientRect();\r\n      const style = window.getComputedStyle(c.element);\r\n      return {\r\n        idx: idx + 1,\r\n        tagName: c.element.tagName,\r\n        type: c.type,\r\n        width: rect.width,\r\n        height: rect.height,\r\n        minSizeFilter: rect.width >= 80 && rect.height >= 80,\r\n        backgroundImage: style.backgroundImage && style.backgroundImage !== 'none' ? style.backgroundImage.substring(0, 100) : null,\r\n        src: c.element.src || c.element.getAttribute('src') || ''\r\n      };\r\n    });\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractFigures:afterFindCandidates',message:'DEBUG STEP 2: \uD6C4\uBCF4 \uD0D0\uC0C9 \uACB0\uACFC',data:{candidatesCount:candidates.length,candidateDetails},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n    // #endregion\r\n\r\n    for (const candidate of candidates) {\r\n      try {\r\n        // #region agent log - DEBUG STEP 2: \uAC01 \uD6C4\uBCF4 \uBCC0\uD658 \uC2DC\uB3C4\r\n        const rect = candidate.element.getBoundingClientRect();\r\n        console.log(`[DEBUG STEP 2] \uD6C4\uBCF4 \uBCC0\uD658 \uC2DC\uB3C4: ${candidate.element.tagName}, ${rect.width}x${rect.height}`);\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractFigures:beforeConvert',message:'DEBUG STEP 2: \uD6C4\uBCF4 \uBCC0\uD658 \uC2DC\uB3C4',data:{tagName:candidate.element.tagName,width:rect.width,height:rect.height,type:candidate.type},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n        // #endregion\r\n        \r\n        const imageData = await convertFigureToImage(candidate.element);\r\n        \r\n        // #region agent log - DEBUG STEP 2: \uAC01 \uD6C4\uBCF4 \uBCC0\uD658 \uACB0\uACFC\r\n        console.log(`[DEBUG STEP 2] \uD6C4\uBCF4 \uBCC0\uD658 \uACB0\uACFC: ${imageData ? '\uC131\uACF5' : '\uC2E4\uD328'}`);\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractFigures:afterConvert',message:'DEBUG STEP 2: \uD6C4\uBCF4 \uBCC0\uD658 \uACB0\uACFC',data:{tagName:candidate.element.tagName,success:!!imageData,imageData:imageData?{w:imageData.width,h:imageData.height,hasDataUrl:!!imageData.dataUrl}:null},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n        // #endregion\r\n        \r\n        if (imageData) {\r\n          figures.push(imageData);\r\n          // html2canvas \uC0AC\uC6A9 \uC5EC\uBD80 \uCE74\uC6B4\uD2B8\r\n          if (candidate.type === 'container' || candidate.type === 'div' || candidate.type === 'span') {\r\n            html2canvasCount++;\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.warn(`[FIGURE] figure \uBCC0\uD658 \uC2E4\uD328 (\uACC4\uC18D \uC9C4\uD589):`, error);\r\n        // #region agent log - DEBUG STEP 2: \uBCC0\uD658 \uC624\uB958\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractFigures:convertError',message:'DEBUG STEP 2: \uD6C4\uBCF4 \uBCC0\uD658 \uC624\uB958',data:{tagName:candidate.element.tagName,errorMessage:error.message},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n        // #endregion\r\n        // \uC2E4\uD328\uD574\uB3C4 \uACC4\uC18D \uC9C4\uD589\r\n      }\r\n    }\r\n\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7245/ingest/4830a523-40c3-4932-aa61-ce8aa2b3d853',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractFigures:complete',message:'math image extract: figures result',data:{figuresLength:figures.length,html2canvasCount,candidatesCount:candidates.length},timestamp:Date.now(),hypothesisId:'H4'})}).catch(()=>{});\r\n    // #endregion\r\n    console.log(`[DEBUG STEP 2] extractFigures \uC644\uB8CC: ${figures.length}\uAC1C figure \uCD94\uCD9C`);\r\n\r\n    console.log(`[FIGURE] \uCD1D ${figures.length}\uAC1C figure \uCD94\uCD9C \uC644\uB8CC (html2canvas \uC0AC\uC6A9: ${html2canvasCount}\uAC1C)`);\r\n  } catch (error) {\r\n    console.warn('[FIGURE] extractFigures \uC804\uCCB4 \uC624\uB958 (\uBE48 \uBC30\uC5F4 \uBC18\uD658):', error);\r\n    // #region agent log - DEBUG STEP 2: extractFigures \uC804\uCCB4 \uC624\uB958\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractFigures:error',message:'DEBUG STEP 2: extractFigures \uC804\uCCB4 \uC624\uB958',data:{errorMessage:error.message,errorStack:error.stack},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n    // #endregion\r\n    // \uC804\uCCB4 \uC2E4\uD328 \uC2DC\uC5D0\uB3C4 \uBE48 \uBC30\uC5F4 \uBC18\uD658 (\uD50C\uB85C\uC6B0 \uC911\uB2E8 \uBC29\uC9C0)\r\n  }\r\n\r\n  return figures;\r\n}\r\n\r\n// findSatRoot\uB294 query.js\uB85C \uC774\uB3D9\uB428 (\uC21C\uD658 \uC758\uC874\uC131 \uD574\uACB0)\r\n// Re-export for backward compatibility\r\nexport { findSatRoot } from './query.js';\r\n\r\n/**\r\n * Module Start Screen \uD310\uBCC4 (\uBAA8\uB4C8 2 \uC2DC\uC791 \uC804 \uC804\uD658 \uD654\uBA74)\r\n * - Progress UI \uC5C6\uC74C, \uC120\uD0DD\uC9C0 \uC5C6\uC74C\r\n * - \"\uB2E4\uC74C: Reading and Writing \uBAA8\uB4C8 2\" \uB610\uB294 \"\uBAA8\uB4C8 2 \uC2DC\uC791\" \uBC84\uD2BC\r\n * @returns {boolean}\r\n */\r\nexport function isModuleStartScreen() {\r\n  const searchRoot = document.body;\r\n  const text = (searchRoot.innerText || searchRoot.textContent || '').trim();\r\n  const textLower = text.toLowerCase();\r\n\r\n  // (a) Visible button with text matching [\"\uBAA8\uB4C8 2 \uC2DC\uC791\", \"Module 2\", \"Start Module\", \"\uC2DC\uC791\"]\r\n  const btnLabels = ['\uBAA8\uB4C8 2 \uC2DC\uC791', 'Module 2', 'Start Module', '\uC2DC\uC791'];\r\n  const buttons = searchRoot.querySelectorAll('button, [role=\"button\"], a, .mat-mdc-button, .mdc-button');\r\n  const hasModule2StartButton = Array.from(buttons).some(btn => {\r\n    const rect = btn.getBoundingClientRect();\r\n    if (rect.width === 0 && rect.height === 0) return false;\r\n    if (btn.disabled) return false;\r\n    const btnText = (btn.innerText || btn.textContent || '').trim();\r\n    return btnLabels.some(label => btnText.includes(label) || (btnText.includes('\uBAA8\uB4C8 2') && btnText.includes('\uC2DC\uC791')));\r\n  });\r\n\r\n  // (b) Phrase \"\uB2E4\uC74C: Reading and Writing \uBAA8\uB4C8 2\"\r\n  const hasNextModule2Phrase = text.includes('\uB2E4\uC74C: Reading and Writing \uBAA8\uB4C8 2') ||\r\n    textLower.includes('reading and writing') && textLower.includes('\uBAA8\uB4C8 2');\r\n\r\n  // (c) Progress absent AND choices absent (required - must NOT be question screen)\r\n  const progress = getProgressState();\r\n  const hasProgress = progress !== null && /\\d+\\s*\\/\\s*27/.test(progress);\r\n  const hasChoices = !!(searchRoot.querySelector('[role=\"radio\"]') || searchRoot.querySelector('button[aria-label*=\"Choice\"]'));\r\n  const noProgressNoChoices = !hasProgress && !hasChoices;\r\n\r\n  // Must NOT be question screen; must match (a) or (b)\r\n  const result = noProgressNoChoices &&\r\n    (hasModule2StartButton || hasNextModule2Phrase);\r\n\r\n  if (result) {\r\n    console.log('[SAT PDF Exporter] Module Start Screen \uAC10\uC9C0\uB428:', { hasModule2StartButton, hasNextModule2Phrase });\r\n  }\r\n  return result;\r\n}\r\n\r\n// \uBB38\uC81C \uD654\uBA74 \uD310\uBCC4 (\uD575\uC2EC: \uBB38\uC81C \uD654\uBA74\uC774 \uC544\uB2D0 \uB54C\uB294 \uCD94\uCD9C \uAE08\uC9C0) - \uAC1C\uC120\r\nexport function isQuestionScreen() {\r\n  // \uBC29\uBC95 1: \uC120\uD0DD\uC9C0 \uC694\uC18C \uD655\uC778\r\n  const hasChoices = !!(\r\n    document.querySelector('[role=\\\"radio\\\"]') ||\r\n    document.querySelector('button[aria-label*=\\\"Choice\\\"]') ||\r\n    document.querySelector('button[class*=\\\"choice\\\"]') ||\r\n    document.querySelector('[class*=\\\"option\\\"]')\r\n  );\r\n  \r\n  // \uBC29\uBC95 2: \uBB38\uC81C \uBC88\uD638 \uD655\uC778\r\n  const problemNum = getCurrentProblemNumber();\r\n  const hasProblemNumber = problemNum > 0 && (problemNum <= 27 || problemNum <= 22);\r\n  \r\n  // \uBC29\uBC95 3: Progress \uD45C\uC2DC \uD655\uC778 (Reading 27, Math 22)\r\n  const progress = getProgressState();\r\n  const hasProgress = progress !== null && (progress.includes('/27') || progress.includes('/22'));\r\n  \r\n  // \uBC29\uBC95 4: \uBB38\uC81C \uD14D\uC2A4\uD2B8 \uD328\uD134 \uD655\uC778\r\n  const bodyText = (document.body.innerText || '').toLowerCase();\r\n  const hasQuestionPattern = bodyText.includes('which choice') || \r\n                             bodyText.includes('what') ||\r\n                             bodyText.includes('based on') ||\r\n                             bodyText.includes('\uBB38\uC81C') ||\r\n                             /^\\d+\\./.test(bodyText);\r\n  \r\n  // \uBC29\uBC95 5: Math \uC8FC\uAD00\uC2DD - \uC785\uB825\uCC3D\uC774 \uC788\uC73C\uBA74 \uBB38\uC81C \uD654\uBA74\r\n  const hasSubjectiveInput = !!document.querySelector('input[placeholder*=\"\uC785\uB825\"], input[placeholder*=\"\uC5EC\uAE30\uC5D0\"], input[placeholder*=\"Enter\"], textarea[placeholder*=\"\uC785\uB825\"]');\r\n  \r\n  const result = hasChoices || (hasProblemNumber && hasProgress) || hasQuestionPattern || hasSubjectiveInput;\r\n  \r\n  console.log(`[SAT PDF Exporter] \uBB38\uC81C \uD654\uBA74 \uD310\uBCC4: choices=${hasChoices}, problemNum=${problemNum}, progress=${progress}, pattern=${hasQuestionPattern}, subjectiveInput=${hasSubjectiveInput} \u2192 ${result}`);\r\n  \r\n  // #region agent log\r\n  fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:isQuestionScreen',message:'isQuestionScreen result',data:{hasChoices,problemNum,hasProblemNumber,progress,hasProgress,hasQuestionPattern,result,bodyTextPreview:bodyText.substring(0,100)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'C'})}).catch(()=>{});\r\n  // #endregion\r\n  \r\n  return result;\r\n}\r\n\r\n// \uD604\uC7AC \uC139\uC158\uC774 Reading\uC778\uC9C0 Math\uC778\uC9C0 \uAC10\uC9C0\r\nexport function detectCurrentSection() {\r\n  const bodyText = (document.body.innerText || document.body.textContent || '').toLowerCase();\r\n  \r\n  // Reading \uC139\uC158 \uD0A4\uC6CC\uB4DC\r\n  const readingKeywords = [\r\n    'reading and writing',\r\n    'reading',\r\n    'passage',\r\n    'text 1',\r\n    'text 2',\r\n    'which choice',\r\n    'best states',\r\n    'best expresses',\r\n    'main purpose'\r\n  ];\r\n  \r\n  // Math \uC139\uC158 \uD0A4\uC6CC\uB4DC\r\n  const mathKeywords = [\r\n    'math',\r\n    '\uC218\uD559',\r\n    'calculator',\r\n    'equation',\r\n    'solve for',\r\n    'what is the value',\r\n    'if x =',\r\n    'graph'\r\n  ];\r\n  \r\n  let readingScore = 0;\r\n  let mathScore = 0;\r\n  \r\n  for (const keyword of readingKeywords) {\r\n    if (bodyText.includes(keyword)) {\r\n      readingScore++;\r\n    }\r\n  }\r\n  \r\n  for (const keyword of mathKeywords) {\r\n    if (bodyText.includes(keyword)) {\r\n      mathScore++;\r\n    }\r\n  }\r\n  \r\n  // UI \uC694\uC18C\uB85C\uB3C4 \uD655\uC778\r\n  const sectionHeaders = document.querySelectorAll('h1, h2, h3, [class*=\\\"section\\\"], [class*=\\\"title\\\"]');\r\n  for (const header of sectionHeaders) {\r\n    const text = (header.innerText || header.textContent || '').toLowerCase();\r\n    if (text.includes('reading') || text.includes('writing')) {\r\n      readingScore += 2;\r\n    }\r\n    if (text.includes('math') || text.includes('\uC218\uD559')) {\r\n      mathScore += 2;\r\n    }\r\n  }\r\n  \r\n  if (readingScore > mathScore && readingScore > 0) {\r\n    console.log(`[SAT PDF Exporter] detected section: reading (score: ${readingScore} vs ${mathScore})`);\r\n    return 'reading';\r\n  } else if (mathScore > readingScore && mathScore > 0) {\r\n    console.log(`[SAT PDF Exporter] detected section: math (score: ${mathScore} vs ${readingScore})`);\r\n    return 'math';\r\n  }\r\n  \r\n  console.warn(`[SAT PDF Exporter] \uC139\uC158 \uAC10\uC9C0 \uC2E4\uD328 (reading: ${readingScore}, math: ${mathScore}). unknown\uC73C\uB85C \uCC98\uB9AC`);\r\n  return 'unknown';\r\n}\r\n\r\n// \uC120\uD0DD\uC9C0 \uCD94\uCD9C\r\n// \uC120\uD0DD\uC9C0 \uCD94\uCD9C - \uC218\uC815: \uD074\uB9AD \uAC00\uB2A5\uD55C \uC694\uC18C\uC5D0\uC11C\uB9CC \uCD94\uCD9C (A-D\uB9CC)\r\nexport function extractChoices(container) {\r\n  // FRAME GUARD: DOM \uC791\uC5C5\uC740 worker frame\uC5D0\uC11C\uB9CC \uC2E4\uD589\r\n  if (window !== window.top && !window.__SAT_IS_WORKER) {\r\n    console.warn('[SAT-DEBUG] [extractChoices] Worker frame\uC774 \uC544\uB2CC iframe\uC5D0\uC11C \uC2E4\uD589 \uC2DC\uB3C4 - \uC2A4\uD0B5');\r\n    return [];\r\n  }\r\n  \r\n  const choices = [];\r\n  \r\n  // ============================================================================\r\n  // ACCESSIBILITY-BASED CHOICE EXTRACTION\r\n  // Priority order:\r\n  // 1. role=\"radio\"\r\n  // 2. input[type=\"radio\"] + label\r\n  // 3. elements with aria-checked / aria-selected\r\n  // 4. role=\"option\"\r\n  // ============================================================================\r\n  \r\n  const candidates = [];\r\n  \r\n  // Priority 1: role=\"radio\"\r\n  const radioElements = deepQuerySelectorAll('[role=\"radio\"]', container);\r\n  console.log(`[SAT-DEBUG] [extractChoices] Priority 1 (role=\"radio\"): ${radioElements.length}\uAC1C \uBC1C\uACAC`);\r\n  \r\n  for (const el of radioElements) {\r\n    if (!isElementVisible(el) || el.disabled) continue;\r\n    \r\n    const text = (el.innerText || el.textContent || '').trim();\r\n    const ariaLabel = (el.getAttribute('aria-label') || '').trim();\r\n    const ariaChecked = el.getAttribute('aria-checked');\r\n    \r\n    // aria-label\uC5D0\uC11C Choice A, Choice B \uB4F1 \uCD94\uCD9C \uC2DC\uB3C4\r\n    let choiceLetter = null;\r\n    if (ariaLabel) {\r\n      const match = ariaLabel.match(/choice\\s*([A-D])/i) || ariaLabel.match(/^([A-D])[\\.\\)]?/i);\r\n      if (match) choiceLetter = match[1].toUpperCase();\r\n    }\r\n    \r\n    // \uD14D\uC2A4\uD2B8\uC5D0\uC11C A-D \uCD94\uCD9C \uC2DC\uB3C4 (\uD3F4\uBC31)\r\n    if (!choiceLetter) {\r\n      const textMatch = text.match(/^([A-D])[\\.\\)]?\\s*/);\r\n      if (textMatch) choiceLetter = textMatch[1].toUpperCase();\r\n    }\r\n    \r\n    // data-testid\uC5D0\uC11C \uCD94\uCD9C \uC2DC\uB3C4\r\n    if (!choiceLetter) {\r\n      const testId = el.getAttribute('data-testid') || '';\r\n      const testIdMatch = testId.match(/choice[_-]?([A-D])/i) || testId.match(/option[_-]?([A-D])/i);\r\n      if (testIdMatch) choiceLetter = testIdMatch[1].toUpperCase();\r\n    }\r\n    \r\n    // \uB77C\uBCA8\uC744 \uBABB \uCC3E\uC558\uC73C\uBA74 \uC778\uB371\uC2A4 \uAE30\uBC18\uC73C\uB85C \uD560\uB2F9 (A, B, C, D \uC21C\uC11C)\r\n    if (!choiceLetter) {\r\n      const existingLetters = candidates.map(c => c.label).filter(l => l >= 'A' && l <= 'D');\r\n      const availableLetters = ['A', 'B', 'C', 'D'].filter(l => !existingLetters.includes(l));\r\n      if (availableLetters.length > 0) {\r\n        choiceLetter = availableLetters[0];\r\n      }\r\n    }\r\n    \r\n    if (choiceLetter && choiceLetter >= 'A' && choiceLetter <= 'D') {\r\n      const choiceText = text.replace(/^[A-D][\\.\\)]\\s*/, '').trim() || ariaLabel || '\uC120\uD0DD\uC9C0';\r\n      \r\n      // \uC911\uBCF5 \uBC29\uC9C0\r\n      if (!candidates.find(c => c.label === choiceLetter && c.element === el)) {\r\n        candidates.push({\r\n          label: choiceLetter,\r\n          text: choiceText,\r\n          element: el,\r\n          priority: 1,\r\n          source: 'role=\"radio\"'\r\n        });\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Priority 2: input[type=\"radio\"] + label\r\n  if (candidates.length < 4) {\r\n    const radioInputs = deepQuerySelectorAll('input[type=\"radio\"]', container);\r\n    console.log(`[SAT-DEBUG] [extractChoices] Priority 2 (input[type=\"radio\"]): ${radioInputs.length}\uAC1C \uBC1C\uACAC`);\r\n    \r\n    for (const input of radioInputs) {\r\n      if (!isElementVisible(input) || input.disabled) continue;\r\n      \r\n      // label \uCC3E\uAE30\r\n      let labelEl = null;\r\n      const inputId = input.getAttribute('id');\r\n      if (inputId) {\r\n        labelEl = container.querySelector(`label[for=\"${inputId}\"]`);\r\n      }\r\n      \r\n      // \uBD80\uBAA8\uAC00 label\uC778 \uACBD\uC6B0\r\n      if (!labelEl && input.parentElement && input.parentElement.tagName === 'LABEL') {\r\n        labelEl = input.parentElement;\r\n      }\r\n      \r\n      // label\uC758 \uD14D\uC2A4\uD2B8 \uAC00\uC838\uC624\uAE30\r\n      const labelText = labelEl ? (labelEl.innerText || labelEl.textContent || '').trim() : '';\r\n      const inputAriaLabel = input.getAttribute('aria-label') || '';\r\n      const text = labelText || inputAriaLabel;\r\n      \r\n      // A-D \uCD94\uCD9C\r\n      let choiceLetter = null;\r\n      const match = text.match(/^([A-D])[\\.\\)]?\\s*/) || inputAriaLabel.match(/choice\\s*([A-D])/i);\r\n      if (match) {\r\n        choiceLetter = match[1].toUpperCase();\r\n      } else {\r\n        // \uC778\uB371\uC2A4 \uAE30\uBC18 \uD560\uB2F9\r\n        const existingLetters = candidates.map(c => c.label).filter(l => l >= 'A' && l <= 'D');\r\n        const availableLetters = ['A', 'B', 'C', 'D'].filter(l => !existingLetters.includes(l));\r\n        if (availableLetters.length > 0) {\r\n          choiceLetter = availableLetters[0];\r\n        }\r\n      }\r\n      \r\n      if (choiceLetter && choiceLetter >= 'A' && choiceLetter <= 'D') {\r\n        const choiceText = text.replace(/^[A-D][\\.\\)]\\s*/, '').trim() || '\uC120\uD0DD\uC9C0';\r\n        const targetElement = labelEl || input;\r\n        \r\n        if (!candidates.find(c => c.element === targetElement)) {\r\n          candidates.push({\r\n            label: choiceLetter,\r\n            text: choiceText,\r\n            element: targetElement,\r\n            priority: 2,\r\n            source: 'input[type=\"radio\"] + label'\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Priority 3: elements with aria-checked / aria-selected\r\n  if (candidates.length < 4) {\r\n    const ariaCheckedElements = deepQuerySelectorAll('[aria-checked], [aria-selected]', container);\r\n    console.log(`[SAT-DEBUG] [extractChoices] Priority 3 (aria-checked/selected): ${ariaCheckedElements.length}\uAC1C \uBC1C\uACAC`);\r\n    \r\n    for (const el of ariaCheckedElements) {\r\n      if (!isElementVisible(el) || el.disabled) continue;\r\n      \r\n      // \uC774\uBBF8 \uD6C4\uBCF4\uC5D0 \uD3EC\uD568\uB418\uC5B4 \uC788\uC73C\uBA74 \uC2A4\uD0B5\r\n      if (candidates.find(c => c.element === el)) continue;\r\n      \r\n      const text = (el.innerText || el.textContent || '').trim();\r\n      const ariaLabel = (el.getAttribute('aria-label') || '').trim();\r\n      \r\n      // A-D \uCD94\uCD9C\r\n      let choiceLetter = null;\r\n      const match = text.match(/^([A-D])[\\.\\)]?\\s*/) || ariaLabel.match(/choice\\s*([A-D])/i) || ariaLabel.match(/^([A-D])[\\.\\)]?/i);\r\n      if (match) {\r\n        choiceLetter = match[1].toUpperCase();\r\n      } else {\r\n        // \uC778\uB371\uC2A4 \uAE30\uBC18 \uD560\uB2F9\r\n        const existingLetters = candidates.map(c => c.label).filter(l => l >= 'A' && l <= 'D');\r\n        const availableLetters = ['A', 'B', 'C', 'D'].filter(l => !existingLetters.includes(l));\r\n        if (availableLetters.length > 0) {\r\n          choiceLetter = availableLetters[0];\r\n        }\r\n      }\r\n      \r\n      if (choiceLetter && choiceLetter >= 'A' && choiceLetter <= 'D') {\r\n        const choiceText = text.replace(/^[A-D][\\.\\)]\\s*/, '').trim() || ariaLabel || '\uC120\uD0DD\uC9C0';\r\n        \r\n        if (!candidates.find(c => c.label === choiceLetter && c.element === el)) {\r\n          candidates.push({\r\n            label: choiceLetter,\r\n            text: choiceText,\r\n            element: el,\r\n            priority: 3,\r\n            source: 'aria-checked/selected'\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Priority 4: role=\"option\"\r\n  if (candidates.length < 4) {\r\n    const optionElements = deepQuerySelectorAll('[role=\"option\"]', container);\r\n    console.log(`[SAT-DEBUG] [extractChoices] Priority 4 (role=\"option\"): ${optionElements.length}\uAC1C \uBC1C\uACAC`);\r\n    \r\n    for (const el of optionElements) {\r\n      if (!isElementVisible(el) || el.disabled) continue;\r\n      \r\n      // \uC774\uBBF8 \uD6C4\uBCF4\uC5D0 \uD3EC\uD568\uB418\uC5B4 \uC788\uC73C\uBA74 \uC2A4\uD0B5\r\n      if (candidates.find(c => c.element === el)) continue;\r\n      \r\n      const text = (el.innerText || el.textContent || '').trim();\r\n      const ariaLabel = (el.getAttribute('aria-label') || '').trim();\r\n      \r\n      // A-D \uCD94\uCD9C\r\n      let choiceLetter = null;\r\n      const match = text.match(/^([A-D])[\\.\\)]?\\s*/) || ariaLabel.match(/choice\\s*([A-D])/i);\r\n      if (match) {\r\n        choiceLetter = match[1].toUpperCase();\r\n      } else {\r\n        // \uC778\uB371\uC2A4 \uAE30\uBC18 \uD560\uB2F9\r\n        const existingLetters = candidates.map(c => c.label).filter(l => l >= 'A' && l <= 'D');\r\n        const availableLetters = ['A', 'B', 'C', 'D'].filter(l => !existingLetters.includes(l));\r\n        if (availableLetters.length > 0) {\r\n          choiceLetter = availableLetters[0];\r\n        }\r\n      }\r\n      \r\n      if (choiceLetter && choiceLetter >= 'A' && choiceLetter <= 'D') {\r\n        const choiceText = text.replace(/^[A-D][\\.\\)]\\s*/, '').trim() || ariaLabel || '\uC120\uD0DD\uC9C0';\r\n        \r\n        if (!candidates.find(c => c.label === choiceLetter && c.element === el)) {\r\n          candidates.push({\r\n            label: choiceLetter,\r\n            text: choiceText,\r\n            element: el,\r\n            priority: 4,\r\n            source: 'role=\"option\"'\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Priority\uB85C \uC815\uB82C (\uB0AE\uC740 \uC22B\uC790\uAC00 \uC6B0\uC120)\r\n  candidates.sort((a, b) => {\r\n    if (a.priority !== b.priority) return a.priority - b.priority;\r\n    return a.label.localeCompare(b.label);\r\n  });\r\n  \r\n  // A-D\uB9CC \uC120\uD0DD\uD558\uACE0 \uC911\uBCF5 \uC81C\uAC70\r\n  const seenLabels = new Set();\r\n  for (const candidate of candidates) {\r\n    if (candidate.label >= 'A' && candidate.label <= 'D' && !seenLabels.has(candidate.label)) {\r\n      choices.push({\r\n        label: candidate.label,\r\n        text: candidate.text\r\n      });\r\n      seenLabels.add(candidate.label);\r\n    }\r\n  }\r\n  \r\n  // \uB85C\uADF8 \uCD9C\uB825: total candidates, first 5 candidate labels\r\n  console.log(`[SAT-DEBUG] [extractChoices] \uCD1D \uD6C4\uBCF4: ${candidates.length}\uAC1C, \uCD94\uCD9C\uB41C \uC120\uD0DD\uC9C0: ${choices.length}\uAC1C`);\r\n  if (candidates.length > 0) {\r\n    const first5 = candidates.slice(0, 5).map(c => ({\r\n      label: c.label,\r\n      text: c.text.substring(0, 30) + (c.text.length > 30 ? '...' : ''),\r\n      source: c.source\r\n    }));\r\n    console.log(`[SAT-DEBUG] [extractChoices] \uCCAB 5\uAC1C \uD6C4\uBCF4:`, first5);\r\n  }\r\n  \r\n  // Priority 5: \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31 - \uD074\uB9AD \uAC00\uB2A5\uD55C \uC694\uC18C \uC911 A/B/C/D \uD14D\uC2A4\uD2B8\uAC00 \uC788\uB294 \uAC83 (Shadow DOM \uD3EC\uD568)\r\n  if (candidates.length < 4) {\r\n    console.log(`[SAT-DEBUG] [extractChoices] Priority 5 (\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31): \uD074\uB9AD \uAC00\uB2A5\uD55C \uC694\uC18C \uD0D0\uC0C9`);\r\n    const clickableSelectors = ['button', '[role=\"button\"]', '[tabindex]', '[data-testid]', 'div[onclick]', 'span[onclick]', '[class*=\"choice\"]', '[class*=\"option\"]', '.mat-mdc-radio-button', '.mat-radio-button', '.mat-mdc-list-option'];\r\n    const allClickableSet = new Set();\r\n    for (const sel of clickableSelectors) {\r\n      try {\r\n        const nodes = deepQuerySelectorAll(sel, container);\r\n        nodes.forEach(el => allClickableSet.add(el));\r\n      } catch (e) {\r\n        // ignore\r\n      }\r\n    }\r\n    const allClickable = Array.from(allClickableSet);\r\n    console.log(`[SAT-DEBUG] [extractChoices] \uC804\uCCB4 \uD074\uB9AD \uAC00\uB2A5 \uC694\uC18C: ${allClickable.length}\uAC1C`);\r\n    \r\n    const visibleClickable = allClickable.filter(el => {\r\n      try {\r\n        const r = el.getBoundingClientRect();\r\n        if (r.width < 20 || r.height < 20) return false;\r\n        if (r.bottom < 0 || r.top > window.innerHeight) return false;\r\n        const style = window.getComputedStyle(el);\r\n        if (style.visibility === 'hidden' || style.display === 'none' || style.opacity === '0') return false;\r\n        return true;\r\n      } catch (e) {\r\n        return false;\r\n      }\r\n    });\r\n    \r\n    console.log(`[SAT-DEBUG] [extractChoices] \uD654\uBA74\uC5D0 \uBCF4\uC774\uB294 \uD074\uB9AD \uAC00\uB2A5 \uC694\uC18C: ${visibleClickable.length}\uAC1C`);\r\n    \r\n    for (const el of visibleClickable) {\r\n      if (el.disabled) continue;\r\n      if (candidates.find(c => c.element === el)) continue;\r\n      \r\n      const text = (el.innerText || el.textContent || '').trim();\r\n      const ariaLabel = (el.getAttribute('aria-label') || '').trim();\r\n      const combinedText = (text + ' ' + ariaLabel).trim();\r\n      \r\n      // A/B/C/D \uD328\uD134 \uB9E4\uCE6D (\uB354 \uC720\uC5F0\uD558\uAC8C)\r\n      let choiceLetter = null;\r\n      const patterns = [\r\n        /^(A|B|C|D)\\b/i,\r\n        /\\b(A|B|C|D)\\b/i,\r\n        /^(A|B|C|D)[\\.\\)]\\s*/i,\r\n        /choice\\s*(A|B|C|D)/i,\r\n        /option\\s*(A|B|C|D)/i,\r\n        /\uC120\uD0DD\uC9C0\\s*(A|B|C|D)/i\r\n      ];\r\n      \r\n      for (const pattern of patterns) {\r\n        const match = combinedText.match(pattern);\r\n        if (match) {\r\n          choiceLetter = match[1].toUpperCase();\r\n          break;\r\n        }\r\n      }\r\n      \r\n      if (choiceLetter && choiceLetter >= 'A' && choiceLetter <= 'D') {\r\n        const existingLetters = candidates.map(c => c.label).filter(l => l >= 'A' && l <= 'D');\r\n        if (!existingLetters.includes(choiceLetter)) {\r\n          const choiceText = text.replace(/^(A|B|C|D)[\\.\\)]\\s*/i, '').trim() || ariaLabel || '\uC120\uD0DD\uC9C0';\r\n          candidates.push({\r\n            label: choiceLetter,\r\n            text: choiceText,\r\n            element: el,\r\n            priority: 5,\r\n            source: '\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31'\r\n          });\r\n          console.log(`[SAT-DEBUG] [extractChoices] \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD6C4\uBCF4 \uBC1C\uACAC: ${choiceLetter} - ${choiceText.substring(0, 30)}`);\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Priority\uB85C \uB2E4\uC2DC \uC815\uB82C\r\n    candidates.sort((a, b) => {\r\n      if (a.priority !== b.priority) return a.priority - b.priority;\r\n      return a.label.localeCompare(b.label);\r\n    });\r\n    \r\n    // A-D\uB9CC \uC120\uD0DD\uD558\uACE0 \uC911\uBCF5 \uC81C\uAC70 (element \uD3EC\uD568)\r\n    choices.length = 0;\r\n    const seenLabels = new Set();\r\n    for (const candidate of candidates) {\r\n      if (candidate.label >= 'A' && candidate.label <= 'D' && !seenLabels.has(candidate.label)) {\r\n        choices.push({\r\n          label: candidate.label,\r\n          text: candidate.text,\r\n          element: candidate.element, // \u2605 element \uD3EC\uD568 (\uD074\uB9AD\uC5D0 \uD544\uC694)\r\n          source: candidate.source || 'unknown',\r\n          priority: candidate.priority || 5\r\n        });\r\n        seenLabels.add(candidate.label);\r\n      }\r\n    }\r\n  }\r\n  \r\n  // \uCD5C\uC885 \uD3F4\uBC31: \uC21C\uC218 \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uCD94\uCD9C (Shadow DOM \uD3EC\uD568, \uD328\uD134 \uC644\uD654)\r\n  if (choices.length === 0) {\r\n    console.warn('[SAT PDF Exporter] \uBAA8\uB4E0 \uBC29\uBC95\uC73C\uB85C \uC120\uD0DD\uC9C0\uB97C \uCC3E\uC9C0 \uBABB\uD568 - \uC21C\uC218 \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31 \uC2DC\uB3C4');\r\n    const tagSelectors = ['div', 'span', 'p', 'li', 'button', 'label', 'td', '[role=\"button\"]'];\r\n    const allElementsSet = new Set();\r\n    for (const sel of tagSelectors) {\r\n      try {\r\n        const nodes = deepQuerySelectorAll(sel, container);\r\n        nodes.forEach(el => allElementsSet.add(el));\r\n      } catch (e) {\r\n        // ignore\r\n      }\r\n    }\r\n    const allElements = Array.from(allElementsSet).filter(el => {\r\n      try {\r\n        const r = el.getBoundingClientRect();\r\n        return r.width >= 20 && r.height >= 20 && r.bottom >= 0 && r.top <= window.innerHeight;\r\n      } catch { return false; }\r\n    });\r\n    // \uC791\uC740 \uC694\uC18C\uBD80\uD130 \uC2DC\uB3C4 (\uAC00\uC7A5 \uAD6C\uCCB4\uC801\uC778 \uC120\uD0DD\uC9C0)\r\n    allElements.sort((a, b) => (a.getBoundingClientRect().width * a.getBoundingClientRect().height) - (b.getBoundingClientRect().width * b.getBoundingClientRect().height));\r\n    const seenLabels = new Set();\r\n    const choicePatterns = [\r\n      /^\\s*([A-D])[\\.\\)]\\s*([\\s\\S]+)$/,           // \"A. text\" or \"A) text\" (leading space ok)\r\n      /^\\s*\\(([A-D])\\)\\s*([\\s\\S]+)$/,             // \"(A) text\"\r\n      /^([A-D])\\s*[\\.\\)]\\s*([\\s\\S]+)$/            // \"A .\" or \"A )\"\r\n    ];\r\n    const lineChoiceRe = /^\\s*([A-D])[\\.\\)]\\s*(.*)$/;\r\n    for (const el of allElements) {\r\n      const rawText = (el.innerText || el.textContent || '').trim();\r\n      if (!rawText || rawText.length > 600) continue;\r\n      let m = null;\r\n      for (const pattern of choicePatterns) {\r\n        m = rawText.match(pattern);\r\n        if (m) break;\r\n      }\r\n      if (!m && rawText.includes('\\n')) {\r\n        const firstLine = rawText.split('\\n')[0];\r\n        const lineMatch = firstLine.match(lineChoiceRe);\r\n        if (lineMatch) m = [rawText, lineMatch[1], rawText.slice(firstLine.length).trim() || lineMatch[2]];\r\n      }\r\n      if (!m || m[1] < 'A' || m[1] > 'D' || seenLabels.has(m[1])) continue;\r\n      const rest = (m[2] || '').trim();\r\n      if (/[B-D][\\.\\)]/.test(rest)) continue;\r\n      seenLabels.add(m[1]);\r\n      choices.push({\r\n        label: m[1],\r\n        text: rest.substring(0, 100),\r\n        element: el,\r\n        priority: 5,\r\n        source: '\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31'\r\n      });\r\n      console.log(`[SAT-DEBUG] [extractChoices] \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD6C4\uBCF4 \uBC1C\uACAC: ${m[1]} - ${rest.substring(0, 30)}`);\r\n      if (choices.length >= 4) break;\r\n    }\r\n    if (choices.length >= 2) {\r\n      console.log(`[SAT-DEBUG] [extractChoices] \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uCD94\uCD9C \uC131\uACF5: ${choices.length}\uAC1C (element \uD3EC\uD568)`);\r\n    }\r\n  }\r\n\r\n  return choices;\r\n}\r\n\r\n// \uD604\uC7AC \uBB38\uC81C \uCD94\uCD9C (\uC9C0\uBB38, \uBB38\uC81C \uBCF8\uBB38, \uC120\uD0DD\uC9C0\uB9CC - \uC815\uB2F5/\uD574\uC124 \uC81C\uC678)\r\n// \uB370\uC774\uD130 \uAD6C\uC870 \uACE0\uC815: { problemNumber, question, choices: {A, B, C, D}, correctAnswer, explanation }\r\nexport async function extractCurrentProblem(sectionType) {\r\n  // FRAME GUARD: DOM \uC791\uC5C5\uC740 worker frame\uC5D0\uC11C\uB9CC \uC2E4\uD589\r\n  if (window !== window.top && !window.__SAT_IS_WORKER) {\r\n    console.warn('[SAT-DEBUG] [extractCurrentProblem] Worker frame\uC774 \uC544\uB2CC iframe\uC5D0\uC11C \uC2E4\uD589 \uC2DC\uB3C4 - \uC2A4\uD0B5');\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7245/ingest/4830a523-40c3-4932-aa61-ce8aa2b3d853',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractCurrentProblem:frameGuard',message:'math image extract: return null (frame guard)',data:{sectionType},timestamp:Date.now(),hypothesisId:'H1'})}).catch(()=>{});\r\n    // #endregion\r\n    return null;\r\n  }\r\n  \r\n  // ============================================================================\r\n  // STEP 4: DOM \uC548\uC815\uD654 \uB300\uAE30 (\uCD5C\uC18C \uBCF4\uAC15)\r\n  // ============================================================================\r\n  await new Promise(resolve => {\r\n    requestAnimationFrame(() => {\r\n      requestAnimationFrame(() => {\r\n        resolve();\r\n      });\r\n    });\r\n  });\r\n  await new Promise(resolve => setTimeout(resolve, 150)); // DOM \uBC18\uC601 \uB300\uAE30\r\n  // ============================================================================\r\n  \r\n  // ============================================================================\r\n  // STEP 1: problemNumber \uAC15\uC81C \uC8FC\uC785 (\uC808\uB300 undefined \uBC29\uC9C0)\r\n  // ============================================================================\r\n  let problemNum = getCurrentProblemNumber();\r\n  const progressState = getProgressState();\r\n  \r\n  // \uD3F4\uBC31 1: progress\uC5D0\uC11C \uD30C\uC2F1\r\n  if (!problemNum || problemNum <= 0) {\r\n    if (progressState) {\r\n      const progressMatch = progressState.match(/(\\d+)\\s*\\/\\s*\\d+/);\r\n      if (progressMatch) {\r\n        problemNum = parseInt(progressMatch[1]);\r\n        console.log(`[SAT-DEBUG] [extractCurrentProblem] problemNumber \uD3F4\uBC31 1: progress\uC5D0\uC11C \uD30C\uC2F1 \u2192 ${problemNum}`);\r\n      }\r\n    }\r\n  }\r\n  \r\n  // \uD3F4\uBC31 2: \uC804\uC5ED \uCE74\uC6B4\uD130 \uC0AC\uC6A9 (\uCD5C\uD6C4\uC758 \uC218\uB2E8)\r\n  if (!problemNum || problemNum <= 0) {\r\n    if (!window.__SAT_PROBLEM_COUNTER) {\r\n      window.__SAT_PROBLEM_COUNTER = 0;\r\n    }\r\n    window.__SAT_PROBLEM_COUNTER++;\r\n    problemNum = window.__SAT_PROBLEM_COUNTER;\r\n    console.warn(`[SAT-DEBUG] [extractCurrentProblem] problemNumber \uD3F4\uBC31 2: \uC804\uC5ED \uCE74\uC6B4\uD130 \uC0AC\uC6A9 \u2192 ${problemNum}`);\r\n  }\r\n  \r\n  // \uCD5C\uC885 \uD655\uC815: problemNum\uC740 \uBC18\uB4DC\uC2DC \uC22B\uC790\uC5EC\uC57C \uD568\r\n  problemNum = problemNum || 1;\r\n  console.log(`[SAT-DEBUG] [extractCurrentProblem] \uCD5C\uC885 problemNumber: ${problemNum}`);\r\n  // ============================================================================\r\n  \r\n  let problemText = '';\r\n  let passageText = '';\r\n  \r\n  // \uBB38\uC81C \uBCF8\uBB38 \uBC0F \uC9C0\uBB38 \uCD94\uCD9C\r\n  const allTextElements = document.querySelectorAll('p, div, span, h1, h2, h3, h4, h5, h6');\r\n  for (const el of allTextElements) {\r\n    const text = (el.innerText || el.textContent || '').trim();\r\n    if (text.match(new RegExp(`^${problemNum}\\\\.`)) || text.match(new RegExp(`^${problemNum}\\\\s+Text`))) {\r\n      const parent = el.closest('[class*=\\\"container\\\"], [class*=\\\"content\\\"], [class*=\\\"question\\\"], main, article');\r\n      if (parent) {\r\n        const fullText = (parent.innerText || parent.textContent || '').trim();\r\n        // \"Text 1\", \"Text 2\" \uAC19\uC740 \uC9C0\uBB38 \uCC3E\uAE30\r\n        const textMatch = fullText.match(/Text\\s+\\d+[^\\n]*/g);\r\n        if (textMatch) {\r\n          passageText = textMatch.join('\\n\\n');\r\n        }\r\n        // \uBB38\uC81C \uBCF8\uBB38 \uCD94\uCD9C (\uC120\uD0DD\uC9C0 \uC804\uAE4C\uC9C0)\r\n        const questionMatch = fullText.match(new RegExp(`${problemNum}\\\\.\\\\s*([^A-D]+?)(?=[A-D]\\\\.|$)`, 's'));\r\n        if (questionMatch) {\r\n          problemText = questionMatch[1].trim();\r\n        } else {\r\n          problemText = fullText.split(/[A-D]\\./)[0].trim();\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // \uC804\uCCB4 body \uD14D\uC2A4\uD2B8\uC5D0\uC11C \uCD94\uCD9C (\uB300\uCCB4 \uBC29\uBC95)\r\n  if (!problemText) {\r\n    const bodyText = document.body.innerText || document.body.textContent;\r\n    const problemMatch = bodyText.match(new RegExp(`${problemNum}\\\\.\\\\s*([\\\\s\\\\S]+?)(?=\\\\d+\\\\.|$)`, 'i'));\r\n    if (problemMatch) {\r\n      problemText = problemMatch[1].trim();\r\n      problemText = problemText.split(/[A-D][\\.\\)]\\s*/)[0].trim();\r\n    }\r\n  }\r\n  \r\n  // ============================================================================\r\n  // STEP 3: question DOM \uD0D0\uC9C0 \uB85C\uC9C1 \uCD5C\uC18C \uBCF4\uAC15\r\n  // ============================================================================\r\n  if (!problemText) {\r\n    // passage \uBE14\uB85D \uBC14\uB85C \uC544\uB798 \uD14D\uC2A4\uD2B8 \uCC3E\uAE30\r\n    const passageNodes = Array.from(document.querySelectorAll('p, div, span')).filter(el => {\r\n      const text = (el.innerText || el.textContent || '').trim();\r\n      return text.includes('Text') || text.length > 100; // \uC9C0\uBB38 \uD6C4\uBCF4\r\n    });\r\n    \r\n    for (const passageNode of passageNodes) {\r\n      // \uB2E4\uC74C \uD615\uC81C \uC694\uC18C\uB4E4 \uC911 \uD14D\uC2A4\uD2B8 \uBE14\uB85D \uCC3E\uAE30\r\n      let nextSibling = passageNode.nextElementSibling;\r\n      let attempts = 0;\r\n      while (nextSibling && attempts < 5) {\r\n        const text = (nextSibling.innerText || nextSibling.textContent || '').trim();\r\n        if (text.length > 20 && text.length < 500 && !text.match(/^[A-D][\\.\\)]/)) {\r\n          problemText = text;\r\n          console.log(`[SAT-DEBUG] [extractCurrentProblem] question \uD3F4\uBC31: passage \uB2E4\uC74C \uC694\uC18C\uC5D0\uC11C \uBC1C\uACAC`);\r\n          break;\r\n        }\r\n        nextSibling = nextSibling.nextElementSibling;\r\n        attempts++;\r\n      }\r\n      if (problemText) break;\r\n    }\r\n    \r\n    // \uC120\uD0DD\uC9C0 \uC601\uC5ED \uC704\uCABD \uD14D\uC2A4\uD2B8 \uCC3E\uAE30\r\n    if (!problemText) {\r\n      const choicesContainer = document.querySelector('[role=\"radio\"], button[aria-label*=\"Choice\"]');\r\n      if (choicesContainer) {\r\n        let parent = choicesContainer.parentElement;\r\n        let attempts = 0;\r\n        while (parent && attempts < 3) {\r\n          const text = (parent.innerText || parent.textContent || '').trim();\r\n          const beforeChoices = text.split(/[A-D][\\.\\)]/)[0].trim();\r\n          if (beforeChoices.length > 20 && beforeChoices.length < 500) {\r\n            problemText = beforeChoices;\r\n            console.log(`[SAT-DEBUG] [extractCurrentProblem] question \uD3F4\uBC31: \uC120\uD0DD\uC9C0 \uC704\uCABD\uC5D0\uC11C \uBC1C\uACAC`);\r\n            break;\r\n          }\r\n          parent = parent.parentElement;\r\n          attempts++;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // role=\"heading\" \uB610\uB294 \uD070 font-size \uD14D\uC2A4\uD2B8 \uCC3E\uAE30\r\n    if (!problemText) {\r\n      const headings = Array.from(document.querySelectorAll('[role=\"heading\"], h1, h2, h3, h4, h5, h6, [class*=\"heading\"], [class*=\"title\"]'));\r\n      for (const heading of headings) {\r\n        const text = (heading.innerText || heading.textContent || '').trim();\r\n        if (text.length > 10 && text.length < 300 && !text.match(/^[A-D][\\.\\)]/) && !text.match(/Text\\s+\\d+/)) {\r\n          problemText = text;\r\n          console.log(`[SAT-DEBUG] [extractCurrentProblem] question \uD3F4\uBC31: heading\uC5D0\uC11C \uBC1C\uACAC`);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // ============================================================================\r\n  \r\n  // \uC120\uD0DD\uC9C0 \uCD94\uCD9C (A-D\uB9CC)\r\n  const choicesArray = extractChoices(document.body);\r\n  \r\n  // choices\uB97C {A: \\\"...\\\", B: \\\"...\\\", C: \\\"...\\\", D: \\\"...\\\"} \uD615\uD0DC\uB85C \uBCC0\uD658\r\n  const choices = {};\r\n  for (const choice of choicesArray) {\r\n    if (choice.label >= 'A' && choice.label <= 'D') {\r\n      choices[choice.label] = choice.text;\r\n    }\r\n  }\r\n  \r\n  // ============================================================================\r\n  // STEP 2: questionText \uBE44\uC5B4 \uC788\uC744 \uB54C placeholder \uCC98\uB9AC\r\n  // ============================================================================\r\n  if (!problemText || problemText.trim().length === 0) {\r\n    console.warn(`[SAT-DEBUG] [extractCurrentProblem] question \uD14D\uC2A4\uD2B8 \uCD94\uCD9C \uC2E4\uD328 - placeholder \uC0AC\uC6A9`);\r\n    problemText = '[QUESTION_NOT_EXTRACTED]';\r\n  }\r\n  // ============================================================================\r\n  \r\n  // \uCD5C\uC18C\uD55C passage\uB098 question \uC911 \uD558\uB098\uB294 \uC788\uC5B4\uC57C \uD568\r\n  if (!passageText && !problemText) {\r\n    console.warn(`[SAT-DEBUG] [extractCurrentProblem] passage\uC640 question \uBAA8\uB450 \uC5C6\uC74C - \uCD5C\uC18C\uD55C question\uC740 placeholder\uB85C \uC0DD\uC131`);\r\n    problemText = '[QUESTION_NOT_EXTRACTED]';\r\n  }\r\n  \r\n  // ============================================================================\r\n  // Figure \uC774\uBBF8\uC9C0 \uCD94\uCD9C\r\n  // ============================================================================\r\n  // #region agent log - DEBUG STEP 1: extractFigures \uD638\uCD9C \uD655\uC778\r\n  console.log(`[DEBUG STEP 1] extractCurrentProblem: \uBB38\uC81C ${problemNum}\uC5D0\uC11C extractFigures \uD638\uCD9C \uC9C1\uC804`);\r\n  fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractCurrentProblem:beforeExtractFigures',message:'DEBUG STEP 1: extractFigures \uD638\uCD9C \uC9C1\uC804',data:{problemNum,sectionType},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n  // #endregion\r\n  \r\n  let figures = [];\r\n  try {\r\n    const satRoot = findSatRoot();\r\n    const satRootTag = satRoot ? satRoot.tagName : null;\r\n    const satRootIsBody = satRoot === document.body;\r\n    const imgInRoot = satRoot ? satRoot.querySelectorAll('img').length : 0;\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7245/ingest/4830a523-40c3-4932-aa61-ce8aa2b3d853',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractCurrentProblem:satRootCheck',message:'math image extract: satRoot before extractFigures',data:{sectionType,problemNum,satRootFound:!!satRoot,satRootTag,satRootIsBody,imgInRoot},timestamp:Date.now(),hypothesisId:'H2'})}).catch(()=>{});\r\n    // #endregion\r\n\r\n    if (satRoot) {\r\n      console.log(`[DEBUG STEP 1] extractFigures \uD638\uCD9C \uC2DC\uC791: \uBB38\uC81C ${problemNum}`);\r\n      figures = await extractFigures(satRoot);\r\n\r\n      console.log(`[DEBUG STEP 1] extractFigures \uC644\uB8CC: \uBB38\uC81C ${problemNum}, figures.length=${figures.length}`);\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7245/ingest/4830a523-40c3-4932-aa61-ce8aa2b3d853',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractCurrentProblem:extractFiguresResult',message:'math image extract: after extractFigures',data:{sectionType,problemNum,figuresLength:figures.length},timestamp:Date.now(),hypothesisId:'H3'})}).catch(()=>{});\r\n      // #endregion\r\n\r\n      console.log(`[SAT-DEBUG] [extractCurrentProblem] \uBB38\uC81C ${problemNum}\uC5D0\uC11C ${figures.length}\uAC1C figure \uCD94\uCD9C \uC644\uB8CC`);\r\n    } else {\r\n      console.warn('[SAT-DEBUG] [extractCurrentProblem] satRoot\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC5B4 figure \uCD94\uCD9C \uC2A4\uD0B5');\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7245/ingest/4830a523-40c3-4932-aa61-ce8aa2b3d853',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractCurrentProblem:satRootNotFound',message:'math image extract: satRoot null',data:{sectionType,problemNum},timestamp:Date.now(),hypothesisId:'H2'})}).catch(()=>{});\r\n      // #endregion\r\n    }\r\n  } catch (error) {\r\n    console.warn('[SAT-DEBUG] [extractCurrentProblem] figure \uCD94\uCD9C \uC624\uB958 (\uACC4\uC18D \uC9C4\uD589):', error);\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7245/ingest/4830a523-40c3-4932-aa61-ce8aa2b3d853',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractCurrentProblem:extractFiguresError',message:'math image extract: extractFigures throw',data:{sectionType,problemNum,errorMessage:error.message},timestamp:Date.now(),hypothesisId:'H4'})}).catch(()=>{});\r\n    // #endregion\r\n    figures = []; // \uC2E4\uD328 \uC2DC \uBE48 \uBC30\uC5F4\r\n  }\r\n  \r\n  // #region agent log - DEBUG STEP 3: extractCurrentProblem \uBC18\uD658 \uC9C1\uC804 figures \uAC80\uC99D\r\n  console.log(`[DEBUG STEP 3] extractCurrentProblem \uBC18\uD658 \uC9C1\uC804: \uBB38\uC81C ${problemNum}, figures.length=${figures.length}`);\r\n  fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractCurrentProblem:beforeReturn',message:'DEBUG STEP 3: extractCurrentProblem \uBC18\uD658 \uC9C1\uC804 figures \uAC80\uC99D',data:{problemNum,figuresLength:figures.length,figures:figures.map(f=>({w:f.width,h:f.height,hasDataUrl:!!f.dataUrl}))},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'C'})}).catch(()=>{});\r\n  // #endregion\r\n  // ============================================================================\r\n  \r\n  // \uACE0\uC815\uB41C \uB370\uC774\uD130 \uAD6C\uC870 \uBC18\uD658 (\uC0AC\uC6A9\uC790 \uC694\uAD6C\uC0AC\uD56D\uC5D0 \uB9DE\uCDA4)\r\n  return {\r\n    section: sectionType === 'reading' ? 'Reading and Writing' : 'Math',\r\n    module: 0, // \uB098\uC911\uC5D0 \uCC44\uC6CC\uC9D0 (collectModuleProblems\uC5D0\uC11C)\r\n    problemNumber: problemNum, // \uC808\uB300 undefined \uC544\uB2D8 (\uC704\uC5D0\uC11C \uBCF4\uC7A5)\r\n    passage: passageText || null,\r\n    question: problemText, // stem \uB300\uC2E0 question \uC0AC\uC6A9 (\uBE44\uC5B4\uC788\uC73C\uBA74 placeholder)\r\n    choices: choices, // {A: \\\"...\\\", B: \\\"...\\\", C: \\\"...\\\", D: \\\"...\\\"} \uD615\uD0DC\r\n    correctAnswer: '', // \uB098\uC911\uC5D0 \uCC44\uC6CC\uC9D0 (detectCorrectAnswer\uC5D0\uC11C)\r\n    explanation: '', // \uB098\uC911\uC5D0 \uCC44\uC6CC\uC9D0 (extractExplanationAfterGrading\uC5D0\uC11C)\r\n    figures: figures // figure \uC774\uBBF8\uC9C0 \uBC30\uC5F4\r\n  };\r\n}\r\n\r\n/**\r\n * Progress \uC0C1\uD0DC \uAC00\uC838\uC624\uAE30 (\uB300\uD3ED \uAC15\uD654 - \uD654\uBA74 \uC804\uCCB4\uC5D0\uC11C \uC815\uADDC\uC2DD\uC73C\uB85C \uCC3E\uAE30)\r\n * @returns {string|null} Progress \uC0C1\uD0DC (\uC608: \"1/27\", \"5/27\")\r\n */\r\nexport function getProgressState() {\r\n  // FRAME GUARD: DOM \uC791\uC5C5\uC740 worker frame\uC5D0\uC11C\uB9CC \uC2E4\uD589 (\uB2E8, \uC77D\uAE30 \uC804\uC6A9\uC774\uBBC0\uB85C \uC644\uD654)\r\n  // \uC77D\uAE30 \uC804\uC6A9 \uD568\uC218\uC774\uBBC0\uB85C guard\uB294 \uACBD\uACE0\uB9CC \uCD9C\uB825\r\n  if (window !== window.top && !window.__SAT_IS_WORKER) {\r\n    console.warn('[SAT-DEBUG] [getProgressState] Worker frame\uC774 \uC544\uB2CC iframe\uC5D0\uC11C \uC2E4\uD589 - \uACBD\uACE0\uB9CC \uCD9C\uB825');\r\n  }\r\n  \r\n  // SAT root container \uCC3E\uAE30 (\uB9E4\uBC88 \uC7AC\uD0D0\uC0C9 - \uB9AC\uB80C\uB354\uB85C \uBC14\uB014 \uC218 \uC788\uC74C)\r\n  const satRoot = findSatRoot();\r\n  if (!satRoot) {\r\n    console.warn('[DIAG] satRoot not found, progress \uD310\uB3C5 \uC2E4\uD328');\r\n    return null;\r\n  }\r\n  \r\n  // \uBC29\uBC95 1: satRoot \uB0B4\uBD80 \uD14D\uC2A4\uD2B8\uC5D0\uC11C\uB9CC \uC815\uADDC\uC2DD\uC73C\uB85C \uCC3E\uAE30 (\uC804\uC5ED \uD14D\uC2A4\uD2B8 \uAE08\uC9C0)\r\n  const satRootText = satRoot.innerText || satRoot.textContent || '';\r\n  const progressRegex = /(\\d+)\\s*\\/\\s*(\\d+)/g;\r\n  const matches = satRootText.match(progressRegex);\r\n  \r\n  if (matches && matches.length > 0) {\r\n    // \uAC00\uC7A5 \uB9CE\uC774 \uB098\uD0C0\uB098\uB294 \uD328\uD134 \uC120\uD0DD (\uBCF4\uD1B5 \uC815\uD655\uD55C progress)\r\n    const matchCounts = {};\r\n    matches.forEach(match => {\r\n      matchCounts[match] = (matchCounts[match] || 0) + 1;\r\n    });\r\n    \r\n    const mostCommon = Object.keys(matchCounts).reduce((a, b) => \r\n      matchCounts[a] > matchCounts[b] ? a : b\r\n    );\r\n    \r\n    const parts = mostCommon.split('/').map(s => s.trim());\r\n    const current = parseInt(parts[0]);\r\n    const total = parseInt(parts[1]);\r\n    \r\n    if (current > 0 && current <= total && (total === 27 || total === 22)) {\r\n      console.log(`[SAT PDF Exporter] Progress \uBC1C\uACAC (satRoot text regex): ${mostCommon}`);\r\n      console.log(`[DIAG] progress text raw: \"${satRootText.slice(0, 200)}\"`);\r\n      return mostCommon;\r\n    }\r\n  }\r\n  \r\n  // \uBC29\uBC95 1-2: satRoot \uB0B4\uBD80\uC5D0\uC11C \uD2B9\uC815 \uC140\uB809\uD130\uB85C \uCC3E\uAE30\r\n  const satRootProgressElements = satRoot.querySelectorAll('[class*=\"progress\"], [aria-label*=\"progress\"], [class*=\"indicator\"]');\r\n  for (const el of satRootProgressElements) {\r\n    if (!isElementVisible(el)) continue;\r\n    const text = (el.innerText || el.textContent || '').trim();\r\n    const match = text.match(/(\\d+)\\s*\\/\\s*(\\d+)/);\r\n    if (match) {\r\n      const current = parseInt(match[1]);\r\n      const total = parseInt(match[2]);\r\n      if (current > 0 && current <= total && (total === 27 || total === 22)) {\r\n        console.log(`[SAT PDF Exporter] Progress \uBC1C\uACAC (satRoot selector): ${match[0]}`);\r\n        return match[0];\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Progress\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC73C\uBA74 hard fail (\uAE30\uBCF8\uAC12 \uC0AC\uC6A9 \uAE08\uC9C0)\r\n  console.error('[DIAG] Progress\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. satRoot snippet:', satRoot?.innerText?.slice(0, 500));\r\n  return null;\r\n}\r\n\r\n// \uD604\uC7AC \uBB38\uC81C \uBC88\uD638 \uAC00\uC838\uC624\uAE30 (100% \uC2E0\uB8B0 \uAC00\uB2A5 + \uD3F4\uBC31) - \uC218\uC815: satRoot \uB0B4\uBD80\uB85C \uC81C\uD55C\r\nexport function getCurrentProblemNumber() {\r\n  // SAT root container \uCC3E\uAE30\r\n  const satRoot = findSatRoot();\r\n  if (!satRoot) {\r\n    console.warn('[DIAG] satRoot not found, problem number \uD310\uB3C5 \uC2E4\uD328');\r\n    return 0;\r\n  }\r\n  \r\n  // \uBC29\uBC95 1: satRoot \uB0B4\uBD80\uC5D0\uC11C UI \uC0C1\uB2E8 progress \uD45C\uC2DC \uC694\uC18C\uB97C \uC815\uD655\uD788 \uCC3E\uAE30\r\n  const progressSelectors = [\r\n    '[class*=\"progress\"]',\r\n    '[class*=\"indicator\"]',\r\n    '[aria-label*=\"progress\"]',\r\n    '[class*=\"slider\"]',\r\n    '[class*=\"step\"]'\r\n  ];\r\n  \r\n  for (const selector of progressSelectors) {\r\n    const elements = satRoot.querySelectorAll(selector);\r\n    for (const el of elements) {\r\n      if (!isElementVisible(el)) continue; // \uBCF4\uC774\uC9C0 \uC54A\uB294 \uC694\uC18C \uC81C\uC678\r\n      \r\n      const text = (el.innerText || el.textContent || '').trim();\r\n      // Reading 27\uBB38\uC81C, Math 22\uBB38\uC81C \uC9C0\uC6D0\r\n      const match = text.match(/\\b(\\d+)\\s*\\/\\s*(27|22)\\b/);\r\n      if (match) {\r\n        const num = parseInt(match[1]);\r\n        const total = parseInt(match[2]);\r\n        if (num > 0 && num <= total) {\r\n          console.log(`[SAT PDF Exporter] \uBB38\uC81C \uBC88\uD638 \uBC1C\uACAC (satRoot progress UI): ${num}/27 (raw: \"${text}\")`);\r\n          // #region agent log\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:getCurrentProblemNumber:found1',message:'getCurrentProblemNumber found via progress UI',data:{num,text,method:'progressUI'},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'})}).catch(()=>{});\r\n          // #endregion\r\n          return num;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  // \uBC29\uBC95 2: satRoot \uB0B4\uBD80 \uD14D\uC2A4\uD2B8\uC5D0\uC11C progress \uD328\uD134 \uCC3E\uAE30\r\n  const satRootText = satRoot.innerText || satRoot.textContent || '';\r\n  const match = satRootText.match(/\\b(\\d+)\\s*\\/\\s*(27|22)\\b/);\r\n  if (match) {\r\n    const num = parseInt(match[1]);\r\n    const total = parseInt(match[2]);\r\n    if (num > 0 && num <= total) {\r\n      console.log(`[SAT PDF Exporter] \uBB38\uC81C \uBC88\uD638 \uBC1C\uACAC (satRoot text): ${num}/27`);\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:getCurrentProblemNumber:found2',message:'getCurrentProblemNumber found via satRoot text',data:{num,method:'satRootText'},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'})}).catch(()=>{});\r\n      // #endregion\r\n      return num;\r\n    }\r\n  }\r\n  \r\n  // \uBC29\uBC95 3: satRoot \uB0B4\uBD80\uC758 \uBB38\uC81C \uBC88\uD638\uB85C \uC2DC\uC791\uD558\uB294 \uD14D\uC2A4\uD2B8 \uCC3E\uAE30\r\n  const problemNumberElements = satRoot.querySelectorAll('[class*=\"question\"], [class*=\"problem\"], [class*=\"number\"]');\r\n  for (const el of problemNumberElements) {\r\n    if (!isElementVisible(el)) continue;\r\n    const text = (el.innerText || el.textContent || '').trim();\r\n    const numMatch = text.match(/^(\\d+)\\./);\r\n    if (numMatch) {\r\n      const num = parseInt(numMatch[1]);\r\n      if (num > 0 && num <= 27) {\r\n        console.log(`[SAT PDF Exporter] \uBB38\uC81C \uBC88\uD638 \uBC1C\uACAC (satRoot \uD14D\uC2A4\uD2B8 \uD328\uD134): ${num}`);\r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:getCurrentProblemNumber:found3',message:'getCurrentProblemNumber found via text pattern',data:{num,text,method:'textPattern'},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'})}).catch(()=>{});\r\n        // #endregion\r\n        return num;\r\n      }\r\n    }\r\n  }\r\n  \r\n  console.warn('[SAT PDF Exporter] \uBB38\uC81C \uBC88\uD638\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uAE30\uBCF8\uAC12 1 \uC0AC\uC6A9');\r\n  \r\n  // #region agent log\r\n  const defaultReturn = 1;\r\n  fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:getCurrentProblemNumber:default',message:'getCurrentProblemNumber returning default 1',data:{satRootFound:!!satRoot,defaultReturn},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'})}).catch(()=>{});\r\n  // #endregion\r\n  \r\n  return defaultReturn; // \uAE30\uBCF8\uAC12\r\n}\r\n\r\n/**\r\n * \uBB38\uC81C \uC2DC\uADF8\uB2C8\uCC98 \uC0DD\uC131 (\uC9C0\uBB38 \uD574\uC2DC \uAE30\uBC18 - \uBB38\uC81C \uBC88\uD638\uB97C \uBABB \uCC3E\uC744 \uB54C \uD3F4\uBC31\uC6A9)\r\n * @returns {string} \uBB38\uC81C \uC2DC\uADF8\uB2C8\uCC98 \uD574\uC2DC\r\n */\r\nexport function getQuestionSignature() {\r\n  const bodyText = (document.body.innerText || document.body.textContent || '').trim();\r\n  \r\n  // \uC9C0\uBB38(passage) \uCD94\uCD9C - Reading \uC139\uC158\uC758 \uACBD\uC6B0\r\n  let passageText = '';\r\n  const passageSelectors = [\r\n    '[class*=\"passage\"]',\r\n    '[class*=\"text\"]',\r\n    'div[class*=\"content\"]',\r\n    'p'\r\n  ];\r\n  \r\n  for (const selector of passageSelectors) {\r\n    const elements = document.querySelectorAll(selector);\r\n    for (const el of elements) {\r\n      const text = (el.innerText || el.textContent || '').trim();\r\n      // \uC9C0\uBB38\uC740 \uBCF4\uD1B5 \uAE38\uACE0, \uBB38\uC81C \uBC88\uD638\uB098 \uC120\uD0DD\uC9C0\uAC00 \uC5C6\uB294 \uD14D\uC2A4\uD2B8\r\n      if (text.length > 100 && !text.match(/^\\d+\\./) && !text.match(/^[A-D][\\.\\)]/)) {\r\n        passageText += text.substring(0, 200); // \uC9C0\uBB38\uC758 \uC55E\uBD80\uBD84\uB9CC \uC0AC\uC6A9\r\n        break;\r\n      }\r\n    }\r\n    if (passageText) break;\r\n  }\r\n  \r\n  // \uBB38\uC81C \uC9C8\uBB38 \uBD80\uBD84 \uCD94\uCD9C\r\n  let questionText = '';\r\n  const questionMatch = bodyText.match(/\\d+\\.\\s*([^\\n]+?)(?=[A-D][\\.\\)]|$)/);\r\n  if (questionMatch) {\r\n    questionText = questionMatch[1].substring(0, 150);\r\n  }\r\n  \r\n  // \uC120\uD0DD\uC9C0 \uC77C\uBD80 \uCD94\uCD9C\r\n  let choicesText = '';\r\n  const choicesMatch = bodyText.match(/([A-D][\\.\\)]\\s*[^\\n]+)/g);\r\n  if (choicesMatch && choicesMatch.length > 0) {\r\n    choicesText = choicesMatch.slice(0, 2).join(' ').substring(0, 100); // A, B \uC120\uD0DD\uC9C0\uB9CC\r\n  }\r\n  \r\n  // \uC9C0\uBB38 + \uBB38\uC81C + \uC120\uD0DD\uC9C0\uB97C \uD569\uCCD0\uC11C \uC2DC\uADF8\uB2C8\uCC98 \uC0DD\uC131\r\n  const signature = (passageText + questionText + choicesText).trim();\r\n  \r\n  if (!signature) {\r\n    // \uC544\uBB34\uAC83\uB3C4 \uBABB \uCC3E\uC558\uC73C\uBA74 bodyText\uC758 \uC77C\uBD80\uB97C \uC0AC\uC6A9\r\n    return bodyText.substring(0, 200).replace(/\\s+/g, ' ');\r\n  }\r\n  \r\n  // \uD574\uC2DC \uC0DD\uC131 (\uB354 \uAC15\uB825\uD55C \uD574\uC2DC)\r\n  let hash = 0;\r\n  for (let i = 0; i < signature.length; i++) {\r\n    const char = signature.charCodeAt(i);\r\n    hash = ((hash << 5) - hash) + char;\r\n    hash = hash & hash; // Convert to 32bit integer\r\n  }\r\n  \r\n  const hashStr = Math.abs(hash).toString(36);\r\n  console.log(`[SAT PDF Exporter] \uBB38\uC81C \uC2DC\uADF8\uB2C8\uCC98 \uC0DD\uC131: ${hashStr} (\uC9C0\uBB38: ${passageText ? '\uC788\uC74C' : '\uC5C6\uC74C'}, \uBB38\uC81C: ${questionText ? '\uC788\uC74C' : '\uC5C6\uC74C'})`);\r\n  \r\n  return hashStr;\r\n}\r\n\r\n// \uCC44\uC810 \uC644\uB8CC \uD310\uBCC4 (\uB354 \uC5C4\uACA9\uD558\uAC8C)\r\nexport function isGraded() {\r\n  // FRAME GUARD: DOM \uC791\uC5C5\uC740 worker frame\uC5D0\uC11C\uB9CC \uC2E4\uD589\r\n  if (window !== window.top && !window.__SAT_IS_WORKER) {\r\n    console.warn('[SAT-DEBUG] [isGraded] Worker frame\uC774 \uC544\uB2CC iframe\uC5D0\uC11C \uC2E4\uD589 - \uACBD\uACE0\uB9CC \uCD9C\uB825');\r\n  }\r\n  \r\n  const satRoot = findSatRoot();\r\n  if (!satRoot) {\r\n    return false;\r\n  }\r\n  \r\n  // \uC870\uAC74 1: answered-correct/incorrect \uD074\uB798\uC2A4\uAC00 \uC788\uB294\uC9C0 \uD655\uC778\r\n  const hasAnsweredClass = !!satRoot.querySelector('[class*=\"answered-correct\"], [class*=\"answered-incorrect\"]');\r\n  \r\n  // \uC870\uAC74 2: aria-label\uC5D0 Correct/Incorrect\uAC00 \uD3EC\uD568\uB41C \uC635\uC158\uC774 \uC788\uB294\uC9C0 \uD655\uC778\r\n  const hasCorrectAria = !!satRoot.querySelector('[aria-label*=\"Correct\" i], [aria-label*=\"Incorrect\" i], [aria-label*=\"\uC815\uB2F5\"], [aria-label*=\"\uC624\uB2F5\"]');\r\n  \r\n  // \uC870\uAC74 3: \uD574\uC124 \uCEE8\uD14C\uC774\uB108\uAC00 \uB098\uD0C0\uB0AC\uB294\uC9C0 \uD655\uC778\r\n  const hasExplanation = !!satRoot.querySelector('[class*=\"explanation\"], [class*=\"\uD574\uC124\"], [class*=\"solution\"]');\r\n  \r\n  const result = hasAnsweredClass || hasCorrectAria || hasExplanation;\r\n  \r\n  // #region agent log\r\n  if (typeof window !== 'undefined' && window.location) {\r\n    const logData = {\r\n      location: 'extract.js:isGraded',\r\n      message: 'isGraded check',\r\n      data: {\r\n        hasAnsweredClass,\r\n        hasCorrectAria,\r\n        hasExplanation,\r\n        result,\r\n        satRootExists: !!satRoot\r\n      },\r\n      timestamp: Date.now(),\r\n      sessionId: 'debug-session',\r\n      runId: 'initial',\r\n      hypothesisId: 'A'\r\n    };\r\n    console.log('[DEBUG-LOG]', logData);\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(logData)\r\n    }).catch(err => console.warn('[DEBUG-LOG] HTTP log failed:', err));\r\n  }\r\n  // #endregion\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * \uCC44\uC810 \uC644\uB8CC \uB300\uAE30 (\uB354 \uC5C4\uACA9\uD55C \uC870\uAC74: \uC815\uB2F5 \uD45C\uC2DC\uAC00 \uC2E4\uC81C\uB85C \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30)\r\n * @returns {Promise<string|null>} 'correct' | 'incorrect' | null\r\n */\r\nexport async function waitForGrading(timeoutMs = 6000) {\r\n  console.log('[GRADING] \uCC44\uC810 \uB300\uAE30 \uC2DC\uC791 (\uC5C4\uACA9\uD55C \uC870\uAC74: \uC815\uB2F5 \uD45C\uC2DC \uD655\uC778)');\r\n  // timeoutMs \uD30C\uB77C\uBBF8\uD130\uB85C \uBC1B\uB3C4\uB85D \uC218\uC815 (\uAE30\uBCF8\uAC12 6000ms)\r\n  \r\n  // SAT root container \uCC3E\uAE30\r\n  const satRoot = findSatRoot();\r\n  if (!satRoot) {\r\n    console.error('[GRADING] satRoot not found, \uCC44\uC810 \uB300\uAE30 \uC2E4\uD328');\r\n    // #region agent log\r\n    if (typeof window !== 'undefined' && window.location) {\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          location: 'extract.js:waitForGrading',\r\n          message: 'satRoot not found',\r\n          data: {},\r\n          timestamp: Date.now(),\r\n          sessionId: 'debug-session',\r\n          runId: 'initial',\r\n          hypothesisId: 'A'\r\n        })\r\n      }).catch(() => {});\r\n    }\r\n    // #endregion\r\n    return null;\r\n  }\r\n  \r\n  return new Promise((resolve) => {\r\n    const startTime = Date.now();\r\n    let resolved = false;\r\n    \r\n    // \uD3F4\uB9C1 \uBC29\uC2DD\uC73C\uB85C \uCC44\uC810 \uC644\uB8CC \uD655\uC778 (\uB354 \uC5C4\uACA9\uD55C \uC870\uAC74)\r\n    const checkGrading = () => {\r\n      if (resolved) return;\r\n      \r\n      const progressState = getProgressState();\r\n      \r\n      // \uC870\uAC74 1: answered-correct/incorrect \uD074\uB798\uC2A4 \uD655\uC778\r\n      const answeredCorrect = satRoot.querySelector('[class*=\"answered-correct\"]');\r\n      const answeredIncorrect = satRoot.querySelector('[class*=\"answered-incorrect\"]');\r\n      \r\n      // \uC870\uAC74 2: aria-label\uC5D0 Correct/Incorrect \uD3EC\uD568 \uD655\uC778\r\n      const correctAria = satRoot.querySelector('[aria-label*=\"Correct\" i], [aria-label*=\"\uC815\uB2F5\"]');\r\n      const incorrectAria = satRoot.querySelector('[aria-label*=\"Incorrect\" i], [aria-label*=\"\uC624\uB2F5\"]');\r\n      \r\n      // \uC870\uAC74 3: \uD574\uC124 \uCEE8\uD14C\uC774\uB108 \uD655\uC778\r\n      const explanation = satRoot.querySelector('[class*=\"explanation\"], [class*=\"\uD574\uC124\"], [class*=\"solution\"]');\r\n      \r\n      // \uC870\uAC74 4: \uC635\uC158 \uC694\uC18C\uB4E4\uC5D0\uC11C \uC815\uB2F5 \uB9C8\uD0B9 \uD655\uC778\r\n      const options = satRoot.querySelectorAll('[role=\"radio\"], button[aria-label*=\"Choice\"], [class*=\"option\"], .mat-mdc-list-item');\r\n      let foundCorrectOption = false;\r\n      let foundIncorrectOption = false;\r\n      \r\n      for (const opt of options) {\r\n        if (!isElementVisible(opt) || !satRoot.contains(opt)) continue;\r\n        \r\n        const className = opt.className || '';\r\n        const ariaLabel = (opt.getAttribute('aria-label') || '').toLowerCase();\r\n        \r\n        // answered-correct \uD074\uB798\uC2A4 \uB610\uB294 correct \uAD00\uB828 aria-label\r\n        if (/\\banswered-correct\\b/.test(className) || \r\n            /\\bcorrect\\b/.test(className) ||\r\n            ariaLabel.includes('correct') || ariaLabel.includes('\uC815\uB2F5')) {\r\n          foundCorrectOption = true;\r\n        }\r\n        \r\n        // answered-incorrect \uD074\uB798\uC2A4 \uB610\uB294 incorrect \uAD00\uB828 aria-label\r\n        if (/\\banswered-incorrect\\b/.test(className) ||\r\n            /\\bincorrect\\b/.test(className) ||\r\n            ariaLabel.includes('incorrect') || ariaLabel.includes('\uC624\uB2F5')) {\r\n          foundIncorrectOption = true;\r\n        }\r\n      }\r\n      \r\n      // \uCC44\uC810 \uC644\uB8CC \uD310\uC815: \uC704 \uC870\uAC74 \uC911 \uD558\uB098\uB77C\uB3C4 \uB9CC\uC871\uD558\uBA74 \uC644\uB8CC\r\n      const isGradedNow = !!(answeredCorrect || answeredIncorrect || \r\n                            correctAria || incorrectAria || \r\n                            explanation || foundCorrectOption || foundIncorrectOption);\r\n      \r\n      // #region agent log (\uCD5C\uB300 5\uBC88\uB9CC \uB85C\uAE45\uD558\uC5EC \uC2A4\uD338 \uBC29\uC9C0)\r\n      if (typeof window !== 'undefined' && window.location && (Date.now() - startTime) % 400 < 80) {\r\n        const logData = {\r\n          location: 'extract.js:waitForGrading:checkGrading',\r\n          message: 'grading check iteration',\r\n          data: {\r\n            progressState,\r\n            answeredCorrect: !!answeredCorrect,\r\n            answeredIncorrect: !!answeredIncorrect,\r\n            correctAria: !!correctAria,\r\n            incorrectAria: !!incorrectAria,\r\n            explanation: !!explanation,\r\n            foundCorrectOption,\r\n            foundIncorrectOption,\r\n            isGradedNow,\r\n            optionsCount: options.length,\r\n            elapsedMs: Date.now() - startTime,\r\n            satRootTextSlice: (satRoot.innerText || '').substring(0, 400)\r\n          },\r\n          timestamp: Date.now(),\r\n          sessionId: 'debug-session',\r\n          runId: 'initial',\r\n          hypothesisId: 'A'\r\n        };\r\n        console.log('[DEBUG-LOG]', logData);\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(logData)\r\n        }).catch(err => console.warn('[DEBUG-LOG] HTTP log failed:', err));\r\n      }\r\n      // #endregion\r\n      \r\n      if (isGradedNow) {\r\n        resolved = true;\r\n        const result = (answeredCorrect || correctAria || foundCorrectOption) ? 'correct' : 'incorrect';\r\n        console.log(`[GRADING] \u2713 \uCC44\uC810 \uC644\uB8CC \uAC10\uC9C0: ${result}`);\r\n        resolve(result);\r\n        return;\r\n      }\r\n      \r\n      // \uD0C0\uC784\uC544\uC6C3 \uCCB4\uD06C\r\n      if (Date.now() - startTime >= timeoutMs) {\r\n        resolved = true;\r\n        console.error(`[GRADING] \u2717 \uCC44\uC810 \uB300\uAE30 \uD0C0\uC784\uC544\uC6C3 (${timeoutMs}ms)`);\r\n        console.error(`[DIAG] satRoot snippet:`, satRoot?.innerText?.slice(0, 500));\r\n        // #region agent log\r\n        if (typeof window !== 'undefined' && window.location) {\r\n          const logData = {\r\n            location: 'extract.js:waitForGrading:timeout',\r\n            message: 'grading timeout',\r\n            data: {\r\n              elapsedMs: Date.now() - startTime,\r\n              satRootHTMLSlice: (satRoot.innerHTML || '').substring(0, 800),\r\n              satRootTextSlice: (satRoot.innerText || '').substring(0, 400)\r\n            },\r\n            timestamp: Date.now(),\r\n            sessionId: 'debug-session',\r\n            runId: 'initial',\r\n            hypothesisId: 'A'\r\n          };\r\n          console.error('[DEBUG-LOG]', logData);\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(logData)\r\n          }).catch(err => console.warn('[DEBUG-LOG] HTTP log failed:', err));\r\n        }\r\n        // #endregion\r\n        resolve(null);\r\n        return;\r\n      }\r\n      \r\n      // 20ms\uB9C8\uB2E4 \uC7AC\uD655\uC778 (\uBE60\uB978 \uCC44\uC810 \uAC10\uC9C0)\r\n      setTimeout(checkGrading, 20);\r\n    };\r\n    \r\n    // \uC989\uC2DC \uCCAB \uD655\uC778\r\n    checkGrading();\r\n  });\r\n}\r\n\r\n// \uC815\uB2F5 \uCD94\uCD9C (\uAC1C\uC120\uB41C \uB85C\uC9C1: \uC5EC\uB7EC \uC2E0\uD638 \uD655\uC778)\r\nexport function detectCorrectAnswer() {\r\n  console.log('[ANSWER] \uC815\uB2F5 \uCD94\uCD9C \uC911 (\uAC1C\uC120\uB41C \uB85C\uC9C1)...');\r\n  \r\n  // FRAME GUARD: DOM \uC791\uC5C5\uC740 worker frame\uC5D0\uC11C\uB9CC \uC2E4\uD589\r\n  if (window !== window.top && !window.__SAT_IS_WORKER) {\r\n    console.warn('[SAT-DEBUG] [detectCorrectAnswer] Worker frame\uC774 \uC544\uB2CC iframe\uC5D0\uC11C \uC2E4\uD589 \uC2DC\uB3C4 - \uC2A4\uD0B5');\r\n    return null;\r\n  }\r\n  \r\n  // SAT root container \uCC3E\uAE30\r\n  const satRoot = findSatRoot();\r\n  if (!satRoot) {\r\n    console.error('[ANSWER] satRoot not found, \uC815\uB2F5 \uCD94\uCD9C \uC2E4\uD328');\r\n    // #region agent log\r\n    if (typeof window !== 'undefined' && window.location) {\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          location: 'extract.js:detectCorrectAnswer',\r\n          message: 'satRoot not found',\r\n          data: {},\r\n          timestamp: Date.now(),\r\n          sessionId: 'debug-session',\r\n          runId: 'initial',\r\n          hypothesisId: 'B'\r\n        })\r\n      }).catch(() => {});\r\n    }\r\n    // #endregion\r\n    return null;\r\n  }\r\n  \r\n  // ---------------------------------------------------------------------------\r\n  // Math \uC8FC\uAD00\uC2DD: div.explanation \u2192 option-text-container \u2192 span.math-inline[data-math]\r\n  // \uAC1D\uAD00\uC2DD \uC120\uD0DD\uC9C0\uAC00 \uC5C6\uC73C\uBBC0\uB85C \uBA3C\uC800 \uD655\uC778\r\n  // ---------------------------------------------------------------------------\r\n  const explanationBlocks = satRoot.querySelectorAll('.explanation[class*=\"answered\"], [class*=\"explanation\"]');\r\n  for (const block of explanationBlocks) {\r\n    if (!isElementVisible(block)) continue;\r\n    const optionTextContainer = block.querySelector('.option-text-container');\r\n    if (!optionTextContainer) continue;\r\n    // 1) LaTeX: span.math-inline[data-math]\r\n    const mathInline = optionTextContainer.querySelector('span.math-inline[data-math]');\r\n    if (mathInline) {\r\n      const latex = mathInline.getAttribute('data-math');\r\n      if (latex && typeof latex === 'string') {\r\n        let readable = latex\r\n          .replace(/\\\\frac\\s*\\{\\s*([^}]+)\\s*\\}\\s*\\{\\s*([^}]+)\\s*\\}/g, '$1/$2')\r\n          .replace(/\\\\sqrt\\s*\\{\\s*([^}]+)\\s*\\}/g, '\u221A$1')\r\n          .replace(/\\\\sqrt\\s*([^\\s\\{\\\\]+)/g, '\u221A$1')\r\n          .replace(/\\\\cdot/g, '\u00B7')\r\n          .replace(/\\\\times/g, '\u00D7')\r\n          .replace(/\\\\div/g, '\u00F7')\r\n          .replace(/\\\\pm/g, '\u00B1')\r\n          .replace(/\\\\text\\s*\\{\\s*([^}]*)\\s*\\}/g, '$1')\r\n          .replace(/\\\\left|\\\\right/g, '')\r\n          .replace(/\\\\\\(|\\\\\\)/g, '')\r\n          .trim();\r\n        if (readable.length > 0) {\r\n          console.log(`[SAT PDF Exporter] Math \uC8FC\uAD00\uC2DD \uC815\uB2F5 \uBC1C\uACAC: ${readable} (LaTeX)`);\r\n          return readable;\r\n        }\r\n      }\r\n    }\r\n    // 2) \uD3F4\uBC31: data-math \uC18D\uC131 \uC788\uB294 \uBAA8\uB4E0 \uC694\uC18C (katex \uB4F1 \uB2E4\uB978 \uB798\uD37C)\r\n    const anyMath = optionTextContainer.querySelector('[data-math]');\r\n    if (anyMath) {\r\n      const latex = anyMath.getAttribute('data-math');\r\n      if (latex && typeof latex === 'string') {\r\n        let readable = latex\r\n          .replace(/\\\\frac\\s*\\{\\s*([^}]+)\\s*\\}\\s*\\{\\s*([^}]+)\\s*\\}/g, '$1/$2')\r\n          .replace(/\\\\sqrt\\s*\\{\\s*([^}]+)\\s*\\}/g, '\u221A$1')\r\n          .replace(/\\\\cdot/g, '\u00B7')\r\n          .replace(/\\\\times/g, '\u00D7')\r\n          .replace(/\\\\div/g, '\u00F7')\r\n          .replace(/\\\\pm/g, '\u00B1')\r\n          .replace(/\\\\text\\s*\\{\\s*([^}]*)\\s*\\}/g, '$1')\r\n          .replace(/\\\\left|\\\\right/g, '')\r\n          .trim();\r\n        if (readable.length > 0) {\r\n          console.log(`[SAT PDF Exporter] Math \uC8FC\uAD00\uC2DD \uC815\uB2F5 \uBC1C\uACAC: ${readable} ([data-math])`);\r\n          return readable;\r\n        }\r\n      }\r\n    }\r\n    // 3) \uD3F4\uBC31: \uC21C\uC218 \uD14D\uC2A4\uD2B8 (\uC22B\uC790, \uBD84\uC218 \uB4F1 - \"8\", \"3/5\", \"1.5\")\r\n    const rawText = (optionTextContainer.innerText || optionTextContainer.textContent || '').trim();\r\n    const cleaned = rawText\r\n      .replace(/^(\uC815\uB2F5|\uC624\uB2F5|Correct|Incorrect)\\s*/i, '')\r\n      .replace(/\\s*(\uC815\uB2F5|\uC624\uB2F5|Correct|Incorrect)$/i, '')\r\n      .replace(/\\s+/g, ' ')\r\n      .trim();\r\n    const numericMatch = cleaned.match(/^[\\d\\s\\/\\.\\-\\(\\)\\*]+$/);\r\n    if (cleaned.length > 0 && cleaned.length <= 20 && (numericMatch || /^[\\d\\.]+\\s*\\/\\s*[\\d\\.]+$/.test(cleaned))) {\r\n      console.log(`[SAT PDF Exporter] Math \uC8FC\uAD00\uC2DD \uC815\uB2F5 \uBC1C\uACAC: ${cleaned} (\uD14D\uC2A4\uD2B8 \uD3F4\uBC31)`);\r\n      return cleaned;\r\n    }\r\n  }\r\n  \r\n  // \uC635\uC158 \uD6C4\uBCF4 \uC218\uC9D1 (\uB354 robust\uD55C selector)\r\n  const optionSelectors = [\r\n    '[role=\"radio\"]',\r\n    'button[aria-label*=\"Choice\"]',\r\n    '.option',\r\n    '[class*=\"option\"]',\r\n    '.mat-mdc-list-item'\r\n  ];\r\n  \r\n  const candidates = [];\r\n  for (const selector of optionSelectors) {\r\n    const elements = satRoot.querySelectorAll(selector);\r\n    for (const el of elements) {\r\n      if (!isElementVisible(el) || !satRoot.contains(el)) continue;\r\n      if (candidates.find(c => c.element === el)) continue; // \uC911\uBCF5 \uC81C\uAC70\r\n      candidates.push({ element: el, selector });\r\n    }\r\n  }\r\n  \r\n  // \uAC01 \uD6C4\uBCF4\uC5D0\uC11C choice letter \uACB0\uC815\r\n  const optionCandidates = [];\r\n  for (let i = 0; i < candidates.length; i++) {\r\n    const candidate = candidates[i];\r\n    const el = candidate.element;\r\n    \r\n    const className = el.className || '';\r\n    const ariaLabel = (el.getAttribute('aria-label') || '').trim();\r\n    const dataTestId = (el.getAttribute('data-testid') || '').trim();\r\n    const text = (el.innerText || el.textContent || '').trim();\r\n    \r\n    // choice letter \uACB0\uC815 (\uC6B0\uC120\uC21C\uC704 \uC21C)\r\n    let choiceLetter = null;\r\n    \r\n    // \uBC29\uBC95 1: aria-label\uC5D0\uC11C \"Choice A/B/C/D\" \uCD94\uCD9C\r\n    const ariaMatch = ariaLabel.match(/choice\\s*([A-D])/i) || ariaLabel.match(/^([A-D])[\\.\\)]?/i);\r\n    if (ariaMatch) {\r\n      choiceLetter = ariaMatch[1].toUpperCase();\r\n    }\r\n    \r\n    // \uBC29\uBC95 2: \uD14D\uC2A4\uD2B8\uC5D0\uC11C \"A.\" \"B.\" \uB4F1\uC73C\uB85C \uC2DC\uC791\uD558\uB294\uC9C0 \uD655\uC778\r\n    if (!choiceLetter) {\r\n      const textMatch = text.match(/^([A-D])[\\.\\)]\\s*/);\r\n      if (textMatch) {\r\n        choiceLetter = textMatch[1].toUpperCase();\r\n      }\r\n    }\r\n    \r\n    // \uBC29\uBC95 3: data-testid\uC5D0\uC11C \uCD94\uCD9C\r\n    if (!choiceLetter) {\r\n      const testIdMatch = dataTestId.match(/choice[_-]?([A-D])/i) || dataTestId.match(/option[_-]?([A-D])/i);\r\n      if (testIdMatch) {\r\n        choiceLetter = testIdMatch[1].toUpperCase();\r\n      }\r\n    }\r\n    \r\n    // \uBC29\uBC95 4: \uD3F4\uBC31 - \uC778\uB371\uC2A4 \uAE30\uBC18 (0..3 => A..D)\r\n    if (!choiceLetter && i < 4) {\r\n      choiceLetter = String.fromCharCode(65 + i); // A, B, C, D\r\n    }\r\n    \r\n    if (choiceLetter && choiceLetter >= 'A' && choiceLetter <= 'D') {\r\n      optionCandidates.push({\r\n        letter: choiceLetter,\r\n        element: el,\r\n        className,\r\n        ariaLabel: ariaLabel.substring(0, 50),\r\n        dataTestId: dataTestId.substring(0, 30),\r\n        text: text.substring(0, 50),\r\n        visible: isElementVisible(el),\r\n        index: i\r\n      });\r\n    }\r\n  }\r\n  \r\n  // #region agent log\r\n  if (typeof window !== 'undefined' && window.location) {\r\n    const logData = {\r\n      location: 'extract.js:detectCorrectAnswer:afterCandidateCollection',\r\n      message: 'option candidates collected',\r\n      data: {\r\n        candidatesCount: optionCandidates.length,\r\n        candidates: optionCandidates.map(c => ({\r\n          letter: c.letter,\r\n          className: c.className.substring(0, 100),\r\n          ariaLabel: c.ariaLabel,\r\n          dataTestId: c.dataTestId,\r\n          text: c.text,\r\n          visible: c.visible,\r\n          index: c.index\r\n        })),\r\n        satRootTextSlice: (satRoot.innerText || '').substring(0, 400)\r\n      },\r\n      timestamp: Date.now(),\r\n      sessionId: 'debug-session',\r\n      runId: 'initial',\r\n      hypothesisId: 'B'\r\n    };\r\n    console.log('[DEBUG-LOG]', logData);\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(logData)\r\n    }).catch(err => console.warn('[DEBUG-LOG] HTTP log failed:', err));\r\n  }\r\n  // #endregion\r\n  \r\n  // \uC815\uB2F5 \uD310\uBCC4 (\uC6B0\uC120\uC21C\uC704 \uC21C)\r\n  for (const candidate of optionCandidates) {\r\n    const el = candidate.element;\r\n    const className = el.className || '';\r\n    const ariaLabel = (el.getAttribute('aria-label') || '').toLowerCase();\r\n    const fullText = (el.innerText || el.textContent || '').toLowerCase();\r\n    \r\n    // \uC2E0\uD638 1: className\uC5D0 answered-correct \uB610\uB294 correct \uD3EC\uD568\r\n    if (/\\banswered-correct\\b/.test(className) || /\\bcorrect\\b/.test(className)) {\r\n      console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uBC1C\uACAC: ${candidate.letter} (className: answered-correct/correct)`);\r\n      return candidate.letter;\r\n    }\r\n    \r\n    // \uC2E0\uD638 2: aria-label\uC5D0 correct \uD3EC\uD568\r\n    if (ariaLabel.includes('correct') || ariaLabel.includes('\uC815\uB2F5')) {\r\n      console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uBC1C\uACAC: ${candidate.letter} (aria-label: correct)`);\r\n      return candidate.letter;\r\n    }\r\n    \r\n    // \uC2E0\uD638 3: \uC694\uC18C \uB0B4\uBD80 \uD14D\uC2A4\uD2B8\uC5D0 \"\uC815\uB2F5\uC785\uB2C8\uB2E4\" \uB610\uB294 \"Correct\" \uD3EC\uD568\r\n    if (fullText.includes('\uC815\uB2F5\uC785\uB2C8\uB2E4') || fullText.includes('\uC815\uB2F5\uC785\uB2C8\uB2E4!') || \r\n        fullText.includes('this is correct') || fullText.includes('correct!')) {\r\n      console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uBC1C\uACAC: ${candidate.letter} (\uB0B4\uBD80 \uD14D\uC2A4\uD2B8: \uC815\uB2F5\uC785\uB2C8\uB2E4/Correct)`);\r\n      return candidate.letter;\r\n    }\r\n    \r\n    // \uC2E0\uD638 4: \uCD08\uB85D\uC0C9 \uD14C\uB450\uB9AC/\uBC30\uACBD\uC0C9 \uD655\uC778 (CSS computed style)\r\n    try {\r\n      const style = window.getComputedStyle(el);\r\n      const borderColor = style.borderColor || '';\r\n      const backgroundColor = style.backgroundColor || '';\r\n      const outlineColor = style.outlineColor || '';\r\n      \r\n      // \uCD08\uB85D\uC0C9 RGB \uAC12 \uD655\uC778 (rgb(76, 175, 80) \uB610\uB294 \uC720\uC0AC\uD55C \uAC12)\r\n      const isGreenBorder = borderColor.includes('76, 175, 80') || borderColor.includes('rgb(76, 175, 80)') ||\r\n                          borderColor.includes('4caf50') || borderColor.includes('#4caf50');\r\n      const isGreenBg = backgroundColor.includes('76, 175, 80') || backgroundColor.includes('rgb(76, 175, 80)') ||\r\n                       backgroundColor.includes('4caf50') || backgroundColor.includes('#4caf50');\r\n      const isGreenOutline = outlineColor.includes('76, 175, 80') || outlineColor.includes('rgb(76, 175, 80)') ||\r\n                            outlineColor.includes('4caf50') || outlineColor.includes('#4caf50');\r\n      \r\n      if (isGreenBorder || isGreenBg || isGreenOutline) {\r\n        console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uBC1C\uACAC: ${candidate.letter} (\uCD08\uB85D\uC0C9 \uD14C\uB450\uB9AC/\uBC30\uACBD)`);\r\n        return candidate.letter;\r\n      }\r\n    } catch (e) {\r\n      // \uC2A4\uD0C0\uC77C \uD655\uC778 \uC2E4\uD328 \uC2DC \uBB34\uC2DC\r\n    }\r\n    \r\n    // \uC2E0\uD638 5: \uC694\uC18C \uB0B4\uBD80\uC5D0 correct \uC544\uC774\uCF58/\uB9C8\uCEE4 \uCC3E\uAE30\r\n    const iconElements = el.querySelectorAll('svg, [class*=\"icon\"], [class*=\"marker\"], [class*=\"check\"], [class*=\"correct\"]');\r\n    for (const icon of iconElements) {\r\n      const iconTitle = (icon.getAttribute('title') || '').toLowerCase();\r\n      const iconAriaLabel = (icon.getAttribute('aria-label') || '').toLowerCase();\r\n      const iconText = (icon.textContent || '').toLowerCase();\r\n      if (iconTitle.includes('correct') || iconAriaLabel.includes('correct') ||\r\n          iconTitle.includes('\uC815\uB2F5') || iconAriaLabel.includes('\uC815\uB2F5') ||\r\n          iconText.includes('\uC815\uB2F5') || iconText.includes('correct')) {\r\n        console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uBC1C\uACAC: ${candidate.letter} (icon/marker)`);\r\n        return candidate.letter;\r\n      }\r\n    }\r\n    \r\n    // \uC2E0\uD638 6 \uC81C\uAC70: \uBD80\uBAA8 \uC694\uC18C \uAC80\uC0C9\uC740 \uB108\uBB34 \uB113\uAC8C \uB9E4\uCE6D\uD558\uC5EC \uC798\uBABB\uB41C \uC815\uB2F5\uC744 \uBC18\uD658\uD560 \uC218 \uC788\uC74C\r\n    // \uB300\uC2E0 \uC694\uC18C \uC790\uCCB4\uC758 \uC2E0\uD638\uB9CC \uC0AC\uC6A9\r\n  }\r\n  \r\n  // \uD3F4\uBC31 1: \"\uC815\uB2F5\uC785\uB2C8\uB2E4\" \uD14D\uC2A4\uD2B8\uAC00 \uC788\uB294 \uC635\uC158 \uCC3E\uAE30 (\uC804\uCCB4 \uD14D\uC2A4\uD2B8 \uAC80\uC0C9)\r\n  for (const candidate of optionCandidates) {\r\n    const el = candidate.element;\r\n    // \uC694\uC18C\uC640 \uADF8 \uC790\uC2DD \uC694\uC18C\uB4E4\uC758 \uC804\uCCB4 \uD14D\uC2A4\uD2B8 \uD655\uC778\r\n    const allText = (el.innerText || el.textContent || '').toLowerCase();\r\n    if (allText.includes('\uC815\uB2F5\uC785\uB2C8\uB2E4') || allText.includes('\uC815\uB2F5\uC785\uB2C8\uB2E4!') ||\r\n        allText.includes('this is correct') || allText.includes('correct!')) {\r\n      console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uBC1C\uACAC: ${candidate.letter} (\uC804\uCCB4 \uD14D\uC2A4\uD2B8\uC5D0\uC11C \"\uC815\uB2F5\uC785\uB2C8\uB2E4\" \uBC1C\uACAC)`);\r\n      return candidate.letter;\r\n    }\r\n  }\r\n  \r\n  // \uD3F4\uBC31 2: explanation \uC601\uC5ED\uC5D0\uC11C \"Correct answer: X\" \uD328\uD134 \uD30C\uC2F1\r\n  const explanationSelectors = [\r\n    '[class*=\"explanation\"]',\r\n    '[class*=\"solution\"]',\r\n    '[class*=\"\uD574\uC124\"]'\r\n  ];\r\n  \r\n  for (const selector of explanationSelectors) {\r\n    const explanationEl = satRoot.querySelector(selector);\r\n    if (explanationEl && isElementVisible(explanationEl)) {\r\n      const text = (explanationEl.innerText || explanationEl.textContent || '').trim();\r\n      const match = text.match(/(?:Correct answer|\uC815\uB2F5|Answer)[:\\s]*([A-D])/i);\r\n      if (match) {\r\n        const answer = match[1];\r\n        console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uBC1C\uACAC: ${answer} (explanation \uD14D\uC2A4\uD2B8)`);\r\n        return answer;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // \uD3F4\uBC31 3: satRoot \uC804\uCCB4\uC5D0\uC11C \"\uC815\uB2F5\uC785\uB2C8\uB2E4\" \uD14D\uC2A4\uD2B8\uAC00 \uC788\uB294 \uC635\uC158 \uCC3E\uAE30\r\n  const allOptionsWithText = satRoot.querySelectorAll('*');\r\n  for (const el of allOptionsWithText) {\r\n    if (!isElementVisible(el)) continue;\r\n    const text = (el.innerText || el.textContent || '').toLowerCase();\r\n    if (text.includes('\uC815\uB2F5\uC785\uB2C8\uB2E4') || text.includes('this is correct')) {\r\n      // \uC774 \uC694\uC18C\uAC00 \uC5B4\uB5A4 \uC635\uC158(A-D)\uC5D0 \uC18D\uD558\uB294\uC9C0 \uD655\uC778\r\n      for (const candidate of optionCandidates) {\r\n        if (candidate.element === el || candidate.element.contains(el) || el.contains(candidate.element)) {\r\n          console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uBC1C\uACAC: ${candidate.letter} (satRoot \uC804\uCCB4 \uAC80\uC0C9\uC5D0\uC11C \"\uC815\uB2F5\uC785\uB2C8\uB2E4\" \uBC1C\uACAC)`);\r\n          return candidate.letter;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // ---------------------------------------------------------------------------\r\n  // \uD3F4\uBC31 4: \uC120\uD0DD\uB41C(aria-checked=true) \uC635\uC158 \uC0AC\uC6A9\r\n  // - \uC77C\uBD80 UI\uC5D0\uC11C\uB294 \uC815\uB2F5 \uC635\uC158\uC5D0 \uBCC4\uB3C4 correct \uB9C8\uD0B9 \uC5C6\uC774 aria-checked\uB9CC true\uB85C \uC720\uC9C0\uB418\uB294 \uACBD\uC6B0\uAC00 \uC788\uC74C\r\n  // ---------------------------------------------------------------------------\r\n  try {\r\n    const selectedCandidates = optionCandidates.filter(c => {\r\n      try {\r\n        const ariaChecked = c.element.getAttribute('aria-checked') || '';\r\n        const ariaPressed = c.element.getAttribute('aria-pressed') || '';\r\n        return ariaChecked.toLowerCase() === 'true' || ariaPressed.toLowerCase() === 'true';\r\n      } catch {\r\n        return false;\r\n      }\r\n    });\r\n    if (selectedCandidates.length === 1) {\r\n      const sel = selectedCandidates[0];\r\n      console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uBC1C\uACAC: ${sel.letter} (aria-checked/pressed=true \uD3F4\uBC31)`);\r\n      // #region agent log\r\n      try {\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            location: 'extract.js:detectCorrectAnswer:ariaCheckedFallback',\r\n            message: 'correct answer inferred from aria-checked/pressed',\r\n            data: {\r\n              answer: sel.letter,\r\n              candidatesCount: optionCandidates.length\r\n            },\r\n            timestamp: Date.now(),\r\n            runId: 'answers-bug',\r\n            hypothesisId: 'H3'\r\n          })\r\n        }).catch(() => {});\r\n      } catch {\r\n        // \uB85C\uAE45 \uC2E4\uD328\uB294 \uBB34\uC2DC\r\n      }\r\n      // #endregion\r\n      return sel.letter;\r\n    }\r\n  } catch {\r\n    // \uD3F4\uBC31 \uB85C\uC9C1 \uC2E4\uD328\uB294 \uBB34\uC2DC\r\n  }\r\n\r\n  // \uD3F4\uBC31 5: \uAD6C\uC870\uC801 \uD6C4\uBCF4\uAC00 0\uC77C \uB54C \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uC635\uC158 \uD0D0\uC0C9 (Reading Module 1 \uB4F1 - role=\"radio\" \uC5C6\uC74C)\r\n  if (optionCandidates.length === 0) {\r\n    const textOptionEls = Array.from(satRoot.querySelectorAll('div, span, p, li, button, [role=\"button\"], label')).filter(el => {\r\n      try {\r\n        const r = el.getBoundingClientRect();\r\n        return r.width >= 20 && r.height >= 20 && isElementVisible(el) && satRoot.contains(el);\r\n      } catch { return false; }\r\n    });\r\n    for (const el of textOptionEls) {\r\n      const text = (el.innerText || el.textContent || '').trim();\r\n      const m = text.match(/^([A-D])[\\.\\)]\\s*/);\r\n      if (!m || text.length > 500) continue;\r\n      const letter = m[1];\r\n      const lower = text.toLowerCase();\r\n      if (lower.includes('\uC815\uB2F5\uC785\uB2C8\uB2E4') || lower.includes('this is correct') || /\\bcorrect\\b/.test(lower) ||\r\n          (el.className && /\\banswered-correct\\b|\\bcorrect\\b/.test(String(el.className)))) {\r\n        console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uBC1C\uACAC: ${letter} (\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31)`);\r\n        return letter;\r\n      }\r\n    }\r\n  }\r\n\r\n  // #region agent log\r\n  if (typeof window !== 'undefined' && window.location) {\r\n    const logData = {\r\n      location: 'extract.js:detectCorrectAnswer:failed',\r\n      message: 'correct answer not found',\r\n      data: {\r\n        candidatesCount: optionCandidates.length,\r\n        candidates: optionCandidates.map(c => ({\r\n          letter: c.letter,\r\n          className: c.className.substring(0, 100),\r\n          ariaLabel: c.ariaLabel,\r\n          visible: c.visible\r\n        })),\r\n        satRootHTMLSlice: (satRoot.innerHTML || '').substring(0, 800),\r\n        satRootTextSlice: (satRoot.innerText || '').substring(0, 400)\r\n      },\r\n      timestamp: Date.now(),\r\n      sessionId: 'debug-session',\r\n      runId: 'initial',\r\n      hypothesisId: 'B'\r\n    };\r\n    console.error('[DEBUG-LOG]', logData);\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(logData)\r\n    }).catch(err => console.warn('[DEBUG-LOG] HTTP log failed:', err));\r\n  }\r\n  // #endregion\r\n  \r\n  console.warn('[SAT PDF Exporter] \uC815\uB2F5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4');\r\n  return null;\r\n}\r\n\r\n// \uC635\uC158 \uC694\uC18C\uC5D0\uC11C letter (A-D) \uCD94\uCD9C \uD5EC\uD37C \uD568\uC218\r\nfunction getLetterFromOptionEl(el) {\r\n  const text = (el.innerText || el.textContent || '').trim();\r\n  const match = text.match(/^\\s*([A-D])\\b/);\r\n  if (match) return match[1];\r\n  \r\n  // fallback: aria-label, data-choice-letter \uB4F1\r\n  const ariaLabel = el.getAttribute('aria-label') || '';\r\n  const match2 = ariaLabel.match(/\\b([A-D])\\b/);\r\n  if (match2) return match2[1];\r\n  \r\n  const dataLetter = el.getAttribute('data-choice-letter') || el.getAttribute('data-choice');\r\n  if (dataLetter && /^[A-D]$/.test(dataLetter)) return dataLetter;\r\n  \r\n  return null;\r\n}\r\n\r\n// Explanation \uCD94\uCD9C (\uCC44\uC810 \uD6C4 DOM\uC5D0\uC11C\uB9CC, \uC815\uB2F5 \uC635\uC158 \uAE30\uC900)\r\nexport function extractExplanationAfterGrading(correctAnswer = null, expectedProblemNumber = null) {\r\n  console.log('[SAT PDF Exporter] Explanation \uCD94\uCD9C \uC911 (\uC815\uB2F5 \uC635\uC158 \uAE30\uC900)...', correctAnswer ? `\uC815\uB2F5: ${correctAnswer}` : '', expectedProblemNumber ? `\uC608\uC0C1 \uBB38\uC81C \uBC88\uD638: ${expectedProblemNumber}` : '');\r\n  \r\n  // #region agent log\r\n  const currentProblemNum = getCurrentProblemNumber();\r\n  const currentProgress = getProgressState();\r\n  fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractExplanationAfterGrading:entry',message:'extractExplanationAfterGrading called',data:{correctAnswer,expectedProblemNumber,currentProblemNum,currentProgress,problemNumberMatch:expectedProblemNumber===currentProblemNum},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n  // #endregion\r\n  \r\n  // \uBB38\uC81C \uBC88\uD638 \uBD88\uC77C\uCE58 \uCCB4\uD06C: \uC608\uC0C1 \uBB38\uC81C \uBC88\uD638\uAC00 \uC81C\uACF5\uB418\uC5C8\uACE0 \uD604\uC7AC \uBB38\uC81C \uBC88\uD638\uC640 \uB2E4\uB974\uBA74 \uACBD\uACE0\r\n  if (expectedProblemNumber !== null && currentProblemNum !== expectedProblemNumber) {\r\n    console.warn(`[SAT PDF Exporter] \u26A0\uFE0F \uBB38\uC81C \uBC88\uD638 \uBD88\uC77C\uCE58 \uAC10\uC9C0! \uC608\uC0C1: ${expectedProblemNumber}, \uD604\uC7AC DOM: ${currentProblemNum}. \uD574\uC124 \uCD94\uCD9C\uC740 \uACC4\uC18D \uC9C4\uD589\uD558\uC9C0\uB9CC \uC8FC\uC758\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.`);\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractExplanationAfterGrading:problemNumberMismatch',message:'problem number mismatch detected',data:{expectedProblemNumber,currentProblemNum,currentProgress},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'C'})}).catch(()=>{});\r\n    // #endregion\r\n  }\r\n  \r\n  // FRAME GUARD: DOM \uC791\uC5C5\uC740 worker frame\uC5D0\uC11C\uB9CC \uC2E4\uD589\r\n  if (window !== window.top && !window.__SAT_IS_WORKER) {\r\n    console.warn('[SAT-DEBUG] [extractExplanationAfterGrading] Worker frame\uC774 \uC544\uB2CC iframe\uC5D0\uC11C \uC2E4\uD589 \uC2DC\uB3C4 - \uC2A4\uD0B5');\r\n    return '';\r\n  }\r\n  \r\n  // SAT root container \uCC3E\uAE30\r\n  const satRoot = findSatRoot();\r\n  if (!satRoot) {\r\n    console.warn('[SAT PDF Exporter] satRoot not found, Explanation \uCD94\uCD9C \uC2E4\uD328');\r\n    return '';\r\n  }\r\n  \r\n  // #region agent log\r\n  const satRootProgress = getProgressState();\r\n  const satRootProblemNum = getCurrentProblemNumber();\r\n  fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractExplanationAfterGrading:satRootFound',message:'satRoot found, checking problem number',data:{satRootProgress,satRootProblemNum,currentProblemNum},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n  // #endregion\r\n  \r\n  // ---------------------------------------------------------------------------\r\n  // Math \uC8FC\uAD00\uC2DD: correctAnswer\uAC00 \uC5C6\uC744 \uB54C (A-D \uC120\uD0DD\uC9C0 \uC5C6\uC74C) explanation-text\uC5D0\uC11C \uC9C1\uC811 \uCD94\uCD9C\r\n  // ---------------------------------------------------------------------------\r\n  if (!correctAnswer) {\r\n    const explanationTextContainers = satRoot.querySelectorAll(\r\n      '.explanation-text, [class*=\"explanation-text\"]'\r\n    );\r\n    for (const container of explanationTextContainers) {\r\n      if (!isElementVisible(container)) continue;\r\n      const msgContent = container.querySelector('message-content, [id*=\"rationale\"], .markdown');\r\n      const el = msgContent || container;\r\n      const text = (el.innerText || el.textContent || '').trim();\r\n      if (text.length > 10) {\r\n        const cleaned = text.replace(/\\s+/g, ' ').trim();\r\n        console.log(`[SAT PDF Exporter] Math \uC8FC\uAD00\uC2DD \uD574\uC124 \uBC1C\uACAC (explanation-text): ${cleaned.substring(0, 50)}...`);\r\n        return cleaned;\r\n      }\r\n    }\r\n    // option-text-container\uAC00 \uC788\uB294 explanation \uBE14\uB85D \uB0B4\uBD80\uC5D0\uC11C rationale \uC601\uC5ED \uCC3E\uAE30\r\n    const explanationBlocks = satRoot.querySelectorAll('.explanation[class*=\"answered\"], [class*=\"explanation\"]');\r\n    for (const block of explanationBlocks) {\r\n      const optionText = block.querySelector('.option-text-container');\r\n      if (!optionText) continue;\r\n      const rationale = block.querySelector('[id*=\"rationale\"], .explanation-text, [class*=\"explanation-text\"]');\r\n      if (!rationale) continue;\r\n      const text = (rationale.innerText || rationale.textContent || '').trim();\r\n      if (text.length > 10) {\r\n        const cleaned = text.replace(/\\s+/g, ' ').trim();\r\n        console.log(`[SAT PDF Exporter] Math \uC8FC\uAD00\uC2DD \uD574\uC124 \uBC1C\uACAC (explanation \uBE14\uB85D): ${cleaned.substring(0, 50)}...`);\r\n        return cleaned;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // \uC815\uB2F5 \uC635\uC158 \uC694\uC18C \uCC3E\uAE30 (\uC815\uB2F5\uC774 \uC81C\uACF5\uB41C \uACBD\uC6B0)\r\n  let correctOptionElement = null;\r\n  if (correctAnswer) {\r\n    // \uC635\uC158 \uD6C4\uBCF4 \uC218\uC9D1 (detectCorrectAnswer\uC640 \uB3D9\uC77C\uD55C \uB85C\uC9C1)\r\n    const optionSelectors = [\r\n      '[role=\"radio\"]',\r\n      'button[aria-label*=\"Choice\"]',\r\n      '.option',\r\n      '[class*=\"option\"]',\r\n      '.mat-mdc-list-item'\r\n    ];\r\n    \r\n    const candidates = [];\r\n    for (const selector of optionSelectors) {\r\n      const elements = satRoot.querySelectorAll(selector);\r\n      for (const el of elements) {\r\n        if (!isElementVisible(el) || !satRoot.contains(el)) continue;\r\n        if (candidates.find(c => c.element === el)) continue;\r\n        candidates.push({ element: el, selector });\r\n      }\r\n    }\r\n    \r\n    console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uC635\uC158 \uC694\uC18C \uAC80\uC0C9 \uC2DC\uC791 (\uC815\uB2F5: ${correctAnswer}, \uD6C4\uBCF4: ${candidates.length}\uAC1C)`);\r\n    \r\n    // \uC815\uB2F5 \uC635\uC158 \uCC3E\uAE30\r\n    for (const candidate of candidates) {\r\n      const el = candidate.element;\r\n      const text = (el.innerText || el.textContent || '').trim();\r\n      const ariaLabel = (el.getAttribute('aria-label') || '').trim();\r\n      \r\n      // choice letter \uACB0\uC815\r\n      let choiceLetter = null;\r\n      const ariaMatch = ariaLabel.match(/choice\\s*([A-D])/i) || ariaLabel.match(/^([A-D])[\\.\\)]?/i);\r\n      if (ariaMatch) {\r\n        choiceLetter = ariaMatch[1].toUpperCase();\r\n      } else {\r\n        const textMatch = text.match(/^([A-D])[\\.\\)]\\s*/);\r\n        if (textMatch) {\r\n          choiceLetter = textMatch[1].toUpperCase();\r\n        }\r\n      }\r\n      \r\n      console.log(`[SAT PDF Exporter] \uC635\uC158 \uD6C4\uBCF4: letter=${choiceLetter}, text=${text.substring(0, 30)}..., ariaLabel=${ariaLabel.substring(0, 30)}...`);\r\n      \r\n      // \uC815\uB2F5\uACFC \uC77C\uCE58\uD558\uB294 \uC635\uC158 \uCC3E\uAE30\r\n      if (choiceLetter === correctAnswer) {\r\n        // \uC815\uB2F5 \uD45C\uC2DC \uD655\uC778 (className, aria-label, \uD14D\uC2A4\uD2B8 \uB4F1)\r\n        const className = el.className || '';\r\n        const fullText = text.toLowerCase();\r\n        const hasCorrectClass = /\\banswered-correct\\b/.test(className) || /\\bcorrect\\b/.test(className);\r\n        const hasCorrectAria = ariaLabel.toLowerCase().includes('correct') || ariaLabel.toLowerCase().includes('\uC815\uB2F5');\r\n        const hasCorrectText = fullText.includes('\uC815\uB2F5\uC785\uB2C8\uB2E4') || fullText.includes('this is correct');\r\n        \r\n        console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uC635\uC158 \uB9E4\uCE6D \uD655\uC778: hasCorrectClass=${hasCorrectClass}, hasCorrectAria=${hasCorrectAria}, hasCorrectText=${hasCorrectText}`);\r\n        \r\n        if (hasCorrectClass || hasCorrectAria || hasCorrectText) {\r\n          correctOptionElement = el;\r\n          console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uC635\uC158 \uC694\uC18C \uBC1C\uACAC: ${correctAnswer}`);\r\n          // #region agent log\r\n          const optionProblemNum = getCurrentProblemNumber();\r\n          const optionParentText = (el.parentElement?.innerText || '').substring(0, 200);\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractExplanationAfterGrading:correctOptionFound',message:'correct option element found',data:{correctAnswer,optionProblemNum,currentProblemNum,optionParentText:optionParentText.substring(0,100)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n          // #endregion\r\n          break;\r\n        } else {\r\n          // \uC815\uB2F5 \uD45C\uC2DC\uAC00 \uC5C6\uC5B4\uB3C4 \uC815\uB2F5 letter\uC640 \uC77C\uCE58\uD558\uBA74 \uC0AC\uC6A9 (\uD3F4\uBC31)\r\n          console.warn(`[SAT PDF Exporter] \uC815\uB2F5 \uD45C\uC2DC\uAC00 \uC5C6\uC9C0\uB9CC letter \uC77C\uCE58: ${correctAnswer}, \uD3F4\uBC31\uC73C\uB85C \uC0AC\uC6A9`);\r\n          correctOptionElement = el;\r\n          // #region agent log\r\n          const optionProblemNum = getCurrentProblemNumber();\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractExplanationAfterGrading:correctOptionFallback',message:'correct option found via fallback',data:{correctAnswer,optionProblemNum,currentProblemNum},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n          // #endregion\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    // \uAD6C\uC870\uC801 \uD6C4\uBCF4\uAC00 0\uC77C \uB54C \uD14D\uC2A4\uD2B8 \uAE30\uBC18\uC73C\uB85C \uC815\uB2F5 \uC635\uC158 \uC694\uC18C \uD0D0\uC0C9 (Reading \uB4F1)\r\n    if (!correctOptionElement && correctAnswer) {\r\n      const textOptionEls = Array.from(satRoot.querySelectorAll('div, span, p, li, button, [role=\"button\"], label')).filter(el => {\r\n        try {\r\n          const r = el.getBoundingClientRect();\r\n          return r.width >= 20 && r.height >= 20 && isElementVisible(el) && satRoot.contains(el);\r\n        } catch { return false; }\r\n      });\r\n      for (const el of textOptionEls) {\r\n        const text = (el.innerText || el.textContent || '').trim();\r\n        const m = text.match(/^([A-D])[\\.\\)]\\s*/);\r\n        if (!m || m[1] !== correctAnswer) continue;\r\n        const lower = text.toLowerCase();\r\n        if (lower.includes('\uC815\uB2F5\uC785\uB2C8\uB2E4') || lower.includes('this is correct') || /\\bcorrect\\b/.test(lower) ||\r\n            (el.className && /\\banswered-correct\\b|\\bcorrect\\b/.test(String(el.className)))) {\r\n          correctOptionElement = el;\r\n          console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uC635\uC158 \uC694\uC18C \uBC1C\uACAC (\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31): ${correctAnswer}`);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!correctOptionElement) {\r\n      console.warn(`[SAT PDF Exporter] \uC815\uB2F5 \uC635\uC158 \uC694\uC18C\uB97C \uCC3E\uC9C0 \uBABB\uD568 (\uC815\uB2F5: ${correctAnswer}, \uD6C4\uBCF4: ${candidates.length}\uAC1C)`);\r\n    }\r\n  }\r\n\r\n  // \uC815\uB2F5 \uC635\uC158 \uC694\uC18C\uAC00 \uC788\uC73C\uBA74 \uADF8 \uC694\uC18C \uB0B4\uBD80/\uD558\uB2E8\uC5D0\uC11C\uB9CC explanation \uCC3E\uAE30\r\n  if (correctOptionElement) {\r\n    const explanationSelectors = [\r\n      '[class*=\"explanation\"]',\r\n      '[class*=\"solution\"]',\r\n      '[data-testid*=\"explanation\"]',\r\n      '[class*=\"hint\"]',\r\n      '[class*=\"reasoning\"]',\r\n      '[class*=\"\uD574\uC124\"]'\r\n    ];\r\n    \r\n    console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uC635\uC158 \uC694\uC18C\uC5D0\uC11C \uD574\uC124 \uAC80\uC0C9 \uC2DC\uC791 (\uC815\uB2F5: ${correctAnswer})`);\r\n    \r\n    // \uBC29\uBC95 1: \uC815\uB2F5 \uC635\uC158 \uC694\uC18C \uB0B4\uBD80\uC5D0\uC11C \uCC3E\uAE30\r\n    for (const selector of explanationSelectors) {\r\n      const element = correctOptionElement.querySelector(selector);\r\n      if (element && isElementVisible(element)) {\r\n        const text = (element.innerText || element.textContent || '').trim();\r\n        console.log(`[SAT PDF Exporter] \uD574\uC124 \uD6C4\uBCF4 \uBC1C\uACAC (\uC815\uB2F5 \uC635\uC158 \uB0B4\uBD80, ${selector}): ${text.substring(0, 100)}...`);\r\n        if (text.length > 10) {\r\n          // \"\uC815\uB2F5\uC785\uB2C8\uB2E4\" \uB610\uB294 \"\uC815\uB2F5\" \uC774\uD6C4\uC758 \uD14D\uC2A4\uD2B8 \uCD94\uCD9C\r\n          let explanationText = text;\r\n          const correctMatch = text.split(/\uC815\uB2F5\uC785\uB2C8\uB2E4[!]?/i);\r\n          const correctEngMatch = text.split(/this is correct[!]?/i);\r\n          \r\n          if (correctMatch.length > 1) {\r\n            explanationText = correctMatch.slice(1).join(' ').trim();\r\n          } else if (correctEngMatch.length > 1) {\r\n            explanationText = correctEngMatch.slice(1).join(' ').trim();\r\n          } else {\r\n            // \"\uC815\uB2F5\uC785\uB2C8\uB2E4\"\uAC00 \uC5C6\uC73C\uBA74 \uC804\uCCB4 \uD14D\uC2A4\uD2B8 \uC0AC\uC6A9 (\uC774\uBBF8 \uC815\uB2F5 \uC635\uC158 \uB0B4\uBD80\uC774\uBBC0\uB85C)\r\n            explanationText = text;\r\n          }\r\n          \r\n          // \uC120\uD0DD\uC9C0 \uD14D\uC2A4\uD2B8 \uC81C\uAC70\r\n          explanationText = explanationText.replace(/^[A-D][\\.\\)]\\s*[^\\n]*/gm, '').trim();\r\n          const cleaned = explanationText.replace(/\\s+/g, ' ').trim();\r\n          \r\n          if (cleaned.length > 10) {\r\n            console.log(`[SAT PDF Exporter] Explanation \uBC1C\uACAC (\uC815\uB2F5 \uC635\uC158 \uB0B4\uBD80, ${selector}): ${cleaned.substring(0, 50)}...`);\r\n            // #region agent log\r\n            const explanationProblemNum = getCurrentProblemNumber();\r\n            const explanationProgress = getProgressState();\r\n            fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractExplanationAfterGrading:explanationFoundInside',message:'explanation found inside correct option',data:{correctAnswer,explanationProblemNum,explanationProgress,currentProblemNum,explanationPreview:cleaned.substring(0,100),explanationLength:cleaned.length},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'C'})}).catch(()=>{});\r\n            // #endregion\r\n            return cleaned;\r\n          } else {\r\n            console.warn(`[SAT PDF Exporter] \uD574\uC124 \uD14D\uC2A4\uD2B8\uAC00 \uB108\uBB34 \uC9E7\uC74C: ${cleaned.length}\uC790`);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    // \uBC29\uBC95 2 \uC81C\uAC70: \uBD80\uBAA8 \uC694\uC18C \uAC80\uC0C9\uC740 \uB108\uBB34 \uB113\uAC8C \uB9E4\uCE6D\uD558\uC5EC \uC798\uBABB\uB41C \uD574\uC124\uC744 \uBC18\uD658\uD560 \uC218 \uC788\uC74C\r\n    // \uB300\uC2E0 \uC815\uB2F5 \uC635\uC158 \uC694\uC18C \uC790\uCCB4\uC758 \uD574\uC124\uB9CC \uC0AC\uC6A9\r\n    \r\n    console.warn(`[SAT PDF Exporter] \uC815\uB2F5 \uC635\uC158 \uC694\uC18C\uC5D0\uC11C \uD574\uC124\uC744 \uCC3E\uC9C0 \uBABB\uD568 (\uC815\uB2F5: ${correctAnswer})`);\r\n  } else {\r\n    console.warn(`[SAT PDF Exporter] \uC815\uB2F5 \uC635\uC158 \uC694\uC18C\uB97C \uCC3E\uC9C0 \uBABB\uD568 (\uC815\uB2F5: ${correctAnswer})`);\r\n  }\r\n  \r\n  // \uD3F4\uBC31: satRoot \uC804\uCCB4\uC5D0\uC11C \"\uC815\uB2F5\" \uD45C\uC2DC\uAC00 \uC788\uB294 explanation\uB9CC \uCC3E\uAE30 (\uC624\uB2F5 \uC124\uBA85 \uC81C\uC678)\r\n  console.log(`[SAT PDF Exporter] \uD3F4\uBC31: satRoot \uC804\uCCB4\uC5D0\uC11C \uD574\uC124 \uAC80\uC0C9 \uC2DC\uC791 (\uC815\uB2F5: ${correctAnswer || '\uC5C6\uC74C'})`);\r\n  const explanationSelectors = [\r\n    '[class*=\"explanation\"]',\r\n    '[class*=\"solution\"]',\r\n    '[data-testid*=\"explanation\"]',\r\n    '[class*=\"hint\"]',\r\n    '[class*=\"reasoning\"]',\r\n    '[class*=\"\uD574\uC124\"]'\r\n  ];\r\n  \r\n  let foundExplanations = [];\r\n  for (const selector of explanationSelectors) {\r\n    const elements = satRoot.querySelectorAll(selector);\r\n    console.log(`[SAT PDF Exporter] \uD3F4\uBC31: ${selector}\uB85C ${elements.length}\uAC1C \uC694\uC18C \uBC1C\uACAC`);\r\n    for (const element of elements) {\r\n      if (!isElementVisible(element)) continue;\r\n      const text = (element.innerText || element.textContent || '').trim();\r\n      const textLower = text.toLowerCase();\r\n      const isWrong = textLower.includes('\uC624\uB2F5') || textLower.includes('incorrect');\r\n      // \uC815\uB2F5/\uD574\uC124: \"\uC815\uB2F5\"|\"correct\" \uD3EC\uD568\uC774\uAC70\uB098, \uCDA9\uBD84\uD788 \uAE34 \uC124\uBA85(\uC624\uB2F5 \uC544\uB2D8)\uC774\uBA74 \uC218\uB77D (Reading 11\u00B712 \uB4F1 \uC601\uC5B4 \uD574\uC124 \uCD94\uCD9C \uBCF4\uAC15)\r\n      const looksCorrect = textLower.includes('\uC815\uB2F5') || textLower.includes('correct');\r\n      const longEnoughToBeExplanation = text.length > 40;\r\n      if (text.length > 10 && !isWrong && (looksCorrect || longEnoughToBeExplanation)) {\r\n        \r\n        console.log(`[SAT PDF Exporter] \uD3F4\uBC31: \uD574\uC124 \uD6C4\uBCF4 \uBC1C\uACAC (${selector}): ${text.substring(0, 100)}...`);\r\n        \r\n        let explanationText = text;\r\n        const correctMatch = text.split(/\uC815\uB2F5\uC785\uB2C8\uB2E4[!]?/i);\r\n        const correctEngMatch = text.split(/this is correct[!]?/i);\r\n        \r\n        if (correctMatch.length > 1) {\r\n          explanationText = correctMatch.slice(1).join(' ').trim();\r\n        } else if (correctEngMatch.length > 1) {\r\n          explanationText = correctEngMatch.slice(1).join(' ').trim();\r\n        }\r\n        \r\n        // \uC120\uD0DD\uC9C0 \uD14D\uC2A4\uD2B8 \uC81C\uAC70\r\n        explanationText = explanationText.replace(/^[A-D][\\.\\)]\\s*[^\\n]*/gm, '').trim();\r\n        const cleaned = explanationText.replace(/\\s+/g, ' ').trim();\r\n        \r\n        if (cleaned.length > 10) {\r\n          foundExplanations.push({ selector, text: cleaned });\r\n          console.log(`[SAT PDF Exporter] Explanation \uBC1C\uACAC (\uD3F4\uBC31, ${selector}): ${cleaned.substring(0, 50)}...`);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  // \uC5EC\uB7EC \uD574\uC124\uC774 \uBC1C\uACAC\uB418\uBA74 \uCCAB \uBC88\uC9F8 \uAC83 \uBC18\uD658\r\n  if (foundExplanations.length > 0) {\r\n    // #region agent log\r\n    const explanationProblemNum = getCurrentProblemNumber();\r\n    const explanationProgress = getProgressState();\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'extract.js:extractExplanationAfterGrading:explanationFoundFallback',message:'explanation found via fallback',data:{correctAnswer,explanationProblemNum,explanationProgress,currentProblemNum,foundCount:foundExplanations.length,explanationPreview:foundExplanations[0].text.substring(0,100),explanationLength:foundExplanations[0].text.length},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'})}).catch(()=>{});\r\n    // #endregion\r\n    return foundExplanations[0].text;\r\n  }\r\n  \r\n  // \uD3F4\uBC31: \uCD08\uB85D/\uBE68\uAC15 \uBC15\uC2A4 \uADFC\uCC98\uC5D0\uC11C \uCC3E\uAE30 (satRoot \uB0B4\uBD80\uC5D0\uC11C\uB9CC)\r\n  const gradedBoxes = satRoot.querySelectorAll('[class*=\"correct\"], [class*=\"incorrect\"], [class*=\"\uC815\uB2F5\"], [class*=\"\uC624\uB2F5\"]');\r\n  for (const box of gradedBoxes) {\r\n    if (!isElementVisible(box)) continue;\r\n    \r\n    const parent = box.closest('[class*=\"container\"], [class*=\"content\"], [class*=\"card\"]');\r\n    if (parent && satRoot.contains(parent)) {\r\n      const fullText = (parent.innerText || parent.textContent || '').trim();\r\n      // \"\uC815\uB2F5\uC785\uB2C8\uB2E4\" \uB610\uB294 \"This is correct\" \uC774\uD6C4 \uD14D\uC2A4\uD2B8 \uCD94\uCD9C\r\n      const explanationMatch = fullText.split(/\uC815\uB2F5\uC785\uB2C8\uB2E4|This is correct|\uC815\uB2F5|Correct/i)[1];\r\n      if (explanationMatch) {\r\n        const explanation = explanationMatch.split(/[A-D][\\.\\)]/)[0].trim();\r\n        if (explanation.length > 10) {\r\n          const cleaned = explanation.replace(/\\s+/g, ' ').trim();\r\n          console.log(`[SAT PDF Exporter] Explanation \uBC1C\uACAC (\uBC15\uC2A4 \uADFC\uCC98): ${cleaned.substring(0, 50)}...`);\r\n          return cleaned;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  // #region agent log\r\n  if (typeof window !== 'undefined' && window.location) {\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        location: 'extract.js:extractExplanationAfterGrading:notFound',\r\n        message: 'explanation not found',\r\n        data: {\r\n          satRootTextSlice: (satRoot.innerText || '').substring(0, 400),\r\n          gradedBoxesCount: gradedBoxes.length\r\n        },\r\n        timestamp: Date.now(),\r\n        sessionId: 'debug-session',\r\n        runId: 'initial',\r\n        hypothesisId: 'C'\r\n      })\r\n    }).catch(() => {});\r\n  }\r\n  // #endregion\r\n  \r\n  console.warn('[SAT PDF Exporter] Explanation\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4');\r\n  return '';\r\n}\r\n\r\n// \uD14D\uC2A4\uD2B8 \uCD94\uCD9C \uD5EC\uD37C \uD568\uC218\r\nexport function extractText(container, ...selectors) {\r\n  for (const selector of selectors) {\r\n    const element = container.querySelector(selector);\r\n    if (element) {\r\n      return element.innerText || element.textContent || '';\r\n    }\r\n  }\r\n  return '';\r\n}\r\n\r\n// \uC815\uB2F5 \uCD94\uCD9C (\uB808\uAC70\uC2DC \uD568\uC218 - \uD638\uD658\uC131 \uC720\uC9C0)\r\nexport function extractAnswer(container) {\r\n  // \uC815\uB2F5 \uD45C\uC2DC \uC694\uC18C \uCC3E\uAE30\r\n  const answerSelectors = [\r\n    '[class*=\"answer\"]',\r\n    '[class*=\"correct\"]',\r\n    '[class*=\"solution\"]',\r\n    'strong',\r\n    'b'\r\n  ];\r\n\r\n  for (const selector of answerSelectors) {\r\n    const elements = container.querySelectorAll(selector);\r\n    for (const el of elements) {\r\n      const text = (el.innerText || el.textContent || '').trim();\r\n      // \uC815\uB2F5 \uD328\uD134 \uD655\uC778 (\uC608: \"Answer: A\", \"\uC815\uB2F5: B\", \"Correct Answer: C\")\r\n      if (/answer|\uC815\uB2F5|correct/i.test(text) && /[A-D]/.test(text)) {\r\n        const match = text.match(/([A-D])/);\r\n        if (match) return match[1];\r\n      }\r\n    }\r\n  }\r\n\r\n  return '';\r\n}\r\n\r\n// \uD574\uC124 \uCD94\uCD9C\r\nexport function extractExplanation(container) {\r\n  const explanationSelectors = [\r\n    '[class*=\"explanation\"]',\r\n    '[class*=\"solution\"]',\r\n    '[class*=\"hint\"]',\r\n    '[class*=\"reasoning\"]'\r\n  ];\r\n\r\n  for (const selector of explanationSelectors) {\r\n    const element = container.querySelector(selector);\r\n    if (element) {\r\n      return element.innerText || element.textContent || '';\r\n    }\r\n  }\r\n\r\n  return '';\r\n}\r\n\r\n// \uCC44\uC810 \uC0C1\uD0DC \uD655\uC778 (\uCD08\uB85D \uBC15\uC2A4\uAC00 \uC774\uBBF8 \uD45C\uC2DC\uB418\uC5B4 \uC788\uB294\uC9C0)\r\nexport function checkIfGraded() {\r\n  // \uCD08\uB85D \uBC15\uC2A4 \uCC3E\uAE30 (\uC815\uB2F5 \uD45C\uC2DC)\r\n  const greenBoxes = document.querySelectorAll('[class*=\"correct\"], [class*=\"\uC815\uB2F5\"], [style*=\"green\"], [style*=\"#4caf50\"]');\r\n  for (const box of greenBoxes) {\r\n    const text = (box.innerText || box.textContent || '').trim();\r\n    // \"\uC815\uB2F5\" \uD14D\uC2A4\uD2B8\uC640 A-D \uD328\uD134\uC774 \uD568\uAED8 \uC788\uC73C\uBA74 \uCC44\uC810\uB41C \uC0C1\uD0DC\r\n    if ((text.includes('\uC815\uB2F5') || text.includes('Correct')) && /[A-D][\\.\\)]/.test(text)) {\r\n      return true;\r\n    }\r\n  }\r\n  \r\n  // \uBE68\uAC04 \uBC15\uC2A4(\uC624\uB2F5)\uAC00 \uC788\uC73C\uBA74 \uCC44\uC810\uB41C \uC0C1\uD0DC\r\n  const redBoxes = document.querySelectorAll('[class*=\"incorrect\"], [class*=\"\uC624\uB2F5\"], [style*=\"red\"], [style*=\"#f44336\"]');\r\n  for (const box of redBoxes) {\r\n    const text = (box.innerText || box.textContent || '').trim();\r\n    if (text.includes('\uC624\uB2F5') || text.includes('Incorrect')) {\r\n      return true;\r\n    }\r\n  }\r\n  \r\n  return false;\r\n}\r\n\r\n// \uD14D\uC2A4\uD2B8 \uD328\uD134 \uAE30\uBC18 \uCD94\uCD9C (\uB300\uCCB4 \uBC29\uBC95)\r\nexport function extractByTextPattern(sectionType) {\r\n  const problems = [];\r\n  const bodyText = document.body.innerText || '';\r\n  \r\n  // \uBB38\uC81C \uBC88\uD638 \uD328\uD134 \uCC3E\uAE30 (\uC608: \"1.\", \"Question 1\", \"\uBB38\uC81C 1\")\r\n  const problemPattern = /(?:^|\\n)\\s*(\\d+)\\.\\s*(.+?)(?=\\n\\s*\\d+\\.|$)/gs;\r\n  const matches = [...bodyText.matchAll(problemPattern)];\r\n  \r\n  matches.forEach((match, index) => {\r\n    problems.push({\r\n      number: parseInt(match[1]) || index + 1,\r\n      type: sectionType,\r\n      stem: match[2].trim(),\r\n      choices: [],\r\n      answer: '',\r\n      explanation: ''\r\n    });\r\n  });\r\n\r\n  return problems;\r\n}\r\n\r\n// Reading \uC139\uC158 \uB370\uC774\uD130 \uCD94\uCD9C (\uC2E4\uC81C \uD654\uBA74\uC5D0\uC11C \uBCF4\uC774\uB294 \uD14D\uC2A4\uD2B8 \uC9C1\uC811 \uCD94\uCD9C)\r\nexport function extractReadingSection() {\r\n  const problems = [];\r\n  \r\n  console.log('[SAT PDF Exporter] Reading \uC139\uC158 \uCD94\uCD9C \uC2DC\uC791');\r\n  \r\n  // \uD604\uC7AC \uD654\uBA74\uC5D0 \uBCF4\uC774\uB294 \uBB38\uC81C \uBC88\uD638 \uD655\uC778\r\n  const problemNum = getCurrentProblemNumber();\r\n  console.log(`[SAT PDF Exporter] \uD604\uC7AC \uBB38\uC81C \uBC88\uD638: ${problemNum}`);\r\n  \r\n  // \uBB38\uC81C \uBCF8\uBB38 \uCC3E\uAE30 - \uC5EC\uB7EC \uBC29\uBC95 \uC2DC\uB3C4\r\n  let problemText = '';\r\n  let passageText = '';\r\n  \r\n  // \uBC29\uBC95 1: \uBB38\uC81C \uBC88\uD638\uB85C \uC2DC\uC791\uD558\uB294 \uD14D\uC2A4\uD2B8 \uCC3E\uAE30 (\uC608: \"1. Text 1\", \"1.\")\r\n  const allTextElements = document.querySelectorAll('p, div, span, h1, h2, h3, h4, h5, h6');\r\n  for (const el of allTextElements) {\r\n    const text = (el.innerText || el.textContent || '').trim();\r\n    // \uBB38\uC81C \uBC88\uD638 \uD328\uD134 \uCC3E\uAE30\r\n    if (text.match(new RegExp(`^${problemNum}\\\\.`)) || text.match(new RegExp(`^${problemNum}\\\\s+Text`))) {\r\n      // \uBB38\uC81C \uBCF8\uBB38 \uCD94\uCD9C\r\n      const parent = el.closest('[class*=\"container\"], [class*=\"content\"], [class*=\"question\"], main, article');\r\n      if (parent) {\r\n        const fullText = (parent.innerText || parent.textContent || '').trim();\r\n        // \"Text 1\", \"Text 2\" \uAC19\uC740 \uC9C0\uBB38 \uCC3E\uAE30\r\n        const textMatch = fullText.match(/Text\\s+\\d+[^\\n]*/g);\r\n        if (textMatch) {\r\n          passageText = textMatch.join('\\n\\n');\r\n        }\r\n        // \uBB38\uC81C \uBCF8\uBB38 \uCD94\uCD9C (\uC120\uD0DD\uC9C0 \uC804\uAE4C\uC9C0)\r\n        const questionMatch = fullText.match(new RegExp(`${problemNum}\\\\.\\\\s*([^A-D]+?)(?=[A-D]\\\\.|$)`, 's'));\r\n        if (questionMatch) {\r\n          problemText = questionMatch[1].trim();\r\n        } else {\r\n          problemText = fullText.split(/[A-D]\\./)[0].trim();\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // \uBC29\uBC95 2: \uC804\uCCB4 body \uD14D\uC2A4\uD2B8\uC5D0\uC11C \uCD94\uCD9C\r\n  if (!problemText) {\r\n    const bodyText = document.body.innerText || document.body.textContent;\r\n    // \uBB38\uC81C \uBC88\uD638\uB85C \uC2DC\uC791\uD558\uB294 \uBD80\uBD84 \uCC3E\uAE30\r\n    const problemMatch = bodyText.match(new RegExp(`${problemNum}\\\\.\\\\s*([\\\\s\\\\S]+?)(?=\\\\d+\\\\.|$)`, 'i'));\r\n    if (problemMatch) {\r\n      problemText = problemMatch[1].trim();\r\n      // \uC120\uD0DD\uC9C0 \uC804\uAE4C\uC9C0 \uC790\uB974\uAE30\r\n      problemText = problemText.split(/[A-D][\\.\\)]\\s*/)[0].trim();\r\n    }\r\n  }\r\n  \r\n  // \uC120\uD0DD\uC9C0 \uCD94\uCD9C\r\n  const choices = extractChoices(document.body);\r\n  \r\n  // \uC815\uB2F5 \uBC0F \uD574\uC124 \uCD94\uCD9C\r\n  const answer = extractAnswer(document.body);\r\n  const explanation = extractExplanation(document.body);\r\n  \r\n  // \uBB38\uC81C\uAC00 \uC788\uC73C\uBA74 \uCD94\uAC00\r\n  if (problemText) {\r\n    problems.push({\r\n      number: problemNum,\r\n      type: 'reading',\r\n      stem: problemText,\r\n      passage: passageText,\r\n      choices: choices,\r\n      answer: answer,\r\n      explanation: explanation\r\n    });\r\n    console.log(`[SAT PDF Exporter] Reading \uBB38\uC81C ${problemNum} \uCD94\uCD9C \uC644\uB8CC:`, {\r\n      stem: problemText.substring(0, 50) + '...',\r\n      passage: passageText ? passageText.substring(0, 50) + '...' : '\uC5C6\uC74C',\r\n      choicesCount: choices.length\r\n    });\r\n  } else {\r\n    console.warn(`[SAT PDF Exporter] Reading \uBB38\uC81C ${problemNum} \uCD94\uCD9C \uC2E4\uD328 - \uD14D\uC2A4\uD2B8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4`);\r\n  }\r\n\r\n  return problems;\r\n}\r\n\r\n// Math \uC139\uC158 \uB370\uC774\uD130 \uCD94\uCD9C (\uC2E4\uC81C \uD654\uBA74\uC5D0\uC11C \uBCF4\uC774\uB294 \uD14D\uC2A4\uD2B8 \uC9C1\uC811 \uCD94\uCD9C)\r\nexport function extractMathSection() {\r\n  const problems = [];\r\n  \r\n  console.log('[SAT PDF Exporter] Math \uC139\uC158 \uCD94\uCD9C \uC2DC\uC791');\r\n  \r\n  // \uD604\uC7AC \uD654\uBA74\uC5D0 \uBCF4\uC774\uB294 \uBB38\uC81C \uBC88\uD638 \uD655\uC778\r\n  const problemNum = getCurrentProblemNumber();\r\n  console.log(`[SAT PDF Exporter] \uD604\uC7AC \uBB38\uC81C \uBC88\uD638: ${problemNum}`);\r\n  \r\n  // \uBB38\uC81C \uBCF8\uBB38 \uCC3E\uAE30\r\n  let problemText = '';\r\n  \r\n  // \uBC29\uBC95 1: \uBB38\uC81C \uBC88\uD638\uB85C \uC2DC\uC791\uD558\uB294 \uD14D\uC2A4\uD2B8 \uCC3E\uAE30\r\n  const allTextElements = document.querySelectorAll('p, div, span, h1, h2, h3, h4, h5, h6');\r\n  for (const el of allTextElements) {\r\n    const text = (el.innerText || el.textContent || '').trim();\r\n    if (text.match(new RegExp(`^${problemNum}\\\\.`))) {\r\n      const parent = el.closest('[class*=\"container\"], [class*=\"content\"], [class*=\"question\"], main, article');\r\n      if (parent) {\r\n        const fullText = (parent.innerText || parent.textContent || '').trim();\r\n        const questionMatch = fullText.match(new RegExp(`${problemNum}\\\\.\\\\s*([^A-D]+?)(?=[A-D]\\\\.|$)`, 's'));\r\n        if (questionMatch) {\r\n          problemText = questionMatch[1].trim();\r\n        } else {\r\n          problemText = fullText.split(/[A-D]\\./)[0].trim();\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // \uBC29\uBC95 2: \uC804\uCCB4 body \uD14D\uC2A4\uD2B8\uC5D0\uC11C \uCD94\uCD9C\r\n  if (!problemText) {\r\n    const bodyText = document.body.innerText || document.body.textContent;\r\n    const problemMatch = bodyText.match(new RegExp(`${problemNum}\\\\.\\\\s*([\\\\s\\\\S]+?)(?=\\\\d+\\\\.|$)`, 'i'));\r\n    if (problemMatch) {\r\n      problemText = problemMatch[1].trim();\r\n      problemText = problemText.split(/[A-D][\\.\\)]\\s*/)[0].trim();\r\n    }\r\n  }\r\n  \r\n  // \uC120\uD0DD\uC9C0 \uCD94\uCD9C\r\n  const choices = extractChoices(document.body);\r\n  \r\n  // Grid-in \uBB38\uC81C \uD655\uC778\r\n  const isGridIn = choices.length === 0;\r\n  \r\n  // \uC815\uB2F5 \uBC0F \uD574\uC124 \uCD94\uCD9C\r\n  const answer = extractAnswer(document.body);\r\n  const explanation = extractExplanation(document.body);\r\n  \r\n  // \uBB38\uC81C\uAC00 \uC788\uC73C\uBA74 \uCD94\uAC00\r\n  if (problemText) {\r\n    const problem = {\r\n      number: problemNum,\r\n      type: 'math',\r\n      stem: problemText,\r\n      choices: choices,\r\n      answer: answer,\r\n      explanation: explanation,\r\n      isGridIn: isGridIn\r\n    };\r\n    \r\n    if (isGridIn) {\r\n      const gridInAnswer = extractText(document.body, '[class*=\"answer\"], [class*=\"grid\"]');\r\n      if (gridInAnswer) {\r\n        problem.gridInAnswer = gridInAnswer;\r\n      }\r\n    }\r\n    \r\n    problems.push(problem);\r\n    console.log(`[SAT PDF Exporter] Math \uBB38\uC81C ${problemNum} \uCD94\uCD9C \uC644\uB8CC:`, {\r\n      stem: problemText.substring(0, 50) + '...',\r\n      choicesCount: choices.length,\r\n      isGridIn: isGridIn\r\n    });\r\n  } else {\r\n    console.warn(`[SAT PDF Exporter] Math \uBB38\uC81C ${problemNum} \uCD94\uCD9C \uC2E4\uD328 - \uD14D\uC2A4\uD2B8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4`);\r\n  }\r\n\r\n  return problems;\r\n}\r\n\r\n// SAT \uBB38\uC81C \uB370\uC774\uD130 \uCD94\uCD9C \uD568\uC218 (\uD604\uC7AC \uD654\uBA74\uB9CC) - \uC218\uC815: \uC139\uC158 \uAC10\uC9C0 \uD6C4 \uBD84\uAE30\r\nexport function extractSATData() {\r\n  const data = {\r\n    reading: [],\r\n    math: [],\r\n    timestamp: new Date().toISOString()\r\n  };\r\n\r\n  try {\r\n    // \uD604\uC7AC \uC139\uC158 \uAC10\uC9C0\r\n    const currentSection = detectCurrentSection();\r\n    \r\n    if (currentSection === 'reading') {\r\n      // Reading \uC139\uC158\uB9CC \uCD94\uCD9C\r\n      console.log('[SAT PDF Exporter] Reading \uC139\uC158\uC73C\uB85C \uAC10\uC9C0\uB428 - Reading\uB9CC \uCD94\uCD9C');\r\n      const readingSection = extractReadingSection();\r\n      if (readingSection.length > 0) {\r\n        data.reading = readingSection;\r\n      }\r\n    } else if (currentSection === 'math') {\r\n      // Math \uC139\uC158\uB9CC \uCD94\uCD9C\r\n      console.log('[SAT PDF Exporter] Math \uC139\uC158\uC73C\uB85C \uAC10\uC9C0\uB428 - Math\uB9CC \uCD94\uCD9C');\r\n      const mathSection = extractMathSection();\r\n      if (mathSection.length > 0) {\r\n        data.math = mathSection;\r\n      }\r\n    } else {\r\n      // \uC139\uC158 \uAC10\uC9C0 \uC2E4\uD328 \uC2DC \uC591\uCABD \uBAA8\uB450 \uC2DC\uB3C4 (\uD558\uC9C0\uB9CC \uACBD\uACE0 \uB85C\uADF8)\r\n      console.warn('[SAT PDF Exporter] \uC139\uC158 \uAC10\uC9C0 \uC2E4\uD328 - Reading\uACFC Math \uBAA8\uB450 \uC2DC\uB3C4 (\uBE44\uAD8C\uC7A5)');\r\n      const readingSection = extractReadingSection();\r\n      if (readingSection.length > 0) {\r\n        data.reading = readingSection;\r\n      }\r\n      const mathSection = extractMathSection();\r\n      if (mathSection.length > 0) {\r\n        data.math = mathSection;\r\n      }\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error('[SAT PDF Exporter] \uB370\uC774\uD130 \uCD94\uCD9C \uC911 \uC624\uB958:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// \uC815\uB2F5 UI(\uCD08\uB85D \uBC15\uC2A4)\uAC00 \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30 \uBC0F \uC815\uB2F5 \uCD94\uCD9C (next \uBC84\uD2BC \uD65C\uC131\uD654\uB3C4 \uD655\uC778) - DEPRECATED\r\nexport async function waitForAnswerUIWithNextButtonCheck() {\r\n  let attempts = 0;\r\n  const maxAttempts = 40; // \uCD5C\uB300 8\uCD08 \uB300\uAE30\r\n  \r\n  while (attempts < maxAttempts) {\r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n    \r\n    // \uCD08\uB85D \uBC15\uC2A4 \uCC3E\uAE30\r\n    const greenBoxes = document.querySelectorAll('*');\r\n    for (const box of greenBoxes) {\r\n      if (!box.offsetParent) continue;\r\n      \r\n      const text = (box.innerText || box.textContent || '').trim();\r\n      const style = window.getComputedStyle(box);\r\n      const bgColor = style.backgroundColor;\r\n      const borderColor = style.borderColor;\r\n      \r\n      // \uCD08\uB85D\uC0C9 \uBC15\uC2A4 \uD655\uC778 (\uC0C9\uC0C1 \uB610\uB294 \uD14D\uC2A4\uD2B8\uB85C)\r\n      const isGreen = bgColor.includes('rgb(76, 175, 80)') || \r\n                     bgColor.includes('#4caf50') ||\r\n                     borderColor.includes('rgb(76, 175, 80)') ||\r\n                     borderColor.includes('#4caf50') ||\r\n                     (box.className || '').toLowerCase().includes('correct') ||\r\n                     (box.className || '').toLowerCase().includes('\uC815\uB2F5');\r\n      \r\n      // \"\uC815\uB2F5\" \uD14D\uC2A4\uD2B8\uC640 A-D \uD328\uD134\uC774 \uD568\uAED8 \uC788\uC73C\uBA74 \uC815\uB2F5 \uCD94\uCD9C\r\n      if (isGreen && (text.includes('\uC815\uB2F5') || text.includes('Correct') || text.includes('\uC815\uB2F5\uC785\uB2C8\uB2E4')) && /[A-D][\\.\\)]/.test(text)) {\r\n        const answerMatch = text.match(/([A-D])[\\.\\)]/);\r\n        if (answerMatch) {\r\n          const answer = answerMatch[1];\r\n          \r\n          // \uD574\uC124 \uCD94\uCD9C \uC2DC\uB3C4\r\n          let explanation = '';\r\n          const explanationElement = box.closest('[class*=\"container\"], [class*=\"content\"], [class*=\"explanation\"]');\r\n          if (explanationElement) {\r\n            const fullText = (explanationElement.innerText || explanationElement.textContent || '').trim();\r\n            // \uD574\uC124 \uBD80\uBD84 \uCD94\uCD9C (\uC815\uB2F5 \uC774\uD6C4 \uD14D\uC2A4\uD2B8)\r\n            const explanationMatch = fullText.split(new RegExp(`${answer}[\\.\\)]`))[1];\r\n            if (explanationMatch) {\r\n              explanation = explanationMatch.split(/[A-D][\\.\\)]/)[0].trim();\r\n            }\r\n          }\r\n          \r\n          // next \uBC84\uD2BC\uC774 \uD65C\uC131\uD654\uB418\uC5C8\uB294\uC9C0 \uD655\uC778 (\uCC44\uC810 \uC644\uB8CC \uC2E0\uD638)\r\n          const nextButton = findNavigationButton('next', '\uB2E4\uC74C', 'next');\r\n          if (nextButton && !nextButton.disabled) {\r\n            console.log(`[SAT PDF Exporter] \uC815\uB2F5 UI \uBC1C\uACAC: ${answer}, next \uBC84\uD2BC \uD65C\uC131\uD654 \uD655\uC778`);\r\n            return { answer: answer, explanation: explanation };\r\n          } else if (nextButton && nextButton.disabled) {\r\n            // next \uBC84\uD2BC\uC774 \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC73C\uBA74 \uD65C\uC131\uD654\uB420 \uB54C\uAE4C\uC9C0 \uB300\uAE30\r\n            console.log('[SAT PDF Exporter] \uC815\uB2F5\uC740 \uBC1C\uACAC\uD588\uC9C0\uB9CC next \uBC84\uD2BC\uC774 \uBE44\uD65C\uC131\uD654\uB428. \uD65C\uC131\uD654 \uB300\uAE30...');\r\n            let buttonWaitAttempts = 0;\r\n            while (buttonWaitAttempts < 10 && nextButton.disabled) {\r\n              await new Promise(resolve => setTimeout(resolve, 100));\r\n              buttonWaitAttempts++;\r\n            }\r\n            if (!nextButton.disabled) {\r\n              console.log(`[SAT PDF Exporter] next \uBC84\uD2BC \uD65C\uC131\uD654 \uD655\uC778. \uC815\uB2F5: ${answer}`);\r\n              return { answer: answer, explanation: explanation };\r\n            }\r\n          }\r\n          \r\n          // next \uBC84\uD2BC \uD655\uC778 \uC5C6\uC774\uB3C4 \uC815\uB2F5\uC740 \uBC18\uD658\r\n          console.log(`[SAT PDF Exporter] \uC815\uB2F5 UI \uBC1C\uACAC: ${answer} (next \uBC84\uD2BC \uD655\uC778 \uC2E4\uD328)`);\r\n          return { answer: answer, explanation: explanation };\r\n        }\r\n      }\r\n    }\r\n    \r\n    // \"\uC815\uB2F5\" \uB610\uB294 \"\uC624\uB2F5\" \uD14D\uC2A4\uD2B8\uAC00 \uB098\uD0C0\uB0AC\uB294\uC9C0 \uD655\uC778 (\uCD08\uB85D \uBC15\uC2A4 \uC5C6\uC5B4\uB3C4)\r\n    const allText = document.body.innerText || '';\r\n    if (allText.includes('\uC815\uB2F5') || allText.includes('Correct') || allText.includes('\uC815\uB2F5\uC785\uB2C8\uB2E4')) {\r\n      const answerMatch = allText.match(/([A-D])[\\.\\)]\\s*[^\\n]*(?:\uC815\uB2F5|Correct)/);\r\n      if (answerMatch) {\r\n        const answer = answerMatch[1];\r\n        console.log(`[SAT PDF Exporter] \uC815\uB2F5 \uD14D\uC2A4\uD2B8 \uBC1C\uACAC: ${answer}`);\r\n        return { answer: answer, explanation: '' };\r\n      }\r\n    }\r\n    \r\n    attempts++;\r\n  }\r\n  \r\n  console.warn('[SAT PDF Exporter] \uC815\uB2F5 UI\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4 (\uD0C0\uC784\uC544\uC6C3)');\r\n  return null;\r\n}\r\n\r\n// \uC774\uBBF8 \uCC44\uC810\uB41C \uC0C1\uD0DC\uC5D0\uC11C \uC815\uB2F5 \uCD94\uCD9C\r\nexport function extractAnswerFromGradedUI() {\r\n  // \uCD08\uB85D \uBC15\uC2A4\uC5D0\uC11C \uC815\uB2F5 \uCD94\uCD9C\r\n  const greenBoxes = document.querySelectorAll('*');\r\n  for (const box of greenBoxes) {\r\n    if (!box.offsetParent) continue;\r\n    \r\n    const text = (box.innerText || box.textContent || '').trim();\r\n    const style = window.getComputedStyle(box);\r\n    const bgColor = style.backgroundColor;\r\n    \r\n    const isGreen = bgColor.includes('rgb(76, 175, 80)') || \r\n                   bgColor.includes('#4caf50') ||\r\n                   (box.className || '').toLowerCase().includes('correct') ||\r\n                   (box.className || '').toLowerCase().includes('\uC815\uB2F5');\r\n    \r\n    if (isGreen && (text.includes('\uC815\uB2F5') || text.includes('Correct')) && /[A-D][\\.\\)]/.test(text)) {\r\n      const answerMatch = text.match(/([A-D])[\\.\\)]/);\r\n      if (answerMatch) {\r\n        return { answer: answerMatch[1], explanation: '' };\r\n      }\r\n    }\r\n  }\r\n  \r\n  return null;\r\n}\r\n", "// Gemini SAT PDF Exporter - Content Script\r\n// Google Gemini SAT \uC778\uD130\uD398\uC774\uC2A4\uC5D0\uC11C \uBB38\uC81C\uC640 \uD574\uC124\uC744 \uCD94\uCD9C\uD558\uC5EC PDF\uB85C \uBCC0\uD658\r\n\r\n// ============================================================================\r\n// [BOOT] html2canvas - \uBB38\uC81C \uC774\uBBF8\uC9C0 \uCEA1\uCC98\uC6A9 (figure \uCD94\uCD9C \uD3F4\uBC31)\r\n// ============================================================================\r\nimport html2canvas from 'html2canvas';\r\nwindow.html2canvas = html2canvas;\r\n\r\n// ============================================================================\r\n// [BOOT] \uC989\uC2DC \uC9C4\uB2E8 \uB85C\uADF8\r\n// ============================================================================\r\nconst BUILD_TS = Date.now();\r\nconsole.log('[BOOT] dist/content.js loaded BUILD_TS=' + BUILD_TS, location.href, 'top?', window === window.top);\r\nwindow.__SAT_BOOT_TS__ = BUILD_TS;\r\nwindow.__SAT_BUILD_TS__ = BUILD_TS;\r\n\r\nimport { CONFIG } from './src/config/constants.js';\r\nimport { deepQuerySelectorAll, isElementVisible, dumpHTMLStructure } from './src/dom/deepQuery.js';\r\nimport { waitForElement, waitForCondition, waitForContentLoad, forceClick, safeClick, showToast } from './src/dom/wait.js';\r\nimport { isQuestionScreen, detectCurrentSection, extractChoices, extractCurrentProblem, getProgressState, getCurrentProblemNumber, getQuestionSignature, isGraded, waitForGrading, detectCorrectAnswer, extractExplanationAfterGrading, extractText, extractAnswer, extractExplanation, checkIfGraded, extractByTextPattern, extractReadingSection, extractMathSection, extractSATData, waitForAnswerUIWithNextButtonCheck, extractAnswerFromGradedUI } from './src/dom/extract.js';\r\nimport { findButtonByText, findNavigationButton, clickSubmitWithConfirmation, clickNextButtonWithFallback, clickFirstChoice } from './src/dom/buttons.js';\r\nimport { SATNavigator } from './src/flow/navigator.js';\r\nimport { SectionStateManager, SATScraper, collectModuleProblems } from './src/flow/stateMachine.js';\r\nimport { PDFGenerator } from './src/pdf/pdfGenerator.js';\r\nimport { looksLikeSatQuestionUI, findWorkerFrame, setupFrameMessageListener } from './src/frame/workerFrame.js';\r\nimport { SATApp, initButtonSafely } from './src/entry/content.entry.js';\r\nimport { configureAndStartTest, clickSectionContinue, startNextModule } from './src/flow/navigator.js';\r\n\r\n(function() {\r\n  'use strict';\r\n\r\n  // ============================================================================\r\n  // FRAME ELECTION - \uBB38\uC81C UI\uAC00 \uC788\uB294 \uD504\uB808\uC784 \uCC3E\uAE30\r\n  // ============================================================================\r\n\r\n  /**\r\n   * \uBB38\uC81C UI\uAC00 \uC788\uB294 \uD504\uB808\uC784\uC778\uC9C0 \uD310\uC815 (\uB110\uB110\uD558\uAC8C \uC7A1\uAE30)\r\n   * @returns {boolean} \uBB38\uC81C UI \uC5EC\uBD80\r\n   * NOTE: Moved to src/frame/workerFrame.js\r\n   */\r\n  /**\r\n   * Worker \uD504\uB808\uC784 \uCC3E\uAE30 (\uBAA8\uB4E0 \uD504\uB808\uC784\uC5D0 probe \uBE0C\uB85C\uB4DC\uCE90\uC2A4\uD2B8)\r\n   * @returns {Promise<Object|null>} worker \uD504\uB808\uC784 \uC815\uBCF4 \uB610\uB294 null\r\n   * NOTE: Moved to src/frame/workerFrame.js\r\n   */\r\n  /**\r\n   * \uD504\uB808\uC784\uBCC4 \uBA54\uC2DC\uC9C0 \uB9AC\uC2A4\uB108 (\uAC01 \uD504\uB808\uC784\uC5D0\uC11C \uC2E4\uD589)\r\n   * NOTE: Moved to src/frame/workerFrame.js\r\n   */\r\n  // \uD504\uB808\uC784 \uBA54\uC2DC\uC9C0 \uB9AC\uC2A4\uB108 \uCD08\uAE30\uD654 (\uBAA8\uB4E0 \uD504\uB808\uC784\uC5D0\uC11C \uC2E4\uD589)\r\n  setupFrameMessageListener();\r\n\r\n  // ============================================================================\r\n  // UTILITY FUNCTIONS\r\n  // ============================================================================\r\n\r\n  /**\r\n   * jsPDF \uB77C\uC774\uBE0C\uB7EC\uB9AC \uAC00\uC838\uC624\uAE30\r\n   * @returns {Function} jsPDF \uC0DD\uC131\uC790 \uD568\uC218\r\n   * @throws {Error} jsPDF\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC744 \uB54C\r\n   * NOTE: Moved to src/pdf/pdfGenerator.js\r\n   */\r\n  /**\r\n   * \uD2B9\uC815 \uC694\uC18C\uAC00 \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30 (\uC7AC\uC2DC\uB3C4 \uBA54\uCEE4\uB2C8\uC998 \uD3EC\uD568)\r\n   * @param {string|Function} selector - CSS \uC140\uB809\uD130 \uB610\uB294 \uC694\uC18C\uB97C \uBC18\uD658\uD558\uB294 \uD568\uC218\r\n   * @param {number} retries - \uCD5C\uB300 \uC7AC\uC2DC\uB3C4 \uD69F\uC218\r\n   * @param {number} interval - \uC7AC\uC2DC\uB3C4 \uAC04\uACA9 (\uBC00\uB9AC\uCD08)\r\n   * @returns {Promise<Element|null>} \uCC3E\uC740 \uC694\uC18C \uB610\uB294 null\r\n   */\r\n  // \uAD6C\uD604\uC740 src/dom/wait.js\uC758 waitForElement\uB97C \uC0AC\uC6A9\r\n\r\n  /**\r\n   * \uC548\uC804\uD55C \uBC84\uD2BC \uD074\uB9AD (\uC7AC\uC2DC\uB3C4 \uBA54\uCEE4\uB2C8\uC998 \uD3EC\uD568)\r\n   * @param {Element} button - \uD074\uB9AD\uD560 \uBC84\uD2BC \uC694\uC18C\r\n   * @param {number} retries - \uCD5C\uB300 \uC7AC\uC2DC\uB3C4 \uD69F\uC218\r\n   * @returns {Promise<boolean>} \uD074\uB9AD \uC131\uACF5 \uC5EC\uBD80\r\n   */\r\n  /**\r\n   * \uAC15\uC81C \uD074\uB9AD \uD568\uC218 (pointerdown \uB4F1 \uC774\uBCA4\uD2B8 \uD3EC\uD568)\r\n   * @param {HTMLElement} button - \uD074\uB9AD\uD560 \uBC84\uD2BC \uC694\uC18C\r\n   * @param {number} retries - \uC7AC\uC2DC\uB3C4 \uD69F\uC218\r\n   * @returns {Promise<boolean>} \uC131\uACF5 \uC5EC\uBD80\r\n   * NOTE: Moved to src/dom/wait.js\r\n   */\r\n  /**\r\n   * \uC548\uC804\uD55C \uBC84\uD2BC \uD074\uB9AD (\uC7AC\uC2DC\uB3C4 \uBA54\uCEE4\uB2C8\uC998 \uD3EC\uD568)\r\n   * NOTE: Moved to src/dom/wait.js\r\n   */\r\n  /**\r\n   * \uD1A0\uC2A4\uD2B8 \uBA54\uC2DC\uC9C0 \uD45C\uC2DC\r\n   * @param {string} message - \uD45C\uC2DC\uD560 \uBA54\uC2DC\uC9C0\r\n   * @param {string} type - \uBA54\uC2DC\uC9C0 \uD0C0\uC785 ('info', 'success', 'error')\r\n   * NOTE: Moved to src/dom/wait.js\r\n   */\r\n  // \uD14C\uC2A4\uD2B8 \uC124\uC815 \uD654\uBA74 \uCC98\uB9AC: '\uAC01 \uB2F5\uBCC0 \uB2E4\uC74C\uC5D0 \uC815\uB2F5 \uD45C\uC2DC' \uD1A0\uAE00 \uCF1C\uAE30 + \uD14C\uC2A4\uD2B8 \uC2DC\uC791\r\n  // NOTE: Moved to src/legacy/legacy.js\r\n  // \uC139\uC158 \uC120\uD0DD \uD654\uBA74\uC5D0\uC11C '\uACC4\uC18D' \uD074\uB9AD\r\n  // NOTE: Moved to src/legacy/legacy.js\r\n  // \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD (\uD655\uC778 \uD31D\uC5C5 \uCC98\uB9AC \uD3EC\uD568)\r\n  // NOTE: Moved to src/dom/buttons.js\r\n  // ============================================================================\r\n  // CLASSES - \uAC1D\uCCB4 \uC9C0\uD5A5\uC801 \uAD6C\uC870\r\n  // ============================================================================\r\n\r\n  // SATNavigator \uD074\uB798\uC2A4 \uAD6C\uD604\uC740 src/flow/navigator.js\uB85C \uC774\uB3D9\r\n  // SectionStateManager, SATScraper, collectModuleProblems\uB294 src/flow/stateMachine.js\uB85C \uC774\uB3D9\r\n\r\n  // SectionStateManager \uD074\uB798\uC2A4\uB294 src/flow/stateMachine.js\uB85C \uC774\uB3D9\uB428\r\n\r\n  // SATScraper \uD074\uB798\uC2A4\uB294 src/flow/stateMachine.js\uB85C \uC774\uB3D9\uB428\r\n\r\n  // PDFGenerator \uD074\uB798\uC2A4\uB294 src/pdf/pdfGenerator.js\uB85C \uC774\uB3D9\uB428\r\n  // SATApp \uD074\uB798\uC2A4\uB294 src/entry/content.entry.js\uB85C \uC774\uB3D9\uB428\r\n\r\n  // ============================================================================\r\n  // LEGACY FUNCTIONS (\uAE30\uC874 \uCF54\uB4DC \uD638\uD658\uC131 \uC720\uC9C0)\r\n  // ============================================================================\r\n\r\n  // \uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4 \uCC98\uB9AC \uD568\uC218 (\uC2DC\uC791 \uD654\uBA74 \u2192 \uC139\uC158 \uC548\uB0B4 \uD654\uBA74 \u2192 \uC2E4\uC81C \uBB38\uC81C \uD654\uBA74)\r\n  // NOTE: Moved to src/flow/navigator.js (SATNavigator.handleInitialNavigation)\r\n  // \uBAA8\uB4E0 \uBB38\uC81C\uB97C \uC790\uB3D9\uC73C\uB85C \uC218\uC9D1\uD558\uB294 \uD568\uC218 (\uC804\uCCB4 \uD750\uB984 \uC7AC\uAD6C\uC131)\r\n  // ============================================================================\r\n  // LEGACY FUNCTION (\uB354 \uC774\uC0C1 \uC0AC\uC6A9\uD558\uC9C0 \uC54A\uC74C - SATScraper.collectAllProblems \uC0AC\uC6A9)\r\n  // ============================================================================\r\n  // \uC774 \uD568\uC218\uB294 \uC5C4\uACA9\uD55C \uC21C\uCC28 \uC2E4\uD589 \uB85C\uC9C1\uC774 \uC5C6\uC5B4\uC11C \uC139\uC158 \uC21C\uC11C\uAC00 \uAF2C\uC77C \uC218 \uC788\uC2B5\uB2C8\uB2E4.\r\n  // \uC0C8\uB85C\uC6B4 SATScraper.collectAllProblems()\uB97C \uC0AC\uC6A9\uD558\uC138\uC694.\r\n  // \uD2B9\uC815 \uBAA8\uB4C8\uC758 \uBAA8\uB4E0 \uBB38\uC81C \uC218\uC9D1 (\uAC15\uD654\uB41C \uC0C1\uD0DC\uBA38\uC2E0: ANSWER \u2192 GRADE \u2192 EXTRACT \u2192 NEXT)\r\n  // NOTE: Moved to src/flow/stateMachine.js (placeholder for now)\r\n  // Progress \uC0C1\uD0DC \uAC00\uC838\uC624\uAE30 (\uC608: \"3/27\") - \uC218\uC815: 27 \uACE0\uC815\r\n  /**\r\n   * Progress \uC0C1\uD0DC \uAC00\uC838\uC624\uAE30 (\uB300\uD3ED \uAC15\uD654 - \uD654\uBA74 \uC804\uCCB4\uC5D0\uC11C \uC815\uADDC\uC2DD\uC73C\uB85C \uCC3E\uAE30)\r\n   * @returns {string|null} Progress \uC0C1\uD0DC (\uC608: \"1/27\", \"5/27\")\r\n   * NOTE: Moved to src/dom/extract.js\r\n   */\r\n  // \uD604\uC7AC \uC139\uC158\uC774 Reading\uC778\uC9C0 Math\uC778\uC9C0 \uAC10\uC9C0\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD (\uAC15\uD654\uB41C \uC131\uACF5 \uD310\uC815 + \uD3F4\uBC31 \uC804\uB7B5)\r\n  /**\r\n   * \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD \uB85C\uC9C1 \uAC15\uD654 (\uB2E4\uC591\uD55C \uC140\uB809\uD130, \uBE44\uD65C\uC131\uD654 \uB300\uAE30, \uBB38\uC81C \uBC88\uD638 \uBCC0\uACBD \uD655\uC778)\r\n   * @param {number} beforeProblemNum - \uD074\uB9AD \uC804 \uBB38\uC81C \uBC88\uD638\r\n   * @returns {Promise<boolean>} \uC131\uACF5 \uC5EC\uBD80\r\n   * NOTE: Moved to src/dom/buttons.js\r\n   */\r\n  // \uB2E4\uC74C \uBAA8\uB4C8 \uC2DC\uC791 (Module 2\uB85C \uC774\uB3D9)\r\n  // NOTE: Moved to src/legacy/legacy.js\r\n  // Math \uC139\uC158\uC73C\uB85C \uC774\uB3D9\r\n  // NOTE: Moved to src/flow/navigator.js (SATNavigator.navigateToMathSection)\r\n  // \uD604\uC7AC \uBB38\uC81C \uBC88\uD638 \uAC00\uC838\uC624\uAE30 (100% \uC2E0\uB8B0 \uAC00\uB2A5 + \uD3F4\uBC31) - \uC218\uC815: body text regex \uAE08\uC9C0, 27 \uACE0\uC815\r\n  // NOTE: Moved to src/dom/extract.js\r\n  /**\r\n   * \uBB38\uC81C \uC2DC\uADF8\uB2C8\uCC98 \uC0DD\uC131 (\uC9C0\uBB38 \uD574\uC2DC \uAE30\uBC18 - \uBB38\uC81C \uBC88\uD638\uB97C \uBABB \uCC3E\uC744 \uB54C \uD3F4\uBC31\uC6A9)\r\n   * @returns {string} \uBB38\uC81C \uC2DC\uADF8\uB2C8\uCC98 \uD574\uC2DC\r\n   * NOTE: Moved to src/dom/extract.js\r\n   */\r\n  // \uB124\uBE44\uAC8C\uC774\uC158 \uBC84\uD2BC \uCC3E\uAE30 (aria-label/data-testid \uC6B0\uC120, Shadow DOM \uD3EC\uD568)\r\n  // NOTE: Moved to src/dom/buttons.js\r\n  // \uCF58\uD150\uCE20 \uB85C\uB4DC \uB300\uAE30 \uAD6C\uD604\uC740 src/dom/wait.js\uC758 waitForContentLoad\uB97C \uC0AC\uC6A9\r\n\r\n  // SAT \uBB38\uC81C \uB370\uC774\uD130 \uCD94\uCD9C \uD568\uC218 (\uD604\uC7AC \uD654\uBA74\uB9CC) - \uC218\uC815: \uC139\uC158 \uAC10\uC9C0 \uD6C4 \uBD84\uAE30\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // Reading \uC139\uC158 \uB370\uC774\uD130 \uCD94\uCD9C (\uC2E4\uC81C \uD654\uBA74\uC5D0\uC11C \uBCF4\uC774\uB294 \uD14D\uC2A4\uD2B8 \uC9C1\uC811 \uCD94\uCD9C)\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // Math \uC139\uC158 \uB370\uC774\uD130 \uCD94\uCD9C (\uC2E4\uC81C \uD654\uBA74\uC5D0\uC11C \uBCF4\uC774\uB294 \uD14D\uC2A4\uD2B8 \uC9C1\uC811 \uCD94\uCD9C)\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // \uD14D\uC2A4\uD2B8 \uD328\uD134 \uAE30\uBC18 \uCD94\uCD9C (\uB300\uCCB4 \uBC29\uBC95)\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // \uD14D\uC2A4\uD2B8 \uCD94\uCD9C \uD5EC\uD37C \uD568\uC218\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // \uC120\uD0DD\uC9C0 \uCD94\uCD9C\r\n  // \uC120\uD0DD\uC9C0 \uCD94\uCD9C - \uC218\uC815: \uD074\uB9AD \uAC00\uB2A5\uD55C \uC694\uC18C\uC5D0\uC11C\uB9CC \uCD94\uCD9C (A-D\uB9CC)\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // \uD604\uC7AC \uBB38\uC81C \uCD94\uCD9C (\uC9C0\uBB38, \uBB38\uC81C \uBCF8\uBB38, \uC120\uD0DD\uC9C0\uB9CC - \uC815\uB2F5/\uD574\uC124 \uC81C\uC678)\r\n  // \uB370\uC774\uD130 \uAD6C\uC870 \uACE0\uC815: { problemNumber, question, choices: {A, B, C, D}, correctAnswer, explanation }\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // \uCC44\uC810 \uC0C1\uD0DC \uD655\uC778 (\uCD08\uB85D \uBC15\uC2A4\uAC00 \uC774\uBBF8 \uD45C\uC2DC\uB418\uC5B4 \uC788\uB294\uC9C0)\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // \uC120\uD0DD\uC9C0 \uD074\uB9AD (A/B/C/D \uC911 \uCCAB \uBC88\uC9F8 \uC720\uD6A8\uD55C \uAC83) - \uAC15\uC81C \uD074\uB9AD\r\n  // clickFirstChoice \uD568\uC218\uB294 src/dom/buttons.js\uB85C \uC774\uB3D9\uB428\r\n\r\n  /**\r\n   * \uCC44\uC810 \uC644\uB8CC \uB300\uAE30 (\uC815\uB2F5/\uD574\uC124 \uB85C\uB529 \uB300\uAE30 \uAC15\uD654)\r\n   * @returns {Promise<string|null>} 'correct' | 'incorrect' | null\r\n   * NOTE: Moved to src/dom/extract.js\r\n   */\r\n  // \uC815\uB2F5 \uCD94\uCD9C (\uCD08\uB85D\uC0C9 \uC120\uD0DD\uC9C0\uC5D0\uC11C DOM \uC0C1\uD0DC\uB85C)\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // Explanation \uCD94\uCD9C (\uCC44\uC810 \uD6C4 DOM\uC5D0\uC11C\uB9CC)\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // \uC815\uB2F5 UI(\uCD08\uB85D \uBC15\uC2A4)\uAC00 \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30 \uBC0F \uC815\uB2F5 \uCD94\uCD9C (next \uBC84\uD2BC \uD65C\uC131\uD654\uB3C4 \uD655\uC778) - DEPRECATED\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // \uC774\uBBF8 \uCC44\uC810\uB41C \uC0C1\uD0DC\uC5D0\uC11C \uC815\uB2F5 \uCD94\uCD9C\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // \uC815\uB2F5 \uCD94\uCD9C (\uB808\uAC70\uC2DC \uD568\uC218 - \uD638\uD658\uC131 \uC720\uC9C0)\r\n  // NOTE: Moved to src/dom/extract.js\r\n  // \uBB38\uC81C\uC9C0 PDF \uC0DD\uC131 (\uC9C0\uBB38 + \uBB38\uC81C + \uC120\uD0DD\uC9C0, \uC815\uB2F5/\uD574\uC124 \uC5C6\uC74C)\r\n  // NOTE: Moved to src/pdf/pdfGenerator.js\r\n  // \uBB38\uC81C\uC9C0\uC6A9: \uC139\uC158\uC744 PDF\uC5D0 \uCD94\uAC00 (\uC815\uB2F5/\uD574\uC124 \uC81C\uC678)\r\n  // NOTE: Moved to src/pdf/pdfGenerator.js\r\n  // \uC815\uB2F5\uC9C0\uC6A9: \uC139\uC158\uC744 PDF\uC5D0 \uCD94\uAC00 (\uC815\uB2F5 + \uD574\uC124\uB9CC)\r\n  // NOTE: Moved to src/pdf/pdfGenerator.js\r\n  // \uD1A0\uC2A4\uD2B8 \uBA54\uC2DC\uC9C0 \uD45C\uC2DC \uD568\uC218\r\n  // NOTE: Moved to src/dom/wait.js\r\n  // function showToast(message, type = 'info') { ... }\r\n\r\n  // Export \uBC84\uD2BC \uC0DD\uC131 \uBC0F \uC774\uBCA4\uD2B8 \uC5F0\uACB0\r\n  // NOTE: Moved to src/entry/content.entry.js (SATApp.createExportButton)\r\n  // SATApp \uC778\uC2A4\uD134\uC2A4 \uC0DD\uC131 \uBC0F \uCD08\uAE30\uD654\r\n  // NOTE: SATApp is now imported from src/entry/content.entry.js\r\n  console.log('[BOOT] creating SATApp instance', 'top?', window === window.top);\r\n  const app = new SATApp();\r\n  window.satApp = app; // \uC804\uC5ED\uC5D0 \uC800\uC7A5\r\n  window.__SAT_APP = app; // \uD638\uD658\uC131\uC744 \uC704\uD574 __SAT_APP\uB3C4 \uC124\uC815\r\n  window.SATApp = SATApp; // \uB514\uBC84\uAE45\uC6A9 \uC804\uC5ED \uD074\uB798\uC2A4\r\n  window.PDFGenerator = PDFGenerator; // \uB514\uBC84\uAE45\uC6A9 \uC804\uC5ED \uD074\uB798\uC2A4\r\n\r\n  // \uBC84\uD2BC \uC0DD\uC874\uB825 \uADF9\uB300\uD654: \uCD5C\uC0C1\uB2E8\uC5D0\uC11C \uC989\uC2DC \uC2E4\uD589\r\n  console.log('[BOOT] calling initButtonSafely', 'top?', window === window.top);\r\n  initButtonSafely();\r\n\r\n  // DOMContentLoaded \uC774\uBCA4\uD2B8\uB3C4 \uB300\uBE44\r\n  if (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n      console.log('[SAT PDF Exporter] DOMContentLoaded - \uBC84\uD2BC \uC0DD\uC131');\r\n      app.init();\r\n    });\r\n  }\r\n\r\n  // \uBC84\uD2BC \uC0DD\uC874\uB825 \uAC15\uD654: document.documentElement \uB808\uBCA8 MutationObserver (Zombie Button)\r\n  const zombieButtonObserver = new MutationObserver(() => {\r\n    try {\r\n      // \uCEE8\uD14D\uC2A4\uD2B8 \uC720\uD6A8\uC131 \uCCB4\uD06C\r\n      if (typeof chrome !== 'undefined' && chrome.runtime && !chrome.runtime.id) {\r\n        return; // Extension context invalidated\r\n      }\r\n\r\n      const button = document.getElementById('gemini-sat-pdf-export-btn');\r\n      if (!button && document.body) {\r\n        console.log('[SAT-DEBUG] [Zombie Button] \uBC84\uD2BC\uC774 \uC0AC\uB77C\uC9D0 \uAC10\uC9C0 - \uC989\uC2DC \uBD80\uD65C (0.5\uCD08 \uB0B4)');\r\n        setTimeout(() => {\r\n          try {\r\n            initButtonSafely();\r\n          } catch (error) {\r\n            console.error('[SAT-DEBUG] [Zombie Button] \uBC84\uD2BC \uC7AC\uC0DD\uC131 \uC2E4\uD328:', error);\r\n          }\r\n        }, 500); // 0.5\uCD08 \uB0B4 \uC989\uC2DC \uBD80\uD65C\r\n      } else if (button) {\r\n        // \uBC84\uD2BC\uC774 \uC788\uC9C0\uB9CC \uC228\uACA8\uC838 \uC788\uC744 \uC218 \uC788\uC73C\uBBC0\uB85C \uD655\uC778\r\n        const computedStyle = window.getComputedStyle(button);\r\n        if (computedStyle.display === 'none' || \r\n            computedStyle.visibility === 'hidden' || \r\n            computedStyle.opacity === '0') {\r\n          console.log('[SAT PDF Exporter] [Zombie Button] \uBC84\uD2BC\uC774 \uC228\uACA8\uC838 \uC788\uC74C - \uC2A4\uD0C0\uC77C \uAC15\uC81C \uC801\uC6A9');\r\n          button.style.display = 'block';\r\n          button.style.visibility = 'visible';\r\n          button.style.opacity = '1';\r\n          button.style.zIndex = '2147483647';\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('[SAT PDF Exporter] [Zombie Button] \uC624\uB958 (\uC2A4\uD06C\uB9BD\uD2B8\uB294 \uACC4\uC18D \uC2E4\uD589):', error);\r\n    }\r\n  });\r\n\r\n  // document.documentElement \uB808\uBCA8\uB85C \uAD00\uCC30 \uC2DC\uC791 (\uCD5C\uC0C1\uC704 \uB808\uBCA8)\r\n  if (document.documentElement) {\r\n    zombieButtonObserver.observe(document.documentElement, {\r\n      childList: true,\r\n      subtree: true,\r\n      attributes: true,\r\n      attributeFilter: ['style', 'class']\r\n    });\r\n    console.log('[SAT PDF Exporter] [Zombie Button] document.documentElement \uB808\uBCA8 \uAD00\uCC30 \uC2DC\uC791');\r\n  }\r\n\r\n  // \uB3D9\uC801 \uCF58\uD150\uCE20 \uB85C\uB529 \uB300\uC751 (\uAE30\uC874 \uB85C\uC9C1 \uC720\uC9C0)\r\n  const observer = new MutationObserver((mutations) => {\r\n    try {\r\n      // \uCEE8\uD14D\uC2A4\uD2B8 \uC720\uD6A8\uC131 \uCCB4\uD06C\r\n      if (typeof chrome !== 'undefined' && chrome.runtime && !chrome.runtime.id) {\r\n        return;\r\n      }\r\n\r\n      const button = document.getElementById('gemini-sat-pdf-export-btn');\r\n      if (!button && document.body) {\r\n        console.log('[SAT PDF Exporter] \uBC84\uD2BC\uC774 \uC5C6\uC5B4\uC11C \uC7AC\uC0DD\uC131\uD569\uB2C8\uB2E4.');\r\n        app.init();\r\n      }\r\n    } catch (error) {\r\n      console.error('[SAT PDF Exporter] Observer \uC624\uB958:', error);\r\n    }\r\n  });\r\n\r\n  // body\uAC00 \uC788\uC73C\uBA74 \uC989\uC2DC \uAD00\uCC30 \uC2DC\uC791\r\n  if (document.body) {\r\n    observer.observe(document.body, {\r\n      childList: true,\r\n      subtree: true\r\n    });\r\n  } else {\r\n    // body\uAC00 \uC5C6\uC73C\uBA74 \uB300\uAE30 \uD6C4 \uAD00\uCC30 \uC2DC\uC791\r\n    const bodyObserver = new MutationObserver(() => {\r\n      if (document.body) {\r\n        observer.observe(document.body, {\r\n          childList: true,\r\n          subtree: true\r\n        });\r\n        bodyObserver.disconnect();\r\n      }\r\n    });\r\n    bodyObserver.observe(document.documentElement, {\r\n      childList: true,\r\n      subtree: true\r\n    });\r\n  }\r\n\r\n  // \uC8FC\uAE30\uC801\uC73C\uB85C \uBC84\uD2BC \uC874\uC7AC \uD655\uC778 (\uBC31\uC5C5 - \uCEE8\uD14D\uC2A4\uD2B8 \uC720\uD6A8\uC131 \uCCB4\uD06C \uD3EC\uD568)\r\n  setInterval(() => {\r\n    try {\r\n      // \uCEE8\uD14D\uC2A4\uD2B8 \uC720\uD6A8\uC131 \uCCB4\uD06C\r\n      if (typeof chrome !== 'undefined' && chrome.runtime && !chrome.runtime.id) {\r\n        console.warn('[SAT PDF Exporter] Extension context invalidated - \uC8FC\uAE30\uC801 \uD655\uC778 \uC2A4\uD0B5');\r\n        return;\r\n      }\r\n\r\n      const button = document.getElementById('gemini-sat-pdf-export-btn');\r\n      if (!button && document.body) {\r\n        console.log('[SAT PDF Exporter] \uC8FC\uAE30\uC801 \uD655\uC778 - \uBC84\uD2BC \uC7AC\uC0DD\uC131');\r\n        app.init();\r\n      } else if (button) {\r\n        // \uBC84\uD2BC\uC774 \uC788\uC9C0\uB9CC \uBCF4\uC774\uC9C0 \uC54A\uC744 \uC218 \uC788\uC73C\uBBC0\uB85C \uC2A4\uD0C0\uC77C \uAC15\uC81C \uC801\uC6A9\r\n        const computedStyle = window.getComputedStyle(button);\r\n        if (computedStyle.display === 'none' || \r\n            computedStyle.visibility === 'hidden' || \r\n            computedStyle.opacity === '0') {\r\n          console.log('[SAT PDF Exporter] \uBC84\uD2BC\uC774 \uC228\uACA8\uC838 \uC788\uC74C - \uC2A4\uD0C0\uC77C \uAC15\uC81C \uC801\uC6A9');\r\n          button.style.display = 'block';\r\n          button.style.visibility = 'visible';\r\n          button.style.opacity = '1';\r\n          button.style.zIndex = '2147483647';\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('[SAT PDF Exporter] \uC8FC\uAE30\uC801 \uD655\uC778 \uC624\uB958 (\uC2A4\uD06C\uB9BD\uD2B8\uB294 \uACC4\uC18D \uC2E4\uD589):', error);\r\n    }\r\n  }, 2000);\r\n\r\n})();\r\n\r\n", "// Extracted CONFIG from content.js\r\n// NOTE: Logic must remain identical to original definition.\r\n\r\nexport const CONFIG = {\r\n  // CSS \uC140\uB809\uD130\r\n  selectors: {\r\n    // \uBB38\uC81C \uD654\uBA74 \uD310\uBCC4\uC6A9\r\n    choice: '[role=\"radio\"], button[aria-label*=\"Choice\"], button[class*=\"choice\"], [class*=\"option\"]',\r\n    correct: '.correct, [aria-label*=\"Correct\"], [aria-label*=\"\uC815\uB2F5\"], [class*=\"correct\"], [class*=\"\uC815\uB2F5\"]',\r\n    incorrect: '[class*=\"incorrect\"], [class*=\"\uC624\uB2F5\"]',\r\n    // \uBC84\uD2BC\r\n    button: 'button, [role=\"button\"]',\r\n    // \uBB38\uC81C \uBC88\uD638\r\n    problemNumber: '[class*=\"problem\"], [class*=\"question\"], [data-problem-number]',\r\n    // Progress \uD45C\uC2DC\r\n    progress: '[class*=\"progress\"], [aria-label*=\"progress\"]',\r\n  },\r\n  // \uD0C0\uC784\uC544\uC6C3 \uC124\uC815 (\uBC00\uB9AC\uCD08) - \uC18D\uB3C4 \uCD5C\uC801\uD654 (\uBB38\uC81C \uC2A4\uD06C\uB7A9 \uC9D1\uC911)\r\n  timeouts: {\r\n    elementWait: 80,         // \uC694\uC18C \uB300\uAE30 \uAC04\uACA9\r\n    maxElementWait: 2500,    // \uCD5C\uB300 \uC694\uC18C \uB300\uAE30 \uC2DC\uAC04\r\n    screenTransition: 150,  // \uD654\uBA74 \uC804\uD658 \uB300\uAE30 (UI \uBC18\uC751 \uBE60\uB984)\r\n    contentLoad: 150,        // \uCF58\uD150\uCE20 \uB85C\uB4DC \uB300\uAE30\r\n    gradingWait: 1000,      // \uCC44\uC810 \uC644\uB8CC \uB300\uAE30\r\n    clickDelay: 120,        // \uD074\uB9AD \uD6C4 \uB300\uAE30\r\n    scrollDelay: 150,       // \uC2A4\uD06C\uB864 \uD6C4 \uB300\uAE30\r\n    pdfDownloadDelay: 300,  // PDF \uB2E4\uC6B4\uB85C\uB4DC \uAC04\uACA9\r\n    // \uBB38\uC81C \uC0DD\uC131 \uD0ED: \uC120\uC9C0 \uC120\uD0DD \uAD6C\uAC04 \uB300\uAE30 (\uB108\uBB34 \uBE68\uB9AC \uC9C0\uB098\uAC00\uB294 \uAC83 \uBC29\uC9C0, \uD2B9\uD788 \uC0AC\uC9C4 \uC788\uB294 \uBB38\uC81C)\r\n    beforeChoiceClick: 400,           // \uC120\uC9C0 \uD074\uB9AD \uC804 \uB300\uAE30 (\uBB38\uC81C/\uC120\uC9C0 \uC778\uC9C0 \uC2DC\uAC04)\r\n    beforeChoiceClickWithImage: 2800, // \uC774\uBBF8\uC9C0 \uC788\uB294 \uBB38\uC81C: \uC120\uC9C0 \uD074\uB9AD \uC804 2.8\uCD08 \uB300\uAE30\r\n    afterChoiceClick: 450,            // \uC120\uC9C0 \uD074\uB9AD \uD6C4 \uC81C\uCD9C \uC804 \uB300\uAE30\r\n    afterChoiceClickWithImage: 2800,  // \uC774\uBBF8\uC9C0 \uC788\uB294 \uBB38\uC81C: \uC120\uC9C0 \uD074\uB9AD \uD6C4 2.8\uCD08 \uB300\uAE30\r\n  },\r\n  // \uC7AC\uC2DC\uB3C4 \uC124\uC815\r\n  retries: {\r\n    elementFind: 15,          // \uC694\uC18C \uCC3E\uAE30 \uC7AC\uC2DC\uB3C4 \uD69F\uC218\r\n    buttonClick: 3,           // \uBC84\uD2BC \uD074\uB9AD \uC7AC\uC2DC\uB3C4 \uD69F\uC218\r\n    navigation: 30,           // \uB124\uBE44\uAC8C\uC774\uC158 \uC7AC\uC2DC\uB3C4 \uD69F\uC218\r\n    consecutiveFailures: 3,   // \uCD5C\uB300 \uC5F0\uC18D \uC2E4\uD328 \uD69F\uC218\r\n  },\r\n  // \uBC84\uD2BC \uD14D\uC2A4\uD2B8 (\uB2E4\uAD6D\uC5B4 \uC9C0\uC6D0)\r\n  buttonTexts: {\r\n    open: ['\uC5F4\uAE30', 'Open'],\r\n    continue: ['\uACC4\uC18D', 'Continue'],\r\n    start: ['\uC2DC\uC791', 'Start', '\uD14C\uC2A4\uD2B8 \uC2DC\uC791', 'Start Test'],\r\n    next: ['\uB2E4\uC74C', 'Next'],\r\n    submit: ['\uC81C\uCD9C', 'Submit', '\uD655\uC778', 'Confirm'],\r\n    first: ['\uCC98\uC74C', 'First', '1'],\r\n  },\r\n  // \uBB38\uC81C \uC218\uC9D1 \uC124\uC815\r\n  collection: {\r\n    maxIterations: 60,        // \uCD5C\uB300 \uBC18\uBCF5 \uD69F\uC218\r\n    maxProblems: 27,          // Reading \uBAA8\uB4C8\uB2F9 \uCD5C\uB300 \uBB38\uC81C \uC218\r\n    mathMaxProblems: 22,      // Math \uBAA8\uB4C8\uB2F9 \uCD5C\uB300 \uBB38\uC81C \uC218 (\uC8FC\uAD00\uC2DD \uD3EC\uD568)\r\n  },\r\n  // Gemini \uCC44\uD305 \uC790\uB3D9\uD654 \uC124\uC815\r\n  geminiChat: {\r\n    inputSelectors: [\r\n      '[data-testid*=\"input\"]',\r\n      '[data-testid*=\"textbox\"]',\r\n      '[role=\"textbox\"]',\r\n      '[role=\"combobox\"]',\r\n      '[contenteditable=\"true\"]',\r\n      'textarea[aria-label*=\"message\"]',\r\n      'textarea[aria-label*=\"prompt\"]',\r\n      'textarea[aria-label*=\"chat\"]',\r\n      'textarea[aria-label*=\"\uC785\uB825\"]',\r\n      'textarea[aria-label*=\"\uBB3C\uC5B4\uBCF4\uAE30\"]',\r\n      'textarea[aria-label*=\"ask\"]',\r\n      'textarea[placeholder*=\"message\"]',\r\n      'textarea[placeholder*=\"prompt\"]',\r\n      'textarea[placeholder*=\"chat\"]',\r\n      'textarea[placeholder*=\"\uC785\uB825\"]',\r\n      'textarea[placeholder*=\"\uBB3C\uC5B4\uBCF4\uAE30\"]'\r\n    ],\r\n    submitSelectors: [\r\n      'button[data-testid*=\"send\"]',\r\n      'button[data-testid*=\"submit\"]',\r\n      'button[aria-label*=\"send\"]',\r\n      'button[aria-label*=\"Send\"]',\r\n      'button[aria-label*=\"\uC804\uC1A1\"]',\r\n      'button[type=\"submit\"]',\r\n      'button[aria-label*=\"submit\"]'\r\n    ],\r\n    message: 'I want to take a full practice SAT TEST.',\r\n    satUIWaitTimeout: 60000,  // SAT UI \uB300\uAE30 \uD0C0\uC784\uC544\uC6C3 (1\uBD84)\r\n  },\r\n  // Gemini SAT UI \uC9C4\uC785 \uD6C4 \uC124\uC815 \uB2E8\uACC4 (geminiSetup.js)\r\n  geminiSetup: {\r\n    startButtonSelectors: [\r\n      'section-overview glowing-card:first-child .section-button-container button',\r\n      'glowing-card .section-button-container.ng-star-inserted button',\r\n      'activity-set section-overview .glowing-card .section-button-container button',\r\n    ],\r\n    firstToggleSelectors: [\r\n      'button[id^=\"mat-mdc-slide-toggle-\"]',\r\n      '.mdc-switch',\r\n      'span.mdc-switch__handle-track',\r\n      'span.mdc-switch__shadow',\r\n    ],\r\n    secondToggleSelectors: [\r\n      'button[id^=\"mat-mdc-slide-toggle-\"]',\r\n      'span.mdc-switch__track',\r\n    ],\r\n    setupSequenceTimeout: 15000,  // \uC124\uC815 \uC2DC\uD000\uC2A4 \uCD5C\uB300 \uB300\uAE30 (15\uCD08)\r\n  },\r\n};\r\n\r\n// TEMP \uBAA8\uB4DC \uC124\uC815 (\uBE44\uD65C\uC131\uD654: Module 1 \uC804\uCCB4 \uC218\uC9D1)\r\nexport const TEMP_MODE = false;\r\nexport const TEMP_TARGET_NUMBERS = [1, 2, 3]; // TEMP \uBAA8\uB4DC \uBE44\uD65C\uC131\uD654\uB85C \uC0AC\uC6A9 \uC548 \uD568\r\n\r\n\r\n", "// Extracted from content.js - wait utilities\r\n// NOTE: Logic must remain identical to original implementation.\r\n\r\nimport { CONFIG } from '../config/constants.js';\r\nimport { isElementVisible } from './deepQuery.js';\r\n\r\nexport async function waitForElement(selector, retries = CONFIG.retries.elementFind, interval = CONFIG.timeouts.elementWait) {\r\n  for (let i = 0; i < retries; i++) {\r\n    let element = null;\r\n    if (typeof selector === 'function') {\r\n      element = selector();\r\n    } else {\r\n      element = document.querySelector(selector);\r\n    }\r\n    \r\n    // Gemini UI(Shadow DOM/portal)\uC5D0\uC11C\uB294 offsetParent\uAC00 null\uC774\uC5B4\uB3C4 \uD654\uBA74\uC5D0 \uBCF4\uC774\uB294 \uACBD\uC6B0\uAC00 \uB9CE\uC74C.\r\n    // \uB530\uB77C\uC11C getBoundingClientRect \uAE30\uBC18 \uAC00\uC2DC\uC131 \uD310\uC815\uC73C\uB85C \uAD50\uCCB4.\r\n    if (element && isElementVisible(element)) {\r\n      return element;\r\n    }\r\n    \r\n    if (i < retries - 1) {\r\n      await new Promise(resolve => setTimeout(resolve, interval));\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport async function waitForCondition(condition, maxWait = CONFIG.timeouts.maxElementWait, interval = CONFIG.timeouts.elementWait) {\r\n  const startTime = Date.now();\r\n  while (Date.now() - startTime < maxWait) {\r\n    if (condition()) {\r\n      return true;\r\n    }\r\n    await new Promise(resolve => setTimeout(resolve, interval));\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function waitForContentLoad(delay = 1000) {\r\n  return new Promise((resolve) => {\r\n    // MutationObserver\uB85C DOM \uBCC0\uACBD \uAC10\uC9C0\r\n    let observer;\r\n    let timeout;\r\n    \r\n    const cleanup = () => {\r\n      if (observer) observer.disconnect();\r\n      if (timeout) clearTimeout(timeout);\r\n    };\r\n    \r\n    // \uD0C0\uC784\uC544\uC6C3 \uC124\uC815 (\uCD5C\uB300 \uB300\uAE30 \uC2DC\uAC04)\r\n    timeout = setTimeout(() => {\r\n      cleanup();\r\n      resolve();\r\n    }, delay);\r\n    \r\n    // DOM \uBCC0\uACBD \uAC10\uC9C0\r\n    observer = new MutationObserver(() => {\r\n      cleanup();\r\n      // \uCD94\uAC00 \uB300\uAE30 (\uC560\uB2C8\uBA54\uC774\uC158 \uB4F1)\r\n      setTimeout(resolve, 25);\r\n    });\r\n    \r\n    if (document.body) {\r\n      observer.observe(document.body, {\r\n        childList: true,\r\n        subtree: true\r\n      });\r\n    } else {\r\n      const bodyObserver = new MutationObserver(() => {\r\n        if (document.body) {\r\n          observer.observe(document.body, {\r\n            childList: true,\r\n            subtree: true\r\n          });\r\n          bodyObserver.disconnect();\r\n        }\r\n      });\r\n      bodyObserver.observe(document.documentElement, {\r\n        childList: true,\r\n        subtree: true\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * \uAC15\uC81C \uD074\uB9AD \uD568\uC218 (pointerdown \uB4F1 \uC774\uBCA4\uD2B8 \uD3EC\uD568)\r\n * @param {HTMLElement} button - \uD074\uB9AD\uD560 \uBC84\uD2BC \uC694\uC18C\r\n * @param {number} retries - \uC7AC\uC2DC\uB3C4 \uD69F\uC218\r\n * @returns {Promise<boolean>} \uC131\uACF5 \uC5EC\uBD80\r\n */\r\nexport async function forceClick(button, retries = 3) {\r\n  if (!button) {\r\n    return false;\r\n  }\r\n  \r\n  // \uB2E4\uB978 \uCC3D\uC73C\uB85C \uB118\uC5B4\uAC00\uB294 \uC694\uC18C\uC778\uC9C0 \uD655\uC778\r\n  if (button.tagName === 'A') {\r\n    const href = button.getAttribute('href');\r\n    const target = button.getAttribute('target');\r\n    if (href && (href.startsWith('http') || target === '_blank' || target === '_new')) {\r\n      console.error('[SAT-DEBUG] \uC678\uBD80 \uB9C1\uD06C \uD074\uB9AD \uBC29\uC9C0:', href, target);\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  if (button.hasAttribute('href') && button.getAttribute('href') !== '#' && !button.getAttribute('href').startsWith('javascript:')) {\r\n    console.error('[SAT-DEBUG] \uB124\uBE44\uAC8C\uC774\uC158 \uB9C1\uD06C \uD074\uB9AD \uBC29\uC9C0:', button.getAttribute('href'));\r\n    return false;\r\n  }\r\n  \r\n  if (button.getAttribute('target') === '_blank' || button.getAttribute('target') === '_new') {\r\n    console.error('[SAT-DEBUG] \uC0C8 \uCC3D \uC5F4\uAE30 \uC18D\uC131 \uD074\uB9AD \uBC29\uC9C0');\r\n    return false;\r\n  }\r\n  \r\n  // \uD604\uC7AC URL \uC800\uC7A5 (\uD074\uB9AD \uD6C4 \uBCC0\uACBD \uD655\uC778\uC6A9)\r\n  const currentUrl = window.location.href;\r\n  \r\n  for (let i = 0; i < retries; i++) {\r\n    try {\r\n      console.log(`[SAT-DEBUG] forceClick \uC2DC\uB3C4 ${i + 1}/${retries}`);\r\n      \r\n      // \uAC00\uC2DC\uC131 \uD655\uBCF4\r\n      button.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n      await new Promise(resolve => setTimeout(resolve, 150));\r\n      \r\n      const rect = button.getBoundingClientRect();\r\n      const centerX = rect.left + rect.width / 2;\r\n      const centerY = rect.top + rect.height / 2;\r\n      \r\n      // pointerdown -> mousedown -> click \uC21C\uC11C\r\n      const pointerDownEvent = new PointerEvent('pointerdown', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true,\r\n        composed: true,\r\n        pointerId: 1,\r\n        pointerType: 'mouse',\r\n        clientX: centerX,\r\n        clientY: centerY,\r\n        button: 0,\r\n        buttons: 1\r\n      });\r\n      button.dispatchEvent(pointerDownEvent);\r\n      await new Promise(resolve => setTimeout(resolve, 50));\r\n      \r\n      const mouseDownEvent = new MouseEvent('mousedown', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true,\r\n        composed: true,\r\n        buttons: 1,\r\n        clientX: centerX,\r\n        clientY: centerY\r\n      });\r\n      button.dispatchEvent(mouseDownEvent);\r\n      await new Promise(resolve => setTimeout(resolve, 50));\r\n      \r\n      // focus\r\n      if (button.focus) {\r\n        button.focus();\r\n        await new Promise(resolve => setTimeout(resolve, 50));\r\n      }\r\n      \r\n      // pointerup -> mouseup -> click\r\n      const pointerUpEvent = new PointerEvent('pointerup', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true,\r\n        composed: true,\r\n        pointerId: 1,\r\n        pointerType: 'mouse',\r\n        clientX: centerX,\r\n        clientY: centerY,\r\n        button: 0,\r\n        buttons: 0\r\n      });\r\n      button.dispatchEvent(pointerUpEvent);\r\n      await new Promise(resolve => setTimeout(resolve, 50));\r\n      \r\n      const mouseUpEvent = new MouseEvent('mouseup', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true,\r\n        composed: true,\r\n        buttons: 0,\r\n        clientX: centerX,\r\n        clientY: centerY\r\n      });\r\n      button.dispatchEvent(mouseUpEvent);\r\n      await new Promise(resolve => setTimeout(resolve, 50));\r\n      \r\n      const clickEvent = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true,\r\n        composed: true,\r\n        buttons: 1,\r\n        clientX: centerX,\r\n        clientY: centerY\r\n      });\r\n      button.dispatchEvent(clickEvent);\r\n      await new Promise(resolve => setTimeout(resolve, 60));\r\n      \r\n      // \uB9C8\uC9C0\uB9C9 \uC218\uB2E8\r\n      try {\r\n        button.click();\r\n      } catch (e) {\r\n        console.warn('[SAT-DEBUG] button.click() \uC2E4\uD328 (\uC608\uC0C1\uB428):', e);\r\n      }\r\n      await new Promise(resolve => setTimeout(resolve, 60));\r\n      \r\n      // URL \uBCC0\uACBD \uD655\uC778\r\n      if (window.location.href !== currentUrl) {\r\n        console.error('[SAT-DEBUG] URL\uC774 \uBCC0\uACBD\uB418\uC5C8\uC2B5\uB2C8\uB2E4! \uB2E4\uB978 \uCC3D\uC73C\uB85C \uB118\uC5B4\uAC14\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4.');\r\n        // \uC6D0\uB798 URL\uB85C \uBCF5\uADC0 \uC2DC\uB3C4\r\n        window.history.back();\r\n        await new Promise(resolve => setTimeout(resolve, 500));\r\n        return false;\r\n      }\r\n      \r\n      console.log('[SAT-DEBUG] forceClick \uC131\uACF5');\r\n      return true;\r\n    } catch (error) {\r\n      console.warn(`[SAT-DEBUG] forceClick \uC2E4\uD328 (${i + 1}/${retries}):`, error);\r\n      if (i < retries - 1) {\r\n        await new Promise(resolve => setTimeout(resolve, 250));\r\n      }\r\n    }\r\n  }\r\n  \r\n  return false;\r\n}\r\n\r\n/**\r\n * \uC548\uC804\uD55C \uBC84\uD2BC \uD074\uB9AD (\uC7AC\uC2DC\uB3C4 \uBA54\uCEE4\uB2C8\uC998 \uD3EC\uD568)\r\n * @param {Element} button - \uD074\uB9AD\uD560 \uBC84\uD2BC \uC694\uC18C\r\n * @param {number} retries - \uCD5C\uB300 \uC7AC\uC2DC\uB3C4 \uD69F\uC218\r\n * @returns {Promise<boolean>} \uD074\uB9AD \uC131\uACF5 \uC5EC\uBD80\r\n */\r\nexport async function safeClick(button, retries = CONFIG.retries.buttonClick) {\r\n  // offsetParent\uB294 Shadow DOM/portal \uD658\uACBD\uC5D0\uC11C \uC2E0\uB8B0 \uBD88\uAC00 \u2192 \uAC00\uC2DC\uC131 \uAE30\uBC18\uC73C\uB85C \uD310\uC815\r\n  if (!button || !isElementVisible(button)) {\r\n    return false;\r\n  }\r\n\r\n  for (let i = 0; i < retries; i++) {\r\n    try {\r\n      button.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n      await new Promise(resolve => setTimeout(resolve, CONFIG.timeouts.scrollDelay));\r\n      \r\n      // \uC2E4\uC81C \uC720\uC800 \uD074\uB9AD\uCC98\uB7FC \uB3D9\uC791\uD558\uB3C4\uB85D dispatchEvent \uC0AC\uC6A9\r\n      const mouseEvent = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true,\r\n        buttons: 1\r\n      });\r\n      button.dispatchEvent(mouseEvent);\r\n      await new Promise(resolve => setTimeout(resolve, CONFIG.timeouts.clickDelay));\r\n      \r\n      // \uCD94\uAC00\uB85C \uC77C\uBC18 click()\uB3C4 \uD638\uCD9C\r\n      button.click();\r\n      await new Promise(resolve => setTimeout(resolve, CONFIG.timeouts.clickDelay));\r\n      \r\n      // mousedown + mouseup \uC2DC\uD000\uC2A4\r\n      button.dispatchEvent(new MouseEvent('mousedown', { bubbles: true, cancelable: true, buttons: 1 }));\r\n      await new Promise(resolve => setTimeout(resolve, 60));\r\n      button.dispatchEvent(new MouseEvent('mouseup', { bubbles: true, cancelable: true, buttons: 1 }));\r\n      await new Promise(resolve => setTimeout(resolve, 60));\r\n      button.dispatchEvent(new MouseEvent('click', { bubbles: true, cancelable: true }));\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.warn(`[SAT PDF Exporter] \uBC84\uD2BC \uD074\uB9AD \uC7AC\uC2DC\uB3C4 ${i + 1}/${retries}:`, error);\r\n      if (i < retries - 1) {\r\n        await new Promise(resolve => setTimeout(resolve, CONFIG.timeouts.clickDelay));\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * \uD1A0\uC2A4\uD2B8 \uBA54\uC2DC\uC9C0 \uD45C\uC2DC\r\n * @param {string} message - \uD45C\uC2DC\uD560 \uBA54\uC2DC\uC9C0\r\n * @param {string} type - \uBA54\uC2DC\uC9C0 \uD0C0\uC785 ('info', 'success', 'error')\r\n */\r\nexport function showToast(message, type = 'info') {\r\n  // \uAE30\uC874 \uD1A0\uC2A4\uD2B8 \uC81C\uAC70\r\n  const existingToast = document.getElementById('gemini-sat-toast');\r\n  if (existingToast) {\r\n    existingToast.remove();\r\n  }\r\n\r\n  const toast = document.createElement('div');\r\n  toast.id = 'gemini-sat-toast';\r\n  toast.style.cssText = `\r\n    position: fixed;\r\n    top: 80px;\r\n    right: 20px;\r\n    z-index: 10001;\r\n    background: ${type === 'error' ? '#f44336' : type === 'success' ? '#4caf50' : '#2196f3'};\r\n    color: white;\r\n    padding: 12px 20px;\r\n    border-radius: 8px;\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n    font-size: 14px;\r\n    max-width: 300px;\r\n    animation: slideIn 0.3s ease;\r\n  `;\r\n  toast.textContent = message;\r\n\r\n  // \uC560\uB2C8\uBA54\uC774\uC158 \uC2A4\uD0C0\uC77C \uCD94\uAC00\r\n  if (!document.getElementById('gemini-sat-toast-styles')) {\r\n    const style = document.createElement('style');\r\n    style.id = 'gemini-sat-toast-styles';\r\n    style.textContent = `\r\n      @keyframes slideIn {\r\n        from {\r\n          transform: translateX(100%);\r\n          opacity: 0;\r\n        }\r\n        to {\r\n          transform: translateX(0);\r\n          opacity: 1;\r\n        }\r\n      }\r\n      @keyframes slideOut {\r\n        from {\r\n          transform: translateX(0);\r\n          opacity: 1;\r\n        }\r\n        to {\r\n          transform: translateX(100%);\r\n          opacity: 0;\r\n        }\r\n      }\r\n    `;\r\n    document.head.appendChild(style);\r\n  }\r\n\r\n  document.body.appendChild(toast);\r\n\r\n  // 3\uCD08 \uD6C4 \uC790\uB3D9 \uC81C\uAC70\r\n  setTimeout(() => {\r\n    toast.style.animation = 'slideOut 0.3s ease';\r\n    setTimeout(() => {\r\n      if (toast.parentNode) {\r\n        toast.remove();\r\n      }\r\n    }, 300);\r\n  }, 3000);\r\n}\r\n\r\n\r\n", "// Extracted button helper from content.js\r\n// NOTE: Logic must remain identical to original implementation.\r\n\r\nimport { deepQuerySelectorAll, isElementVisible, dumpHTMLStructure } from './deepQuery.js';\r\nimport { waitForContentLoad } from './wait.js';\r\nimport { getCurrentProblemNumber, getProgressState, getQuestionSignature } from './extract.js';\r\nimport { findSatRoot, selectNextButton, findNavigationButton } from './query.js';\r\nimport { TEMP_MODE } from '../config/constants.js';\r\n\r\n// \uC9C4\uD589 \uC0C1\uD669 \uC22B\uC790 \uC77D\uAE30 (progress UI\uC5D0\uC11C \uC9C1\uC811 \uD30C\uC2F1)\r\nfunction readProgressNumber() {\r\n  const progressState = getProgressState();\r\n  if (!progressState) return null;\r\n  \r\n  const match = progressState.match(/(\\d+)\\s*\\/\\s*(\\d+)/);\r\n  if (match) {\r\n    return parseInt(match[1]);\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function findButtonByText(...labels) {\r\n  const buttons = Array.from(deepQuerySelectorAll('button, [role=\"button\"]'));\r\n  return buttons.find(btn => {\r\n    if (!isElementVisible(btn) || btn.disabled) return false;\r\n    \r\n    // \uB2E4\uB978 \uCC3D\uC73C\uB85C \uB118\uC5B4\uAC00\uB294 \uC694\uC18C \uC81C\uC678\r\n    if (btn.tagName === 'A') {\r\n      const href = btn.getAttribute('href');\r\n      const target = btn.getAttribute('target');\r\n      // \uC678\uBD80 \uB9C1\uD06C\uB098 \uC0C8 \uCC3D \uB9C1\uD06C\uB294 \uC81C\uC678\r\n      if (href && (href.startsWith('http') || target === '_blank' || target === '_new')) {\r\n        console.warn('[SAT-DEBUG] \uC678\uBD80 \uB9C1\uD06C \uC81C\uC678:', href, target);\r\n        return false;\r\n      }\r\n      // href\uAC00 \uC788\uC73C\uBA74 \uC81C\uC678 (\uB0B4\uBD80 \uB124\uBE44\uAC8C\uC774\uC158\uB3C4 \uBC29\uC9C0)\r\n      if (href && href !== '#' && !href.startsWith('javascript:')) {\r\n        console.warn('[SAT-DEBUG] \uB124\uBE44\uAC8C\uC774\uC158 \uB9C1\uD06C \uC81C\uC678:', href);\r\n        return false;\r\n      }\r\n    }\r\n    \r\n    // href \uC18D\uC131\uC774 \uC788\uB294 \uC694\uC18C\uB294 \uC81C\uC678 (\uBC84\uD2BC\uCC98\uB7FC \uBCF4\uC774\uC9C0\uB9CC \uB9C1\uD06C\uC778 \uACBD\uC6B0)\r\n    if (btn.hasAttribute('href') && btn.getAttribute('href') !== '#' && !btn.getAttribute('href').startsWith('javascript:')) {\r\n      console.warn('[SAT-DEBUG] href \uC18D\uC131 \uC788\uB294 \uC694\uC18C \uC81C\uC678:', btn.getAttribute('href'));\r\n      return false;\r\n    }\r\n    \r\n    // target=\"_blank\" \uC18D\uC131\uC774 \uC788\uC73C\uBA74 \uC81C\uC678\r\n    if (btn.getAttribute('target') === '_blank' || btn.getAttribute('target') === '_new') {\r\n      console.warn('[SAT-DEBUG] \uC0C8 \uCC3D \uC5F4\uAE30 \uC18D\uC131 \uC788\uB294 \uC694\uC18C \uC81C\uC678');\r\n      return false;\r\n    }\r\n    \r\n    const text = (btn.innerText || btn.textContent || '').trim();\r\n    const ariaLabel = (btn.getAttribute('aria-label') || '').trim();\r\n    return labels.some(label => \r\n      text.includes(label) || ariaLabel.includes(label)\r\n    );\r\n  });\r\n}\r\n\r\n// getSatRoot\uB294 query.js\uC758 findSatRoot\uB85C \uB300\uCCB4\uB428 (\uC21C\uD658 \uC758\uC874\uC131 \uD574\uACB0)\r\n// Re-export for backward compatibility\r\nexport { findSatRoot as getSatRoot } from './query.js';\r\n\r\n// selectNextButton\uACFC findNavigationButton\uC740 query.js\uB85C \uC774\uB3D9\uB428\r\n// Re-export for backward compatibility\r\nexport { selectNextButton, findNavigationButton } from './query.js';\r\n\r\n// \uB2E4\uC74C\uC740 buttons.js\uC5D0 \uB0A8\uC544\uC788\uB294 \uD568\uC218\uB4E4 (\uD074\uB9AD \uC561\uC158\uB9CC)\r\n\r\n// \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD (\uD655\uC778 \uD31D\uC5C5 \uCC98\uB9AC \uD3EC\uD568) - satRoot \uC2A4\uCF54\uD504\uB85C \uC81C\uD55C\r\n// onAfterConfirmClick: \uD655\uC778 \uBC84\uD2BC \uD074\uB9AD \uC9C1\uD6C4, waitForContentLoad \uC804\uC5D0 \uC2E4\uD589\uB418\uB294 \uCF5C\uBC31 (27\uBC88 \uB4F1 \uD654\uBA74 \uC804\uD658 \uBE60\uB978 \uCF00\uC774\uC2A4\uC5D0\uC11C \uC815\uB2F5 \uCEA1\uCC98\uC6A9)\r\nexport async function clickSubmitWithConfirmation(onAfterConfirmClick) {\r\n  console.log('[SUBMIT] \uC81C\uCD9C \uBC84\uD2BC \uCC3E\uB294 \uC911...');\r\n  \r\n  // SAT root container \uCC3E\uAE30\r\n  const satRoot = findSatRoot();\r\n  if (!satRoot) {\r\n    console.error('[SUBMIT] satRoot not found, \uC81C\uCD9C \uBC84\uD2BC \uCC3E\uAE30 \uC2E4\uD328');\r\n    return false;\r\n  }\r\n  \r\n  // \uC774\uBBF8 \uD655\uC778 \uD31D\uC5C5\uC774 \uC5F4\uB824 \uC788\uB294\uC9C0 \uBA3C\uC800 \uD655\uC778 (\uBAA8\uB4C8 \uC644\uB8CC \uC2DC)\r\n  const modalsFirst = document.querySelectorAll('[role=\"dialog\"], [class*=\"modal\"], [class*=\"dialog\"], [class*=\"cdk-overlay-pane\"]');\r\n  for (const modal of modalsFirst) {\r\n    if (!isElementVisible(modal)) continue;\r\n    const modalButtons = modal.querySelectorAll('button, [role=\"button\"]');\r\n    for (const btn of modalButtons) {\r\n      if (!isElementVisible(btn) || btn.disabled) continue;\r\n      const text = (btn.innerText || btn.textContent || '').trim();\r\n      const ariaLabel = (btn.getAttribute('aria-label') || '').trim();\r\n      if ((text === '\uC81C\uCD9C' || text.includes('Submit') || text === '\uD655\uC778') && !text.includes('\uCDE8\uC18C')) {\r\n        console.log('[SUBMIT] \uC774\uBBF8 \uC5F4\uB9B0 \uD655\uC778 \uD31D\uC5C5\uC5D0\uC11C \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD');\r\n        btn.click();\r\n        if (typeof onAfterConfirmClick === 'function') {\r\n          await onAfterConfirmClick();\r\n        }\r\n        await new Promise(resolve => setTimeout(resolve, 250));\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // \uC81C\uCD9C \uBC84\uD2BC \uD14D\uC2A4\uD2B8 \uD6C4\uBCF4 \uD655\uC7A5 (\uC815\uB2F5 \uD655\uC778/Check/Answer \uD3EC\uD568)\r\n  const SUBMIT_KEYWORDS_KO = ['\uC81C\uCD9C', '\uC815\uB2F5', '\uD655\uC778', '\uCC44\uC810', '\uC815\uB2F5 \uD655\uC778', '\uC815\uB2F5\uD655\uC778', '\uCC44\uC810\uD558\uAE30', '\uC815\uB2F5\uBCF4\uAE30'];\r\n  const SUBMIT_KEYWORDS_EN = ['submit', 'check', 'answer', 'confirm', 'check answer', 'checkanswer', 'show answer', 'view answer'];\r\n  \r\n  // choice \uD074\uB9AD \uD6C4 enable \uB300\uAE30\r\n  await new Promise(resolve => setTimeout(resolve, 15));\r\n  \r\n  // Step 1: satRoot \uC548\uC5D0\uC11C button / [role=\"button\"] \uC804\uBD80 \uC218\uC9D1\r\n  const allButtons = Array.from(satRoot.querySelectorAll('button, [role=\"button\"]'));\r\n  console.log(`[SUBMIT] satRoot \uB0B4\uBD80 \uBC84\uD2BC: ${allButtons.length}\uAC1C`);\r\n  \r\n  // Step 2: visible & not disabled \uD544\uD130\r\n  const visibleButtons = allButtons.filter(b => {\r\n    if (!isElementVisible(b)) return false;\r\n    if (b.disabled) return false;\r\n    // satRoot \uB0B4\uBD80\uC778\uC9C0 \uD655\uC778\r\n    if (!satRoot.contains(b)) return false;\r\n    return true;\r\n  });\r\n  \r\n  console.log(`[DIAG] buttons visible:`, visibleButtons.slice(0, 5).map(b => ({\r\n    text: (b.innerText || b.textContent || '').trim().substring(0, 30),\r\n    ariaLabel: b.getAttribute('aria-label') || 'none',\r\n    testid: b.getAttribute('data-testid') || 'none',\r\n    disabled: b.disabled\r\n  })));\r\n  \r\n  // Step 3: \uD14D\uC2A4\uD2B8 \uD0A4\uC6CC\uB4DC \uC810\uC218\uD654\r\n  const candidates = [];\r\n  for (const btn of visibleButtons) {\r\n    const text = (btn.innerText || btn.textContent || '').trim();\r\n    const ariaLabel = (btn.getAttribute('aria-label') || '').trim();\r\n    const dataTestId = (btn.getAttribute('data-testid') || '').trim();\r\n    const combined = (text + ' ' + ariaLabel).toLowerCase();\r\n    \r\n    let score = 0;\r\n    \r\n    // \uD14D\uC2A4\uD2B8 \uD0A4\uC6CC\uB4DC \uB9E4\uCE6D\r\n    for (const keyword of [...SUBMIT_KEYWORDS_KO, ...SUBMIT_KEYWORDS_EN]) {\r\n      if (text.includes(keyword) || ariaLabel.includes(keyword)) {\r\n        score += 5;\r\n      }\r\n      if (combined.includes(keyword.toLowerCase())) {\r\n        score += 3;\r\n      }\r\n    }\r\n    \r\n    // \uB370\uC774\uD130 \uC18D\uC131 \uC6B0\uC120: data-testid / aria-label \uD3EC\uD568 \uC2DC \uAC00\uC0B0\uC810\r\n    if (dataTestId && (dataTestId.includes('submit') || dataTestId.includes('check') || dataTestId.includes('confirm'))) {\r\n      score += 8;\r\n    }\r\n    if (ariaLabel && (ariaLabel.includes('\uC81C\uCD9C') || ariaLabel.includes('submit') || ariaLabel.includes('check'))) {\r\n      score += 6;\r\n    }\r\n    \r\n    if (score > 0) {\r\n      candidates.push({ button: btn, score, text, ariaLabel, dataTestId });\r\n    }\r\n  }\r\n  \r\n  // \uC810\uC218 \uC21C\uC73C\uB85C \uC815\uB82C\r\n  candidates.sort((a, b) => b.score - a.score);\r\n  \r\n  if (candidates.length === 0) {\r\n    console.error('[SUBMIT] \uC81C\uCD9C \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n    console.error('[DIAG] satRoot snippet:', satRoot?.innerText?.slice(0, 500));\r\n    return false;\r\n  }\r\n  \r\n  const submitButton = candidates[0].button;\r\n  console.log(`[SUBMIT] \uC81C\uCD9C \uBC84\uD2BC \uBC1C\uACAC: \"${candidates[0].text}\" (\uC810\uC218: ${candidates[0].score})`);\r\n  \r\n  // \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD\r\n  console.log('[SUBMIT] \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD');\r\n  submitButton.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n  await new Promise(resolve => setTimeout(resolve, 10));\r\n  submitButton.click();\r\n  await waitForContentLoad(120);\r\n  \r\n  // \uD655\uC778 \uD31D\uC5C5 \uB300\uAE30 \uBC0F \uCC98\uB9AC (satRoot \uB0B4\uBD80 \uB610\uB294 \uBAA8\uB2EC \uB0B4\uBD80\uC5D0\uC11C \uCC3E\uAE30)\r\n  const maxWait = 40; // \uCD5C\uB300 2\uCD08 \uB300\uAE30 (50ms * 40)\r\n  for (let i = 0; i < maxWait; i++) {\r\n    await new Promise(resolve => setTimeout(resolve, 30));\r\n    \r\n    // \uD655\uC778 \uD31D\uC5C5\uC758 \uC81C\uCD9C \uBC84\uD2BC \uCC3E\uAE30 (\uBAA8\uB2EC \uB0B4\uBD80 \uC6B0\uC120)\r\n    const modals = document.querySelectorAll('[role=\"dialog\"], [class*=\"modal\"], [class*=\"dialog\"]');\r\n    let confirmSubmitButton = null;\r\n    \r\n    // \uBAA8\uB2EC \uB0B4\uBD80\uC5D0\uC11C \uCC3E\uAE30\r\n    for (const modal of modals) {\r\n      if (!isElementVisible(modal)) continue;\r\n      const modalButtons = modal.querySelectorAll('button, [role=\"button\"]');\r\n      for (const btn of modalButtons) {\r\n        if (!isElementVisible(btn) || btn.disabled) continue;\r\n        const text = (btn.innerText || btn.textContent || '').trim();\r\n        const ariaLabel = (btn.getAttribute('aria-label') || '').trim();\r\n        if (text.includes('\uC81C\uCD9C') || text.includes('Submit') || text.includes('\uD655\uC778') || \r\n            ariaLabel.includes('\uC81C\uCD9C') || ariaLabel.includes('Submit') || ariaLabel.includes('\uD655\uC778')) {\r\n          confirmSubmitButton = btn;\r\n          break;\r\n        }\r\n      }\r\n      if (confirmSubmitButton) break;\r\n    }\r\n    \r\n    // satRoot \uB0B4\uBD80\uC5D0\uC11C\uB3C4 \uCC3E\uAE30\r\n    if (!confirmSubmitButton) {\r\n      const satRootButtons = satRoot.querySelectorAll('button, [role=\"button\"]');\r\n      for (const btn of satRootButtons) {\r\n        if (!isElementVisible(btn) || btn.disabled) continue;\r\n        const text = (btn.innerText || btn.textContent || '').trim();\r\n        if (text.includes('\uC81C\uCD9C') || text.includes('Submit') || text.includes('\uD655\uC778')) {\r\n          confirmSubmitButton = btn;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    \r\n    if (confirmSubmitButton) {\r\n      console.log('[SUBMIT] \uD655\uC778 \uD31D\uC5C5\uC5D0\uC11C \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD');\r\n      confirmSubmitButton.click();\r\n      if (typeof onAfterConfirmClick === 'function') {\r\n        await onAfterConfirmClick();\r\n      }\r\n      await waitForContentLoad(150);\r\n      return true;\r\n    }\r\n  }\r\n  \r\n  console.warn('[SUBMIT] \uD655\uC778 \uD31D\uC5C5\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. (\uD31D\uC5C5\uC774 \uC5C6\uC744 \uC218\uB3C4 \uC788\uC74C)');\r\n  if (typeof onAfterConfirmClick === 'function') {\r\n    await onAfterConfirmClick();\r\n  }\r\n  return true; // \uD31D\uC5C5\uC774 \uC5C6\uC744 \uC218\uB3C4 \uC788\uC74C\r\n}\r\n\r\n// \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD \uB85C\uC9C1 \uAC15\uD654 (\uB2E4\uC591\uD55C \uC140\uB809\uD130, \uBE44\uD65C\uC131\uD654 \uB300\uAE30, \uBB38\uC81C \uBC88\uD638 \uBCC0\uACBD \uD655\uC778)\r\nexport async function clickNextButtonWithFallback(beforeProblemNum) {\r\n  // \uD074\uB9AD \uC911\uBCF5 \uBC29\uC9C0: unique callId \uC0DD\uC131\r\n  const callId = `next_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n  let clickCount = 0;\r\n  const MAX_CLICKS_PER_CALL = 2; // \uAC19\uC740 callId\uC5D0\uC11C \uCD5C\uB300 2\uBC88\uAE4C\uC9C0 \uD5C8\uC6A9 (UI \uC9C0\uC5F0 \uC2DC \uD3F4\uBC31 \uD074\uB9AD \uD5C8\uC6A9)\r\n  \r\n  console.log(`[NEXT-DEBUG] clickNextButtonWithFallback \uC2DC\uC791 callId=${callId}, beforeProblemNum=${beforeProblemNum}`);\r\n  console.log('[SAT PDF Exporter] [DEBUG] Fail Stage: \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD \uB2E8\uACC4 \uC2DC\uC791');\r\n  const maxRetries = 3;\r\n  let alternativeCandidates = [];\r\n  \r\n  for (let retry = 0; retry < maxRetries; retry++) {\r\n    if (retry > 0) {\r\n      console.log(`[SAT PDF Exporter] \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD \uC7AC\uC2DC\uB3C4 ${retry}/${maxRetries}`);\r\n      await new Promise(resolve => setTimeout(resolve, 80));\r\n    }\r\n    \r\n    // STEP 2: \uC9C4\uD589 \uC0C1\uD669 \uC77D\uAE30 (\uD074\uB9AD \uC804)\r\n    const prevProgress = readProgressNumber();\r\n    console.log(`[SAT-DEBUG] [STEP 2] \uD074\uB9AD \uC804 \uC9C4\uD589 \uC0C1\uD669: ${prevProgress}`);\r\n    \r\n    // \uB2E4\uC74C \uBC84\uD2BC \uCC3E\uAE30 (STEP 1: \uC5C4\uACA9\uD55C \uC120\uD0DD \uC6B0\uC120)\r\n    let nextButton = null;\r\n    \r\n    // \uBC29\uBC95 1: selectNextButton \uC0AC\uC6A9 (\uC5C4\uACA9\uD55C \uD544\uD130\uB9C1)\r\n    nextButton = selectNextButton();\r\n    \r\n    // \uBC29\uBC95 2: findNavigationButton \uC0AC\uC6A9 (\uD3F4\uBC31)\r\n    if (!nextButton) {\r\n      nextButton = findNavigationButton('next', '\uB2E4\uC74C', 'next');\r\n    }\r\n    \r\n    // \uB300\uCCB4 \uD6C4\uBCF4 \uC218\uC9D1 (\uB098\uC911\uC5D0 \uC0AC\uC6A9\uD560 \uC218 \uC788\uB3C4\uB85D)\r\n    if (nextButton && alternativeCandidates.length === 0) {\r\n      const allCandidates = [];\r\n      const allButtons = deepQuerySelectorAll('button, [role=\"button\"], div[role=\"button\"]');\r\n      for (const btn of allButtons) {\r\n        if (!isElementVisible(btn) || btn.disabled) continue;\r\n        const text = (btn.innerText || btn.textContent || '').trim();\r\n        const ariaLabel = (btn.getAttribute('aria-label') || '').trim();\r\n        const dataTestId = (btn.getAttribute('data-testid') || '').trim();\r\n        if ((text.includes('\uB2E4\uC74C') || text.toLowerCase().includes('next') || \r\n             ariaLabel.includes('\uB2E4\uC74C') || ariaLabel.toLowerCase().includes('next') ||\r\n             dataTestId.includes('next')) && btn !== nextButton) {\r\n          allCandidates.push(btn);\r\n        }\r\n      }\r\n      alternativeCandidates = allCandidates.slice(0, 3); // \uC0C1\uC704 3\uAC1C\uB9CC \uC800\uC7A5\r\n      console.log(`[SAT-DEBUG] \uB300\uCCB4 \uD6C4\uBCF4 ${alternativeCandidates.length}\uAC1C \uC218\uC9D1`);\r\n    }\r\n    \r\n    // \uBC29\uBC95 2: XPath\uB85C \uCC3E\uAE30\r\n    if (!nextButton) {\r\n      const xpathSelectors = [\r\n        \"//span[text()='\uB2E4\uC74C']\",\r\n        \"//span[text()='Next']\",\r\n        \"//button[contains(text(), '\uB2E4\uC74C')]\",\r\n        \"//button[contains(text(), 'Next')]\"\r\n      ];\r\n      \r\n      for (const xpath of xpathSelectors) {\r\n        try {\r\n          const result = document.evaluate(xpath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);\r\n          const element = result.singleNodeValue;\r\n          if (element && (element.tagName === 'BUTTON' || element.closest('button'))) {\r\n            nextButton = element.tagName === 'BUTTON' ? element : element.closest('button');\r\n            if (nextButton && nextButton.offsetParent) {\r\n              console.log(`[SAT PDF Exporter] \uB2E4\uC74C \uBC84\uD2BC \uBC1C\uACAC (XPath: ${xpath})`);\r\n              break;\r\n            }\r\n          }\r\n        } catch (e) {\r\n          // XPath \uC2E4\uD328 \uC2DC \uBB34\uC2DC\r\n        }\r\n      }\r\n    }\r\n    \r\n    // \uBC29\uBC95 3: \uD074\uB798\uC2A4\uBA85\uC73C\uB85C \uCC3E\uAE30\r\n    if (!nextButton) {\r\n      const classSelectors = [\r\n        'button.mat-mdc-unelevated-button',\r\n        'button[class*=\"next\"]',\r\n        'button[class*=\"Next\"]',\r\n        'button[aria-label*=\"next\"]',\r\n        'button[aria-label*=\"\uB2E4\uC74C\"]'\r\n      ];\r\n      \r\n      for (const selector of classSelectors) {\r\n        const buttons = document.querySelectorAll(selector);\r\n        for (const btn of buttons) {\r\n          const text = (btn.innerText || btn.textContent || '').trim().toLowerCase();\r\n          if ((text.includes('\uB2E4\uC74C') || text.includes('next')) && btn.offsetParent && !btn.disabled) {\r\n            nextButton = btn;\r\n            console.log(`[SAT PDF Exporter] \uB2E4\uC74C \uBC84\uD2BC \uBC1C\uACAC (\uD074\uB798\uC2A4: ${selector})`);\r\n            break;\r\n          }\r\n        }\r\n        if (nextButton) break;\r\n      }\r\n    }\r\n    \r\n    if (!nextButton) {\r\n      const submitButton = findNavigationButton('submit', '\uC81C\uCD9C', 'submit');\r\n      if (submitButton) {\r\n        console.log('[SAT PDF Exporter] \uC81C\uCD9C \uBC84\uD2BC \uBC1C\uACAC - \uB9C8\uC9C0\uB9C9 \uBB38\uC81C\uC785\uB2C8\uB2E4.');\r\n        return true; // \uC81C\uCD9C \uBC84\uD2BC\uC774\uBA74 \uC131\uACF5\uC73C\uB85C \uAC04\uC8FC\r\n      }\r\n      console.warn(`[SAT PDF Exporter] [DEBUG] Fail Stage: \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD \uB2E8\uACC4 - \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4 (\uC7AC\uC2DC\uB3C4 ${retry + 1}/${maxRetries})`);\r\n      continue;\r\n    }\r\n    \r\n    // \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC73C\uBA74 \uD65C\uC131\uD654\uB420 \uB54C\uAE4C\uC9C0 \uB300\uAE30 (\uAC15\uD654)\r\n    if (nextButton.disabled || nextButton.getAttribute('aria-disabled') === 'true') {\r\n      console.log('[SAT PDF Exporter] \uB2E4\uC74C \uBC84\uD2BC\uC774 \uBE44\uD65C\uC131\uD654\uB428. \uD65C\uC131\uD654 \uB300\uAE30...');\r\n      let waitAttempts = 0;\r\n      const maxWaitAttempts = 30; // \uCD5C\uB300 1.5\uCD08 \uB300\uAE30\r\n      \r\n      while (waitAttempts < maxWaitAttempts && (nextButton.disabled || nextButton.getAttribute('aria-disabled') === 'true')) {\r\n        await new Promise(resolve => setTimeout(resolve, 30));\r\n        waitAttempts++;\r\n        \r\n        // \uBC84\uD2BC\uC744 \uB2E4\uC2DC \uCC3E\uAE30 (DOM\uC774 \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC744 \uC218 \uC788\uC74C)\r\n        if (waitAttempts % 5 === 0) {\r\n          const refreshedButton = findNavigationButton('next', '\uB2E4\uC74C', 'next');\r\n          if (refreshedButton && !refreshedButton.disabled) {\r\n            nextButton = refreshedButton;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      \r\n      if (nextButton.disabled || nextButton.getAttribute('aria-disabled') === 'true') {\r\n        console.log('[SAT PDF Exporter] \uB2E4\uC74C \uBC84\uD2BC\uC774 \uACC4\uC18D \uBE44\uD65C\uC131\uD654\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.');\r\n        // \uB9C8\uC9C0\uB9C9 \uBB38\uC81C\uC77C \uC218 \uC788\uC74C\r\n        const progressState = getProgressState();\r\n        if (progressState && (progressState.match(/\\d+\\s*\\/\\s*27/) || progressState.match(/\\d+\\s*\\/\\s*22/)) && (progressState.includes('27') || progressState.includes('22'))) {\r\n          console.log('[SAT PDF Exporter] \uB9C8\uC9C0\uB9C9 \uBB38\uC81C \uB3C4\uB2EC (progress:', progressState, ')');\r\n          return true;\r\n        }\r\n        continue;\r\n      }\r\n    }\r\n    \r\n    // \uBB38\uC81C \uBC88\uD638 \uBC0F \uC2DC\uADF8\uB2C8\uCC98 \uC800\uC7A5 (\uC131\uACF5 \uD310\uC815\uC6A9)\r\n    const beforeSignature = getQuestionSignature();\r\n    const beforeProgress = getProgressState();\r\n    \r\n    // \uD3F4\uBC31 \uC804\uB7B5 1: scrollIntoView \uD6C4 \uD074\uB9AD\r\n    try {\r\n      nextButton.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n      await new Promise(resolve => setTimeout(resolve, 30));\r\n    } catch (e) {\r\n      console.warn('[SAT-DEBUG] scrollIntoView \uC2E4\uD328, \uC804\uCCB4 \uC2A4\uD06C\uB864 \uC2DC\uB3C4:', e);\r\n      // scrollIntoView \uC2E4\uD328 \uC2DC \uC804\uCCB4 \uC2A4\uD06C\uB864\r\n      window.scrollTo(0, document.body.scrollHeight);\r\n      await new Promise(resolve => setTimeout(resolve, 80));\r\n      window.scrollTo(0, 0);\r\n      await new Promise(resolve => setTimeout(resolve, 80));\r\n    }\r\n    \r\n    console.log(`[SAT-DEBUG] \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD \uC2DC\uB3C4 (${beforeProblemNum} \u2192 \uB2E4\uC74C) callId=${callId}, clickCount=${clickCount}`);\r\n    \r\n    // \uD074\uB9AD \uC911\uBCF5 \uBC29\uC9C0: \uAC19\uC740 callId\uC5D0\uC11C \uC774\uBBF8 \uD074\uB9AD\uD588\uC73C\uBA74 \uC2A4\uD0B5\r\n    if (clickCount >= MAX_CLICKS_PER_CALL) {\r\n      console.error(`[NEXT-DEBUG] \u2717 \uD074\uB9AD \uC911\uBCF5 \uBC29\uC9C0: callId=${callId}\uC5D0\uC11C \uC774\uBBF8 ${clickCount}\uBC88 \uD074\uB9AD\uD568 (\uCD5C\uB300 ${MAX_CLICKS_PER_CALL}\uBC88)`);\r\n      console.warn(`[NEXT-DEBUG] \uD074\uB9AD \uD55C\uB3C4 \uB3C4\uB2EC\uB85C \uC774\uBC88 \uD638\uCD9C\uC744 \uC885\uB8CC\uD558\uACE0 \uC0C1\uC704 \uB8E8\uD504\uC5D0\uC11C \uC7AC\uC2DC\uB3C4\uD569\uB2C8\uB2E4. callId=${callId}`);\r\n      return false;\r\n    }\r\n    \r\n    // \uB2E8\uC77C \uD074\uB9AD\uB9CC \uC218\uD589 (\uC911\uBCF5 \uD074\uB9AD \uBC29\uC9C0)\r\n    // \uAE30\uBCF8: nextButton.click() 1\uBC88\uB9CC \uC0AC\uC6A9\r\n    // \uD3F4\uBC31: dispatchEvent \uBC29\uC2DD\uC740 \uC131\uACF5 \uD310\uC815 \uC2E4\uD328 \uC2DC\uC5D0\uB9CC \uC2DC\uB3C4\r\n    let clickPerformed = false;\r\n    const clickTimestamp = Date.now();\r\n    \r\n    try {\r\n      // 1\uCC28: \uAE30\uBCF8 click() \uBA54\uC11C\uB4DC \uC0AC\uC6A9 (\uB2E8\uC77C \uD074\uB9AD)\r\n      console.log(`[NEXT-DEBUG] \uD074\uB9AD \uC9C1\uC804 timestamp=${clickTimestamp}, callId=${callId}`);\r\n      nextButton.click();\r\n      clickCount++;\r\n      clickPerformed = true;\r\n      console.log(`[NEXT-DEBUG] \u2713 Next \uBC84\uD2BC \uD074\uB9AD \uC644\uB8CC: click() \uBA54\uC11C\uB4DC \uC0AC\uC6A9, callId=${callId}, clickCount=${clickCount}`);\r\n      await new Promise(resolve => setTimeout(resolve, 120)); // \uD074\uB9AD \uD6C4 UI \uBC18\uC601 \uB300\uAE30(\uACFC\uC18D \uD074\uB9AD \uBC29\uC9C0)\r\n    } catch (e) {\r\n      console.warn('[SAT-DEBUG] click() \uBA54\uC11C\uB4DC \uC2E4\uD328, dispatchEvent \uD3F4\uBC31 \uC2DC\uB3C4:', e);\r\n      clickPerformed = false;\r\n    }\r\n    \r\n    // \uC131\uACF5 \uD310\uC815\uC744 \uBA3C\uC800 \uD655\uC778 (click()\uC774 \uC2E4\uD328\uD588\uAC70\uB098 \uD310\uC815\uC774 \uC2E4\uD328\uD558\uBA74 \uD3F4\uBC31 \uC2DC\uB3C4)\r\n    // \uC131\uACF5 \uD310\uC815\uC740 \uC544\uB798 \uB8E8\uD504\uC5D0\uC11C \uC218\uD589\uB418\uBBC0\uB85C, \uC5EC\uAE30\uC11C\uB294 \uD074\uB9AD\uB9CC \uC218\uD589\r\n    \r\n    // STEP 2: \uC9C4\uD589 \uC0C1\uD669 \uB378\uD0C0 +1 \uD655\uC778 \uC548\uC804\uC7A5\uCE58\r\n    let attempts = 0;\r\n    const maxAttempts = 25; // \uCD5C\uB300 5\uCD08 \uB300\uAE30\r\n    let success = false;\r\n    let progressDelta = null;\r\n    \r\n    // click() \uBA54\uC11C\uB4DC\uB85C \uD074\uB9AD\uD55C \uACBD\uC6B0 \uC131\uACF5 \uD310\uC815 \uB8E8\uD504 \uC2DC\uC791\r\n    while (attempts < maxAttempts && !success && clickPerformed) {\r\n      await new Promise(resolve => setTimeout(resolve, 80));\r\n      attempts++;\r\n      \r\n      // STEP 2: \uC9C4\uD589 \uC0C1\uD669 \uC77D\uAE30 (\uD074\uB9AD \uD6C4)\r\n      const nextProgress = readProgressNumber();\r\n      if (prevProgress !== null && nextProgress !== null) {\r\n        progressDelta = nextProgress - prevProgress;\r\n        console.log(`[SAT-DEBUG] [STEP 2] \uC9C4\uD589 \uC0C1\uD669 \uB378\uD0C0: ${prevProgress} \u2192 ${nextProgress} (\uB378\uD0C0: ${progressDelta})`);\r\n        \r\n        // \uB378\uD0C0\uAC00 +1\uC774 \uC544\uB2C8\uBA74 \uC624\uB958\r\n        if (progressDelta !== 1) {\r\n          console.error(`[SAT-DEBUG] [STEP 2] ERROR: \uC608\uC0C1\uCE58 \uBABB\uD55C \uC9C4\uD589 \uC0C1\uD669 \uC810\uD504! ${prevProgress} \u2192 ${nextProgress} (\uB378\uD0C0: ${progressDelta}, \uC608\uC0C1: +1)`);\r\n          \r\n          // \uB300\uCCB4 \uD6C4\uBCF4 \uC2DC\uB3C4 (\uD55C \uBC88\uB9CC)\r\n          if (alternativeCandidates.length > 0 && retry === 0) {\r\n            console.log(`[SAT-DEBUG] [STEP 2] \uB300\uCCB4 \uD6C4\uBCF4 \uC2DC\uB3C4 (${alternativeCandidates.length}\uAC1C)`);\r\n            const altButton = alternativeCandidates[0];\r\n            alternativeCandidates = alternativeCandidates.slice(1); // \uC0AC\uC6A9\uD55C \uD6C4\uBCF4 \uC81C\uAC70\r\n            \r\n            try {\r\n              altButton.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n              await new Promise(resolve => setTimeout(resolve, 120));\r\n              altButton.click();\r\n              await new Promise(resolve => setTimeout(resolve, 80));\r\n              \r\n              const altNextProgress = readProgressNumber();\r\n              if (altNextProgress !== null && prevProgress !== null) {\r\n                const altDelta = altNextProgress - prevProgress;\r\n                console.log(`[SAT-DEBUG] [STEP 2] \uB300\uCCB4 \uD6C4\uBCF4 \uACB0\uACFC: ${prevProgress} \u2192 ${altNextProgress} (\uB378\uD0C0: ${altDelta})`);\r\n                \r\n                if (altDelta === 1) {\r\n                  console.log(`[SAT-DEBUG] [STEP 2] \uB300\uCCB4 \uD6C4\uBCF4 \uC131\uACF5! \uB378\uD0C0 +1 \uD655\uC778`);\r\n                  success = true;\r\n                  break;\r\n                }\r\n              }\r\n            } catch (e) {\r\n              console.warn(`[SAT-DEBUG] [STEP 2] \uB300\uCCB4 \uD6C4\uBCF4 \uD074\uB9AD \uC2E4\uD328:`, e);\r\n            }\r\n          }\r\n          \r\n          // \uB378\uD0C0\uAC00 +1\uC774 \uC544\uB2C8\uACE0 \uB300\uCCB4 \uD6C4\uBCF4\uB3C4 \uC2E4\uD328\uD558\uBA74 \uACBD\uACE0\uD558\uACE0 \uACC4\uC18D \uC9C4\uD589\r\n          if (!success) {\r\n            console.error(`[SAT-DEBUG] [STEP 2] \uC9C4\uD589 \uC0C1\uD669 \uC810\uD504\uAC00 \uACC4\uC18D\uB428. PDF \uC0DD\uC131\uC740 \uACC4\uC18D\uD558\uB418 \uACBD\uACE0 \uD45C\uC2DC \uD544\uC694.`);\r\n            // \uACBD\uACE0\uB294 \uB098\uC911\uC5D0 \uD45C\uC2DC\uD558\uACE0, \uC5EC\uAE30\uC11C\uB294 \uC131\uACF5\uC73C\uB85C \uAC04\uC8FC (\uCD5C\uC18C\uD55C \uC9C4\uD589\uC740 \uD588\uC73C\uBBC0\uB85C)\r\n            if (progressDelta > 0) {\r\n              success = true; // \uCD5C\uC18C\uD55C \uC9C4\uD589\uC740 \uD588\uC73C\uBBC0\uB85C \uC131\uACF5\uC73C\uB85C \uAC04\uC8FC\r\n              break;\r\n            }\r\n          }\r\n        } else {\r\n          // \uB378\uD0C0\uAC00 +1\uC774\uBA74 \uC131\uACF5\r\n          success = true;\r\n          console.log(`[SAT-DEBUG] [STEP 2] \uC131\uACF5: \uC9C4\uD589 \uC0C1\uD669 \uB378\uD0C0 +1 \uD655\uC778\uB428`);\r\n          break;\r\n        }\r\n      }\r\n      \r\n      // \uBC29\uBC95 1: \uBB38\uC81C \uBC88\uD638 \uBCC0\uACBD \uD655\uC778 (\uAC15\uD654)\r\n      const afterProblemNum = getCurrentProblemNumber();\r\n      \r\n      // \uC911\uC694: progress\uAC00 \uAC10\uC18C\uD558\uBA74 detection bug\uB85C \uCC98\uB9AC (\uC608: 4 \u2192 1)\r\n      if (afterProblemNum < beforeProblemNum && afterProblemNum > 0) {\r\n        console.warn(`[SAT PDF Exporter] \uBB38\uC81C \uBC88\uD638\uAC00 \uAC10\uC18C\uD568: ${beforeProblemNum} \u2192 ${afterProblemNum} (detection bug \uC758\uC2EC)`);\r\n        // DOM \uC694\uC18C\uC5D0\uC11C \uB2E4\uC2DC \uC77D\uAE30 \uC2DC\uB3C4\r\n        await new Promise(resolve => setTimeout(resolve, 120));\r\n        const retryProblemNum = getCurrentProblemNumber();\r\n        if (retryProblemNum > afterProblemNum && retryProblemNum > beforeProblemNum) {\r\n          success = true;\r\n          console.log(`[SAT PDF Exporter] \uC7AC\uC2DC\uB3C4 \uD6C4 \uBB38\uC81C \uBC88\uD638 \uD655\uC778: ${beforeProblemNum} \u2192 ${retryProblemNum}`);\r\n          break;\r\n        }\r\n        // \uC5EC\uC804\uD788 \uAC10\uC18C\uD558\uBA74 \uC2E4\uD328\uB85C \uCC98\uB9AC\r\n        continue;\r\n      }\r\n      \r\n      // progress \uBCC0\uD654 \uAC80\uC99D \uAC15\uD654: N+1 \uD655\uC778, \uC810\uD504 \uC2DC \uC989\uC2DC \uACBD\uACE0 \uBC0F \uC911\uB2E8\r\n      if (afterProblemNum === beforeProblemNum + 1) {\r\n        success = true;\r\n        console.log(`[SAT PDF Exporter] \u2713 \uBB38\uC81C \uBC88\uD638 \uC815\uD655\uD788 +1 \uC99D\uAC00 \uD655\uC778: ${beforeProblemNum} \u2192 ${afterProblemNum}`);\r\n        console.log('[SAT PDF Exporter] [DEBUG] Fail Stage: \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD \uB2E8\uACC4 - \uC131\uACF5');\r\n        break;\r\n      } else if (afterProblemNum > beforeProblemNum + 1) {\r\n        // \uC810\uD504 \uBC1C\uC0DD! \uC989\uC2DC \uACBD\uACE0 \uBC0F \uC911\uB2E8\r\n        const jumpSize = afterProblemNum - beforeProblemNum;\r\n        console.error(`[BUG] \u2717 progress jumped ${beforeProblemNum}\u2192${afterProblemNum} (jump size: +${jumpSize}, expected: +1)`);\r\n        console.error(`[BUG] \uBC29\uAE08 \uD074\uB9AD\uD55C \uBC84\uD2BC \uC815\uBCF4:`, {\r\n          callId,\r\n          clickTimestamp,\r\n          clickCount,\r\n          beforeProblemNum,\r\n          afterProblemNum,\r\n          jumpSize,\r\n          selectedButton: nextButton ? {\r\n            text: (nextButton.innerText || nextButton.textContent || '').trim(),\r\n            ariaLabel: nextButton.getAttribute('aria-label'),\r\n            dataTestId: nextButton.getAttribute('data-testid'),\r\n            outerHTML: nextButton.outerHTML.substring(0, 200)\r\n          } : null\r\n        });\r\n        \r\n        // \uC810\uD504 \uBC1C\uC0DD \uC2DC \uC989\uC2DC \uC911\uB2E8 (throw)\r\n        throw new Error(`[BUG] Progress jump detected: ${beforeProblemNum} \u2192 ${afterProblemNum} (expected: ${beforeProblemNum + 1}). callId=${callId}`);\r\n      } else if (afterProblemNum !== beforeProblemNum && afterProblemNum > beforeProblemNum) {\r\n        // +1\uC774 \uC544\uB2C8\uC9C0\uB9CC \uC99D\uAC00\uB294 \uD588\uC74C (TEMP \uBAA8\uB4DC\uAC00 \uC544\uB2D0 \uB54C\uB9CC \uD5C8\uC6A9)\r\n        console.warn(`[SAT PDF Exporter] \uBB38\uC81C \uBC88\uD638 \uBCC0\uACBD \uD655\uC778: ${beforeProblemNum} \u2192 ${afterProblemNum} (\uC815\uD655\uD788 +1 \uC544\uB2D8)`);\r\n        // TEMP \uBAA8\uB4DC\uAC00 \uC544\uB2C8\uBA74 \uC131\uACF5\uC73C\uB85C \uAC04\uC8FC\r\n        if (typeof TEMP_MODE === 'undefined' || !TEMP_MODE) {\r\n          success = true;\r\n          console.log('[SAT PDF Exporter] [DEBUG] Fail Stage: \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD \uB2E8\uACC4 - \uC131\uACF5 (TEMP \uBAA8\uB4DC \uC544\uB2D8)');\r\n          break;\r\n        } else {\r\n          // TEMP \uBAA8\uB4DC\uBA74 \uC810\uD504\uB85C \uAC04\uC8FC\uD558\uACE0 \uC7AC\uC2DC\uB3C4\r\n          console.warn(`[SAT PDF Exporter] TEMP \uBAA8\uB4DC: \uC815\uD655\uD788 +1\uC774 \uC544\uB2C8\uBBC0\uB85C \uC7AC\uC2DC\uB3C4`);\r\n          continue;\r\n        }\r\n      }\r\n      \r\n      // \uBC29\uBC95 2: Progress \uC0C1\uD0DC \uBCC0\uACBD \uD655\uC778\r\n      const afterProgress = getProgressState();\r\n      if (afterProgress !== beforeProgress && afterProgress) {\r\n        const beforeMatch = beforeProgress ? beforeProgress.match(/(\\d+)\\s*\\/\\s*(\\d+)/) : null;\r\n        const afterMatch = afterProgress.match(/(\\d+)\\s*\\/\\s*(\\d+)/);\r\n        \r\n        if (beforeMatch && afterMatch) {\r\n          const beforeNum = parseInt(beforeMatch[1]);\r\n          const afterNum = parseInt(afterMatch[1]);\r\n          if (afterNum > beforeNum) {\r\n            success = true;\r\n            console.log(`[SAT PDF Exporter] Progress \uBCC0\uACBD \uD655\uC778: ${beforeProgress} \u2192 ${afterProgress}`);\r\n            console.log('[SAT PDF Exporter] [DEBUG] Fail Stage: \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD \uB2E8\uACC4 - \uC131\uACF5 (Progress \uBCC0\uACBD)');\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      \r\n      // \uBC29\uBC95 3: \uBB38\uC81C \uC2DC\uADF8\uB2C8\uCC98 \uBCC0\uACBD \uD655\uC778\r\n      const afterSignature = getQuestionSignature();\r\n      if (afterSignature !== beforeSignature && afterSignature.length > 0 && beforeSignature.length > 0) {\r\n        success = true;\r\n        console.log(`[SAT PDF Exporter] \uBB38\uC81C \uC2DC\uADF8\uB2C8\uCC98 \uBCC0\uACBD \uD655\uC778: ${beforeSignature.substring(0, 20)}... \u2192 ${afterSignature.substring(0, 20)}...`);\r\n        console.log('[SAT PDF Exporter] [DEBUG] Fail Stage: \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD \uB2E8\uACC4 - \uC131\uACF5 (\uC2DC\uADF8\uB2C8\uCC98 \uBCC0\uACBD)');\r\n        break;\r\n      }\r\n      \r\n      // \uBC29\uBC95 4: next \uBC84\uD2BC \uC0C1\uD0DC \uBCC0\uACBD \uD655\uC778 (disabled \u2192 enabled)\r\n      const currentNextButton = findNavigationButton('next', '\uB2E4\uC74C', 'next');\r\n      if (currentNextButton && !currentNextButton.disabled && \r\n          (nextButton.disabled || nextButton.getAttribute('aria-disabled') === 'true')) {\r\n        // \uBC84\uD2BC\uC774 \uD65C\uC131\uD654\uB418\uC5C8\uC9C0\uB9CC \uC544\uC9C1 \uBB38\uC81C\uAC00 \uC548 \uBC14\uB00C\uC5C8\uC744 \uC218 \uC788\uC74C\r\n        // \uC870\uAE08 \uB354 \uB300\uAE30\r\n        await new Promise(resolve => setTimeout(resolve, 250));\r\n        const finalProblemNum = getCurrentProblemNumber();\r\n        if (finalProblemNum !== beforeProblemNum && finalProblemNum > beforeProblemNum) {\r\n          success = true;\r\n          console.log(`[SAT PDF Exporter] next \uBC84\uD2BC \uD65C\uC131\uD654 \uD6C4 \uBB38\uC81C \uBC88\uD638 \uBCC0\uACBD: ${beforeProblemNum} \u2192 ${finalProblemNum}`);\r\n          console.log('[SAT PDF Exporter] [DEBUG] Fail Stage: \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD \uB2E8\uACC4 - \uC131\uACF5 (\uBC84\uD2BC \uD65C\uC131\uD654)');\r\n          break;\r\n        }\r\n      }\r\n      \r\n      attempts++;\r\n    }\r\n    \r\n    // Next\uB294 \uC808\uB300 \uD55C \uB8E8\uD504\uC5D0\uC11C 1\uD68C\uB9CC \uC2E4\uD589 (fallback dispatchEvent \uC81C\uAC70)\r\n    // click()\uC774 \uC2E4\uD328\uD558\uBA74 \uC7AC\uC2DC\uB3C4 \uB8E8\uD504\uB85C \uB118\uC5B4\uAC10 (double-click \uBC29\uC9C0)\r\n    \r\n    if (success) {\r\n      return true;\r\n    }\r\n    \r\n    // \uC2E4\uD328 \uC2DC \uB2E4\uC74C \uD3F4\uBC31 \uC2DC\uB3C4\r\n    if (retry < maxRetries - 1) {\r\n      console.warn(`[SAT PDF Exporter] [DEBUG] Fail Stage: \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD \uB2E8\uACC4 - \uC7AC\uC2DC\uB3C4 \uC608\uC815 (${retry + 1}/${maxRetries})`);\r\n    }\r\n  }\r\n  \r\n  // \uBAA8\uB4E0 \uC7AC\uC2DC\uB3C4 \uC2E4\uD328\r\n  console.error('[SAT PDF Exporter] [DEBUG] Fail Stage: \uB2E4\uC74C \uBC84\uD2BC \uD074\uB9AD \uB2E8\uACC4 - \uCD5C\uC885 \uC2E4\uD328 (\uBAA8\uB4E0 \uD3F4\uBC31 \uC2DC\uB3C4 \uC644\uB8CC)');\r\n  return false;\r\n}\r\n\r\n// \uC120\uC9C0 \uAC15\uC81C \uD074\uB9AD (Interaction \uAC15\uD654) - extractChoices \uACB0\uACFC \uC7AC\uC0AC\uC6A9\r\nexport async function clickFirstChoice(sectionType = 'reading') {\r\n  console.log('[CHOICE] \uC120\uC9C0 \uD074\uB9AD \uB2E8\uACC4 \uC2DC\uC791');\r\n  \r\n  // \uC218\uD559 \uC139\uC158 \uC608\uC678 \uCC98\uB9AC: \uC8FC\uAD00\uC2DD \uC785\uB825\uCC3D \uCD5C\uC6B0\uC120 \uD0D0\uC0C9\r\n  if (sectionType === 'math') {\r\n    console.log('[SAT-DEBUG] \uC218\uD559 \uC139\uC158 - \uC8FC\uAD00\uC2DD \uC785\uB825\uCC3D \uC6B0\uC120 \uD0D0\uC0C9');\r\n    // \uC8FC\uAD00\uC2DD \uC785\uB825\uCC3D \uCC3E\uAE30 (Shadow DOM \uD3EC\uD568) - \"\uC5EC\uAE30\uC5D0 \uC785\uB825\uD558\uC138\uC694\" \uB4F1 \uB2E4\uC591\uD55C placeholder \uC9C0\uC6D0\r\n    const combinedSel = 'input[type=\"number\"], input[type=\"text\"][inputmode=\"numeric\"], input[type=\"text\"][pattern*=\"[0-9]\"], input[placeholder*=\"\uC785\uB825\"], input[placeholder*=\"\uC5EC\uAE30\uC5D0\"], input[placeholder*=\"Enter\"], textarea[placeholder*=\"\uC785\uB825\"], textarea[placeholder*=\"\uC5EC\uAE30\uC5D0\"], input[type=\"text\"], textarea';\r\n    const allInputs = deepQuerySelectorAll(combinedSel, document.body);\r\n    // \uCC44\uD305/\uBA54\uC2DC\uC9C0 \uC785\uB825\uCC3D \uC81C\uC678, \uBB38\uC81C \uC601\uC5ED \uB610\uB294 placeholder \uC788\uB294 \uC785\uB825 \uC6B0\uC120\r\n    const numberInputs = allInputs.filter(inp => {\r\n      const plc = (inp.getAttribute('placeholder') || '').toLowerCase();\r\n      const isChatInput = plc.includes('message') || plc.includes('chat') || plc.includes('\uBA54\uC2DC\uC9C0') || inp.closest('[class*=\"chat-input\"], [class*=\"message-input\"]');\r\n      if (isChatInput) return false;\r\n      return true;\r\n    });\r\n    for (const input of numberInputs) {\r\n      if (!isElementVisible(input) || input.disabled) continue;\r\n      \r\n      console.log('[SAT-DEBUG] \uC218\uD559 \uC8FC\uAD00\uC2DD \uBB38\uC81C \uAC10\uC9C0 - \uC22B\uC790 \uC785\uB825');\r\n      \r\n      // \uD3EC\uCEE4\uC2A4 \uD6C4 \uC9C0\uC5F0 (\uC218\uD559 \uC8FC\uAD00\uC2DD \uC785\uB825 \uC9C0\uC5F0)\r\n      input.focus();\r\n      await new Promise(resolve => setTimeout(resolve, 100));\r\n      \r\n      // \uAC12 \uC785\uB825 (\uBCF4\uAC15)\r\n      input.value = '1';\r\n      \r\n      // input \uC774\uBCA4\uD2B8\uB97C \uBC18\uB4DC\uC2DC \uBA3C\uC800 \uD638\uCD9C (\uAC12\uC774 \uC548 \uB4E4\uC5B4\uAC00\uB294 \uACBD\uC6B0 \uBC29\uC9C0)\r\n      input.dispatchEvent(new Event('input', { bubbles: true, cancelable: true }));\r\n      await new Promise(resolve => setTimeout(resolve, 30));\r\n      \r\n      // \uAC12\uC774 \uC2E4\uC81C\uB85C \uB4E4\uC5B4\uAC14\uB294\uC9C0 \uD655\uC778\r\n      if (input.value !== '1') {\r\n        console.warn('[SAT-DEBUG] \uAC12\uC774 \uC548 \uB4E4\uC5B4\uAC10, \uC7AC\uC2DC\uB3C4');\r\n        input.value = '1';\r\n        input.dispatchEvent(new Event('input', { bubbles: true, cancelable: true }));\r\n        await new Promise(resolve => setTimeout(resolve, 30));\r\n      }\r\n      \r\n      // change, blur \uC774\uBCA4\uD2B8 \uBC1C\uC0DD\r\n      input.dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\r\n      await new Promise(resolve => setTimeout(resolve, 30));\r\n      \r\n      input.dispatchEvent(new Event('blur', { bubbles: true, cancelable: true }));\r\n      await new Promise(resolve => setTimeout(resolve, 30));\r\n      \r\n      // \uCD94\uAC00\uB85C keydown, keyup \uC774\uBCA4\uD2B8\uB3C4 \uBC1C\uC0DD (\uC77C\uBD80 UI\uAC00 \uC774\uB97C \uC694\uAD6C\uD560 \uC218 \uC788\uC74C)\r\n      input.dispatchEvent(new KeyboardEvent('keydown', { key: '1', bubbles: true, cancelable: true }));\r\n      await new Promise(resolve => setTimeout(resolve, 15));\r\n      \r\n      input.dispatchEvent(new KeyboardEvent('keyup', { key: '1', bubbles: true, cancelable: true }));\r\n      await new Promise(resolve => setTimeout(resolve, 15));\r\n      \r\n      console.log('[SAT-DEBUG] \uC218\uD559 \uC8FC\uAD00\uC2DD \uC785\uB825 \uC644\uB8CC: value =', input.value);\r\n      return true;\r\n    }\r\n  }\r\n  \r\n  // ============================================================================\r\n  // extractChoices \uACB0\uACFC \uC7AC\uC0AC\uC6A9 (\uAC19\uC740 \uD6C4\uBCF4 \uB9AC\uC2A4\uD2B8\uB85C \uCC3E\uAE30+\uD074\uB9AD \uC77C\uC6D0\uD654)\r\n  // ============================================================================\r\n  const { extractChoices } = await import('../dom/extract.js');\r\n  console.log('[CHOICE] extractChoices() \uD638\uCD9C\uD558\uC5EC \uC120\uD0DD\uC9C0 \uD6C4\uBCF4 \uAC00\uC838\uC624\uAE30...');\r\n  \r\n  // extractChoices\uB294 document.body\uB97C container\uB85C \uBC1B\uC544\uC11C \uC804\uCCB4 \uD0D0\uC0C9\r\n  const extractedChoices = extractChoices(document.body);\r\n  console.log(`[CHOICE] extractChoices \uACB0\uACFC: ${extractedChoices.length}\uAC1C \uC120\uD0DD\uC9C0 \uBC1C\uACAC`);\r\n  \r\n  if (extractedChoices.length === 0) {\r\n    console.error('[CHOICE] extractChoices\uAC00 \uC120\uD0DD\uC9C0\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.');\r\n    return false;\r\n  }\r\n  \r\n  // extractChoices \uACB0\uACFC\uB97C candidates\uB85C \uBCC0\uD658\r\n  // \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31 \uD6C4\uBCF4\uB294 \uC120\uD0DD \uC5EC\uBD80\uB97C \uC54C \uC218 \uC5C6\uC73C\uBBC0\uB85C \uBB34\uC870\uAC74 \uD074\uB9AD \uAC00\uB2A5\uD55C \uAC83\uC73C\uB85C \uCC98\uB9AC\r\n  const candidates = extractedChoices\r\n    .filter(choice => {\r\n      const el = choice.element;\r\n      if (!el || !isElementVisible(el) || el.disabled) return false;\r\n      \r\n      // \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31(source === '\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31' \uB610\uB294 priority === 5)\uC740 \uC120\uD0DD \uC5EC\uBD80 \uCCB4\uD06C \uC2A4\uD0B5\r\n      const isTextFallback = choice.source === '\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31' || choice.priority === 5;\r\n      \r\n      if (isTextFallback) {\r\n        // \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31\uC740 \uBB34\uC870\uAC74 \uD074\uB9AD \uAC00\uB2A5\uD55C \uAC83\uC73C\uB85C \uCC98\uB9AC\r\n        console.log(`[CHOICE] \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31 \uD6C4\uBCF4 ${choice.label}: \uC120\uD0DD \uC5EC\uBD80 \uCCB4\uD06C \uC2A4\uD0B5 (\uBB34\uC870\uAC74 \uD074\uB9AD)`);\r\n        return true;\r\n      }\r\n      \r\n      // \uAD6C\uC870\uC801 \uC120\uD0DD\uC9C0\uB294 \uC120\uD0DD \uC5EC\uBD80 \uCCB4\uD06C\r\n      const isSelected = el.getAttribute('aria-checked') === 'true' ||\r\n                        el.getAttribute('aria-selected') === 'true' ||\r\n                        (el.className || '').includes('selected') ||\r\n                        (el.className || '').includes('checked');\r\n      \r\n      if (isSelected) {\r\n        console.log(`[CHOICE] \uC120\uD0DD\uC9C0 ${choice.label}\uB294 \uC774\uBBF8 \uC120\uD0DD\uB428 (\uC2A4\uD0B5)`);\r\n        return false;\r\n      }\r\n      \r\n      return true;\r\n    })\r\n    .map(choice => ({\r\n      element: choice.element,\r\n      letter: choice.label,\r\n      text: choice.text,\r\n      source: choice.source,\r\n      isTextFallback: choice.source === '\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31' || choice.priority === 5\r\n    }));\r\n  \r\n  if (candidates.length === 0) {\r\n    console.error('[CHOICE] \uC120\uD0DD\uC9C0 \uD6C4\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n    return false;\r\n  }\r\n  \r\n  console.log(`[CHOICE] candidates count=${candidates.length}`);\r\n  console.log(`[DIAG] choices candidates top5:`, candidates.slice(0, 5).map(c => ({\r\n    text: c.text.substring(0, 30),\r\n    ariaChecked: c.element.getAttribute('aria-checked'),\r\n    role: c.element.getAttribute('role'),\r\n    rect: c.element.getBoundingClientRect()\r\n  })));\r\n  \r\n  // \uD074\uB9AD \uD0C0\uAC9F \uACB0\uC815 \uADDC\uCE59: \uAC00\uC7A5 \uC548\uCABD\uC774 \uC544\uB2C8\uB77C \uC0AC\uC6A9\uC790 \uD074\uB9AD \uAC00\uB2A5\uD55C \uB798\uD37C \uC120\uD0DD\r\n  const clickTargets = candidates.map(candidate => {\r\n    const el = candidate.element;\r\n    // closest\uB85C \uD074\uB9AD \uAC00\uB2A5\uD55C \uB798\uD37C \uCC3E\uAE30\r\n    const clickableWrapper = el.closest('button, [role=\"radio\"], [role=\"option\"], label, div[onclick], div[tabindex]');\r\n    const target = clickableWrapper || el;\r\n    \r\n    // \uD074\uB9AD \uAC00\uB2A5 \uC5EC\uBD80 \uD655\uC778\r\n    const hasOnclick = target.hasAttribute('onclick');\r\n    const hasTabindex = target.getAttribute('tabindex') !== null && parseInt(target.getAttribute('tabindex')) >= 0;\r\n    const hasAriaChecked = target.getAttribute('aria-checked') !== null || target.getAttribute('aria-selected') !== null;\r\n    const isStandardClickable = hasOnclick || hasTabindex || hasAriaChecked || target.tagName === 'BUTTON' || target.tagName === 'LABEL';\r\n    const isClickable = isStandardClickable || (candidate.isTextFallback && el && el.offsetParent);\r\n    \r\n    return {\r\n      element: target,\r\n      original: el,\r\n      letter: candidate.letter,\r\n      text: candidate.text,\r\n      isClickable\r\n    };\r\n  }).filter(c => c.isClickable);\r\n  \r\n  if (clickTargets.length === 0) {\r\n    console.error('[CHOICE] \uD074\uB9AD \uAC00\uB2A5\uD55C \uD0C0\uAC9F\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n    return false;\r\n  }\r\n  \r\n  // \uCCAB \uBC88\uC9F8 \uC120\uD0DD\uC9C0 \uD074\uB9AD \uC2DC\uB3C4 (A \uC6B0\uC120, \uC5C6\uC73C\uBA74 \uCCAB \uBC88\uC9F8)\r\n  const firstChoice = clickTargets.find(c => c.letter === 'A') || clickTargets[0];\r\n  const targetElement = firstChoice.element;\r\n  \r\n  console.log(`[CHOICE] picked candidate text=\"${firstChoice.text.substring(0, 30)}\", letter=${firstChoice.letter}`);\r\n  \r\n  // \uD074\uB9AD \uC804 \uC0C1\uD0DC \uD655\uC778 (className \uC911\uC2EC)\r\n  const beforeClass = targetElement.className;\r\n  const beforeAriaDisabled = targetElement.getAttribute('aria-disabled');\r\n  const beforeDisabled = targetElement.disabled;\r\n  console.log(`[CHOICE] state before:`, {\r\n    className: beforeClass,\r\n    ariaDisabled: beforeAriaDisabled,\r\n    disabled: beforeDisabled\r\n  });\r\n  \r\n  // \uD074\uB9AD \uC2DC\uD000\uC2A4: scrollIntoView \u2192 pointerdown \u2192 mousedown \u2192 mouseup \u2192 click\r\n  try {\r\n    targetElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n        await new Promise(resolve => setTimeout(resolve, 30));\r\n    \r\n    // pointerdown\r\n    targetElement.dispatchEvent(new PointerEvent('pointerdown', {\r\n      bubbles: true,\r\n      cancelable: true,\r\n      pointerId: 1\r\n    }));\r\n    await new Promise(resolve => setTimeout(resolve, 10));\r\n    \r\n    // mousedown\r\n    targetElement.dispatchEvent(new MouseEvent('mousedown', {\r\n      bubbles: true,\r\n      cancelable: true,\r\n      buttons: 1\r\n    }));\r\n    await new Promise(resolve => setTimeout(resolve, 10));\r\n    \r\n    // mouseup\r\n    targetElement.dispatchEvent(new MouseEvent('mouseup', {\r\n      bubbles: true,\r\n      cancelable: true,\r\n      buttons: 1\r\n    }));\r\n    await new Promise(resolve => setTimeout(resolve, 10));\r\n    \r\n    // click\r\n    targetElement.click();\r\n    await new Promise(resolve => setTimeout(resolve, 25)); // \uC9E7\uC740 \uB300\uAE30 \uD6C4 \uC0C1\uD0DC \uD655\uC778\r\n    \r\n    // \uD074\uB9AD \uD6C4 \uC0C1\uD0DC \uD655\uC778\r\n    const afterClass = targetElement.className;\r\n    const afterAriaDisabled = targetElement.getAttribute('aria-disabled');\r\n    const afterDisabled = targetElement.disabled;\r\n    console.log(`[CHOICE] state after:`, {\r\n      className: afterClass,\r\n      ariaDisabled: afterAriaDisabled,\r\n      disabled: afterDisabled\r\n    });\r\n    \r\n    // \uC131\uACF5 \uD310\uC815: className \uBCC0\uD654 \uB610\uB294 answered-* \uD074\uB798\uC2A4 \uB4F1\uC7A5 \uB610\uB294 disabled \uC0C1\uD0DC\r\n    const classChanged = beforeClass !== afterClass;\r\n    const graded = /answered-(correct|incorrect)/.test(afterClass);\r\n    const disabledNow = afterClass.includes('mdc-list-item--disabled') ||\r\n                       afterAriaDisabled === 'true' ||\r\n                       afterDisabled ||\r\n                       (afterClass.includes('disabled') && !beforeClass.includes('disabled'));\r\n    \r\n    const clickSuccess = classChanged || graded || disabledNow;\r\n    \r\n    console.log(`[CHOICE] state changed? ${clickSuccess} (classChanged: ${classChanged}, graded: ${graded}, disabledNow: ${disabledNow})`);\r\n    \r\n    if (clickSuccess) {\r\n      console.log(`[CHOICE] \u2713 \uD074\uB9AD \uC131\uACF5: \uC0C1\uD0DC \uBCC0\uD654 \uD655\uC778\uB428`);\r\n      return true;\r\n    } else {\r\n      console.warn(`[CHOICE] \u2717 \uD074\uB9AD \uC2E4\uD328: \uC0C1\uD0DC \uBCC0\uD654 \uC5C6\uC74C. \uB2E4\uB978 \uD6C4\uBCF4 \uC2DC\uB3C4...`);\r\n      \r\n      // \uB2E4\uB978 \uD6C4\uBCF4\uB85C \uC7AC\uC2DC\uB3C4 (\uCD5C\uB300 2\uAC1C\uAE4C\uC9C0)\r\n      for (let i = 1; i < Math.min(3, clickTargets.length); i++) {\r\n        const nextTarget = clickTargets[i];\r\n        console.log(`[CHOICE] \uC7AC\uC2DC\uB3C4 ${i}: ${nextTarget.letter} \uC120\uD0DD`);\r\n        \r\n        const retryBeforeClass = nextTarget.element.className;\r\n        nextTarget.element.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n        await new Promise(resolve => setTimeout(resolve, 20));\r\n        nextTarget.element.click();\r\n        await new Promise(resolve => setTimeout(resolve, 25));\r\n        \r\n        const retryAfterClass = nextTarget.element.className;\r\n        const retryGraded = /answered-(correct|incorrect)/.test(retryAfterClass);\r\n        const retryDisabled = retryAfterClass.includes('mdc-list-item--disabled') ||\r\n                              nextTarget.element.getAttribute('aria-disabled') === 'true' ||\r\n                              nextTarget.element.disabled;\r\n        \r\n        if (retryBeforeClass !== retryAfterClass || retryGraded || retryDisabled) {\r\n          console.log(`[CHOICE] \u2713 \uC7AC\uC2DC\uB3C4 \uC131\uACF5: ${nextTarget.letter}`);\r\n          return true;\r\n        }\r\n      }\r\n      \r\n      console.error(`[CHOICE] \u2717 \uBAA8\uB4E0 \uD6C4\uBCF4 \uD074\uB9AD \uC2E4\uD328`);\r\n      return false;\r\n    }\r\n  } catch (error) {\r\n    console.error('[CHOICE] \uD074\uB9AD \uC911 \uC624\uB958:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n", "// Extracted SATNavigator from content.js\r\n// NOTE: Logic must remain identical to original implementation.\r\n\r\nimport { CONFIG } from '../config/constants.js';\r\nimport { deepQuerySelectorAll, isElementVisible } from '../dom/deepQuery.js';\r\nimport { waitForElement, waitForCondition, waitForContentLoad, safeClick, showToast, forceClick } from '../dom/wait.js';\r\nimport { isQuestionScreen, getProgressState, getCurrentProblemNumber, isModuleStartScreen } from '../dom/extract.js';\r\nimport { findButtonByText } from '../dom/buttons.js';\r\n\r\nexport class SATNavigator {\r\n  /**\r\n   * \uD14D\uC2A4\uD2B8\uB85C \uBC84\uD2BC \uCC3E\uAE30 (\uB2E4\uAD6D\uC5B4 \uC9C0\uC6D0)\r\n   * @param {...string} labels - \uCC3E\uC744 \uBC84\uD2BC \uD14D\uC2A4\uD2B8\uB4E4\r\n   * @returns {Element|null} \uCC3E\uC740 \uBC84\uD2BC \uC694\uC18C\r\n   */\r\n  findButtonByText(...labels) {\r\n    const buttons = Array.from(document.querySelectorAll(CONFIG.selectors.button));\r\n    return buttons.find(btn => {\r\n      if (!btn.offsetParent || btn.disabled) return false;\r\n      const text = (btn.innerText || btn.textContent || '').trim();\r\n      const ariaLabel = (btn.getAttribute('aria-label') || '').trim();\r\n      return labels.some(label => \r\n        text.includes(label) || ariaLabel.includes(label)\r\n      );\r\n    }) || null;\r\n  }\r\n\r\n  /**\r\n   * '\uC5F4\uAE30' \uBC84\uD2BC \uCC3E\uAE30 \uBC0F \uD074\uB9AD\r\n   * @returns {Promise<boolean>} \uC131\uACF5 \uC5EC\uBD80\r\n   */\r\n  async clickOpenButton() {\r\n    console.log('[SAT-DEBUG] \uD604\uC7AC \uB2E8\uACC4: \uC5F4\uAE30 \uBC84\uD2BC \uCC3E\uAE30 \uC2DC\uC791');\r\n    \r\n    const openButton = await waitForElement(() => {\r\n      // Shadow DOM \uB3CC\uD30C: deepQuerySelectorAll \uC0AC\uC6A9\r\n      const allButtons = deepQuerySelectorAll(CONFIG.selectors.button + ', a, div[onclick], span[onclick]');\r\n      for (const btn of allButtons) {\r\n        try {\r\n          if (!isElementVisible(btn) || btn.disabled) continue;\r\n          \r\n          const btnText = (btn.innerText || btn.textContent || '').trim();\r\n          if (CONFIG.buttonTexts.open.some(text => btnText.includes(text))) {\r\n            console.log('[SAT-DEBUG] \uC5F4\uAE30 \uBC84\uD2BC \uBC1C\uACAC:', btnText);\r\n            return btn;\r\n          }\r\n        } catch (e) {\r\n          continue;\r\n        }\r\n      }\r\n      return null;\r\n    }, CONFIG.retries.elementFind);\r\n\r\n    if (openButton) {\r\n      console.log('[SATNavigator] \uC5F4\uAE30 \uBC84\uD2BC \uBC1C\uACAC, \uD074\uB9AD \uC2DC\uB3C4');\r\n      return await safeClick(openButton);\r\n    }\r\n    \r\n    console.warn('[SATNavigator] \uC5F4\uAE30 \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * '\uACC4\uC18D' \uBC84\uD2BC \uCC3E\uAE30 \uBC0F \uD074\uB9AD (Reading and Writing \uC139\uC158)\r\n   * @returns {Promise<boolean>} \uC131\uACF5 \uC5EC\uBD80\r\n   */\r\n  async clickContinueButton() {\r\n    console.log('[SAT-DEBUG] \uD604\uC7AC \uB2E8\uACC4: \uACC4\uC18D \uBC84\uD2BC \uCC3E\uAE30 \uC2DC\uC791');\r\n    \r\n    const continueButton = await waitForElement(() => {\r\n      // Shadow DOM \uB3CC\uD30C: deepQuerySelectorAll \uC0AC\uC6A9 (a \uD0DC\uADF8 \uC81C\uC678)\r\n      const sectionCards = deepQuerySelectorAll('div, section, article');\r\n      for (const card of sectionCards) {\r\n        const cardText = (card.innerText || card.textContent || '').toLowerCase();\r\n        const hasReading = cardText.includes('reading');\r\n        const hasWriting = cardText.includes('writing');\r\n        \r\n        if (hasReading && hasWriting) {\r\n          // Shadow DOM \uB0B4\uBD80 \uBC84\uD2BC\uB3C4 \uCC3E\uAE30 (a \uD0DC\uADF8 \uC81C\uC678)\r\n          const buttons = deepQuerySelectorAll(CONFIG.selectors.button + ', div[onclick]', card);\r\n          for (const btn of buttons) {\r\n            try {\r\n              if (!isElementVisible(btn) || btn.disabled) continue;\r\n              \r\n              // \uB2E4\uB978 \uCC3D\uC73C\uB85C \uB118\uC5B4\uAC00\uB294 \uC694\uC18C \uC81C\uC678\r\n              if (btn.tagName === 'A') {\r\n                const href = btn.getAttribute('href');\r\n                const target = btn.getAttribute('target');\r\n                if (href && (href.startsWith('http') || target === '_blank' || target === '_new')) {\r\n                  continue;\r\n                }\r\n              }\r\n              \r\n              if (btn.hasAttribute('href') && btn.getAttribute('href') !== '#' && !btn.getAttribute('href').startsWith('javascript:')) {\r\n                continue;\r\n              }\r\n              \r\n              if (btn.getAttribute('target') === '_blank' || btn.getAttribute('target') === '_new') {\r\n                continue;\r\n              }\r\n              \r\n              const btnText = (btn.innerText || btn.textContent || '').trim();\r\n              if (CONFIG.buttonTexts.continue.some(text => btnText.includes(text))) {\r\n                console.log('[SAT-DEBUG] \uACC4\uC18D \uBC84\uD2BC \uBC1C\uACAC:', btnText);\r\n                return btn;\r\n              }\r\n            } catch (e) {\r\n              continue;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return null;\r\n    }, CONFIG.retries.elementFind);\r\n\r\n    if (continueButton) {\r\n      console.log('[SATNavigator] \uACC4\uC18D \uBC84\uD2BC \uBC1C\uACAC, \uD074\uB9AD \uC2DC\uB3C4');\r\n      return await safeClick(continueButton);\r\n    }\r\n    \r\n    console.warn('[SATNavigator] \uACC4\uC18D \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * \uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4 \uC2E4\uD589\r\n   * @returns {Promise<boolean>} \uC131\uACF5 \uC5EC\uBD80\r\n   */\r\n  async handleInitialNavigation() {\r\n    console.log('[SAT-DEBUG] \uD604\uC7AC \uB2E8\uACC4: \uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4 \uC2DC\uC791');\r\n    \r\n    try {\r\n      // \uC774\uBBF8 \uBB38\uC81C \uD654\uBA74\uC5D0 \uC788\uC73C\uBA74 \uC2A4\uD0B5\r\n      if (isQuestionScreen() || getProgressState() !== null) {\r\n        console.log('[SAT-DEBUG] \uC774\uBBF8 \uBB38\uC81C \uD654\uBA74\uC5D0 \uC788\uC2B5\uB2C8\uB2E4.');\r\n        return true;\r\n      }\r\n\r\n      // 1\uB2E8\uACC4: '\uC5F4\uAE30' \uBC84\uD2BC \uD074\uB9AD (\uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD0D0\uC0C9)\r\n      console.log('[SAT-DEBUG] \uD604\uC7AC \uB2E8\uACC4: 1\uB2E8\uACC4 - \uC5F4\uAE30 \uBC84\uD2BC \uD074\uB9AD');\r\n      showToast('\uC5F4\uAE30 \uBC84\uD2BC \uD074\uB9AD \uC911...', 'info');\r\n      const openClicked = await this.clickOpenButton();\r\n      if (openClicked) {\r\n        console.log('[SAT-DEBUG] \uC5F4\uAE30 \uBC84\uD2BC \uD074\uB9AD \uC131\uACF5 - \uD654\uBA74 \uC804\uD658 \uB300\uAE30');\r\n        await waitForCondition(() => {\r\n          const bodyText = (document.body.innerText || document.body.textContent || '').toLowerCase();\r\n          const hasSectionScreen = bodyText.includes('reading') && bodyText.includes('writing');\r\n          return hasSectionScreen;\r\n        }, CONFIG.timeouts.screenTransition * 5);\r\n        await new Promise(resolve => setTimeout(resolve, CONFIG.timeouts.screenTransition));\r\n        console.log('[SAT-DEBUG] \uD654\uBA74 \uC804\uD658 \uC644\uB8CC');\r\n      } else {\r\n        console.warn('[SAT-DEBUG] \uC5F4\uAE30 \uBC84\uD2BC \uD074\uB9AD \uC2E4\uD328');\r\n      }\r\n\r\n      // 2\uB2E8\uACC4: 'Reading and Writing' \uC548\uB0B4\uC758 '\uACC4\uC18D' \uBC84\uD2BC \uD074\uB9AD\r\n      console.log('[SAT-DEBUG] \uD604\uC7AC \uB2E8\uACC4: 2\uB2E8\uACC4 - \uACC4\uC18D \uBC84\uD2BC \uD074\uB9AD');\r\n      showToast('Reading and Writing \uC139\uC158 \uACC4\uC18D \uBC84\uD2BC \uD074\uB9AD \uC911...', 'info');\r\n      await new Promise(resolve => setTimeout(resolve, CONFIG.timeouts.screenTransition));\r\n      \r\n      let continueClicked = await this.clickContinueButton();\r\n      if (!continueClicked) {\r\n        // \uC77C\uBC18 \uD074\uB9AD \uC2E4\uD328 \uC2DC forceClick \uC2DC\uB3C4\r\n        console.log('[SAT-DEBUG] \uC77C\uBC18 \uD074\uB9AD \uC2E4\uD328, forceClick \uC2DC\uB3C4');\r\n        const continueButton = await waitForElement(() => {\r\n          const sectionCards = deepQuerySelectorAll('div, section, article');\r\n          for (const card of sectionCards) {\r\n            const cardText = (card.innerText || card.textContent || '').toLowerCase();\r\n            if (cardText.includes('reading') && cardText.includes('writing')) {\r\n              const buttons = deepQuerySelectorAll(CONFIG.selectors.button + ', a, div[onclick]', card);\r\n              for (const btn of buttons) {\r\n                if (!isElementVisible(btn) || btn.disabled) continue;\r\n                const btnText = (btn.innerText || btn.textContent || '').trim();\r\n                if (CONFIG.buttonTexts.continue.some(text => btnText.includes(text))) {\r\n                  return btn;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          return null;\r\n        }, CONFIG.retries.elementFind);\r\n        \r\n        if (continueButton) {\r\n          continueClicked = await forceClick(continueButton);\r\n        }\r\n      }\r\n      \r\n      if (continueClicked) {\r\n        console.log('[SAT-DEBUG] \uACC4\uC18D \uBC84\uD2BC \uD074\uB9AD \uC131\uACF5 - \uBB38\uC81C \uD654\uBA74 \uB300\uAE30');\r\n        // 3\uB2E8\uACC4: \uBB38\uC81C \uBC88\uD638(1/27)\uAC00 \uBCF4\uC77C \uB54C\uAE4C\uC9C0 \uB8E8\uD504\uB85C \uB300\uAE30\r\n        const maxWait = 10000; // 10\uCD08\r\n        const startTime = Date.now();\r\n        let problemScreenReady = false;\r\n        \r\n        while (Date.now() - startTime < maxWait && !problemScreenReady) {\r\n          await new Promise(resolve => setTimeout(resolve, 250));\r\n          const progress = getProgressState();\r\n          const isQuestion = isQuestionScreen();\r\n          \r\n          // \uBB38\uC81C \uBC88\uD638\uAC00 \uBCF4\uC774\uB294\uC9C0 \uD655\uC778 (\uC608: 1/27, 2/27 \uB4F1)\r\n          if (progress && progress.match(/\\d+\\s*\\/\\s*\\d+/)) {\r\n            problemScreenReady = true;\r\n            console.log('[SAT-DEBUG] \uBB38\uC81C \uD654\uBA74 \uD655\uC778\uB428 (Progress):', progress);\r\n            break;\r\n          }\r\n          \r\n          if (isQuestion) {\r\n            const problemNum = getCurrentProblemNumber();\r\n            if (problemNum > 0) {\r\n              problemScreenReady = true;\r\n              console.log('[SAT-DEBUG] \uBB38\uC81C \uD654\uBA74 \uD655\uC778\uB428 (\uBB38\uC81C \uBC88\uD638):', problemNum);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        \r\n        if (!problemScreenReady) {\r\n          console.warn('[SAT-DEBUG] \uBB38\uC81C \uD654\uBA74\uC774 10\uCD08 \uB0B4\uC5D0 \uB098\uD0C0\uB098\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.');\r\n        }\r\n        \r\n        await new Promise(resolve => setTimeout(resolve, CONFIG.timeouts.screenTransition));\r\n      } else {\r\n        console.warn('[SAT-DEBUG] \uACC4\uC18D \uBC84\uD2BC \uD074\uB9AD \uC2E4\uD328');\r\n      }\r\n\r\n      // 3\uB2E8\uACC4: \uBB38\uC81C \uD654\uBA74 \uB85C\uB4DC \uB300\uAE30\r\n      console.log('[SATNavigator] \uBB38\uC81C \uD654\uBA74 \uB85C\uB4DC \uB300\uAE30 \uC911...');\r\n      showToast('\uBB38\uC81C \uD654\uBA74 \uB85C\uB4DC \uB300\uAE30 \uC911...', 'info');\r\n      await waitForCondition(() => {\r\n        return isQuestionScreen() || getProgressState() !== null;\r\n      }, CONFIG.timeouts.maxElementWait);\r\n\r\n      // 4\uB2E8\uACC4: \uD14C\uC2A4\uD2B8 \uC124\uC815 \uCC98\uB9AC\r\n      console.log('[SATNavigator] \uD14C\uC2A4\uD2B8 \uC124\uC815 \uCC98\uB9AC \uC911...');\r\n      showToast('\uD14C\uC2A4\uD2B8 \uC124\uC815 \uC911...', 'info');\r\n      await configureAndStartTest();\r\n\r\n      console.log('[SATNavigator] ===== \uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4 \uC644\uB8CC =====');\r\n      return true;\r\n    } catch (error) {\r\n      console.error('[SATNavigator] \uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4 \uC624\uB958:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Math \uC139\uC158\uC73C\uB85C \uC774\uB3D9\r\n   * @returns {Promise<boolean>} \uC131\uACF5 \uC5EC\uBD80\r\n   */\r\n  async navigateToMathSection() {\r\n    // \uCC44\uC810 \uD654\uBA74\uC744 \uAC74\uB108\uB6F0\uACE0 Math \uC139\uC158\uC73C\uB85C \uC774\uB3D9\r\n    // \"Math\", \"\uC218\uD559\" \uD14D\uC2A4\uD2B8\uAC00 \uC788\uB294 \uBC84\uD2BC\uC774\uB098 \uB9C1\uD06C \uCC3E\uAE30\r\n    const mathButtons = document.querySelectorAll('button, a, [role=\"button\"], [class*=\"button\"]');\r\n    \r\n    for (const button of mathButtons) {\r\n      const text = (button.innerText || button.textContent || '').trim();\r\n      const textLower = text.toLowerCase();\r\n      const ariaLabel = (button.getAttribute('aria-label') || '').toLowerCase();\r\n      \r\n      // \"Math\", \"\uC218\uD559\" \uC139\uC158 \uCC3E\uAE30\r\n      if (textLower.includes('math') || \r\n          textLower.includes('\uC218\uD559') ||\r\n          ariaLabel.includes('math') ||\r\n          ariaLabel.includes('\uC218\uD559')) {\r\n        // \uBD80\uBAA8 \uC694\uC18C\uC5D0\uC11C Math \uC139\uC158\uC778\uC9C0 \uD655\uC778\r\n        const parent = button.closest('[class*=\"card\"], [class*=\"section\"], [class*=\"module\"]');\r\n        if (parent) {\r\n          const parentText = (parent.innerText || parent.textContent || '').toLowerCase();\r\n          if (parentText.includes('math') || parentText.includes('\uC218\uD559')) {\r\n            // Math \uC139\uC158\uC758 \"\uC2DC\uC791\" \uBC84\uD2BC \uCC3E\uAE30\r\n            const startBtn = parent.querySelector('button, [role=\"button\"]');\r\n            if (startBtn) {\r\n              const startText = (startBtn.innerText || startBtn.textContent || '').trim().toLowerCase();\r\n              if (startText.includes('\uC2DC\uC791') || startText === 'start' || startText.includes('start')) {\r\n                console.log('[SAT PDF Exporter] Math \uC139\uC158 \uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD');\r\n                startBtn.click();\r\n                await waitForContentLoad(800);\r\n                return true;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // \uC2A4\uD06C\uB864 \uB2E4\uC6B4\uD558\uC5EC Math \uC139\uC158 \uCC3E\uAE30\r\n    const originalScroll = window.scrollY;\r\n    window.scrollTo(0, document.body.scrollHeight);\r\n    await waitForContentLoad(600);\r\n    \r\n    // \uC2A4\uD06C\uB864 \uD6C4 \uB2E4\uC2DC \uCC3E\uAE30\r\n    const scrolledMathButtons = document.querySelectorAll('button, a, [role=\"button\"]');\r\n    for (const button of scrolledMathButtons) {\r\n      const text = (button.innerText || button.textContent || '').trim().toLowerCase();\r\n      const parent = button.closest('[class*=\"card\"], [class*=\"section\"]');\r\n      if (parent) {\r\n        const parentText = (parent.innerText || parent.textContent || '').toLowerCase();\r\n        if ((parentText.includes('math') || parentText.includes('\uC218\uD559')) && \r\n            (text.includes('\uC2DC\uC791') || text === 'start')) {\r\n          console.log('[SAT PDF Exporter] Math \uC139\uC158 \uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD (\uC2A4\uD06C\uB864 \uD6C4)');\r\n          button.click();\r\n          await waitForContentLoad(800);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n\r\n    console.log('[SAT PDF Exporter] Math \uC139\uC158\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n    window.scrollTo(0, originalScroll);\r\n    return false;\r\n  }\r\n}\r\n\r\n// ---- Legacy migrated helpers (Phase 4) ----\r\n\r\n/**\r\n * \uD14C\uC2A4\uD2B8 \uC124\uC815 \uD654\uBA74 \uCC98\uB9AC: '\uAC01 \uB2F5\uBCC0 \uB2E4\uC74C\uC5D0 \uC815\uB2F5 \uD45C\uC2DC' \uD1A0\uAE00 \uCF1C\uAE30 + \uD14C\uC2A4\uD2B8 \uC2DC\uC791\r\n * NOTE: Legacy function - migrated from legacy.js\r\n */\r\nexport async function configureAndStartTest() {\r\n  console.log('[SAT PDF Exporter] \uD14C\uC2A4\uD2B8 \uC124\uC815 \uD654\uBA74 \uCC98\uB9AC \uC911...');\r\n  \r\n  // '\uAC01 \uB2F5\uBCC0 \uB2E4\uC74C\uC5D0 \uC815\uB2F5 \uD45C\uC2DC' \uD1A0\uAE00 \uCC3E\uAE30 \uBC0F \uCF1C\uAE30\r\n  const toggleSelectors = [\r\n    'input[type=\"checkbox\"]',\r\n    '[role=\"switch\"]',\r\n    '[role=\"checkbox\"]',\r\n    'button[aria-label*=\"\uC815\uB2F5\"]',\r\n    'button[aria-label*=\"answer\"]'\r\n  ];\r\n  \r\n  let toggleFound = false;\r\n  for (const selector of toggleSelectors) {\r\n    const toggles = document.querySelectorAll(selector);\r\n    for (const toggle of toggles) {\r\n      const label = toggle.closest('label') || toggle.parentElement;\r\n      const labelText = (label.innerText || label.textContent || '').toLowerCase();\r\n      \r\n      // \"\uAC01 \uB2F5\uBCC0 \uB2E4\uC74C\uC5D0 \uC815\uB2F5 \uD45C\uC2DC\" \uB610\uB294 \"Display correct answer after each response\" \uCC3E\uAE30\r\n      if (labelText.includes('\uC815\uB2F5 \uD45C\uC2DC') || \r\n          labelText.includes('answer after') || \r\n          labelText.includes('correct answer')) {\r\n        // \uD1A0\uAE00\uC774 \uAEBC\uC838 \uC788\uC73C\uBA74 \uCF1C\uAE30\r\n        const isChecked = toggle.checked || \r\n                         toggle.getAttribute('aria-checked') === 'true' ||\r\n                         toggle.classList.contains('checked');\r\n        \r\n        if (!isChecked) {\r\n          console.log('[SAT PDF Exporter] \uAC01 \uB2F5\uBCC0 \uB2E4\uC74C\uC5D0 \uC815\uB2F5 \uD45C\uC2DC \uD1A0\uAE00 \uCF1C\uAE30');\r\n          toggle.click();\r\n          await new Promise(resolve => setTimeout(resolve, 150));\r\n          toggleFound = true;\r\n        } else {\r\n          console.log('[SAT PDF Exporter] \uAC01 \uB2F5\uBCC0 \uB2E4\uC74C\uC5D0 \uC815\uB2F5 \uD45C\uC2DC \uD1A0\uAE00 \uC774\uBBF8 \uCF1C\uC838 \uC788\uC74C');\r\n          toggleFound = true;\r\n        }\r\n        break;\r\n      }\r\n    }\r\n    if (toggleFound) break;\r\n  }\r\n  \r\n  if (!toggleFound) {\r\n    console.warn('[SAT PDF Exporter] \uAC01 \uB2F5\uBCC0 \uB2E4\uC74C\uC5D0 \uC815\uB2F5 \uD45C\uC2DC \uD1A0\uAE00\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n  }\r\n  \r\n  // '\uD14C\uC2A4\uD2B8 \uC2DC\uC791' \uBC84\uD2BC \uCC3E\uAE30 \uBC0F \uD074\uB9AD\r\n  const startTestButton = findButtonByText('\uD14C\uC2A4\uD2B8 \uC2DC\uC791', 'Start Test', '\uC2DC\uC791', 'Start');\r\n  if (startTestButton) {\r\n    console.log('[SAT PDF Exporter] \uD14C\uC2A4\uD2B8 \uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD');\r\n    startTestButton.click();\r\n    await waitForContentLoad(800);\r\n    return true;\r\n  } else {\r\n    console.warn('[SAT PDF Exporter] \uD14C\uC2A4\uD2B8 \uC2DC\uC791 \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * \uC139\uC158 \uC120\uD0DD \uD654\uBA74\uC5D0\uC11C '\uACC4\uC18D' \uD074\uB9AD\r\n * NOTE: Legacy function - migrated from legacy.js\r\n */\r\nexport async function clickSectionContinue(sectionName) {\r\n  console.log(`[SAT PDF Exporter] ${sectionName} \uC139\uC158 \uACC4\uC18D \uBC84\uD2BC \uCC3E\uB294 \uC911...`);\r\n  \r\n  // \uC139\uC158 \uCE74\uB4DC \uCC3E\uAE30\r\n  const sectionCards = document.querySelectorAll('[class*=\"card\"], [class*=\"section\"]');\r\n  for (const card of sectionCards) {\r\n    const cardText = (card.innerText || card.textContent || '').toLowerCase();\r\n    if (cardText.includes(sectionName.toLowerCase())) {\r\n      // \uCE74\uB4DC \uB0B4\uBD80\uC758 '\uACC4\uC18D' \uBC84\uD2BC \uCC3E\uAE30\r\n      const continueButton = card.querySelector('button');\r\n      if (continueButton) {\r\n        const buttonText = (continueButton.innerText || continueButton.textContent || '').trim();\r\n        if (buttonText.includes('\uACC4\uC18D') || buttonText.includes('Continue') || buttonText.includes('Start')) {\r\n          console.log(`[SAT PDF Exporter] ${sectionName} \uC139\uC158 \uACC4\uC18D \uBC84\uD2BC \uD074\uB9AD`);\r\n          continueButton.click();\r\n          await waitForContentLoad(800);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  // \uD3F4\uBC31: \uC804\uCCB4 \uD398\uC774\uC9C0\uC5D0\uC11C '\uACC4\uC18D' \uBC84\uD2BC \uCC3E\uAE30\r\n  const continueButton = findButtonByText('\uACC4\uC18D', 'Continue', 'Start', '\uC2DC\uC791');\r\n  if (continueButton) {\r\n    console.log(`[SAT PDF Exporter] ${sectionName} \uC139\uC158 \uACC4\uC18D \uBC84\uD2BC \uD074\uB9AD (\uD3F4\uBC31)`);\r\n    continueButton.click();\r\n    await waitForContentLoad(800);\r\n    return true;\r\n  }\r\n  \r\n  console.warn(`[SAT PDF Exporter] ${sectionName} \uC139\uC158 \uACC4\uC18D \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);\r\n  return false;\r\n}\r\n\r\n/**\r\n * Module 2 Start Screen\uC5D0\uC11C \"\uBAA8\uB4C8 2 \uC2DC\uC791\" \uBC84\uD2BC \uD074\uB9AD\uD558\uACE0 Q1 \uD654\uBA74 \uB420 \uB54C\uAE4C\uC9C0 \uB300\uAE30\r\n * @returns {Promise<boolean>} \uC131\uACF5 \uC5EC\uBD80\r\n */\r\nexport async function startModule2() {\r\n  console.log('[SAT PDF Exporter] startModule2: Module Start Screen \uCC98\uB9AC \uC2DC\uC791');\r\n  const searchRoot = document.body;\r\n\r\n  // Primary: span.mdc-button__label with \"\uBAA8\uB4C8 2 \uC2DC\uC791\" -> parent button (concrete DOM: activity-set > glowing-card > ... > button > span.mdc-button__label)\r\n  const labelSpans = searchRoot.querySelectorAll('span.mdc-button__label');\r\n  let btn = null;\r\n  let selectorUsed = '';\r\n  for (const span of labelSpans) {\r\n    const text = (span.innerText || span.textContent || '').trim();\r\n    if (text.includes('\uBAA8\uB4C8 2') && text.includes('\uC2DC\uC791')) {\r\n      btn = span.closest('button') || span.parentElement;\r\n      if (btn && !btn.disabled) {\r\n        selectorUsed = 'span.mdc-button__label + closest(button)';\r\n        console.log('[SAT PDF Exporter] Module 2 start screen detected. Button text:', text, 'selector:', selectorUsed);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Fallback: textContent on button/role=button\r\n  if (!btn) {\r\n    const btnLabels = ['\uBAA8\uB4C8 2 \uC2DC\uC791', 'Module 2', 'Start Module', '\uC2DC\uC791'];\r\n    const clickables = Array.from(searchRoot.querySelectorAll('button, [role=\"button\"], a, .mat-mdc-button, .mdc-button'));\r\n    for (const el of clickables) {\r\n      const rect = el.getBoundingClientRect();\r\n      if (rect.width === 0 && rect.height === 0) continue;\r\n      if (el.disabled) continue;\r\n      const text = (el.innerText || el.textContent || '').trim();\r\n      const match = btnLabels.some(l => text.includes(l) || (text.includes('\uBAA8\uB4C8 2') && text.includes('\uC2DC\uC791')));\r\n      if (match) {\r\n        btn = el;\r\n        selectorUsed = el.tagName + (el.getAttribute?.('role') ? `[role=\"${el.getAttribute('role')}\"]` : '');\r\n        console.log('[SAT PDF Exporter] Module 2 start screen detected. Button text:', text.substring(0, 50), 'selector:', selectorUsed);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!btn) {\r\n    console.warn('[SAT PDF Exporter] startModule2: \"\uBAA8\uB4C8 2 \uC2DC\uC791\" \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4');\r\n    return false;\r\n  }\r\n\r\n  try {\r\n    // Safe click: scrollIntoView({block: \"center\"}) -> element.click() -> fallback: forceClick\r\n    btn.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n    await new Promise(resolve => setTimeout(resolve, 150));\r\n    let clicked = await safeClick(btn);\r\n    if (!clicked) {\r\n      console.log('[SAT PDF Exporter] startModule2: safeClick \uC2E4\uD328, forceClick \uC2DC\uB3C4');\r\n      clicked = await forceClick(btn);\r\n    }\r\n    if (!clicked) {\r\n      console.warn('[SAT PDF Exporter] startModule2: \uD074\uB9AD \uC2E4\uD328');\r\n      return false;\r\n    }\r\n    console.log('[SAT PDF Exporter] startModule2: \"\uBAA8\uB4C8 2 \uC2DC\uC791\" \uBC84\uD2BC \uD074\uB9AD \uC644\uB8CC');\r\n\r\n    // Wait until: Progress UI appears AND Progress matches \"1 / 27\" AND isQuestionScreen()\r\n    const maxWait = 10000;\r\n    const interval = 200;\r\n    const startTime = Date.now();\r\n    while (Date.now() - startTime < maxWait) {\r\n      await new Promise(resolve => setTimeout(resolve, interval));\r\n      const progress = getProgressState();\r\n      const isQ1 = progress && /^1\\s*\\/\\s*27/i.test(progress);\r\n      const isQuestion = isQuestionScreen();\r\n      if (isQ1 && isQuestion) {\r\n        console.log('[SAT PDF Exporter] startModule2: Q1 \uD654\uBA74 \uD655\uC778\uB428 (progress:', progress, ')');\r\n        return true;\r\n      }\r\n      if (progress && progress.match(/\\d+\\s*\\/\\s*27/)) {\r\n        console.log('[SAT PDF Exporter] startModule2: Progress \uBC1C\uACAC, Q1 \uB300\uAE30 \uC911...', progress);\r\n      }\r\n    }\r\n    console.warn('[SAT PDF Exporter] startModule2: Q1 \uD654\uBA74 \uB300\uAE30 \uD0C0\uC784\uC544\uC6C3. \uD604\uC7AC progress:', getProgressState());\r\n    return false;\r\n  } catch (err) {\r\n    console.error('[SAT PDF Exporter] startModule2 \uC624\uB958:', err);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * \uB2E4\uC74C \uBAA8\uB4C8 \uC2DC\uC791 (Module 2\uB85C \uC774\uB3D9)\r\n * NOTE: Legacy function - migrated from legacy.js\r\n */\r\nexport async function startNextModule() {\r\n  console.log('[SAT PDF Exporter] \uB2E4\uC74C \uBAA8\uB4C8 \uC2DC\uC791 \uBC84\uD2BC \uCC3E\uB294 \uC911...');\r\n\r\n  // Explicit Module Start Screen: first-class state - handle before fallback logic\r\n  if (isModuleStartScreen()) {\r\n    console.log('[SAT PDF Exporter] Module Start Screen \uAC10\uC9C0\uB428. startModule2() \uD638\uCD9C');\r\n    const ok = await startModule2();\r\n    if (ok) return true;\r\n    console.warn('[SAT PDF Exporter] startModule2 \uC2E4\uD328, \uAE30\uC874 \uB85C\uC9C1\uC73C\uB85C \uD3F4\uBC31');\r\n  }\r\n  \r\n  // #region agent log\r\n  const initialBodyText = (document.body.innerText || document.body.textContent || '').toLowerCase();\r\n  const initialIsQuestion = isQuestionScreen();\r\n  const initialProgress = getProgressState();\r\n  const initialHasModule2 = initialBodyText.includes('\uBAA8\uB4C8 2') || initialBodyText.includes('module 2') || initialBodyText.includes('reading and writing module 2');\r\n  fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:entry',message:'startNextModule entry',data:{initialIsQuestion,initialProgress,initialHasModule2,bodyTextPreview:initialBodyText.substring(0,200)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n  // #endregion\r\n  \r\n  // BUG FIX: Module 2 \uC2DC\uC791 \uD654\uBA74\uC774 \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uBA85\uC2DC\uC801\uC73C\uB85C \uB300\uAE30\r\n  // \uC774\uBBF8 \uBB38\uC81C \uD654\uBA74\uC774\uBA74 \uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD \uC2A4\uD0B5 (\uB2E8, Module 1 \uC81C\uCD9C \uC9C1\uD6C4\uC5D0\uB294 \uC2A4\uD0B5\uD558\uC9C0 \uC54A\uC74C)\r\n  const bodyText = (document.body.innerText || document.body.textContent || '').toLowerCase();\r\n  const hasModule2StartScreen = bodyText.includes('\uBAA8\uB4C8 2') || bodyText.includes('module 2') || \r\n                                bodyText.includes('reading and writing module 2');\r\n  \r\n  // #region agent log\r\n  const beforeWaitIsQuestion = isQuestionScreen();\r\n  const beforeWaitProgress = getProgressState();\r\n  fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:beforeWait',message:'before waiting for module 2 screen',data:{hasModule2StartScreen,beforeWaitIsQuestion,beforeWaitProgress,bodyTextPreview:bodyText.substring(0,200)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n  // #endregion\r\n  \r\n  // Module 2 \uC2DC\uC791 \uD654\uBA74\uC774 \uBA85\uD655\uD788 \uBCF4\uC774\uC9C0 \uC54A\uC73C\uBA74 \uB300\uAE30\r\n  if (!hasModule2StartScreen && (isQuestionScreen() || getProgressState() !== null)) {\r\n    // Module 1 \uC81C\uCD9C \uC9C1\uD6C4\uC77C \uC218 \uC788\uC73C\uBBC0\uB85C, Module 2 \uC2DC\uC791 \uD654\uBA74\uC774 \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30\r\n    console.log('[SAT PDF Exporter] Module 2 \uC2DC\uC791 \uD654\uBA74 \uB300\uAE30 \uC911...');\r\n    const module2ScreenAppeared = await waitForCondition(() => {\r\n      const currentBodyText = (document.body.innerText || document.body.textContent || '').toLowerCase();\r\n      return currentBodyText.includes('\uBAA8\uB4C8 2') || currentBodyText.includes('module 2') || \r\n             currentBodyText.includes('reading and writing module 2');\r\n    }, CONFIG.timeouts.screenTransition * 5);\r\n    \r\n    // #region agent log\r\n    const afterWaitIsQuestion = isQuestionScreen();\r\n    const afterWaitProgress = getProgressState();\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:afterWait',message:'after waiting for module 2 screen',data:{module2ScreenAppeared,afterWaitIsQuestion,afterWaitProgress},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n    // #endregion\r\n    \r\n    if (!module2ScreenAppeared) {\r\n      console.warn('[SAT PDF Exporter] Module 2 \uC2DC\uC791 \uD654\uBA74\uC774 \uB098\uD0C0\uB098\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.');\r\n    }\r\n  }\r\n  \r\n  // Module 2 \uC2DC\uC791 \uD654\uBA74\uC774 \uB098\uD0C0\uB09C \uD6C4\uC5D0\uB3C4 \uBB38\uC81C \uD654\uBA74\uC774\uBA74 \uC2A4\uD0B5 (\uC774\uBBF8 Module 2\uAC00 \uC2DC\uC791\uB41C \uC0C1\uD0DC)\r\n  const checkIsQuestion = isQuestionScreen();\r\n  const checkProgress = getProgressState();\r\n  const shouldSkip = hasModule2StartScreen && (checkIsQuestion || checkProgress !== null);\r\n  \r\n  // #region agent log\r\n  fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:skipCheck',message:'checking if should skip button click',data:{hasModule2StartScreen,checkIsQuestion,checkProgress,shouldSkip},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'C'})}).catch(()=>{});\r\n  // #endregion\r\n  \r\n  if (shouldSkip) {\r\n    console.log('[SAT PDF Exporter] \uC774\uBBF8 Module 2 \uBB38\uC81C \uD654\uBA74\uC785\uB2C8\uB2E4. Module 2 \uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD\uC744 \uC2A4\uD0B5\uD569\uB2C8\uB2E4.');\r\n    console.log('[SAT PDF Exporter] \uD604\uC7AC \uC0C1\uD0DC:', {\r\n      isQuestionScreen: checkIsQuestion,\r\n      progressState: checkProgress\r\n    });\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:skipReturn',message:'skipping button click and returning true',data:{checkIsQuestion,checkProgress},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'C'})}).catch(()=>{});\r\n    // #endregion\r\n    return true; // \uC774\uBBF8 \uBB38\uC81C \uD654\uBA74\uC774\uBBC0\uB85C \uC131\uACF5\uC73C\uB85C \uAC04\uC8FC\r\n  }\r\n  \r\n  // \uBAA8\uB4C8 2 \uC2DC\uC791 \uD654\uBA74\uC774 \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30 (\uCD5C\uB300 10\uCD08)\r\n  console.log('[SAT PDF Exporter] \uBAA8\uB4C8 2 \uC2DC\uC791 \uD654\uBA74 \uB300\uAE30 \uC911...');\r\n  let buttonFound = false;\r\n  let button = null;\r\n  \r\n  for (let attempt = 0; attempt < 20; attempt++) {\r\n    await new Promise(resolve => setTimeout(resolve, 150));\r\n    \r\n    // \uBC29\uBC95 0: a \uD0DC\uADF8 \uBC0F div/span (\uD074\uB9AD \uAC00\uB2A5 \uC694\uC18C) - SAT UI\uAC00 \uB2E4\uC591\uD55C \uD615\uD0DC\uB85C \uAD6C\uD604\uB420 \uC218 \uC788\uC74C\r\n    const clickables = deepQuerySelectorAll('a, button, [role=\"button\"], div[role=\"button\"], .mat-mdc-button, .mdc-button');\r\n    for (const el of clickables) {\r\n      if (!isElementVisible(el) || el.disabled) continue;\r\n      const text = (el.innerText || el.textContent || '').trim();\r\n      if ((text.includes('\uBAA8\uB4C8 2') && text.includes('\uC2DC\uC791')) || text === '\uBAA8\uB4C8 2 \uC2DC\uC791' || text.toLowerCase().includes('module 2')) {\r\n        console.log('[SAT PDF Exporter] \uBAA8\uB4C8 2 \uC2DC\uC791 \uBC84\uD2BC \uBC1C\uACAC (\uD074\uB9AD \uAC00\uB2A5 \uC694\uC18C):', text.substring(0, 50));\r\n        button = el;\r\n        buttonFound = true;\r\n        break;\r\n      }\r\n    }\r\n    if (buttonFound) break;\r\n    \r\n    // \uBC29\uBC95 1: data-test-id \uC0AC\uC6A9 (\uAC00\uC7A5 \uC815\uD655)\r\n    button = document.querySelector('button[data-test-id=\"glowing-card-start-button\"]');\r\n    if (button && isElementVisible(button) && !button.disabled) {\r\n      const label = button.querySelector('.mdc-button__label');\r\n      if (label) {\r\n        const text = (label.textContent || '').trim();\r\n        if (text.includes('\uBAA8\uB4C8 2') || text.includes('Module 2') || text.includes('\uC2DC\uC791')) {\r\n          console.log('[SAT PDF Exporter] \uBAA8\uB4C8 2 \uC2DC\uC791 \uBC84\uD2BC \uBC1C\uACAC (data-test-id):', text);\r\n          buttonFound = true;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // \uBC29\uBC95 2: findButtonByText \uC0AC\uC6A9 (\uAC15\uD654) - \"\uBAA8\uB4C8 2 \uC2DC\uC791\" \uC815\uD655\uD788 \uCC3E\uAE30\r\n    const foundButton = findButtonByText('\uBAA8\uB4C8 2 \uC2DC\uC791', 'Module 2', '\uC2DC\uC791', 'Start');\r\n    if (foundButton && isElementVisible(foundButton) && !foundButton.disabled) {\r\n      const text = (foundButton.innerText || foundButton.textContent || '').trim();\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:findButtonByText',message:'findButtonByText result',data:{found:!!foundButton,text,visible:isElementVisible(foundButton),disabled:foundButton?.disabled},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n      // #endregion\r\n      // \"\uBAA8\uB4C8 2 \uC2DC\uC791\" \uC815\uD655\uD788 \uD3EC\uD568\uD558\uAC70\uB098, \"\uBAA8\uB4C8 2\"\uC640 \"\uC2DC\uC791\"\uC774 \uBAA8\uB450 \uD3EC\uD568\uB418\uC5B4 \uC788\uC73C\uBA74 OK\r\n      if (text.includes('\uBAA8\uB4C8 2 \uC2DC\uC791') || text === '\uBAA8\uB4C8 2 \uC2DC\uC791' || \r\n          (text.includes('\uBAA8\uB4C8 2') && text.includes('\uC2DC\uC791')) ||\r\n          text.includes('Module 2') || text.includes('\uC2DC\uC791')) {\r\n        console.log('[SAT PDF Exporter] \uBAA8\uB4C8 2 \uC2DC\uC791 \uBC84\uD2BC \uBC1C\uACAC (findButtonByText):', text);\r\n        button = foundButton;\r\n        buttonFound = true;\r\n        break;\r\n      }\r\n    }\r\n    \r\n    // \uBC29\uBC95 3: \uC804\uCCB4 \uBC84\uD2BC \uAC80\uC0C9 (deepQuerySelectorAll \uC0AC\uC6A9) - \"\uBAA8\uB4C8 2 \uC2DC\uC791\" \uC815\uD655\uD788 \uCC3E\uAE30\r\n    const allButtons = deepQuerySelectorAll('button, [role=\"button\"]');\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:searchAllButtons',message:'searching all buttons for module 2 start',data:{totalButtons:allButtons.length,attempt},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n    // #endregion\r\n    for (const btn of allButtons) {\r\n      if (!isElementVisible(btn) || btn.disabled) continue;\r\n      \r\n      const text = (btn.innerText || btn.textContent || '').trim();\r\n      const ariaLabel = (btn.getAttribute('aria-label') || '').trim();\r\n      const textLower = text.toLowerCase();\r\n      const ariaLower = ariaLabel.toLowerCase();\r\n      \r\n      // #region agent log\r\n      if (text.includes('\uBAA8\uB4C8') || text.includes('\uC2DC\uC791') || text.includes('module') || text.includes('start')) {\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:checkButton',message:'checking button text for module 2 start',data:{text,ariaLabel,textLower,ariaLower,visible:isElementVisible(btn),disabled:btn.disabled},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n      }\r\n      // #endregion\r\n      \r\n      // \"\uBAA8\uB4C8 2 \uC2DC\uC791\" \uC815\uD655\uD788 \uD3EC\uD568\uD558\uAC70\uB098, \"\uBAA8\uB4C8 2\"\uC640 \"\uC2DC\uC791\"\uC774 \uBAA8\uB450 \uD3EC\uD568\uB418\uC5B4 \uC788\uC73C\uBA74 OK\r\n      if (text === '\uBAA8\uB4C8 2 \uC2DC\uC791' || text.includes('\uBAA8\uB4C8 2 \uC2DC\uC791') ||\r\n          (textLower.includes('\uBAA8\uB4C8 2') && textLower.includes('\uC2DC\uC791')) ||\r\n          textLower.includes('module 2 start') ||\r\n          (textLower.includes('\uC2DC\uC791') && (text.includes('2') || text.includes('\uBAA8\uB4C8'))) ||\r\n          (ariaLower.includes('\uBAA8\uB4C8 2') || ariaLower.includes('module 2'))) {\r\n        console.log('[SAT PDF Exporter] \uBAA8\uB4C8 2 \uC2DC\uC791 \uBC84\uD2BC \uBC1C\uACAC (\uC804\uCCB4 \uAC80\uC0C9):', text || ariaLabel);\r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:buttonFound',message:'module 2 start button found in all buttons search',data:{text,ariaLabel},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n        // #endregion\r\n        button = btn;\r\n        buttonFound = true;\r\n        break;\r\n      }\r\n    }\r\n    \r\n    if (buttonFound) break;\r\n  }\r\n  \r\n  if (!buttonFound || !button) {\r\n    console.warn('[SAT PDF Exporter] \uBAA8\uB4C8 2 \uC2DC\uC791 \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7AC\uC2DC\uB3C4...');\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:lastAttempt',message:'last attempt to find module 2 start button',data:{buttonFound,button:!!button},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n    // #endregion\r\n    // \uB9C8\uC9C0\uB9C9 \uC2DC\uB3C4: \uC804\uCCB4 \uD398\uC774\uC9C0\uC5D0\uC11C \uB2E4\uC2DC \uAC80\uC0C9 - \"\uBAA8\uB4C8 2 \uC2DC\uC791\" \uC815\uD655\uD788 \uCC3E\uAE30\r\n    const allButtons = document.querySelectorAll('button, [role=\"button\"]');\r\n    for (const btn of allButtons) {\r\n      if (!isElementVisible(btn) || btn.disabled) continue;\r\n      const text = (btn.innerText || btn.textContent || '').trim();\r\n      const textLower = text.toLowerCase();\r\n      // #region agent log\r\n      if (text.includes('\uBAA8\uB4C8') || text.includes('\uC2DC\uC791') || text.includes('module') || text.includes('start')) {\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:lastAttemptCheck',message:'checking button in last attempt',data:{text,textLower,visible:isElementVisible(btn),disabled:btn.disabled},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n      }\r\n      // #endregion\r\n      // \"\uBAA8\uB4C8 2 \uC2DC\uC791\" \uC815\uD655\uD788 \uD3EC\uD568\uD558\uAC70\uB098, \"\uBAA8\uB4C8 2\"\uC640 \"\uC2DC\uC791\"\uC774 \uBAA8\uB450 \uD3EC\uD568\uB418\uC5B4 \uC788\uC73C\uBA74 OK\r\n      if (text === '\uBAA8\uB4C8 2 \uC2DC\uC791' || text.includes('\uBAA8\uB4C8 2 \uC2DC\uC791') ||\r\n          (textLower.includes('\uBAA8\uB4C8 2') && textLower.includes('\uC2DC\uC791')) ||\r\n          textLower.includes('module 2 start') ||\r\n          (textLower.includes('\uC2DC\uC791') && (text.includes('2') || text.includes('\uBAA8\uB4C8')))) {\r\n        button = btn;\r\n        buttonFound = true;\r\n        console.log('[SAT PDF Exporter] \uBAA8\uB4C8 2 \uC2DC\uC791 \uBC84\uD2BC \uBC1C\uACAC (\uB9C8\uC9C0\uB9C9 \uC2DC\uB3C4):', text);\r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:lastAttemptFound',message:'module 2 start button found in last attempt',data:{text},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n        // #endregion\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  \r\n  if (buttonFound && button) {\r\n    console.log('[SAT PDF Exporter] \uBAA8\uB4C8 2 \uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD \uC2DC\uB3C4...');\r\n    // #region agent log\r\n    const buttonText = (button.innerText || button.textContent || '').trim();\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:beforeClick',message:'before clicking module 2 start button',data:{buttonText,buttonVisible:isElementVisible(button),buttonDisabled:button.disabled},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n    // #endregion\r\n    try {\r\n      button.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n      await new Promise(resolve => setTimeout(resolve, 150));\r\n      // forceClick \uC0AC\uC6A9: safeClick\uC774 \uC2E4\uD328\uD560 \uC218 \uC788\uB294 \uCEE4\uC2A4\uD140 UI \uB300\uC751\r\n      const clicked = await safeClick(button);\r\n      if (!clicked) {\r\n        console.log('[SAT PDF Exporter] safeClick \uC2E4\uD328, forceClick \uC2DC\uB3C4...');\r\n        await forceClick(button);\r\n      }\r\n      console.log('[SAT PDF Exporter] \uBAA8\uB4C8 2 \uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD \uC644\uB8CC');\r\n      \r\n      // #region agent log\r\n      const afterClickIsQuestion = isQuestionScreen();\r\n      const afterClickProgress = getProgressState();\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:afterClick',message:'after clicking module 2 start button',data:{afterClickIsQuestion,afterClickProgress},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      // \uBAA8\uB4C8\uC774 \uC2DC\uC791\uB418\uACE0 \uCCAB \uBB38\uC81C\uAC00 \uB85C\uB4DC\uB420 \uB54C\uAE4C\uC9C0 \uCDA9\uBD84\uD788 \uB300\uAE30\r\n      await waitForContentLoad(800);\r\n      // \uCD94\uAC00 \uB300\uAE30 (\uBB38\uC81C \uB85C\uB4DC \uD655\uC778)\r\n      await new Promise(resolve => setTimeout(resolve, 250));\r\n      console.log('[SAT PDF Exporter] \uBAA8\uB4C8 2 \uC2DC\uC791 \uC644\uB8CC, \uCCAB \uBB38\uC81C \uD655\uC778 \uC911...');\r\n      \r\n      // #region agent log\r\n      const finalIsQuestion = isQuestionScreen();\r\n      const finalProgress = getProgressState();\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:finalCheck',message:'final check after module 2 start',data:{finalIsQuestion,finalProgress},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n      // #endregion\r\n      return true;\r\n    } catch (error) {\r\n      console.error('[SAT PDF Exporter] \uBAA8\uB4C8 2 \uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD \uC624\uB958:', error);\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:clickError',message:'error clicking module 2 start button',data:{error:error.message},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n      // #endregion\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  // BUG FIX: \uBC84\uD2BC\uC744 \uBABB \uCC3E\uC558\uC9C0\uB9CC \uC774\uBBF8 \uBB38\uC81C \uD654\uBA74\uC774\uBA74 \uC131\uACF5\uC73C\uB85C \uAC04\uC8FC\r\n  const fallbackIsQuestion = isQuestionScreen();\r\n  const fallbackProgress = getProgressState();\r\n  // #region agent log\r\n  fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:fallbackCheck',message:'fallback check if question screen exists',data:{fallbackIsQuestion,fallbackProgress,buttonFound},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'})}).catch(()=>{});\r\n  // #endregion\r\n  \r\n  if (fallbackIsQuestion || fallbackProgress !== null) {\r\n    console.log('[SAT PDF Exporter] Module 2 \uC2DC\uC791 \uBC84\uD2BC\uC744 \uCC3E\uC9C0 \uBABB\uD588\uC9C0\uB9CC, \uC774\uBBF8 \uBB38\uC81C \uD654\uBA74\uC785\uB2C8\uB2E4. \uC131\uACF5\uC73C\uB85C \uAC04\uC8FC\uD569\uB2C8\uB2E4.');\r\n    return true;\r\n  }\r\n  \r\n  console.error('[SAT PDF Exporter] \uB2E4\uC74C \uBAA8\uB4C8 \uC2DC\uC791 \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n  // #region agent log\r\n  fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'navigator.js:startNextModule:failed',message:'failed to find module 2 start button',data:{buttonFound,fallbackIsQuestion,fallbackProgress},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'})}).catch(()=>{});\r\n  // #endregion\r\n  return false;\r\n}\r\n\r\n\r\n", "// SectionStateManager - manages section and module state\r\n// Extracted from stateMachine.js to separate concerns\r\n\r\nimport { getCurrentProblemNumber, getProgressState } from '../dom/extract.js';\r\n\r\n/**\r\n * SectionStateManager \uD074\uB798\uC2A4\r\n * \uC139\uC158 \uBC0F \uBAA8\uB4C8 \uC0C1\uD0DC\uB97C \uC5C4\uACA9\uD558\uAC8C \uAD00\uB9AC\r\n */\r\nexport class SectionStateManager {\r\n  constructor() {\r\n    this.currentSection = null; // 'READING_WRITING' | 'MATH' | null\r\n    this.currentModule = null;   // 1 | 2 | null\r\n    this.expectedOrder = [\r\n      { section: 'READING_WRITING', module: 1 },\r\n      { section: 'READING_WRITING', module: 2 },\r\n      { section: 'MATH', module: 1 },\r\n      { section: 'MATH', module: 2 }\r\n    ];\r\n    this.currentStepIndex = 0;\r\n  }\r\n\r\n  /**\r\n   * \uD604\uC7AC \uC139\uC158 \uC124\uC815\r\n   * @param {string} section - 'READING_WRITING' | 'MATH'\r\n   * @throws {Error} \uC798\uBABB\uB41C \uC139\uC158 \uC804\uD658 \uC2DC\uB3C4 \uC2DC\r\n   */\r\n  setCurrentSection(section) {\r\n    if (section !== 'READING_WRITING' && section !== 'MATH') {\r\n      throw new Error(`\uC798\uBABB\uB41C \uC139\uC158: ${section}`);\r\n    }\r\n\r\n    const expectedStep = this.expectedOrder[this.currentStepIndex];\r\n    if (expectedStep.section !== section) {\r\n      const errorMsg = `\uC139\uC158 \uC21C\uC11C \uC624\uB958! \uD604\uC7AC \uB2E8\uACC4: ${expectedStep.section} Module ${expectedStep.module}, \uC2DC\uB3C4\uD55C \uC139\uC158: ${section}`;\r\n      console.error(`[SectionStateManager] ${errorMsg}`);\r\n      throw new Error(errorMsg);\r\n    }\r\n\r\n    this.currentSection = section;\r\n    console.log(`[SectionStateManager] \uC139\uC158 \uC124\uC815: ${section}`);\r\n  }\r\n\r\n  /**\r\n   * \uD604\uC7AC \uBAA8\uB4C8 \uC124\uC815 (\uC720\uC5F0\uD654: \uC5D0\uB7EC \uB300\uC2E0 UI\uC640 \uB3D9\uAE30\uD654)\r\n   * @param {number} module - 1 | 2\r\n   */\r\n  setCurrentModule(module) {\r\n    if (module !== 1 && module !== 2) {\r\n      console.warn(`[SAT-DEBUG] \uC798\uBABB\uB41C \uBAA8\uB4C8: ${module}, \uAE30\uBCF8\uAC12 1\uB85C \uC124\uC815`);\r\n      module = 1;\r\n    }\r\n\r\n    const expectedStep = this.expectedOrder[this.currentStepIndex];\r\n    if (expectedStep.module !== module) {\r\n      // \uC5D0\uB7EC \uB300\uC2E0 UI\uC640 \uB3D9\uAE30\uD654: \uD604\uC7AC \uD654\uBA74\uC758 \uC2E4\uC81C \uBB38\uC81C \uBC88\uD638\uB97C \uBCF4\uACE0 \uC0C1\uD0DC \uAC15\uC81C \uC5C5\uB370\uC774\uD2B8\r\n      console.warn(`[SAT-DEBUG] \uBAA8\uB4C8 \uC21C\uC11C \uBD88\uC77C\uCE58 \uAC10\uC9C0: \uC608\uC0C1=${expectedStep.module}, \uC2DC\uB3C4=${module}`);\r\n      console.log('[SAT-DEBUG] UI\uC640 \uB3D9\uAE30\uD654 \uC2DC\uC791...');\r\n      \r\n      // \uD604\uC7AC \uD654\uBA74\uC758 \uC2E4\uC81C \uBB38\uC81C \uBC88\uD638 \uD655\uC778\r\n      const progress = getProgressState();\r\n      const problemNum = getCurrentProblemNumber();\r\n      const detectedSection = this.detectSectionFromScreen();\r\n      \r\n      console.log('[SAT-DEBUG] \uD604\uC7AC \uD654\uBA74 \uC0C1\uD0DC:', {\r\n        progress,\r\n        problemNum,\r\n        detectedSection,\r\n        expectedStep\r\n      });\r\n      \r\n      // UI \uC0C1\uD0DC\uC5D0 \uB9DE\uCDB0 \uAC15\uC81C \uC5C5\uB370\uC774\uD2B8\r\n      if (detectedSection) {\r\n        this.currentSection = detectedSection;\r\n        console.log(`[SAT-DEBUG] \uC139\uC158\uC744 UI \uC0C1\uD0DC\uB85C \uC5C5\uB370\uC774\uD2B8: ${detectedSection}`);\r\n      }\r\n      \r\n      // \uBB38\uC81C \uBC88\uD638\uAC00 1-27\uC774\uBA74 Module 1, \uADF8 \uC774\uC0C1\uC774\uBA74 Module 2\uB85C \uCD94\uC815\r\n      if (problemNum > 0 && problemNum <= 27) {\r\n        this.currentModule = 1;\r\n        console.log(`[SAT-DEBUG] \uBAA8\uB4C8\uC744 UI \uC0C1\uD0DC\uB85C \uC5C5\uB370\uC774\uD2B8: Module 1 (\uBB38\uC81C \uBC88\uD638: ${problemNum})`);\r\n      } else if (problemNum > 27) {\r\n        this.currentModule = 2;\r\n        console.log(`[SAT-DEBUG] \uBAA8\uB4C8\uC744 UI \uC0C1\uD0DC\uB85C \uC5C5\uB370\uC774\uD2B8: Module 2 (\uBB38\uC81C \uBC88\uD638: ${problemNum})`);\r\n      } else {\r\n        // \uBB38\uC81C \uBC88\uD638\uB97C \uBABB \uCC3E\uC558\uC73C\uBA74 \uC2DC\uB3C4\uD55C \uBAA8\uB4C8 \uC0AC\uC6A9\r\n        this.currentModule = module;\r\n        console.log(`[SAT-DEBUG] \uBAA8\uB4C8\uC744 \uC2DC\uB3C4\uD55C \uAC12\uC73C\uB85C \uC124\uC815: Module ${module}`);\r\n      }\r\n    } else {\r\n      this.currentModule = module;\r\n      console.log(`[SectionStateManager] \uBAA8\uB4C8 \uC124\uC815: ${module}`);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * UI\uC640 \uC0C1\uD0DC \uB3D9\uAE30\uD654 (\uD604\uC7AC \uD654\uBA74\uC758 \uD14D\uC2A4\uD2B8\uB97C \uBD84\uC11D\uD574\uC11C \uC790\uB3D9\uC73C\uB85C \uB9DE\uCDA4)\r\n   */\r\n  syncWithUI() {\r\n    console.log('[SAT-DEBUG] \uD604\uC7AC \uB2E8\uACC4: UI\uC640 \uC0C1\uD0DC \uB3D9\uAE30\uD654 \uC2DC\uC791');\r\n    \r\n    const detectedSection = this.detectSectionFromScreen();\r\n    const progress = getProgressState();\r\n    const problemNum = getCurrentProblemNumber();\r\n    \r\n    // \uC139\uC158 \uB3D9\uAE30\uD654\r\n    if (detectedSection) {\r\n      this.currentSection = detectedSection;\r\n      console.log(`[SAT-DEBUG] \uC139\uC158 \uB3D9\uAE30\uD654: ${detectedSection}`);\r\n    }\r\n    \r\n    // \uBAA8\uB4C8 \uB3D9\uAE30\uD654 (\uBB38\uC81C \uBC88\uD638 \uAE30\uBC18)\r\n    if (problemNum > 0 && problemNum <= 27) {\r\n      this.currentModule = 1;\r\n      console.log(`[SAT-DEBUG] \uBAA8\uB4C8 \uB3D9\uAE30\uD654: Module 1 (\uBB38\uC81C \uBC88\uD638: ${problemNum})`);\r\n    } else if (problemNum > 27) {\r\n      this.currentModule = 2;\r\n      console.log(`[SAT-DEBUG] \uBAA8\uB4C8 \uB3D9\uAE30\uD654: Module 2 (\uBB38\uC81C \uBC88\uD638: ${problemNum})`);\r\n    } else if (progress) {\r\n      // Progress\uC5D0\uC11C \uBAA8\uB4C8 \uCD94\uC815 (\uC608: 1/27\uC774\uBA74 Module 1)\r\n      const match = progress.match(/(\\d+)\\s*\\/\\s*(\\d+)/);\r\n      if (match) {\r\n        const current = parseInt(match[1]);\r\n        if (current <= 27) {\r\n          this.currentModule = 1;\r\n          console.log(`[SAT-DEBUG] \uBAA8\uB4C8 \uB3D9\uAE30\uD654: Module 1 (Progress: ${progress})`);\r\n        } else {\r\n          this.currentModule = 2;\r\n          console.log(`[SAT-DEBUG] \uBAA8\uB4C8 \uB3D9\uAE30\uD654: Module 2 (Progress: ${progress})`);\r\n        }\r\n      }\r\n    }\r\n    \r\n    // StepIndex\uB3C4 \uC870\uC815 (\uD604\uC7AC \uC0C1\uD0DC\uC5D0 \uB9DE\uAC8C)\r\n    for (let i = 0; i < this.expectedOrder.length; i++) {\r\n      const step = this.expectedOrder[i];\r\n      if (step.section === this.currentSection && step.module === this.currentModule) {\r\n        this.currentStepIndex = i;\r\n        console.log(`[SAT-DEBUG] StepIndex \uB3D9\uAE30\uD654: ${i} (${step.section} Module ${step.module})`);\r\n        break;\r\n      }\r\n    }\r\n    \r\n    console.log('[SAT-DEBUG] \uD604\uC7AC \uB2E8\uACC4: UI\uC640 \uC0C1\uD0DC \uB3D9\uAE30\uD654 \uC644\uB8CC', {\r\n      section: this.currentSection,\r\n      module: this.currentModule,\r\n      stepIndex: this.currentStepIndex\r\n    });\r\n  }\r\n\r\n  /**\r\n   * \uD604\uC7AC \uB2E8\uACC4 \uC644\uB8CC \uCC98\uB9AC \uBC0F \uB2E4\uC74C \uB2E8\uACC4\uB85C \uC774\uB3D9\r\n   * @returns {Object|null} \uB2E4\uC74C \uB2E8\uACC4 \uC815\uBCF4 \uB610\uB294 null (\uBAA8\uB4E0 \uB2E8\uACC4 \uC644\uB8CC)\r\n   */\r\n  completeCurrentStep() {\r\n    if (this.currentStepIndex >= this.expectedOrder.length - 1) {\r\n      console.log('[SectionStateManager] \uBAA8\uB4E0 \uB2E8\uACC4 \uC644\uB8CC!');\r\n      return null;\r\n    }\r\n\r\n    this.currentStepIndex++;\r\n    const nextStep = this.expectedOrder[this.currentStepIndex];\r\n    console.log(`[SectionStateManager] \uB2E4\uC74C \uB2E8\uACC4: ${nextStep.section} Module ${nextStep.module}`);\r\n    return nextStep;\r\n  }\r\n\r\n  /**\r\n   * \uD604\uC7AC \uB2E8\uACC4 \uC815\uBCF4 \uAC00\uC838\uC624\uAE30\r\n   * @returns {Object} \uD604\uC7AC \uB2E8\uACC4 \uC815\uBCF4\r\n   */\r\n  getCurrentStep() {\r\n    return this.expectedOrder[this.currentStepIndex];\r\n  }\r\n\r\n  /**\r\n   * \uC139\uC158 Guard: \uD604\uC7AC \uC139\uC158\uC774 \uC9C0\uC815\uB41C \uC139\uC158\uC778\uC9C0 \uD655\uC778\r\n   * @param {string} expectedSection - \uC608\uC0C1 \uC139\uC158\r\n   * @returns {boolean} \uC77C\uCE58 \uC5EC\uBD80\r\n   */\r\n  isCurrentSection(expectedSection) {\r\n    return this.currentSection === expectedSection;\r\n  }\r\n\r\n  /**\r\n   * \uD654\uBA74\uC5D0\uC11C \uC139\uC158 \uAC10\uC9C0 \uBC0F \uAC80\uC99D\r\n   * @returns {string|null} \uAC10\uC9C0\uB41C \uC139\uC158 \uB610\uB294 null\r\n   */\r\n  detectSectionFromScreen() {\r\n    const bodyText = (document.body.innerText || document.body.textContent || '').toLowerCase();\r\n    \r\n    const hasReading = bodyText.includes('reading');\r\n    const hasWriting = bodyText.includes('writing');\r\n    const hasMath = bodyText.includes('math') || bodyText.includes('\uC218\uD559');\r\n    \r\n    // Reading and Writing \uC139\uC158 \uD655\uC778 (\uB458 \uB2E4 \uC788\uC5B4\uC57C \uD568)\r\n    if (hasReading && hasWriting && !hasMath) {\r\n      return 'READING_WRITING';\r\n    }\r\n    \r\n    // Math \uC139\uC158 \uD655\uC778\r\n    if (hasMath && (!hasReading || !hasWriting)) {\r\n      return 'MATH';\r\n    }\r\n    \r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * \uC139\uC158 Guard: \uC798\uBABB\uB41C \uC139\uC158\uC73C\uB85C\uC758 \uC804\uD658 \uCC28\uB2E8\r\n   * @param {string} attemptedSection - \uC2DC\uB3C4\uD558\uB824\uB294 \uC139\uC158\r\n   * @throws {Error} Guard \uC704\uBC18 \uC2DC\r\n   */\r\n  guardSectionTransition(attemptedSection) {\r\n    const detectedSection = this.detectSectionFromScreen();\r\n    \r\n    // \uD604\uC7AC \uC139\uC158\uC774 Reading and Writing\uC778\uB370 Math\uB85C \uC804\uD658 \uC2DC\uB3C4\r\n    if (this.currentSection === 'READING_WRITING' && attemptedSection === 'MATH') {\r\n      // \uBA3C\uC800 \uD654\uBA74\uC5D0\uC11C Reading and Writing\uC774 \uC0AC\uB77C\uC84C\uB294\uC9C0 \uD655\uC778\r\n      if (detectedSection === 'READING_WRITING') {\r\n        const errorMsg = 'Reading and Writing \uC139\uC158\uC774 \uC544\uC9C1 \uC644\uB8CC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. Math\uB85C \uC804\uD658\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.';\r\n        console.error(`[SectionStateManager] ${errorMsg}`);\r\n        throw new Error(errorMsg);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n", "// Module runner - handles per-module problem collection loop\r\n// Extracted from stateMachine.js to separate concerns\r\n\r\nimport { CONFIG, TEMP_MODE, TEMP_TARGET_NUMBERS } from '../config/constants.js';\r\nimport { isElementVisible } from '../dom/deepQuery.js';\r\nimport { waitForCondition, waitForContentLoad } from '../dom/wait.js';\r\nimport { isQuestionScreen, getCurrentProblemNumber, getProgressState, extractCurrentProblem, getQuestionSignature, isGraded, waitForGrading, detectCorrectAnswer, extractExplanationAfterGrading, findSatRoot, isModuleStartScreen } from '../dom/extract.js';\r\nimport { clickNextButtonWithFallback, clickFirstChoice, clickSubmitWithConfirmation, findNavigationButton } from '../dom/buttons.js';\r\n\r\n/** \uD604\uC7AC \uBB38\uC81C \uC601\uC5ED\uC5D0 \uC774\uBBF8\uC9C0/\uC0AC\uC9C4\uC774 \uC788\uB294\uC9C0 \uC5EC\uBD80 (\uC120\uC9C0 \uAD6C\uAC04 \uB300\uAE30 \uC2DC\uAC04 \uC870\uC808\uC6A9) */\r\nfunction currentProblemHasImage() {\r\n  const root = findSatRoot();\r\n  if (!root) return false;\r\n  return !!root.querySelector('img, figure, [class*=\"figure\"], [class*=\"image\"], [data-testid*=\"figure\"], [data-testid*=\"image\"]');\r\n}\r\n\r\n/**\r\n * \uBAA8\uB4C8\uC758 \uBAA8\uB4E0 \uBB38\uC81C \uC218\uC9D1\r\n * @param {Object} allData - \uC804\uCCB4 \uB370\uC774\uD130 \uAC1D\uCCB4 {reading: [], math: []}\r\n * @param {string} sectionType - 'reading' | 'math'\r\n * @param {string} moduleName - 'Module 1' | 'Module 2'\r\n */\r\nexport async function collectModuleProblems(allData, sectionType, moduleName) {\r\n  console.log(`[FLOW] collectModuleProblems start: ${sectionType} ${moduleName}`);\r\n  \r\n  const moduleNumber = moduleName === 'Module 1' ? 1 : 2;\r\n  const targetArray = sectionType === 'reading' ? allData.reading : allData.math;\r\n\r\n  // Guard: Reading Module 2 - do NOT start without Q1 (progress=1/27)\r\n  if (sectionType === 'reading' && moduleNumber === 2) {\r\n    const progress = getProgressState();\r\n    const isQ1 = progress && /^1\\s*\\/\\s*27/i.test(progress);\r\n    if (isModuleStartScreen()) {\r\n      console.error('[FLOW] ABORT: Module 2 \uC218\uC9D1 \uC2DC\uC791 \uBD88\uAC00 - Module Start Screen\uC774 \uC544\uC9C1 \uCC98\uB9AC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. startModule2()\uB97C \uBA3C\uC800 \uD638\uCD9C\uD558\uC138\uC694.');\r\n      return 0;\r\n    }\r\n    if (!isQ1 && !isQuestionScreen()) {\r\n      console.error('[FLOW] ABORT: Module 2 \uC218\uC9D1 \uC2DC\uC791 \uBD88\uAC00 - progress=1/27 \uB610\uB294 Q1 \uD654\uBA74\uC774 \uD544\uC694\uD569\uB2C8\uB2E4. current progress:', progress);\r\n      return 0;\r\n    }\r\n  }\r\n  \r\n  // ============================================================================\r\n  // BUG FIX: Module\uBCC4\uB85C \uC218\uC9D1\uB41C \uBB38\uC81C \uC218\uB97C \uBCC4\uB3C4\uB85C \uCE74\uC6B4\uD2B8\r\n  // ============================================================================\r\n  const moduleProblemsBefore = targetArray.filter(p => p.module === moduleNumber).length;\r\n  console.log(`[FLOW] ${moduleName} \uC2DC\uC791 \uC804 \uC218\uC9D1\uB41C \uBB38\uC81C \uC218: ${moduleProblemsBefore}\uAC1C (\uC804\uCCB4: ${targetArray.length}\uAC1C)`);\r\n  // ============================================================================\r\n  \r\n  // ============================================================================\r\n  // TEMP \uBAA8\uB4DC: \uC815\uD655\uD55C \uBC88\uD638(1,2,3)\uB9CC \uC218\uC9D1\r\n  // ============================================================================\r\n  const maxProblems = TEMP_MODE ? TEMP_TARGET_NUMBERS.length : (sectionType === 'math' ? (CONFIG.collection.mathMaxProblems ?? 22) : CONFIG.collection.maxProblems);\r\n  const targetNumbers = TEMP_MODE ? new Set(TEMP_TARGET_NUMBERS) : null; // TEMP \uBAA8\uB4DC\uC77C \uB54C\uB9CC \uC0AC\uC6A9\r\n  const collectedNumbers = new Set(); // \uC218\uC9D1\uB41C \uBB38\uC81C \uBC88\uD638 \uCD94\uC801\r\n  \r\n  if (TEMP_MODE) {\r\n    console.log(`[TEMP] TEMP \uBAA8\uB4DC \uD65C\uC131\uD654: \uC815\uD655\uD788 ${TEMP_TARGET_NUMBERS.join(', ')}\uBC88 \uBB38\uC81C\uB9CC \uC218\uC9D1\uD569\uB2C8\uB2E4.`);\r\n  } else {\r\n    console.log(`[FLOW] \uC218\uC9D1 \uC2DC\uC791: ${moduleName}, \uCD5C\uB300 ${maxProblems}\uAC1C \uBB38\uC81C (\uD604\uC7AC \uBAA8\uB4C8: ${moduleProblemsBefore}\uAC1C)`);\r\n  }\r\n  // ============================================================================\r\n  \r\n  const seenSignatures = new Set();\r\n  let consecutiveDuplicates = 0;\r\n  const maxConsecutiveDuplicates = 3;\r\n  let consecutiveExtractFailures = 0;\r\n  const maxExtractRetries = 5;\r\n\r\n  // \uB8E8\uD504 \uC870\uAC74: TEMP \uBAA8\uB4DC\uAC00 \uC544\uB2C8\uBA74 \uD604\uC7AC \uBAA8\uB4C8\uC5D0\uC11C \uC815\uD655\uD788 27\uAC1C\uAE4C\uC9C0 \uC218\uC9D1 (27\uBC88 \uBB38\uC81C \uD3EC\uD568)\r\n  // BUG FIX: targetArray.length\uAC00 \uC544\uB2CC \uD604\uC7AC \uBAA8\uB4C8\uC758 \uBB38\uC81C \uC218\uB97C \uAE30\uC900\uC73C\uB85C \uB8E8\uD504 \uC870\uAC74 \uC124\uC815\r\n  // BUG FIX: Module 2\uC5D0\uC11C\uB294 progress \uC99D\uAC00 \uD655\uC778 \uC2DC consecutiveDuplicates \uCCB4\uD06C \uC644\uD654\r\n  let lastProgressState = null;\r\n  while ((TEMP_MODE ? collectedNumbers.size < targetNumbers.size : targetArray.filter(p => p.module === moduleNumber).length < maxProblems) && (moduleNumber === 2 ? true : consecutiveDuplicates < maxConsecutiveDuplicates)) {\r\n    // STEP 3: TEMP \uBAA8\uB4DC \uCCB4\uD06C\uB294 \uBB38\uC81C push \uD6C4\uC5D0 \uC218\uD589 (\uC544\uB798\uB85C \uC774\uB3D9)\r\n    // \uD604\uC7AC \uBB38\uC81C \uD654\uBA74 \uD655\uC778\r\n    const isQuestion = isQuestionScreen();\r\n    const progressState = getProgressState();\r\n    const bodyText = (document.body.innerText || document.body.textContent || '').substring(0, 200);\r\n    \r\n    // BUG FIX: Module 2\uC5D0\uC11C progress \uC0C1\uD0DC \uCD94\uC801 \uCD08\uAE30\uD654\r\n    if (lastProgressState === null) {\r\n      lastProgressState = progressState;\r\n    }\r\n    \r\n    // BUG FIX: Module 2\uC5D0\uC11C progress \uC0C1\uD0DC \uCD94\uC801 \uCD08\uAE30\uD654\r\n    if (lastProgressState === null) {\r\n      lastProgressState = progressState;\r\n    }\r\n    \r\n    // #region agent log\r\n    const moduleProblemsCount = targetArray.filter(p => p.module === moduleNumber).length;\r\n    const loopCondition = TEMP_MODE ? collectedNumbers.size < targetNumbers.size : moduleProblemsCount < maxProblems;\r\n    const allProblems = targetArray.map(p => ({module: p.module, problemNumber: p.problemNumber}));\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:loopStart',message:'collectModuleProblems loop start',data:{targetArrayLength:targetArray.length,moduleProblemsCount,maxProblems,loopCondition,consecutiveDuplicates,maxConsecutiveDuplicates,isQuestion,progressState,bodyText,moduleName,moduleNumber,allProblems},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'F'})}).catch(()=>{});\r\n    // #endregion\r\n    \r\n    if (!isQuestion) {\r\n      console.warn(`[FLOW] \uBB38\uC81C \uD654\uBA74\uC774 \uC544\uB2D9\uB2C8\uB2E4. \uB300\uAE30 \uC911...`);\r\n      await waitForCondition(() => isQuestionScreen(), CONFIG.timeouts.screenTransition);\r\n      if (!isQuestionScreen()) {\r\n        console.warn(`[FLOW] \uBB38\uC81C \uD654\uBA74\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC218\uC9D1 \uC885\uB8CC.`);\r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:questionScreenNotFound',message:'question screen not found, breaking',data:{targetArrayLength:targetArray.length,bodyText:(document.body.innerText||'').substring(0,200)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'C'})}).catch(()=>{});\r\n        // #endregion\r\n        break;\r\n      }\r\n    }\r\n    \r\n    // \uD604\uC7AC \uBB38\uC81C \uBC88\uD638 \uD655\uC778 (\uC5EC\uB7EC \uBC88 \uC77D\uC5B4\uC11C \uC815\uD655\uB3C4 \uD5A5\uC0C1)\r\n    let currentProblemNum = getCurrentProblemNumber();\r\n    const progressStateCheck = getProgressState();\r\n    \r\n    // \uBB38\uC81C \uBC88\uD638\uAC00 0\uC774\uAC70\uB098 \uC5C6\uC73C\uBA74 Progress\uC5D0\uC11C \uB2E4\uC2DC \uC77D\uAE30\r\n    if (!currentProblemNum || currentProblemNum <= 0) {\r\n      if (progressStateCheck) {\r\n        const progressMatch = progressStateCheck.match(/(\\d+)\\s*\\/\\s*\\d+/);\r\n        if (progressMatch) {\r\n          currentProblemNum = parseInt(progressMatch[1]);\r\n          console.log(`[FLOW] \uBB38\uC81C \uBC88\uD638\uB97C Progress\uC5D0\uC11C \uCD94\uCD9C: ${currentProblemNum}`);\r\n        }\r\n      }\r\n    }\r\n    \r\n    // \uBB38\uC81C \uBC88\uD638\uB97C \uB2E4\uC2DC \uD55C \uBC88 \uD655\uC778 (DOM\uC774 \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC744 \uC218 \uC788\uC74C)\r\n    await new Promise(resolve => setTimeout(resolve, 120));\r\n    const retryProblemNum = getCurrentProblemNumber();\r\n    if (retryProblemNum > 0 && retryProblemNum !== currentProblemNum) {\r\n      console.log(`[FLOW] \uBB38\uC81C \uBC88\uD638 \uC7AC\uD655\uC778: ${currentProblemNum} \u2192 ${retryProblemNum}`);\r\n      currentProblemNum = retryProblemNum;\r\n    }\r\n    \r\n    console.log(`[FLOW] \uD604\uC7AC \uBB38\uC81C: ${currentProblemNum}, Progress: ${progressStateCheck}`);\r\n    \r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:problemNumberCheck',message:'problem number check',data:{currentProblemNum,progressState:progressStateCheck,targetArrayLength:targetArray.length,isQuestionScreen:isQuestionScreen(),bodyText:(document.body.innerText||'').substring(0,200)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'})}).catch(()=>{});\r\n    // #endregion\r\n    \r\n    // TEMP \uBAA8\uB4DC: \uC6D0\uD558\uB294 \uBC88\uD638\uAC00 \uC544\uB2C8\uBA74 \uC218\uC9D1\uD558\uC9C0 \uC54A\uACE0 \uB2E4\uC74C\uC73C\uB85C \uC774\uB3D9 (\uAC15\uC81C)\r\n    if (TEMP_MODE && targetNumbers) {\r\n      if (!currentProblemNum || currentProblemNum <= 0) {\r\n        console.error(`[TEMP] \u2717 \uBB38\uC81C \uBC88\uD638\uB97C \uC77D\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4 (${currentProblemNum}). \uB2E4\uC74C\uC73C\uB85C \uC774\uB3D9\uD569\uB2C8\uB2E4.`);\r\n        const beforeProblemNum = 0;\r\n        const moved = await clickNextButtonWithFallback(beforeProblemNum);\r\n        if (!moved) {\r\n          console.warn(`[FLOW] \uB2E4\uC74C \uBB38\uC81C\uB85C \uC774\uB3D9 \uC2E4\uD328. \uC218\uC9D1 \uC885\uB8CC.`);\r\n          break;\r\n        }\r\n        await waitForContentLoad(CONFIG.timeouts.screenTransition);\r\n        continue;\r\n      }\r\n      \r\n      if (!targetNumbers.has(currentProblemNum)) {\r\n        console.error(`[TEMP] \u2717 \uBB38\uC81C \uBC88\uD638 ${currentProblemNum}\uB294 \uC218\uC9D1 \uB300\uC0C1\uC774 \uC544\uB2D9\uB2C8\uB2E4! \uB2E4\uC74C\uC73C\uB85C \uC774\uB3D9\uD569\uB2C8\uB2E4.`);\r\n        console.error(`[TEMP] \uC218\uC9D1 \uB300\uC0C1: ${Array.from(targetNumbers).join(', ')}, \uC774\uBBF8 \uC218\uC9D1: ${Array.from(collectedNumbers).join(', ')}`);\r\n        \r\n        // \uB2E4\uC74C \uBB38\uC81C\uB85C \uC774\uB3D9\r\n        const beforeProblemNum = currentProblemNum;\r\n        const moved = await clickNextButtonWithFallback(beforeProblemNum);\r\n        \r\n        if (!moved) {\r\n          console.warn(`[FLOW] \uB2E4\uC74C \uBB38\uC81C\uB85C \uC774\uB3D9 \uC2E4\uD328. \uC218\uC9D1 \uC885\uB8CC.`);\r\n          break;\r\n        }\r\n        \r\n        await waitForContentLoad(CONFIG.timeouts.screenTransition);\r\n        continue; // \uC218\uC9D1\uD558\uC9C0 \uC54A\uACE0 \uB2E4\uC74C \uB8E8\uD504\uB85C\r\n      }\r\n    }\r\n    \r\n    // \uBB38\uC81C \uC2DC\uADF8\uB2C8\uCC98 \uC0DD\uC131 (\uC911\uBCF5 \uD655\uC778\uC6A9)\r\n    // BUG FIX: Module 2\uC5D0\uC11C\uB294 (module, problemNumber) \uC870\uD569\uC73C\uB85C \uC2DC\uADF8\uB2C8\uCC98 \uC0DD\uC131\r\n    const baseSignature = getQuestionSignature();\r\n    const signature = moduleNumber === 2 ? `${moduleNumber}-${currentProblemNum}-${baseSignature}` : baseSignature;\r\n    \r\n    // #region agent log\r\n    const beforeProgressState = getProgressState();\r\n    const beforeProblemNum = getCurrentProblemNumber();\r\n    // BUG FIX: Module 2\uC5D0\uC11C progress \uC0C1\uD0DC \uC5C5\uB370\uC774\uD2B8\r\n    if (moduleNumber === 2 && beforeProgressState !== lastProgressState) {\r\n      lastProgressState = beforeProgressState;\r\n    }\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:signatureCheck',message:'checking problem signature for duplicates',data:{baseSignature,signature,moduleNumber,currentProblemNum,beforeProblemNum,seenSignatures:Array.from(seenSignatures),consecutiveDuplicates,isDuplicate:seenSignatures.has(signature),beforeProgressState,lastProgressState},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'J'})}).catch(()=>{});\r\n    // #endregion\r\n    \r\n    if (seenSignatures.has(signature)) {\r\n      console.warn(`[FLOW] \uC911\uBCF5 \uBB38\uC81C \uAC10\uC9C0: ${signature} (\uBAA8\uB4C8: ${moduleNumber}, \uBB38\uC81C: ${currentProblemNum})`);\r\n      consecutiveDuplicates++;\r\n      \r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:duplicateDetected',message:'duplicate problem detected, incrementing consecutiveDuplicates',data:{signature,moduleNumber,currentProblemNum,consecutiveDuplicates,maxConsecutiveDuplicates,reason:'signature already seen',beforeProgressState,lastProgressState},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'J'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      // BUG FIX: Module 2\uC5D0\uC11C progress \uC99D\uAC00 \uD655\uC778 \uC2DC consecutiveDuplicates \uB9AC\uC14B\r\n      if (moduleNumber === 2) {\r\n        const currentProgressState = getProgressState();\r\n        const currentProblemNumFromProgress = getCurrentProblemNumber();\r\n        // Module 2\uC5D0\uC11C progress\uAC00 \uC99D\uAC00\uD588\uC73C\uBA74 consecutiveDuplicates \uB9AC\uC14B\r\n        if (lastProgressState !== currentProgressState && currentProblemNumFromProgress > 0) {\r\n          console.log(`[FLOW] Module 2: progress \uBCC0\uD654 \uAC10\uC9C0 (${lastProgressState} \u2192 ${currentProgressState}), consecutiveDuplicates \uB9AC\uC14B`);\r\n          consecutiveDuplicates = 0;\r\n          lastProgressState = currentProgressState;\r\n          // #region agent log\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:module2ProgressChange',message:'Module 2: progress changed, resetting consecutiveDuplicates',data:{lastProgressState,currentProgressState,currentProblemNumFromProgress,consecutiveDuplicates:0,moduleNumber},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'J'})}).catch(()=>{});\r\n          // #endregion\r\n          // \uC0C8\uB85C\uC6B4 \uC2DC\uADF8\uB2C8\uCC98\uB85C \uCD94\uAC00\uD558\uACE0 \uACC4\uC18D \uC9C4\uD589\r\n          seenSignatures.add(signature);\r\n          continue; // \uB2E4\uC74C \uB8E8\uD504\uB85C \uACC4\uC18D \uC9C4\uD589\r\n        }\r\n      }\r\n      \r\n      if (consecutiveDuplicates >= maxConsecutiveDuplicates) {\r\n        console.warn(`[FLOW] \uC5F0\uC18D \uC911\uBCF5 ${maxConsecutiveDuplicates}\uD68C. \uC218\uC9D1 \uC885\uB8CC.`);\r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:breakConsecutiveDuplicates',message:'BREAK: consecutive duplicates exceeded',data:{reason:'consecutiveDuplicatesExceeded',currentProblemNum,moduleProblemsCount:targetArray.filter(p => p.module === moduleNumber).length,consecutiveDuplicates,maxConsecutiveDuplicates,progressState:getProgressState(),isQuestion:isQuestionScreen(),signature,moduleNumber,lastProgressState},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'J'})}).catch(()=>{});\r\n        // #endregion\r\n        break;\r\n      }\r\n    } else {\r\n      consecutiveDuplicates = 0;\r\n      seenSignatures.add(signature);\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:newSignature',message:'new signature detected, resetting consecutiveDuplicates',data:{signature,moduleNumber,currentProblemNum,consecutiveDuplicates:0},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'J'})}).catch(()=>{});\r\n      // #endregion\r\n    }\r\n    \r\n    // TEMP \uBAA8\uB4DC: \uC774\uBBF8 \uC218\uC9D1\uD55C \uBC88\uD638\uBA74 \uC2A4\uD0B5\r\n    if (TEMP_MODE && collectedNumbers.has(currentProblemNum)) {\r\n      console.log(`[TEMP] \uBB38\uC81C \uBC88\uD638 ${currentProblemNum}\uB294 \uC774\uBBF8 \uC218\uC9D1\uD588\uC2B5\uB2C8\uB2E4. \uB2E4\uC74C\uC73C\uB85C \uC774\uB3D9\uD569\uB2C8\uB2E4.`);\r\n      \r\n      const beforeProblemNum = currentProblemNum;\r\n      const moved = await clickNextButtonWithFallback(beforeProblemNum);\r\n      \r\n      if (!moved) {\r\n        console.warn(`[FLOW] \uB2E4\uC74C \uBB38\uC81C\uB85C \uC774\uB3D9 \uC2E4\uD328. \uC218\uC9D1 \uC885\uB8CC.`);\r\n        break;\r\n      }\r\n      \r\n      await waitForContentLoad(CONFIG.timeouts.screenTransition);\r\n      continue;\r\n    }\r\n    \r\n    // \uC774\uBBF8 \uCC44\uC810\uB41C \uC0C1\uD0DC\uC778\uC9C0 \uD655\uC778\r\n    const alreadyGraded = isGraded();\r\n    \r\n    // BUG FIX: 27\uBC88 \uBB38\uC81C\uB294 \uC81C\uCD9C \uC804\uC5D0 \uBB38\uC81C \uCD94\uCD9C (\uD654\uBA74 \uC804\uD658 \uC804\uC5D0)\r\n    const isLastProblem = currentProblemNum === maxProblems;\r\n    \r\n    // BUG FIX: 27\uBC88 \uBB38\uC81C\uB294 \uC81C\uCD9C \uC804\uC5D0 \uBB38\uC81C \uCD94\uCD9C (\uD654\uBA74 \uC804\uD658 \uC804\uC5D0)\r\n    let problem = null;\r\n    if (isLastProblem && !alreadyGraded) {\r\n      console.log(`[FLOW] 27\uBC88 \uBB38\uC81C \uAC10\uC9C0: \uC81C\uCD9C \uC804\uC5D0 \uBB38\uC81C \uCD94\uCD9C \uC911...`);\r\n      // #region agent log\r\n      const beforeExtractProblemNum = getCurrentProblemNumber();\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:extract27BeforeSubmit',message:'extracting problem 27 before submit',data:{currentProblemNum,maxProblems,beforeExtractProblemNum},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'I'})}).catch(()=>{});\r\n      // #endregion\r\n      problem = await extractCurrentProblem(sectionType);\r\n      // BUG FIX: 27\uBC88 \uBB38\uC81C\uB294 \uBB34\uC870\uAC74 27\uB85C \uAC15\uC81C \uC124\uC815 (extractCurrentProblem\uC774 1\uC744 \uBC18\uD658\uD560 \uC218 \uC788\uC74C)\r\n      if (problem) {\r\n        problem.problemNumber = currentProblemNum; // \uBB34\uC870\uAC74 currentProblemNum(27)\uB85C \uC124\uC815\r\n        console.log(`[FLOW] 27\uBC88 \uBB38\uC81C \uBC88\uD638 \uAC15\uC81C \uC124\uC815: ${currentProblemNum} (extractCurrentProblem \uACB0\uACFC: ${problem.problemNumber})`);\r\n      }\r\n      // #region agent log\r\n      const afterExtractProblemNum = getCurrentProblemNumber();\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:extract27BeforeSubmitDone',message:'extracted problem 27 before submit',data:{problemNumber:problem?.problemNumber,currentProblemNum,beforeExtractProblemNum,afterExtractProblemNum},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'I'})}).catch(()=>{});\r\n      // #endregion\r\n    }\r\n    \r\n    // \uC815\uB2F5\uACFC \uD574\uC124 \uBCC0\uC218 \uC120\uC5B8 (\uBE14\uB85D \uBC16\uC5D0\uC11C \uC120\uC5B8\uD558\uC5EC \uC2A4\uCF54\uD504 \uBB38\uC81C \uD574\uACB0)\r\n    let correctAnswer = null;\r\n    let explanation = '';\r\n    \r\n    // \uC120\uD0DD\uC9C0 \uD074\uB9AD \uBC0F \uCC44\uC810 (\uC815\uB2F5 \uCD94\uCD9C\uC744 \uC704\uD574 \uD544\uC218)\r\n    // TEMP_MODE\uC5D0\uC11C\uB3C4 \uC815\uB2F5 \uCD94\uCD9C\uC744 \uC704\uD574 \uC120\uD0DD\uC9C0 \uD074\uB9AD \u2192 submit \u2192 grading \uD544\uC694\r\n    // BUG FIX: 27\uBC88 \uBB38\uC81C\uB294 \uC81C\uCD9C \uC804\uC5D0 \uBB38\uC81C \uCD94\uCD9C + \uC815\uB2F5 \uCD94\uCD9C (\uC120\uD0DD\uC9C0 \uD074\uB9AD \uC9C1\uD6C4, \uC81C\uCD9C \uC804)\r\n    // \uC774\uC720: \uC81C\uCD9C \uC2DC \uD654\uBA74 \uC804\uD658\uC774 \uC989\uC2DC \uBC1C\uC0DD\uD558\uC5EC \uC81C\uCD9C \uD6C4\uC5D0\uB294 \uC815\uB2F5 DOM\uC774 \uC0AC\uB77C\uC9D0\r\n    if (!alreadyGraded) {\r\n      // \uC120\uC9C0 \uC120\uD0DD \uAD6C\uAC04\uC774 \uB108\uBB34 \uBE68\uB9AC \uC9C0\uB098\uAC00\uC9C0 \uC54A\uB3C4\uB85D \uB300\uAE30 (\uD2B9\uD788 \uC0AC\uC9C4 \uC788\uB294 \uBB38\uC81C)\r\n      const hasImage = currentProblemHasImage();\r\n      const beforeMs = hasImage ? CONFIG.timeouts.beforeChoiceClickWithImage : CONFIG.timeouts.beforeChoiceClick;\r\n      console.log(`[FLOW] \uC120\uC9C0 \uD074\uB9AD \uC804 \uB300\uAE30 ${beforeMs}ms${hasImage ? ' (\uC774\uBBF8\uC9C0 \uC788\uC74C)' : ''}...`);\r\n      await new Promise(resolve => setTimeout(resolve, beforeMs));\r\n\r\n      // \uC120\uD0DD\uC9C0 \uD074\uB9AD (A) - \uC2E4\uD328 \uC2DC \uC7AC\uC2DC\uB3C4 \uD6C4\uC5D0\uB3C4 \uC2E4\uD328\uD558\uBA74 \uC81C\uCD9C\uD558\uC9C0 \uC54A\uACE0 \uAC19\uC740 \uBB38\uC81C \uC7AC\uC2DC\uB3C4\r\n      const maxChoiceClickRetries = 3;\r\n      const choiceRetryDelayMs = 400;\r\n      let clicked = await clickFirstChoice(sectionType);\r\n      if (!clicked) {\r\n        for (let retry = 1; retry <= maxChoiceClickRetries; retry++) {\r\n          console.log(`[FLOW] \uC120\uD0DD\uC9C0 \uD074\uB9AD \uC2E4\uD328. \uC7AC\uC2DC\uB3C4 ${retry}/${maxChoiceClickRetries} (${choiceRetryDelayMs}ms \uD6C4)...`);\r\n          await new Promise(resolve => setTimeout(resolve, choiceRetryDelayMs));\r\n          clicked = await clickFirstChoice(sectionType);\r\n          if (clicked) break;\r\n        }\r\n      }\r\n      if (!clicked) {\r\n        console.warn(`[FLOW] \uC120\uD0DD\uC9C0 \uD074\uB9AD \uCD5C\uC885 \uC2E4\uD328. \uC81C\uCD9C\uD558\uC9C0 \uC54A\uACE0 \uAC19\uC740 \uBB38\uC81C \uB2E4\uC2DC \uC2DC\uB3C4\uD569\uB2C8\uB2E4.`);\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        continue;\r\n      }\r\n      console.log(`[FLOW] \u2713 \uC120\uD0DD\uC9C0 \uD074\uB9AD \uC131\uACF5`);\r\n      // \uC120\uC9C0 \uD074\uB9AD \uD6C4 \uC81C\uCD9C \uC804 \uB300\uAE30 (\uB2E4\uC74C \uC120\uC9C0 \uAD6C\uAC04\uC774 \uB108\uBB34 \uBE68\uB9AC \uC9C0\uB098\uAC00\uC9C0 \uC54A\uB3C4\uB85D)\r\n      const afterMs = hasImage ? CONFIG.timeouts.afterChoiceClickWithImage : CONFIG.timeouts.afterChoiceClick;\r\n      console.log(`[FLOW] \uC120\uC9C0 \uD074\uB9AD \uD6C4 \uC81C\uCD9C \uC804 \uB300\uAE30 ${afterMs}ms${hasImage ? ' (\uC774\uBBF8\uC9C0 \uC788\uC74C)' : ''}...`);\r\n      await new Promise(resolve => setTimeout(resolve, afterMs));\r\n\r\n      // BUG FIX: 27\uBC88 \uBB38\uC81C\uB294 \uC81C\uCD9C \uC804\uC5D0 \uC815\uB2F5 \uCD94\uCD9C (\uC120\uD0DD\uC9C0 \uD074\uB9AD \uC2DC \uC989\uC2DC \uCC44\uC810\uB428)\r\n      if (isLastProblem && clicked) {\r\n        console.log(`[FLOW] 27\uBC88: \uC81C\uCD9C \uC804\uC5D0 \uC815\uB2F5 \uCD94\uCD9C (\uD654\uBA74 \uC804\uD658 \uC804)...`);\r\n        await new Promise(resolve => setTimeout(resolve, 120));\r\n        correctAnswer = detectCorrectAnswer();\r\n        explanation = extractExplanationAfterGrading(correctAnswer, currentProblemNum) || '';\r\n        if (correctAnswer) {\r\n          console.log(`[FLOW] \u2713 27\uBC88 \uBB38\uC81C \uC815\uB2F5 \uCD94\uCD9C \uC131\uACF5 (\uC81C\uCD9C \uC804): ${correctAnswer}`);\r\n        }\r\n      }\r\n      \r\n      // \uC81C\uCD9C (\uC120\uD0DD\uC9C0 \uD074\uB9AD\uC774 \uC131\uACF5\uD55C \uACBD\uC6B0\uC5D0\uB9CC)\r\n      console.log(`[FLOW] \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD \uC911...`);\r\n      // BUG FIX: 27\uBC88\uC740 \uD655\uC778 \uBC84\uD2BC \uD074\uB9AD \uC9C1\uD6C4(\uD654\uBA74 \uC804\uD658 \uC804)\uC5D0 \uC815\uB2F5\uC744 \uCEA1\uCC98\uD558\uB3C4\uB85D \uCF5C\uBC31 \uC804\uB2EC\r\n      const onAfterConfirm = isLastProblem ? async () => {\r\n        console.log('[FLOW] 27\uBC88: \uD655\uC778 \uD074\uB9AD \uC9C1\uD6C4 \uC815\uB2F5 \uD3F4\uB9C1 \uC2DC\uC791...');\r\n        const deadline = Date.now() + 3000;\r\n        while (Date.now() < deadline && !correctAnswer) {\r\n          const polled = detectCorrectAnswer();\r\n          if (polled) {\r\n            correctAnswer = polled;\r\n            explanation = extractExplanationAfterGrading(polled, currentProblemNum) || '';\r\n            console.log(`[FLOW] 27\uBC88: \uD655\uC778 \uC9C1\uD6C4 \uC815\uB2F5 \uD655\uBCF4 \u2192 ${polled}`);\r\n            fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:lastProblemOnConfirm',message:'27 answer captured in onAfterConfirm',data:{currentProblemNum,polled},timestamp:Date.now(),runId:'run1',hypothesisId:'K'})}).catch(()=>{});\r\n            break;\r\n          }\r\n          await new Promise(resolve => setTimeout(resolve, 50));\r\n        }\r\n      } : undefined;\r\n      const submitted = await clickSubmitWithConfirmation(onAfterConfirm);\r\n      if (!submitted) {\r\n        console.warn(`[FLOW] \uC81C\uCD9C \uC2E4\uD328. \uB2E4\uC74C \uBB38\uC81C\uB85C \uC774\uB3D9 \uC2DC\uB3C4.`);\r\n      } else {\r\n        console.log(`[FLOW] \u2713 \uC81C\uCD9C \uC131\uACF5`);\r\n      }\r\n      \r\n      // \uCC44\uC810 \uB300\uAE30 (27\uBC88\uC740 onAfterConfirm\uC5D0\uC11C \uC774\uBBF8 \uC815\uB2F5 \uD655\uBCF4\uD588\uC73C\uBA74 \uC2A4\uD0B5)\r\n      console.log(`[FLOW] \uCC44\uC810 \uB300\uAE30 \uC911...`);\r\n      let gradingResult = !!correctAnswer;\r\n      if (!gradingResult) {\r\n        gradingResult = await waitForGrading(1500);\r\n      }\r\n      \r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:afterGrading',message:'after grading wait',data:{gradingResult,isLastProblem,currentProblemNum},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'I'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      if (!gradingResult) {\r\n        console.warn(`[FLOW] \uCC44\uC810 \uC644\uB8CC \uB300\uAE30 \uC2E4\uD328. \uB2E4\uC74C \uBB38\uC81C\uB85C \uC774\uB3D9 \uC2DC\uB3C4.`);\r\n        // BUG FIX: 27\uBC88 \uBB38\uC81C\uB294 \uCC44\uC810 \uC2E4\uD328\uD574\uB3C4 \uC815\uB2F5 \uCD94\uCD9C \uC2DC\uB3C4 (\uC774\uBBF8 \uC120\uD0DD\uC9C0 \uD074\uB9AD\uD588\uC73C\uBBC0\uB85C)\r\n        if (isLastProblem) {\r\n          console.log(`[FLOW] 27\uBC88 \uBB38\uC81C: \uCC44\uC810 \uB300\uAE30 \uC2E4\uD328\uD588\uC9C0\uB9CC \uC815\uB2F5 \uCD94\uCD9C \uC2DC\uB3C4...`);\r\n          await new Promise(resolve => setTimeout(resolve, 50));\r\n          correctAnswer = detectCorrectAnswer();\r\n          explanation = extractExplanationAfterGrading(correctAnswer, currentProblemNum) || '';\r\n          if (correctAnswer) {\r\n            console.log(`[FLOW] \u2713 27\uBC88 \uBB38\uC81C \uC815\uB2F5 \uCD94\uCD9C \uC131\uACF5 (\uCC44\uC810 \uB300\uAE30 \uC2E4\uD328 \uD6C4): ${correctAnswer}`);\r\n          }\r\n        }\r\n      } else {\r\n        console.log(`[FLOW] \u2713 \uCC44\uC810 \uC644\uB8CC`);\r\n        \r\n        // \uCC44\uC810 \uC644\uB8CC \uD6C4 \uC815\uB2F5 \uD45C\uC2DC\uAC00 DOM\uC5D0 \uC644\uC804\uD788 \uBC18\uC601\uB420 \uB54C\uAE4C\uC9C0 \uCD94\uAC00 \uB300\uAE30\r\n        console.log(`[FLOW] \uC815\uB2F5 \uD45C\uC2DC DOM \uBC18\uC601 \uB300\uAE30 \uC911...`);\r\n        await new Promise(resolve => setTimeout(resolve, 120)); // DOM \uBC18\uC601 \uB300\uAE30\r\n        \r\n        // \uC815\uB2F5 \uD45C\uC2DC\uAC00 \uC2E4\uC81C\uB85C \uB098\uD0C0\uB0AC\uB294\uC9C0 \uC7AC\uD655\uC778\r\n        let retryCount = 0;\r\n        let answerMarkingFound = false;\r\n        while (retryCount < 5) {\r\n          const satRoot = findSatRoot();\r\n          if (satRoot) {\r\n            const hasAnswerMarking = satRoot.querySelector('[class*=\"answered-correct\"], [class*=\"answered-incorrect\"], [aria-label*=\"Correct\" i], [aria-label*=\"Incorrect\" i]');\r\n            if (hasAnswerMarking) {\r\n              console.log(`[FLOW] \u2713 \uC815\uB2F5 \uD45C\uC2DC \uD655\uC778\uB428 (\uC7AC\uC2DC\uB3C4 ${retryCount + 1}/5)`);\r\n              answerMarkingFound = true;\r\n              break;\r\n            }\r\n          }\r\n          await new Promise(resolve => setTimeout(resolve, 120));\r\n          retryCount++;\r\n        }\r\n        \r\n        // \uC815\uB2F5 \uD45C\uC2DC\uAC00 \uD655\uC778\uB418\uBA74 \uC989\uC2DC \uC815\uB2F5 \uCD94\uCD9C (DOM\uC774 \uBCC0\uACBD\uB418\uAE30 \uC804\uC5D0)\r\n        if (answerMarkingFound) {\r\n          console.log(`[FLOW] \uC815\uB2F5 \uCD94\uCD9C \uC2DC\uB3C4 \uC911 (\uCC44\uC810 \uC9C1\uD6C4)...`);\r\n          // #region agent log\r\n          const beforeExtractProblemNum = getCurrentProblemNumber();\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:beforeExtract',message:'before extracting answer and explanation',data:{currentProblemNum,beforeExtractProblemNum},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n          // #endregion\r\n          correctAnswer = detectCorrectAnswer();\r\n          const beforeExplanationProblemNum = getCurrentProblemNumber();\r\n          explanation = extractExplanationAfterGrading(correctAnswer, currentProblemNum) || '';\r\n          // #region agent log\r\n          const afterExtractProblemNum = getCurrentProblemNumber();\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:afterExtract',message:'after extracting answer and explanation',data:{currentProblemNum,afterExtractProblemNum,beforeExplanationProblemNum,correctAnswer,explanationLength:explanation.length,explanationPreview:explanation.substring(0,100)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n          // #endregion\r\n          \r\n          if (correctAnswer) {\r\n            console.log(`[FLOW] \u2713 \uC815\uB2F5 \uCD94\uCD9C \uC131\uACF5: ${correctAnswer}`);\r\n          } else {\r\n            console.warn(`[FLOW] \u2717 \uC815\uB2F5 \uCD94\uCD9C \uC2E4\uD328 (\uCC44\uC810 \uC9C1\uD6C4 \uC2DC\uB3C4)`);\r\n            // \uCD94\uAC00 \uB300\uAE30 \uD6C4 \uC7AC\uC2DC\uB3C4\r\n            await new Promise(resolve => setTimeout(resolve, 120));\r\n            // #region agent log\r\n            const retryProblemNum = getCurrentProblemNumber();\r\n            fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:retryExtract',message:'retrying answer extraction',data:{currentProblemNum,retryProblemNum},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n            // #endregion\r\n            correctAnswer = detectCorrectAnswer();\r\n            const beforeRetryExplanationProblemNum = getCurrentProblemNumber();\r\n            explanation = extractExplanationAfterGrading(correctAnswer, currentProblemNum) || '';\r\n            // #region agent log\r\n            const afterRetryProblemNum = getCurrentProblemNumber();\r\n            fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:afterRetryExtract',message:'after retry extraction',data:{currentProblemNum,afterRetryProblemNum,beforeRetryExplanationProblemNum,correctAnswer,explanationLength:explanation.length,explanationPreview:explanation.substring(0,100)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n            // #endregion\r\n            if (correctAnswer) {\r\n              console.log(`[FLOW] \u2713 \uC815\uB2F5 \uCD94\uCD9C \uC131\uACF5 (\uC7AC\uC2DC\uB3C4): ${correctAnswer}`);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      console.log(`[FLOW] \uC774\uBBF8 \uCC44\uC810\uB41C \uC0C1\uD0DC\uC785\uB2C8\uB2E4.`);\r\n      // \uC774\uBBF8 \uCC44\uC810\uB41C \uC0C1\uD0DC\uC5D0\uC11C\uB3C4 \uC815\uB2F5 \uCD94\uCD9C \uC2DC\uB3C4\r\n      correctAnswer = detectCorrectAnswer();\r\n      const beforeAlreadyGradedExplanationProblemNum = getCurrentProblemNumber();\r\n      explanation = extractExplanationAfterGrading(correctAnswer, currentProblemNum) || '';\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:alreadyGradedExtract',message:'extracting from already graded state',data:{currentProblemNum,beforeAlreadyGradedExplanationProblemNum,correctAnswer,explanationLength:explanation.length,explanationPreview:explanation.substring(0,100)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n      // #endregion\r\n      // BUG FIX: \uBAA8\uB4C8 2 \uBB38\uC81C 1 - isGraded\uAC00 \uC624\uD0D0\uD560 \uC218 \uC788\uC74C (\uC2E0\uADDC \uD654\uBA74). \uC815\uB2F5 \uC5C6\uC73C\uBA74 \uD074\uB9AD \uACBD\uB85C \uC7AC\uC2DC\uB3C4\r\n      if (!correctAnswer && moduleNumber === 2 && currentProblemNum === 1) {\r\n        console.log(`[FLOW] \uBAA8\uB4C8 2 \uBB38\uC81C 1: \uC774\uBBF8 \uCC44\uC810 \uD310\uBCC4\uD588\uC73C\uB098 \uC815\uB2F5 \uC5C6\uC74C. \uC120\uD0DD\uC9C0 \uD074\uB9AD \uACBD\uB85C \uC7AC\uC2DC\uB3C4...`);\r\n        const retryClicked = await clickFirstChoice(sectionType);\r\n        if (retryClicked) {\r\n          await new Promise(resolve => setTimeout(resolve, 120));\r\n          correctAnswer = detectCorrectAnswer();\r\n          explanation = extractExplanationAfterGrading(correctAnswer, currentProblemNum) || '';\r\n          if (correctAnswer) {\r\n            console.log(`[FLOW] \u2713 \uBAA8\uB4C8 2 \uBB38\uC81C 1 \uC815\uB2F5 \uCD94\uCD9C \uC131\uACF5 (\uC7AC\uC2DC\uB3C4): ${correctAnswer}`);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    // STEP 4: \uBB38\uC81C \uCD94\uCD9C (\uB2F5\uBCC0 \uC2E4\uD328\uC640 \uBD84\uB9AC)\r\n    // BUG FIX: 27\uBC88 \uBB38\uC81C\uB294 \uC774\uBBF8 \uC81C\uCD9C \uC804\uC5D0 \uCD94\uCD9C\uD588\uC73C\uBBC0\uB85C \uC2A4\uD0B5\r\n    let problemExtracted = false;\r\n    \r\n    if (!problem) {\r\n      // 27\uBC88 \uBB38\uC81C\uAC00 \uC544\uB2C8\uBA74 \uC77C\uBC18\uC801\uC73C\uB85C \uBB38\uC81C \uCD94\uCD9C\r\n      console.log(`[FLOW] \uBB38\uC81C \uCD94\uCD9C \uC911...`);\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7245/ingest/4830a523-40c3-4932-aa61-ce8aa2b3d853',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:beforeExtractCurrentProblem',message:'math image extract debug: before extract',data:{sectionType,currentProblemNum,isLastProblem},timestamp:Date.now(),hypothesisId:'H5'})}).catch(()=>{});\r\n      // #endregion\r\n      problem = await extractCurrentProblem(sectionType);\r\n      // \uCD94\uCD9C \uC9C1\uD6C4 DOM/\uB80C\uB354\uB9C1 \uC548\uC815\uD654 \uB300\uAE30 (\uB2E4\uC74C \uBB38\uC81C\uB85C \uB118\uC5B4\uAC00\uAE30 \uC804\uC5D0 \uCD94\uCD9C\uC774 \uC644\uC804\uD788 \uBC18\uC601\uB418\uB3C4\uB85D)\r\n      if (problem) {\r\n        await new Promise(resolve => setTimeout(resolve, 150));\r\n      }\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7245/ingest/4830a523-40c3-4932-aa61-ce8aa2b3d853',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:afterExtractCurrentProblem',message:'math image extract debug: after extract',data:{sectionType,currentProblemNum,problemNull:problem===null,figuresLength:problem?.figures?.length??'n/a'},timestamp:Date.now(),hypothesisId:'H1'})}).catch(()=>{});\r\n      // #endregion\r\n    } else {\r\n      console.log(`[FLOW] 27\uBC88 \uBB38\uC81C\uB294 \uC774\uBBF8 \uCD94\uCD9C\uD588\uC2B5\uB2C8\uB2E4.`);\r\n      // 27\uBC88 \uBB38\uC81C\uB294 \uC774\uBBF8 \uCD94\uCD9C\uD588\uC73C\uBBC0\uB85C \uC815\uB2F5 \uCD94\uCD9C \uC2DC\uB3C4 (\uCC44\uC810 \uC644\uB8CC \uC5EC\uBD80\uC640 \uAD00\uACC4\uC5C6\uC774)\r\n        if (isLastProblem && !correctAnswer) {\r\n        console.log(`[FLOW] 27\uBC88 \uBB38\uC81C: \uC815\uB2F5 \uCD94\uCD9C \uC7AC\uC2DC\uB3C4 \uC911...`);\r\n        await new Promise(resolve => setTimeout(resolve, 50)); // \uD654\uBA74 \uC804\uD658 \uB300\uAE30\r\n        correctAnswer = detectCorrectAnswer();\r\n        explanation = extractExplanationAfterGrading(correctAnswer, currentProblemNum) || '';\r\n        if (correctAnswer) {\r\n          console.log(`[FLOW] \u2713 27\uBC88 \uBB38\uC81C \uC815\uB2F5 \uCD94\uCD9C \uC131\uACF5: ${correctAnswer}`);\r\n        }\r\n      }\r\n    }\r\n    \r\n    if (problem) {\r\n      consecutiveExtractFailures = 0; // \uCD94\uCD9C \uC131\uACF5 \uC2DC \uB9AC\uC14B\r\n      // ============================================================================\r\n      // STEP 1 \uCD94\uAC00 \uBCF4\uAC15: problemNumber \uCD5C\uC885 \uD655\uC778 \uBC0F \uAC15\uC81C \uC8FC\uC785\r\n      // ============================================================================\r\n      if (!problem.problemNumber || problem.problemNumber <= 0) {\r\n        // currentProblemNum \uC6B0\uC120 \uC0AC\uC6A9\r\n        if (currentProblemNum > 0) {\r\n          problem.problemNumber = currentProblemNum;\r\n          console.log(`[SAT-DEBUG] [collectModuleProblems] problemNumber\uC744 currentProblemNum\uC73C\uB85C \uC124\uC815: ${currentProblemNum}`);\r\n        } else {\r\n          // Progress\uC5D0\uC11C \uCD94\uCD9C\r\n          const progressState = getProgressState();\r\n          if (progressState) {\r\n            const progressMatch = progressState.match(/(\\d+)\\s*\\/\\s*\\d+/);\r\n            if (progressMatch) {\r\n              problem.problemNumber = parseInt(progressMatch[1]);\r\n              console.log(`[SAT-DEBUG] [collectModuleProblems] problemNumber\uC744 Progress\uC5D0\uC11C \uCD94\uCD9C: ${problem.problemNumber}`);\r\n            }\r\n          }\r\n          // \uCD5C\uD6C4\uC758 \uD3F4\uBC31: index + 1\r\n          if (!problem.problemNumber || problem.problemNumber <= 0) {\r\n            problem.problemNumber = targetArray.length + 1;\r\n            console.warn(`[SAT-DEBUG] [collectModuleProblems] problemNumber \uCD5C\uD6C4 \uD3F4\uBC31: index \uAE30\uBC18 \u2192 ${problem.problemNumber}`);\r\n          }\r\n        }\r\n      }\r\n      \r\n      // \uCD5C\uC885 \uBB38\uC81C \uBC88\uD638 \uD655\uC778\r\n      // BUG FIX: 27\uBC88 \uBB38\uC81C\uB294 \uBB34\uC870\uAC74 27\uB85C \uAC15\uC81C \uC124\uC815 (\uD654\uBA74 \uC804\uD658\uC73C\uB85C \uC778\uD55C \uC624\uC778\uC2DD \uBC29\uC9C0)\r\n      let finalProblemNum = problem.problemNumber || currentProblemNum;\r\n      if (isLastProblem && finalProblemNum !== currentProblemNum) {\r\n        console.warn(`[FLOW] 27\uBC88 \uBB38\uC81C \uBC88\uD638 \uC624\uC778\uC2DD \uAC10\uC9C0: ${finalProblemNum} \u2192 ${currentProblemNum}\uB85C \uAC15\uC81C \uC218\uC815`);\r\n        finalProblemNum = currentProblemNum;\r\n        problem.problemNumber = currentProblemNum;\r\n      }\r\n      console.log(`[FLOW] \uCD94\uCD9C\uB41C \uBB38\uC81C \uBC88\uD638: ${finalProblemNum} (currentProblemNum: ${currentProblemNum}, problem.problemNumber: ${problem.problemNumber})`);\r\n      \r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:finalProblemNum',message:'final problem number check',data:{finalProblemNum,currentProblemNum,problemProblemNumber:problem.problemNumber,isLastProblem},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'I'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      // TEMP \uBAA8\uB4DC: \uCD5C\uC885 \uBB38\uC81C \uBC88\uD638\uAC00 targetNumbers\uC5D0 \uC5C6\uC73C\uBA74 \uC218\uC9D1\uD558\uC9C0 \uC54A\uC74C\r\n      if (TEMP_MODE && targetNumbers && !targetNumbers.has(finalProblemNum)) {\r\n        console.warn(`[TEMP] \u2717 \uBB38\uC81C \uBC88\uD638 ${finalProblemNum}\uB294 \uC218\uC9D1 \uB300\uC0C1\uC774 \uC544\uB2D9\uB2C8\uB2E4. \uC218\uC9D1\uD558\uC9C0 \uC54A\uACE0 \uB2E4\uC74C\uC73C\uB85C \uC774\uB3D9\uD569\uB2C8\uB2E4.`);\r\n        console.warn(`[TEMP] \uC218\uC9D1 \uB300\uC0C1: ${Array.from(targetNumbers).join(', ')}, \uC774\uBBF8 \uC218\uC9D1: ${Array.from(collectedNumbers).join(', ')}`);\r\n        \r\n        // \uB2E4\uC74C \uBB38\uC81C\uB85C \uC774\uB3D9\r\n        const beforeProblemNum = finalProblemNum > 0 ? finalProblemNum : currentProblemNum;\r\n        const moved = await clickNextButtonWithFallback(beforeProblemNum);\r\n        \r\n        if (!moved) {\r\n          console.warn(`[FLOW] \uB2E4\uC74C \uBB38\uC81C\uB85C \uC774\uB3D9 \uC2E4\uD328. \uC218\uC9D1 \uC885\uB8CC.`);\r\n          break;\r\n        }\r\n        \r\n        await waitForContentLoad(CONFIG.timeouts.screenTransition);\r\n        continue; // \uC218\uC9D1\uD558\uC9C0 \uC54A\uACE0 \uB2E4\uC74C \uB8E8\uD504\uB85C\r\n      }\r\n      \r\n      // TEMP \uBAA8\uB4DC: \uC774\uBBF8 \uC218\uC9D1\uD55C \uBC88\uD638\uBA74 \uC2A4\uD0B5\r\n      if (TEMP_MODE && collectedNumbers.has(finalProblemNum)) {\r\n        console.warn(`[TEMP] \u2717 \uBB38\uC81C \uBC88\uD638 ${finalProblemNum}\uB294 \uC774\uBBF8 \uC218\uC9D1\uD588\uC2B5\uB2C8\uB2E4. \uC218\uC9D1\uD558\uC9C0 \uC54A\uACE0 \uB2E4\uC74C\uC73C\uB85C \uC774\uB3D9\uD569\uB2C8\uB2E4.`);\r\n        \r\n        const beforeProblemNum = finalProblemNum;\r\n        const moved = await clickNextButtonWithFallback(beforeProblemNum);\r\n        \r\n        if (!moved) {\r\n          console.warn(`[FLOW] \uB2E4\uC74C \uBB38\uC81C\uB85C \uC774\uB3D9 \uC2E4\uD328. \uC218\uC9D1 \uC885\uB8CC.`);\r\n          break;\r\n        }\r\n        \r\n        await waitForContentLoad(CONFIG.timeouts.screenTransition);\r\n        continue;\r\n      }\r\n      \r\n      // ============================================================================\r\n      \r\n      problem.module = moduleNumber;\r\n      \r\n      // #region agent log - DEBUG STEP 3: collectModuleProblems\uC5D0\uC11C problem.figures \uAC80\uC99D\r\n      console.log(`[DEBUG STEP 3] collectModuleProblems: \uBB38\uC81C ${finalProblemNum} push \uC9C1\uC804, problem.figures=${problem.figures ? problem.figures.length : 'undefined'}`);\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:beforePush',message:'DEBUG STEP 3: collectModuleProblems\uC5D0\uC11C problem.figures \uAC80\uC99D',data:{finalProblemNum,hasFigures:!!problem.figures,figuresLength:problem.figures?problem.figures.length:0,figures:problem.figures?problem.figures.map(f=>({w:f.width,h:f.height,hasDataUrl:!!f.dataUrl})):null},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'C'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      targetArray.push(problem);\r\n      problemExtracted = true;\r\n      \r\n      // TEMP \uBAA8\uB4DC: \uC218\uC9D1\uB41C \uBC88\uD638 \uCD94\uC801 (\uCD5C\uC885 \uBB38\uC81C \uBC88\uD638 \uC0AC\uC6A9)\r\n      if (TEMP_MODE && finalProblemNum > 0) {\r\n        collectedNumbers.add(finalProblemNum);\r\n        console.log(`[TEMP] \u2713 \uBB38\uC81C \uBC88\uD638 ${finalProblemNum} \uC218\uC9D1 \uC644\uB8CC`);\r\n      }\r\n      \r\n      const collectedCount = targetArray.length;\r\n      const moduleCollectedCount = targetArray.filter(p => p.module === moduleNumber).length;\r\n      console.log(`[FLOW] \uBB38\uC81C ${collectedCount} \uC218\uC9D1 \uC644\uB8CC: ${finalProblemNum} (\uD604\uC7AC \uBAA8\uB4C8: ${moduleCollectedCount}\uAC1C)`);\r\n      \r\n      // #region agent log\r\n      const shouldBreakFor27 = !TEMP_MODE && finalProblemNum === maxProblems && moduleCollectedCount >= maxProblems;\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:afterPush',message:'after pushing problem to array',data:{collectedCount,moduleCollectedCount,finalProblemNum,maxProblems,shouldBreakFor27,TEMP_MODE,moduleNumber},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'G'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      // TEMP \uBAA8\uB4DC\uAC00 \uC544\uB2CC \uACBD\uC6B0, 27\uBC88 \uBB38\uC81C \uC218\uC9D1 \uD6C4\uC5D0\uB3C4 \uC815\uB2F5/\uD574\uC124 \uD560\uB2F9 \uB85C\uC9C1\uC744 \uBA3C\uC800 \uC2E4\uD589\uD55C \uB4A4 \uB8E8\uD504\uB97C \uC885\uB8CC\uD55C\uB2E4.\r\n      if (!TEMP_MODE && shouldBreakFor27) {\r\n        console.log('[FLOW] 27\uBC88 \uBB38\uC81C \uC218\uC9D1 \uC644\uB8CC - \uC815\uB2F5/\uD574\uC124 \uD560\uB2F9 \uD6C4 \uB8E8\uD504 \uC885\uB8CC \uC608\uC815');\r\n      }\r\n      \r\n      if (TEMP_MODE) {\r\n        console.log(`[TEMP] \uC218\uC9D1\uB41C \uBB38\uC81C \uBC88\uD638: ${Array.from(collectedNumbers).sort((a, b) => a - b).join(', ')}`);\r\n        // TEMP \uBAA8\uB4DC: \uBAA8\uB4E0 \uB300\uC0C1 \uBC88\uD638\uB97C \uC218\uC9D1\uD588\uC73C\uBA74 \uC989\uC2DC \uC885\uB8CC\r\n        if (collectedNumbers.size >= targetNumbers.size) {\r\n          console.log(`[TEMP] \uBAA8\uB4E0 \uB300\uC0C1 \uBB38\uC81C \uC218\uC9D1 \uC644\uB8CC (${Array.from(collectedNumbers).sort((a, b) => a - b).join(', ')}). \uC989\uC2DC \uC885\uB8CC\uD569\uB2C8\uB2E4.`);\r\n          return collectedCount;\r\n        }\r\n      }\r\n    } else {\r\n      console.warn(`[FLOW] \uBB38\uC81C \uCD94\uCD9C \uC2E4\uD328. \uB2E4\uC74C \uBB38\uC81C\uB85C \uB118\uC5B4\uAC00\uC9C0 \uC54A\uACE0 \uC7AC\uC2DC\uB3C4\uD569\uB2C8\uB2E4.`);\r\n    }\r\n\r\n    // extract\uAC00 \uC544\uC9C1 \uC548 \uB418\uC5C8\uC73C\uBA74 \uB2E4\uC74C \uBB38\uC81C\uB85C \uB118\uC5B4\uAC00\uC9C0 \uC54A\uC74C\r\n    if (!problem) {\r\n      consecutiveExtractFailures++;\r\n      if (consecutiveExtractFailures >= maxExtractRetries) {\r\n        console.warn(`[FLOW] \uBB38\uC81C \uCD94\uCD9C \uC5F0\uC18D ${maxExtractRetries}\uD68C \uC2E4\uD328. \uC218\uC9D1 \uC885\uB8CC.`);\r\n        break;\r\n      }\r\n      console.log(`[FLOW] \uCD94\uCD9C \uC7AC\uC2DC\uB3C4 \uB300\uAE30 \uD6C4 \uAC19\uC740 \uBB38\uC81C \uB2E4\uC2DC \uC2DC\uB3C4 (${consecutiveExtractFailures}/${maxExtractRetries})...`);\r\n      await new Promise(resolve => setTimeout(resolve, 800));\r\n      continue;\r\n    }\r\n\r\n    // STEP 4: \uC815\uB2F5/\uD574\uC124 \uD560\uB2F9 (\uC774\uBBF8 \uCC44\uC810 \uC9C1\uD6C4\uC5D0 \uCD94\uCD9C\uD55C \uACB0\uACFC \uC0AC\uC6A9)\r\n    if (problemExtracted && problem) {\r\n      const assignmentProblemNum = problem.problemNumber || currentProblemNum;\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:beforeAssignment',message:'before assigning answer and explanation',data:{assignmentProblemNum,currentProblemNum,correctAnswer,explanationLength:explanation.length,explanationPreview:explanation.substring(0,100)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n      // #endregion\r\n      if (correctAnswer) {\r\n        problem.correctAnswer = correctAnswer;\r\n        problem.explanation = explanation || '';\r\n        console.log(`[FLOW] \uC815\uB2F5/\uD574\uC124 \uD560\uB2F9 \uC644\uB8CC: ${correctAnswer} (\uBB38\uC81C \uBC88\uD638: ${problem.problemNumber || currentProblemNum})`);\r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:afterAssignment',message:'after assigning answer and explanation',data:{assignmentProblemNum,currentProblemNum,correctAnswer,explanationLength:problem.explanation.length,explanationPreview:problem.explanation.substring(0,100)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n        // #endregion\r\n      } else {\r\n        // \uC815\uB2F5 \uCD94\uCD9C\uC774 \uC2E4\uD328\uD588\uC9C0\uB9CC, \uB2E4\uC2DC \uD55C \uBC88 \uC2DC\uB3C4\r\n        const retryProblemNum = problem.problemNumber || currentProblemNum;\r\n        console.warn(`[FLOW] \uC815\uB2F5 \uCD94\uCD9C \uC2E4\uD328. \uC7AC\uC2DC\uB3C4 \uC911... (\uBB38\uC81C \uBC88\uD638: ${retryProblemNum})`);\r\n        const retryAnswer = detectCorrectAnswer();\r\n        const retryExplanation = extractExplanationAfterGrading(retryAnswer, retryProblemNum) || '';\r\n        \r\n        if (retryAnswer) {\r\n          problem.correctAnswer = retryAnswer;\r\n          problem.explanation = retryExplanation;\r\n          console.log(`[FLOW] \u2713 \uC815\uB2F5 \uCD94\uCD9C \uC131\uACF5 (\uC7AC\uC2DC\uB3C4): ${retryAnswer}`);\r\n          // #region agent log\r\n          const retryAssignmentProblemNum = problem.problemNumber || currentProblemNum;\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:afterRetryAssignment',message:'after retry assignment',data:{retryAssignmentProblemNum,currentProblemNum,retryAnswer,explanationLength:problem.explanation.length,explanationPreview:problem.explanation.substring(0,100)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n          // #endregion\r\n        } else {\r\n          problem.correctAnswer = '';\r\n          problem.explanation = retryExplanation || '';\r\n          console.warn(`[FLOW] \u2717 \uC815\uB2F5 \uCD94\uCD9C \uCD5C\uC885 \uC2E4\uD328 (\uBB38\uC81C \uBC88\uD638: ${problem.problemNumber || currentProblemNum})`);\r\n        }\r\n      }\r\n    }\r\n    \r\n    // 27\uBC88 \uBB38\uC81C\uC5D0 \uB300\uD574 \uC815\uB2F5/\uD574\uC124\uAE4C\uC9C0 \uBAA8\uB450 \uD560\uB2F9\uC774 \uB05D\uB09C \uB4A4\uC5D0\uB9CC \uB8E8\uD504\uB97C \uC885\uB8CC\uD55C\uB2E4.\r\n    if (!TEMP_MODE && problemExtracted && problem && problem.problemNumber === maxProblems) {\r\n      const moduleCollectedCountAfterAssign = targetArray.filter(p => p.module === moduleNumber).length;\r\n      if (moduleCollectedCountAfterAssign >= maxProblems) {\r\n        console.log(`[FLOW] 27\uBC88 \uBB38\uC81C \uC815\uB2F5/\uD574\uC124 \uD560\uB2F9 \uC644\uB8CC \uD6C4 \uB8E8\uD504 \uC885\uB8CC (\uBAA8\uB4C8 ${moduleNumber}, \uC218\uC9D1 \uAC1C\uC218: ${moduleCollectedCountAfterAssign})`);\r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:breakFor27AfterAssign',message:'breaking loop after assigning problem 27',data:{moduleNumber,moduleCollectedCount:moduleCollectedCountAfterAssign,problemNumber:problem.problemNumber},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'G'})}).catch(()=>{});\r\n        // #endregion\r\n        break;\r\n      }\r\n    }\r\n    \r\n    // TEMP \uBAA8\uB4DC: \uBAA8\uB4E0 \uB300\uC0C1 \uBC88\uD638\uB97C \uC218\uC9D1\uD588\uC73C\uBA74 \uB2E4\uC74C\uC73C\uB85C \uC774\uB3D9\uD558\uC9C0 \uC54A\uC74C\r\n    if (TEMP_MODE && collectedNumbers.size >= targetNumbers.size) {\r\n      console.log(`[TEMP] \uBAA8\uB4E0 \uB300\uC0C1 \uBB38\uC81C \uC218\uC9D1 \uC644\uB8CC. \uB2E4\uC74C \uBB38\uC81C\uB85C \uC774\uB3D9\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.`);\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:tempModeComplete',message:'TEMP mode complete, breaking loop',data:{collectedNumbers:Array.from(collectedNumbers),targetNumbers:Array.from(targetNumbers || [])},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'F'})}).catch(()=>{});\r\n      // #endregion\r\n      break;\r\n    }\r\n    \r\n    // \uB2E4\uC74C \uBB38\uC81C\uB85C \uC774\uB3D9\r\n    const problemNumBeforeNext = getCurrentProblemNumber();\r\n    console.log(`[FLOW] \uB2E4\uC74C \uBB38\uC81C\uB85C \uC774\uB3D9 \uC911... (\uD604\uC7AC: ${problemNumBeforeNext})`);\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:beforeNext',message:'before moving to next problem',data:{problemNumBeforeNext,currentProblemNum,collectedNumbers:Array.from(collectedNumbers),targetArrayLength:targetArray.length,maxProblems,TEMP_MODE},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'F'})}).catch(()=>{});\r\n    // #endregion\r\n    \r\n    // TEMP \uBAA8\uB4DC: \uC815\uD655\uD788 +1\uC529\uB9CC \uC774\uB3D9\uD558\uB3C4\uB85D \uAC15\uC81C \uD655\uC778\r\n    let nextAttempts = 0;\r\n    const maxNextAttempts = 5;\r\n    let correctNext = false;\r\n    let afterProblemNum = problemNumBeforeNext; // \uB8E8\uD504 \uBC16\uC5D0\uC11C \uC120\uC5B8 (break \uC2DC ReferenceError \uBC29\uC9C0)\r\n    \r\n    while (!correctNext && nextAttempts < maxNextAttempts) {\r\n      nextAttempts++;\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:clickNextAttempt',message:'attempting to click next button',data:{problemNumBeforeNext,nextAttempts,maxNextAttempts},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'F'})}).catch(()=>{});\r\n      // #endregion\r\n      const moved = await clickNextButtonWithFallback(problemNumBeforeNext);\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:afterClickNext',message:'after clicking next button',data:{problemNumBeforeNext,moved,nextAttempts},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'F'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      if (!moved) {\r\n        console.warn(`[FLOW] \uB2E4\uC74C \uBB38\uC81C\uB85C \uC774\uB3D9 \uC2E4\uD328 (\uC2DC\uB3C4 ${nextAttempts}/${maxNextAttempts}). \uC218\uC9D1 \uC885\uB8CC.`);\r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:nextFailed',message:'next button click failed',data:{problemNumBeforeNext,nextAttempts,maxNextAttempts},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'F'})}).catch(()=>{});\r\n        // #endregion\r\n        break;\r\n      }\r\n      \r\n      // \uD654\uBA74 \uC804\uD658 \uB300\uAE30\r\n      await waitForContentLoad(CONFIG.timeouts.screenTransition);\r\n      \r\n      // \uBB38\uC81C \uBC88\uD638\uAC00 \uC815\uD655\uD788 +1 \uC99D\uAC00\uD588\uB294\uC9C0 \uD655\uC778 (\uC5EC\uB7EC \uBC88 \uC77D\uC5B4\uC11C \uC815\uD655\uB3C4 \uD5A5\uC0C1)\r\n      await new Promise(resolve => setTimeout(resolve, 120)); // DOM \uC5C5\uB370\uC774\uD2B8 \uB300\uAE30\r\n      afterProblemNum = getCurrentProblemNumber();\r\n      \r\n      // Progress\uC5D0\uC11C\uB3C4 \uD655\uC778\r\n      const afterProgress = getProgressState();\r\n      if (afterProgress) {\r\n        const progressMatch = afterProgress.match(/(\\d+)\\s*\\/\\s*\\d+/);\r\n        if (progressMatch) {\r\n          const progressNum = parseInt(progressMatch[1]);\r\n          if (progressNum > 0 && (progressNum !== afterProblemNum || afterProblemNum <= 0)) {\r\n            console.log(`[FLOW] \uBB38\uC81C \uBC88\uD638\uB97C Progress\uC5D0\uC11C \uC7AC\uD655\uC778: ${afterProblemNum} \u2192 ${progressNum}`);\r\n            afterProblemNum = progressNum;\r\n          }\r\n        }\r\n      }\r\n      \r\n      console.log(`[FLOW] Next \uD074\uB9AD \uD6C4 \uBB38\uC81C \uBC88\uD638: ${problemNumBeforeNext} \u2192 ${afterProblemNum}`);\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:afterNextCheck',message:'checking problem number after next click',data:{problemNumBeforeNext,afterProblemNum,expectedNext:problemNumBeforeNext+1,correctNext:afterProblemNum===problemNumBeforeNext+1,moduleNumber},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'F'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      if (afterProblemNum === problemNumBeforeNext + 1) {\r\n        // \uC815\uD655\uD788 +1 \uC99D\uAC00 - \uC131\uACF5\r\n        correctNext = true;\r\n        console.log(`[FLOW] \u2713 \uC815\uD655\uD788 +1 \uC99D\uAC00 \uD655\uC778: ${problemNumBeforeNext} \u2192 ${afterProblemNum}`);\r\n        \r\n        // BUG FIX: Module 2\uC5D0\uC11C progress \uC99D\uAC00 \uD655\uC778 \uC2DC consecutiveDuplicates \uB9AC\uC14B\r\n        if (moduleNumber === 2) {\r\n          const newProgressState = getProgressState();\r\n          console.log(`[FLOW] Module 2: progress \uC99D\uAC00 \uD655\uC778 (${lastProgressState} \u2192 ${newProgressState}), consecutiveDuplicates \uB9AC\uC14B`);\r\n          consecutiveDuplicates = 0;\r\n          lastProgressState = newProgressState;\r\n          // #region agent log\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:module2ProgressReset',message:'Module 2: progress increased, resetting consecutiveDuplicates',data:{problemNumBeforeNext,afterProblemNum,consecutiveDuplicates:0,moduleNumber,lastProgressState,newProgressState},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'J'})}).catch(()=>{});\r\n          // #endregion\r\n        }\r\n        \r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:nextSuccess',message:'successfully moved to next problem',data:{problemNumBeforeNext,afterProblemNum,moduleNumber,consecutiveDuplicates},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'F'})}).catch(()=>{});\r\n        // #endregion\r\n        break;\r\n      } else if (afterProblemNum > problemNumBeforeNext + 1) {\r\n        // \uC810\uD504 \uBC1C\uC0DD!\r\n        console.error(`[FLOW] \u2717 \uC810\uD504 \uD0D0\uC9C0! ${problemNumBeforeNext} \u2192 ${afterProblemNum} (\uC608\uC0C1: ${problemNumBeforeNext + 1})`);\r\n        \r\n        // TEMP \uBAA8\uB4DC: \uB193\uCE5C \uBC88\uD638 \uD655\uC778\r\n        if (TEMP_MODE && targetNumbers) {\r\n          const missedNumbers = [];\r\n          for (let num = problemNumBeforeNext + 1; num < afterProblemNum; num++) {\r\n            if (targetNumbers.has(num) && !collectedNumbers.has(num)) {\r\n              missedNumbers.push(num);\r\n            }\r\n          }\r\n          \r\n          if (missedNumbers.length > 0) {\r\n            console.warn(`[TEMP] \uB193\uCE5C \uBB38\uC81C \uBC88\uD638: ${missedNumbers.join(', ')}`);\r\n            \r\n            // Previous \uBC84\uD2BC \uCC3E\uAE30 \uBC0F \uB418\uB3CC\uB9AC\uAE30 \uC2DC\uB3C4\r\n            const previousButton = findNavigationButton('previous', '\uC774\uC804', 'prev', 'back');\r\n            if (previousButton && !previousButton.disabled) {\r\n              const jumpSize = afterProblemNum - problemNumBeforeNext;\r\n              console.log(`[TEMP] Previous \uBC84\uD2BC \uBC1C\uACAC. ${jumpSize - 1}\uBC88 \uB418\uB3CC\uB9AC\uAE30 \uC2DC\uB3C4...`);\r\n              \r\n              for (let i = 0; i < jumpSize - 1; i++) {\r\n                previousButton.click();\r\n                await new Promise(resolve => setTimeout(resolve, 50));\r\n                await waitForContentLoad(CONFIG.timeouts.screenTransition);\r\n              }\r\n              \r\n              // \uB418\uB3CC\uB9B0 \uD6C4 \uBB38\uC81C \uBC88\uD638 \uD655\uC778\r\n              const afterBackNum = getCurrentProblemNumber();\r\n              console.log(`[TEMP] \uB418\uB3CC\uB9AC\uAE30 \uD6C4 \uBB38\uC81C \uBC88\uD638: ${afterProblemNum} \u2192 ${afterBackNum}`);\r\n              \r\n              if (afterBackNum === problemNumBeforeNext + 1) {\r\n                // \uC815\uD655\uD788 \uB418\uB3CC\uB9BC \uC131\uACF5\r\n                correctNext = true;\r\n                console.log(`[TEMP] \u2713 \uB418\uB3CC\uB9AC\uAE30 \uC131\uACF5! \uC815\uD655\uD788 ${problemNumBeforeNext + 1}\uBC88 \uBB38\uC81C\uB85C \uC774\uB3D9`);\r\n                break;\r\n              } else {\r\n                console.warn(`[TEMP] \uB418\uB3CC\uB9AC\uAE30 \uC2E4\uD328. \uB2E4\uC2DC Next \uD074\uB9AD \uC2DC\uB3C4...`);\r\n                // \uB2E4\uC2DC Next \uD074\uB9AD \uC2DC\uB3C4\r\n                continue;\r\n              }\r\n            } else {\r\n              console.warn(`[TEMP] Previous \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC7AC\uC2DC\uB3C4...`);\r\n              // Previous\uAC00 \uC5C6\uC73C\uBA74 \uC7AC\uC2DC\uB3C4\r\n              continue;\r\n            }\r\n          }\r\n        } else {\r\n          // TEMP \uBAA8\uB4DC\uAC00 \uC544\uB2C8\uBA74 \uC7AC\uC2DC\uB3C4\r\n          console.warn(`[FLOW] \uC810\uD504 \uBC1C\uC0DD. \uC7AC\uC2DC\uB3C4 ${nextAttempts}/${maxNextAttempts}...`);\r\n          continue;\r\n        }\r\n      } else if (afterProblemNum <= problemNumBeforeNext) {\r\n        // \uBB38\uC81C \uBC88\uD638\uAC00 \uC99D\uAC00\uD558\uC9C0 \uC54A\uC558\uAC70\uB098 \uAC10\uC18C\uD568\r\n        console.warn(`[FLOW] \uBB38\uC81C \uBC88\uD638\uAC00 \uC99D\uAC00\uD558\uC9C0 \uC54A\uC74C: ${problemNumBeforeNext} \u2192 ${afterProblemNum}. \uC7AC\uC2DC\uB3C4...`);\r\n        await new Promise(resolve => setTimeout(resolve, 120));\r\n        continue;\r\n      }\r\n    }\r\n    \r\n    if (!correctNext) {\r\n      console.error(`[FLOW] Next \uD074\uB9AD \uC2E4\uD328: \uC815\uD655\uD788 +1 \uC99D\uAC00\uD558\uC9C0 \uBABB\uD568 (\uC2DC\uB3C4 ${nextAttempts}\uD68C). \uC218\uC9D1 \uC885\uB8CC.`);\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:nextFailed',message:'next button click failed, breaking loop',data:{problemNumBeforeNext,afterProblemNum,nextAttempts,targetArrayLength:targetArray.length},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'H'})}).catch(()=>{});\r\n      // #endregion\r\n      break;\r\n    }\r\n    \r\n    // 27\uBC88 \uBB38\uC81C\uAE4C\uC9C0 \uC218\uC9D1 \uD655\uC778: \uD604\uC7AC \uBB38\uC81C \uBC88\uD638\uAC00 27\uC774\uACE0 \uC774\uBBF8 \uC218\uC9D1\uD588\uB294\uC9C0 \uD655\uC778\r\n    if (!TEMP_MODE && afterProblemNum === maxProblems) {\r\n      // 27\uBC88 \uBB38\uC81C\uB97C \uBC29\uAE08 \uC218\uC9D1\uD588\uB294\uC9C0 \uD655\uC778\r\n      const lastProblem = targetArray[targetArray.length - 1];\r\n      const has27 = lastProblem && lastProblem.problemNumber === maxProblems;\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'moduleRunner.js:check27AfterNext',message:'checking if problem 27 collected after next click',data:{afterProblemNum,maxProblems,has27,lastProblemNumber:lastProblem?.problemNumber,targetArrayLength:targetArray.length},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'G'})}).catch(()=>{});\r\n      // #endregion\r\n      if (has27) {\r\n        console.log(`[FLOW] 27\uBC88 \uBB38\uC81C \uC218\uC9D1 \uC644\uB8CC \uD655\uC778. \uB8E8\uD504 \uC885\uB8CC \uC900\uBE44 \uC911...`);\r\n        // \uB2E4\uC74C \uB8E8\uD504\uC5D0\uC11C \uC885\uB8CC\uB418\uB3C4\uB85D \uD558\uAE30 \uC704\uD574 \uCD94\uAC00 \uD655\uC778\uC740 \uD558\uC9C0 \uC54A\uC74C\r\n      }\r\n    }\r\n    \r\n    // STEP 3: TEMP \uBAA8\uB4DC\uC5D0\uC11C\uB294 \uBAA8\uB4C8 \uC644\uB8CC \uAC80\uC99D \uC2A4\uD0B5\r\n    // (\uC6D0\uB798 \uCF54\uB4DC\uB294 \uC720\uC9C0\uD558\uB418, TEMP \uBAA8\uB4DC\uC5D0\uC11C\uB294 \uC2E4\uD589\uB418\uC9C0 \uC54A\uC74C - \uC704\uC5D0\uC11C \uC774\uBBF8 break\uB428)\r\n  }\r\n  \r\n  // \uCD5C\uC885 \uC218\uC9D1 \uACB0\uACFC \uD655\uC778 \uBC0F \uB85C\uADF8\r\n  const finalCount = targetArray.length;\r\n  const moduleFinalCount = targetArray.filter(p => p.module === moduleNumber).length;\r\n  const moduleCollectedProblemNumbers = targetArray.filter(p => p.module === moduleNumber).map(p => p.problemNumber).filter(n => n > 0).sort((a, b) => a - b);\r\n  console.log(`[FLOW] collectModuleProblems \uC644\uB8CC: ${moduleName} ${moduleFinalCount}\uAC1C \uC218\uC9D1 (\uC804\uCCB4: ${finalCount}\uAC1C)`);\r\n  // #region agent log - ANSWER DEBUG: \uBAA8\uB4C8\uBCC4 \uC815\uB2F5/\uD574\uC124 \uB204\uB77D \uC694\uC57D\r\n  try {\r\n    const missingAnswers = targetArray\r\n      .filter(p => p.module === moduleNumber)\r\n      .filter(p => !p.correctAnswer && !p.answer && !p.isGridIn);\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        location: 'moduleRunner.js:missingAnswersSummary',\r\n        message: 'collectModuleProblems missing answers summary',\r\n        data: {\r\n          sectionType,\r\n          moduleName,\r\n          moduleNumber,\r\n          moduleFinalCount,\r\n          missingCount: missingAnswers.length,\r\n          missingProblemNumbers: missingAnswers\r\n            .map(p => p.problemNumber || 0)\r\n            .filter(n => n > 0)\r\n            .sort((a, b) => a - b)\r\n        },\r\n        timestamp: Date.now(),\r\n        runId: 'answers-bug',\r\n        hypothesisId: 'H2'\r\n      })\r\n    }).catch(() => {});\r\n  } catch {\r\n    // \uB85C\uAE45 \uC624\uB958\uB294 \uC218\uC9D1 \uD50C\uB85C\uC6B0\uC5D0 \uC601\uD5A5\uC744 \uC8FC\uC9C0 \uC54A\uB3C4\uB85D \uBB34\uC2DC\r\n  }\r\n  // #endregion\r\n  if (!TEMP_MODE && moduleFinalCount > 0) {\r\n    console.log(`[FLOW] ${moduleName} \uC218\uC9D1\uB41C \uBB38\uC81C \uBC88\uD638: ${moduleCollectedProblemNumbers.join(', ')}`);\r\n    if (moduleFinalCount < maxProblems) {\r\n      console.warn(`[FLOW] \uACBD\uACE0: ${moduleName} \uC608\uC0C1 \uBB38\uC81C \uC218(${maxProblems})\uBCF4\uB2E4 \uC801\uAC8C \uC218\uC9D1\uB428 (${moduleFinalCount}\uAC1C)`);\r\n    }\r\n    // 27\uBC88 \uBB38\uC81C\uAC00 \uC218\uC9D1\uB418\uC5C8\uB294\uC9C0 \uD655\uC778\r\n    if (!moduleCollectedProblemNumbers.includes(maxProblems)) {\r\n      console.warn(`[FLOW] \uACBD\uACE0: ${moduleName} ${maxProblems}\uBC88 \uBB38\uC81C\uAC00 \uC218\uC9D1\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4!`);\r\n    }\r\n  }\r\n  return moduleFinalCount; // \uD604\uC7AC \uBAA8\uB4C8\uC758 \uC218\uC9D1\uB41C \uBB38\uC81C \uC218 \uBC18\uD658\r\n}\r\n\r\n", "// SATScraper - handles problem collection orchestration\r\n// Extracted from stateMachine.js to separate concerns\r\n\r\nimport { CONFIG, TEMP_MODE } from '../config/constants.js';\r\nimport { waitForCondition, waitForContentLoad, safeClick, showToast } from '../dom/wait.js';\r\nimport { isQuestionScreen, getCurrentProblemNumber, getProgressState, isModuleStartScreen } from '../dom/extract.js';\r\nimport { findButtonByText, findNavigationButton, clickSubmitWithConfirmation } from '../dom/buttons.js';\r\nimport { SATNavigator } from './navigator.js';\r\nimport { startNextModule, startModule2, configureAndStartTest, clickSectionContinue } from './navigator.js';\r\nimport { collectModuleProblems } from './moduleRunner.js';\r\nimport { SectionStateManager } from './stateManager.js';\r\n\r\n/**\r\n * SATScraper \uD074\uB798\uC2A4\r\n * \uBB38\uC81C \uB370\uC774\uD130 \uCD94\uCD9C \uB85C\uC9C1\uC744 \uB2F4\uB2F9\r\n */\r\nexport class SATScraper {\r\n  constructor() {\r\n    this.navigator = new SATNavigator();\r\n    this.stateManager = new SectionStateManager();\r\n  }\r\n\r\n  /**\r\n   * \uD604\uC7AC \uBB38\uC81C \uBC88\uD638 \uAC00\uC838\uC624\uAE30\r\n   * @returns {number} \uBB38\uC81C \uBC88\uD638 (\uC5C6\uC73C\uBA74 0)\r\n   */\r\n  getCurrentProblemNumber() {\r\n    // \uAE30\uC874 \uD568\uC218 \uC7AC\uC0AC\uC6A9\r\n    return getCurrentProblemNumber();\r\n  }\r\n\r\n  /**\r\n   * Progress \uC0C1\uD0DC \uAC00\uC838\uC624\uAE30\r\n   * @returns {string|null} Progress \uC0C1\uD0DC (\uC608: \"3/27\")\r\n   */\r\n  getProgressState() {\r\n    // \uAE30\uC874 \uD568\uC218 \uC7AC\uC0AC\uC6A9\r\n    return getProgressState();\r\n  }\r\n\r\n  /**\r\n   * \uBB38\uC81C \uD654\uBA74\uC778\uC9C0 \uD655\uC778\r\n   * @returns {boolean} \uBB38\uC81C \uD654\uBA74 \uC5EC\uBD80\r\n   */\r\n  isQuestionScreen() {\r\n    // \uAE30\uC874 \uD568\uC218 \uC7AC\uC0AC\uC6A9\r\n    return isQuestionScreen();\r\n  }\r\n\r\n  /**\r\n   * \uBAA8\uB4C8 \uC644\uB8CC \uAC80\uC99D (\uC644\uD654\uB41C \uC870\uAC74)\r\n   * @param {string} sectionType - 'reading' | 'math'\r\n   * @param {number} moduleNumber - 1 | 2\r\n   * @param {number} collectedCount - \uC218\uC9D1\uB41C \uBB38\uC81C \uC218\r\n   * @param {string} progressState - Progress \uC0C1\uD0DC\r\n   * @returns {boolean} \uC644\uB8CC \uC5EC\uBD80\r\n   */\r\n  isModuleComplete(sectionType, moduleNumber, collectedCount, progressState) {\r\n    const expectedCount = sectionType === 'math' ? (CONFIG.collection.mathMaxProblems ?? 22) : CONFIG.collection.maxProblems;\r\n    \r\n    // \uC870\uAC74 1: \uBB38\uC81C \uC218\uAC00 \uCDA9\uBD84\uD55C\uAC00? (\uC644\uD654: expectedCount - 2 \uC774\uC0C1\uC774\uBA74 OK; Reading 25, Math 20)\r\n    const hasEnoughProblems = collectedCount >= (expectedCount - 2);\r\n    \r\n    // \uC870\uAC74 2: Progress\uAC00 \uB9C8\uC9C0\uB9C9\uC778\uAC00?\r\n    let isProgressComplete = false;\r\n    if (progressState && progressState.includes(`/${expectedCount}`)) {\r\n      const match = progressState.match(/(\\d+)\\s*\\/\\s*(\\d+)/);\r\n      if (match) {\r\n        const current = parseInt(match[1]);\r\n        const total = parseInt(match[2]);\r\n        isProgressComplete = current === total && total === expectedCount;\r\n      }\r\n    }\r\n    \r\n    // \uC870\uAC74 3: \uB2E4\uC74C \uBC84\uD2BC\uC774 \uC644\uC804\uD788 \uC0AC\uB77C\uC84C\uB294\uAC00? (\uBE44\uD65C\uC131\uD654\uAC00 \uC544\uB2C8\uB77C \uC544\uC608 \uC5C6\uC74C)\r\n    const allButtons = document.querySelectorAll('button, [role=\"button\"]');\r\n    const hasNextButton = Array.from(allButtons).some(btn => {\r\n      if (!btn.offsetParent) return false;\r\n      const text = (btn.innerText || btn.textContent || '').trim().toLowerCase();\r\n      return text.includes('\uB2E4\uC74C') || text.includes('next');\r\n    });\r\n    const isNextGone = !hasNextButton;\r\n    \r\n    // \uC870\uAC74 4: \uC81C\uCD9C \uBC84\uD2BC\uC774 \uC788\uB294\uAC00? (\uB9C8\uC9C0\uB9C9 \uBB38\uC81C)\r\n    // NOTE: findNavigationButton is imported from buttons.js\r\n    const submitButton = findNavigationButton('submit', '\uC81C\uCD9C', 'submit');\r\n    const hasSubmitButton = !!submitButton && submitButton.offsetParent;\r\n    \r\n    // \uC644\uB8CC \uC870\uAC74 \uC644\uD654: \uB2E4\uC74C \uBC84\uD2BC\uC774 \uC0AC\uB77C\uC84C\uAC70\uB098, \uC81C\uCD9C \uBC84\uD2BC\uC774 \uC788\uC73C\uBA74 \uC644\uB8CC\r\n    const isComplete = (isNextGone || hasSubmitButton) && (hasEnoughProblems || isProgressComplete);\r\n    \r\n    console.log(`[SATScraper] \uBAA8\uB4C8 \uC644\uB8CC \uAC80\uC99D (${sectionType} Module ${moduleNumber}):`, {\r\n      collectedCount,\r\n      expectedCount,\r\n      hasEnoughProblems,\r\n      isProgressComplete,\r\n      isNextGone,\r\n      hasSubmitButton,\r\n      isComplete\r\n    });\r\n    \r\n    return isComplete;\r\n  }\r\n\r\n  /**\r\n   * \uBAA8\uB4C8 \uC644\uB8CC \uD6C4 \uD654\uBA74 \uC804\uD658 \uB300\uAE30\r\n   * @param {string} sectionType - 'reading' | 'math'\r\n   * @param {number} moduleNumber - 1 | 2\r\n   * @returns {Promise<boolean>} \uC804\uD658 \uC644\uB8CC \uC5EC\uBD80\r\n   */\r\n  async waitForModuleTransition(sectionType, moduleNumber) {\r\n    console.log(`[SAT] waitForModuleTransition \uC2DC\uC791: sectionType=${sectionType}, moduleNumber=${moduleNumber}`);\r\n    console.log(`[SATScraper] \uBAA8\uB4C8 \uC804\uD658 \uB300\uAE30 (${sectionType} Module ${moduleNumber} \u2192 ${moduleNumber === 1 ? 2 : '\uB2E4\uC74C \uC139\uC158'})`);\r\n    \r\n    // Module 1 \uC644\uB8CC \uD6C4 Module 2 \uC2DC\uC791 \uBC84\uD2BC \uB300\uAE30\r\n    if (moduleNumber === 1) {\r\n      return await waitForCondition(() => {\r\n        // Submit \uBC84\uD2BC \uCC3E\uAE30 (aria-label \uC6B0\uC120)\r\n        // NOTE: findNavigationButton is imported from buttons.js\r\n        const submitButton = findNavigationButton('submit', '\uC81C\uCD9C', 'submit');\r\n        if (submitButton) {\r\n          console.log('[SAT] Submit \uBC84\uD2BC \uBC1C\uACAC (Module 1 \uC644\uB8CC \uB300\uAE30 \uC911)');\r\n          return false; // Submit \uBC84\uD2BC\uC774 \uC788\uC73C\uBA74 \uC544\uC9C1 \uC81C\uCD9C \uC548 \uD568\r\n        }\r\n        \r\n        // Module 2 \uC2DC\uC791 \uBC84\uD2BC \uCC3E\uAE30\r\n        const bodyText = (document.body.innerText || '').toLowerCase();\r\n        const hasModule2Button = bodyText.includes('module 2') || \r\n                                bodyText.includes('\uBAA8\uB4C8 2') ||\r\n                                findButtonByText('\uBAA8\uB4C8 2', 'Module 2', '\uC2DC\uC791', 'Start');\r\n        \r\n        if (hasModule2Button) {\r\n          console.log('[SAT] Module 2 \uC2DC\uC791 \uBC84\uD2BC \uBC1C\uACAC');\r\n          return true;\r\n        }\r\n        \r\n        return false;\r\n      }, CONFIG.timeouts.screenTransition * 8);\r\n    }\r\n    \r\n    // Module 2 \uC644\uB8CC \uD6C4 \uB2E4\uC74C \uC139\uC158 \uC548\uB0B4 \uD654\uBA74 \uB300\uAE30\r\n    if (moduleNumber === 2 && sectionType === 'reading') {\r\n      return await waitForCondition(() => {\r\n        // Submit \uBC84\uD2BC \uCC3E\uAE30 (aria-label \uC6B0\uC120)\r\n        // NOTE: findNavigationButton is imported from buttons.js\r\n        const submitButton = findNavigationButton('submit', '\uC81C\uCD9C', 'submit');\r\n        if (submitButton) {\r\n          console.log('[SAT] Submit \uBC84\uD2BC \uBC1C\uACAC (Module 2 \uC644\uB8CC \uB300\uAE30 \uC911)');\r\n          return false; // Submit \uBC84\uD2BC\uC774 \uC788\uC73C\uBA74 \uC544\uC9C1 \uC81C\uCD9C \uC548 \uD568\r\n        }\r\n        \r\n        const bodyText = (document.body.innerText || '').toLowerCase();\r\n        // Reading and Writing\uC774 \uC0AC\uB77C\uC9C0\uACE0 Math \uC139\uC158 \uC548\uB0B4\uAC00 \uB098\uD0C0\uB098\uC57C \uD568\r\n        const hasReadingWriting = bodyText.includes('reading') && bodyText.includes('writing');\r\n        const hasMathSection = bodyText.includes('math') || bodyText.includes('\uC218\uD559');\r\n        \r\n        if (!hasReadingWriting && hasMathSection) {\r\n          console.log('[SAT] Math \uC139\uC158 \uC548\uB0B4 \uD654\uBA74 \uBC1C\uACAC');\r\n          return true;\r\n        }\r\n        \r\n        return false;\r\n      }, CONFIG.timeouts.screenTransition * 8);\r\n    }\r\n    \r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * \uBAA8\uB4E0 \uBB38\uC81C \uC218\uC9D1 (\uC5C4\uACA9\uD55C \uC21C\uCC28 \uC2E4\uD589)\r\n   * @returns {Promise<Object>} \uC218\uC9D1\uB41C \uBB38\uC81C \uB370\uC774\uD130\r\n   */\r\n  async collectAllProblems() {\r\n    console.log('[SCRAPER] collectAllProblems start');\r\n    const allData = {\r\n      reading: [],\r\n      math: [],\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    console.log('[SAT-DEBUG] \uD604\uC7AC \uB2E8\uACC4: \uC804\uCCB4 \uBB38\uC81C \uC218\uC9D1 \uC2DC\uC791 (\uC5C4\uACA9\uD55C \uC21C\uCC28 \uC2E4\uD589)');\r\n    \r\n    // \uC0C1\uD0DC \uAD00\uB9AC\uC790\uC640 UI \uB3D9\uAE30\uD654\r\n    this.stateManager.syncWithUI();\r\n    console.log('[SAT-DEBUG] \uC0C1\uD0DC \uAD00\uB9AC\uC790\uC640 UI \uB3D9\uAE30\uD654 \uC644\uB8CC');\r\n\r\n    try {\r\n      // ========================================================================\r\n      // STEP 1: Reading and Writing Module 1\r\n      // ========================================================================\r\n      const step1 = this.stateManager.getCurrentStep();\r\n      console.log('[SAT-DEBUG] \uD604\uC7AC \uB2E8\uACC4: STEP 1 - Reading and Writing Module 1 \uC2DC\uC791');\r\n      \r\n      this.stateManager.setCurrentSection('READING_WRITING');\r\n      this.stateManager.setCurrentModule(1);\r\n      \r\n      // NOTE: showToast, startNextModule, configureAndStartTest, clickSectionContinue, safeClick are imported above\r\n      showToast('Reading and Writing Module 1 \uC218\uC9D1 \uC911...', 'info');\r\n      const rwModule1Count = await this.collectModuleWithValidation(allData, 'reading', 'Module 1', 1);\r\n      \r\n      // ============================================================================\r\n      // Reading Module 1 \uC644\uB8CC \uD6C4 \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD\r\n      // ============================================================================\r\n      if (rwModule1Count < CONFIG.collection.maxProblems) {\r\n        console.warn(`[SAT-DEBUG] Reading and Writing Module 1 \uBB38\uC81C \uC218 \uBD80\uC871: ${rwModule1Count}/${CONFIG.collection.maxProblems}`);\r\n        showToast(`\uACBD\uACE0: Reading Module 1 \uC218\uC9D1 \uBD80\uC871 (${rwModule1Count}/${CONFIG.collection.maxProblems})`, 'info');\r\n      }\r\n      \r\n      console.log('[SAT-DEBUG] \uD604\uC7AC \uB2E8\uACC4: STEP 1 \uC644\uB8CC - Reading Module 1:', rwModule1Count, '\uAC1C \uC218\uC9D1');\r\n      \r\n      // Module 1 \uC644\uB8CC \uD6C4 \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD (\uD655\uC778 \uD31D\uC5C5 \uCC98\uB9AC \uD3EC\uD568)\r\n      console.log('[SAT-DEBUG] Reading Module 1 \uC218\uC9D1 \uC644\uB8CC. \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD \uC911...');\r\n      showToast('Reading Module 1 \uC644\uB8CC. \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD \uC911...', 'info');\r\n      \r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'scraper.js:beforeModule1Submit',message:'before module 1 submit',data:{rwModule1Count,isQuestionScreen:isQuestionScreen(),progressState:getProgressState(),bodyText:(document.body.innerText||'').substring(0,200)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      // clickSubmitWithConfirmation \uD568\uC218 \uC0AC\uC6A9 (\uD655\uC778 \uD31D\uC5C5 \uC790\uB3D9 \uCC98\uB9AC)\r\n      const module1Submitted = await clickSubmitWithConfirmation();\r\n      \r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'scraper.js:afterModule1Submit',message:'after module 1 submit',data:{module1Submitted,isQuestionScreen:isQuestionScreen(),progressState:getProgressState(),bodyText:(document.body.innerText||'').substring(0,200)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      if (module1Submitted) {\r\n        console.log('[SAT-DEBUG] Reading Module 1 \uC81C\uCD9C \uC644\uB8CC. \uD654\uBA74 \uC804\uD658 \uB300\uAE30 \uC911...');\r\n        await waitForContentLoad(CONFIG.timeouts.screenTransition);\r\n        \r\n        // Module 2 \uC2DC\uC791 \uD654\uBA74\uC774 \uBA85\uD655\uD788 \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30 (\uCD5C\uB300 10\uCD08)\r\n        console.log('[SAT-DEBUG] Module 2 \uC2DC\uC791 \uD654\uBA74 \uB300\uAE30 \uC911...');\r\n        const module2ScreenReady = await waitForCondition(() => {\r\n          const bodyText = (document.body.innerText || document.body.textContent || '').toLowerCase();\r\n          const hasModule2Text = bodyText.includes('\uBAA8\uB4C8 2') || bodyText.includes('module 2') || \r\n                                bodyText.includes('reading and writing module 2');\r\n          const hasStartButton = findButtonByText('\uBAA8\uB4C8 2 \uC2DC\uC791', 'Module 2', '\uC2DC\uC791', 'Start');\r\n          return hasModule2Text || !!hasStartButton;\r\n        }, CONFIG.timeouts.screenTransition * 4);\r\n        \r\n        if (module2ScreenReady) {\r\n          console.log('[SAT-DEBUG] Module 2 \uC2DC\uC791 \uD654\uBA74 \uD655\uC778\uB428');\r\n        } else {\r\n          console.warn('[SAT-DEBUG] Module 2 \uC2DC\uC791 \uD654\uBA74\uC774 \uB098\uD0C0\uB098\uC9C0 \uC54A\uC558\uC9C0\uB9CC \uACC4\uC18D \uC9C4\uD589\uD569\uB2C8\uB2E4.');\r\n        }\r\n        \r\n        // \uCD94\uAC00 \uB300\uAE30: \uD654\uBA74\uC774 \uC644\uC804\uD788 \uB85C\uB4DC\uB420 \uB54C\uAE4C\uC9C0\r\n        await new Promise(resolve => setTimeout(resolve, 400));\r\n        \r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'scraper.js:afterModule1SubmitWait',message:'after module 1 submit wait',data:{isQuestionScreen:isQuestionScreen(),progressState:getProgressState(),bodyText:(document.body.innerText||'').substring(0,200),hasModule2Text:(document.body.innerText||'').toLowerCase().includes('\uBAA8\uB4C8 2'),module2ScreenReady},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n        // #endregion\r\n      } else {\r\n        console.warn('[SAT-DEBUG] Reading Module 1 \uC81C\uCD9C \uC2E4\uD328 \uB610\uB294 \uC81C\uCD9C \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'scraper.js:module1SubmitFailed',message:'module 1 submit failed',data:{isQuestionScreen:isQuestionScreen(),progressState:getProgressState(),bodyText:(document.body.innerText||'').substring(0,200)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n        // #endregion\r\n        \r\n        // BUG FIX: \uC81C\uCD9C \uBC84\uD2BC\uC744 \uCC3E\uC9C0 \uBABB\uD588\uC9C0\uB9CC Module 2 \uC2DC\uC791 \uD654\uBA74\uC774 \uB098\uD0C0\uB0AC\uB294\uC9C0 \uD655\uC778\r\n        console.log('[SAT-DEBUG] \uC81C\uCD9C \uBC84\uD2BC\uC744 \uCC3E\uC9C0 \uBABB\uD588\uC9C0\uB9CC Module 2 \uC2DC\uC791 \uD654\uBA74 \uD655\uC778 \uC911...');\r\n        await new Promise(resolve => setTimeout(resolve, 350)); // \uD654\uBA74 \uC804\uD658 \uB300\uAE30\r\n        \r\n        const bodyTextAfterWait = (document.body.innerText || document.body.textContent || '').toLowerCase();\r\n        const hasModule2AfterWait = bodyTextAfterWait.includes('\uBAA8\uB4C8 2') || bodyTextAfterWait.includes('module 2') || \r\n                                    bodyTextAfterWait.includes('reading and writing module 2');\r\n        \r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'scraper.js:module1SubmitFailedCheck',message:'checking module 2 screen after submit failed',data:{hasModule2AfterWait,bodyTextPreview:bodyTextAfterWait.substring(0,200)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n        // #endregion\r\n        \r\n        if (hasModule2AfterWait) {\r\n          console.log('[SAT-DEBUG] Module 2 \uC2DC\uC791 \uD654\uBA74\uC774 \uB098\uD0C0\uB0AC\uC2B5\uB2C8\uB2E4. \uC81C\uCD9C\uC774 \uC131\uACF5\uD55C \uAC83\uC73C\uB85C \uAC04\uC8FC\uD558\uACE0 \uACC4\uC18D \uC9C4\uD589\uD569\uB2C8\uB2E4.');\r\n        } else {\r\n          console.warn('[SAT-DEBUG] Module 2 \uC2DC\uC791 \uD654\uBA74\uC774 \uB098\uD0C0\uB098\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uACC4\uC18D \uC9C4\uD589\uC744 \uC2DC\uB3C4\uD569\uB2C8\uB2E4.');\r\n        }\r\n      }\r\n      // ============================================================================\r\n\r\n      // ========================================================================\r\n      // STEP 2: Reading and Writing Module 2\r\n      // ========================================================================\r\n      const step2 = this.stateManager.getCurrentStep();\r\n      console.log('[SAT-DEBUG] \uD604\uC7AC \uB2E8\uACC4: STEP 2 - Reading and Writing Module 2 \uC2DC\uC791');\r\n      \r\n      // Guard: \uD604\uC7AC \uC139\uC158\uC774 Reading and Writing\uC778\uC9C0 \uD655\uC778\r\n      this.stateManager.guardSectionTransition('READING_WRITING');\r\n      this.stateManager.setCurrentModule(2);\r\n      \r\n      showToast('Reading and Writing Module 2 \uC2DC\uC791 \uC911...', 'info');\r\n      \r\n      // \uBAA8\uB4C8 2 \uC2DC\uC791 \uD654\uBA74\uC774 \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30\r\n      console.log('[SAT-DEBUG] \uBAA8\uB4C8 2 \uC2DC\uC791 \uD654\uBA74 \uB300\uAE30 \uC911...');\r\n      const module2ScreenReady = await waitForCondition(() => {\r\n        const bodyText = (document.body.innerText || document.body.textContent || '').toLowerCase();\r\n        const hasModule2Text = bodyText.includes('\uBAA8\uB4C8 2') || bodyText.includes('module 2');\r\n        const hasStartButton = findButtonByText('\uBAA8\uB4C8 2 \uC2DC\uC791', 'Module 2', '\uC2DC\uC791', 'Start');\r\n        const isReady = hasModule2Text || !!hasStartButton;\r\n        if (isReady) {\r\n          console.log('[SAT-DEBUG] \uBAA8\uB4C8 2 \uC2DC\uC791 \uD654\uBA74 \uD655\uC778\uB428');\r\n        }\r\n        return isReady;\r\n      }, CONFIG.timeouts.screenTransition * 6);\r\n      \r\n      if (!module2ScreenReady) {\r\n        console.warn('[SAT-DEBUG] \uBAA8\uB4C8 2 \uC2DC\uC791 \uD654\uBA74\uC774 \uB098\uD0C0\uB098\uC9C0 \uC54A\uC558\uC9C0\uB9CC \uACC4\uC18D \uC9C4\uD589\uD569\uB2C8\uB2E4.');\r\n      }\r\n      \r\n      // \uCD94\uAC00 \uB300\uAE30: \uD654\uBA74\uC774 \uC644\uC804\uD788 \uB85C\uB4DC\uB420 \uB54C\uAE4C\uC9C0\r\n      await new Promise(resolve => setTimeout(resolve, 300));\r\n      \r\n      // NOTE: startNextModule is imported from navigator.js\r\n      console.log('[SAT-DEBUG] \uBAA8\uB4C8 2 \uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD \uC2DC\uB3C4...');\r\n      \r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'scraper.js:beforeStartModule2',message:'before start module 2',data:{module2ScreenReady,isQuestionScreen:isQuestionScreen(),progressState:getProgressState(),bodyText:(document.body.innerText||'').substring(0,200)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      const module2Started = await startNextModule();\r\n      \r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'scraper.js:afterStartModule2',message:'after start module 2',data:{module2Started,isQuestionScreen:isQuestionScreen(),progressState:getProgressState(),bodyText:(document.body.innerText||'').substring(0,200)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      if (!module2Started) {\r\n        console.warn('[SAT-DEBUG] Reading and Writing Module 2 \uC2DC\uC791 \uC2E4\uD328');\r\n        console.warn('[SAT-DEBUG] (\uC790\uB3D9 \uC9C4\uD589) Module 2 \uC2DC\uC791 \uC2E4\uD328 \uC0C1\uD0DC\uC9C0\uB9CC \uACC4\uC18D \uC9C4\uD589\uC744 \uC2DC\uB3C4\uD569\uB2C8\uB2E4.');\r\n        showToast('\uACBD\uACE0: Reading Module 2 \uC2DC\uC791 \uC2E4\uD328(\uC790\uB3D9 \uC9C4\uD589)', 'info');\r\n      }\r\n\r\n      // Guard: Module Start Screen\uC774 \uB0A8\uC544\uC788\uC73C\uBA74 startModule2 \uC7AC\uC2DC\uB3C4\r\n      if (isModuleStartScreen()) {\r\n        console.log('[SAT-DEBUG] Module Start Screen\uC774 \uB0A8\uC544\uC788\uC74C. startModule2 \uC7AC\uC2DC\uB3C4');\r\n        await startModule2();\r\n      }\r\n\r\n      // Guard: Q1 \uD654\uBA74 \uD655\uC778\uB420 \uB54C\uAE4C\uC9C0 \uB300\uAE30 (premature collection \uBC29\uC9C0)\r\n      const q1Ready = await waitForCondition(() => {\r\n        const progress = getProgressState();\r\n        const isQ1 = progress && /^1\\s*\\/\\s*27/i.test(progress);\r\n        return isQ1 && isQuestionScreen();\r\n      }, CONFIG.timeouts.screenTransition * 4);\r\n\r\n      if (!q1Ready) {\r\n        const progress = getProgressState();\r\n        console.error('[SATScraper] ABORT: Module 2 \uC218\uC9D1 \uC804 Q1 \uD654\uBA74 \uD655\uC778 \uC2E4\uD328. progress:', progress, 'isQuestionScreen:', isQuestionScreen());\r\n        showToast('\uACBD\uACE0: Module 2 Q1 \uD654\uBA74 \uD655\uC778 \uC2E4\uD328', 'info');\r\n      }\r\n      \r\n      // \uD654\uBA74 \uC804\uD658 \uB300\uAE30 (\uCD94\uAC00)\r\n      await waitForCondition(() => {\r\n        return isQuestionScreen() || getProgressState() !== null;\r\n      }, CONFIG.timeouts.screenTransition * 4);\r\n\r\n      // Guard: progress=1 \uC5C6\uC774 \uC218\uC9D1 \uC2DC\uC791 \uC2DC \uC911\uB2E8\r\n      const finalProgress = getProgressState();\r\n      const isQ1Final = finalProgress && /^1\\s*\\/\\s*27/i.test(finalProgress);\r\n      if (!isQ1Final && !isQuestionScreen()) {\r\n        console.error('[SATScraper] ABORT: progress=1/27 \uC5C6\uC774 Module 2 \uC218\uC9D1\uC744 \uC2DC\uC791\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. current progress:', finalProgress);\r\n        showToast('\uACBD\uACE0: Module 2 Q1 \uD655\uC778 \uD544\uC694 (\uC218\uB3D9\uC73C\uB85C \uBAA8\uB4C8 2 \uC2DC\uC791 \uD6C4 \uC7AC\uC2DC\uB3C4)', 'info');\r\n      }\r\n      \r\n      showToast('Reading and Writing Module 2 \uC218\uC9D1 \uC911...', 'info');\r\n      const rwModule2Count = await this.collectModuleWithValidation(allData, 'reading', 'Module 2', 2);\r\n      \r\n      // \uC139\uC158 \uC810\uD504 \uBC29\uC9C0: Reading 27\uBB38\uC81C\uAC00 \uB2E4 \uC218\uC9D1\uB418\uAE30 \uC804\uC5D0\uB294 \uC808\uB300 Math\uB85C \uB118\uC5B4\uAC00\uC9C0 \uC54A\uC74C\r\n      if (rwModule2Count < CONFIG.collection.maxProblems) {\r\n        console.warn(`[SAT-DEBUG] Reading and Writing Module 2 \uBB38\uC81C \uC218 \uBD80\uC871: ${rwModule2Count}/${CONFIG.collection.maxProblems}`);\r\n        console.warn('[SAT-DEBUG] (\uC790\uB3D9 \uC9C4\uD589) Module 2 \uC218\uC9D1\uC774 \uB35C \uB418\uC5C8\uC9C0\uB9CC \uB2E4\uC74C \uB2E8\uACC4\uB85C \uC9C4\uD589\uD569\uB2C8\uB2E4.');\r\n        showToast(`\uACBD\uACE0: Reading Module 2 \uC218\uC9D1 \uBD80\uC871 (${rwModule2Count}/${CONFIG.collection.maxProblems})`, 'info');\r\n      }\r\n      \r\n      // Reading \uC139\uC158 \uC644\uB8CC \uD655\uC778: \uCD1D 54\uAC1C(27*2)\uAC00 \uC218\uC9D1\uB418\uC5C8\uB294\uC9C0 \uD655\uC778\r\n      const totalReadingCount = allData.reading.length;\r\n      if (totalReadingCount < CONFIG.collection.maxProblems * 2) {\r\n        console.warn(`[SAT-DEBUG] Reading \uC139\uC158 \uC804\uCCB4 \uBB38\uC81C \uC218 \uBD80\uC871: ${totalReadingCount}/${CONFIG.collection.maxProblems * 2}`);\r\n        console.warn('[SAT-DEBUG] (\uC790\uB3D9 \uC9C4\uD589) Reading \uC804\uCCB4 \uC218\uC9D1\uC774 \uB35C \uB418\uC5C8\uC9C0\uB9CC Math \uC139\uC158 \uC9C4\uD589\uC744 \uC2DC\uB3C4\uD569\uB2C8\uB2E4.');\r\n        showToast(`\uACBD\uACE0: Reading \uC804\uCCB4 \uC218\uC9D1 \uBD80\uC871 (${totalReadingCount}/${CONFIG.collection.maxProblems * 2})`, 'info');\r\n      }\r\n      \r\n      console.log('[SAT-DEBUG] \uD604\uC7AC \uB2E8\uACC4: STEP 2 \uC644\uB8CC - Reading Module 2:', rwModule2Count, '\uAC1C \uC218\uC9D1 (\uC804\uCCB4:', totalReadingCount, '\uAC1C)');\r\n      \r\n      // ============================================================================\r\n      // Reading Module 2 \uC644\uB8CC \uD6C4 \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD (\uD655\uC778 \uD31D\uC5C5 \uCC98\uB9AC \uD3EC\uD568)\r\n      // ============================================================================\r\n      console.log('[SAT-DEBUG] Reading Module 2 \uC218\uC9D1 \uC644\uB8CC. \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD \uC911...');\r\n      showToast('Reading Module 2 \uC644\uB8CC. \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD \uC911...', 'info');\r\n      \r\n      // clickSubmitWithConfirmation \uD568\uC218 \uC0AC\uC6A9 (\uD655\uC778 \uD31D\uC5C5 \uC790\uB3D9 \uCC98\uB9AC)\r\n      const module2Submitted = await clickSubmitWithConfirmation();\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'scraper.js:afterModule2Submit',message:'after module 2 submit',data:{module2Submitted,totalReadingCount:allData.reading.length,bodyText:(document.body.innerText||'').substring(0,300)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'M2'})}).catch(()=>{});\r\n      if (module2Submitted) {\r\n        console.log('[SAT-DEBUG] Reading Module 2 \uC81C\uCD9C \uC644\uB8CC. Math \uC139\uC158\uC73C\uB85C \uC9C4\uD589\uD569\uB2C8\uB2E4.');\r\n        await waitForContentLoad(CONFIG.timeouts.screenTransition);\r\n      } else {\r\n        console.warn('[SAT-DEBUG] Reading Module 2 \uC81C\uCD9C \uC2E4\uD328 \uB610\uB294 \uC81C\uCD9C \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. Math \uC139\uC158 \uC9C4\uD589\uC744 \uC2DC\uB3C4\uD569\uB2C8\uB2E4.');\r\n      }\r\n      // ============================================================================\r\n      \r\n      // Module 2 \uC81C\uCD9C \uC644\uB8CC \uD6C4 \uB2E4\uC74C \uC139\uC158(\uC218\uD559)\uC73C\uB85C \uC9C4\uD589\r\n      console.log('[SAT-DEBUG] Reading Module 2 \uC81C\uCD9C \uC644\uB8CC. Math \uC139\uC158\uC73C\uB85C \uC9C4\uD589\uD569\uB2C8\uB2E4.');\r\n      console.log(`[SAT-DEBUG] \uC218\uC9D1\uB41C \uBB38\uC81C: Reading Module 1 - ${rwModule1Count}\uAC1C, Reading Module 2 - ${rwModule2Count}\uAC1C (\uC804\uCCB4: ${totalReadingCount}\uAC1C)`);\r\n      console.log(`[SAT-DEBUG] \uD604\uC7AC\uAE4C\uC9C0 \uC218\uC9D1 \uB370\uC774\uD130: Reading ${allData.reading.length}\uAC1C, Math ${allData.math.length}\uAC1C`);\r\n      // Reading Module 1, 2 \uC644\uB8CC \uCC98\uB9AC (stepIndex 0\u21921\u21922\uB85C \uC9C4\uD589\uD574 MATH \uC9C4\uC785 \uAC00\uB2A5\uD558\uAC8C)\r\n      this.stateManager.completeCurrentStep(); // READ_WRITE Module 1 \u2192 Module 2\r\n      this.stateManager.completeCurrentStep(); // READ_WRITE Module 2 \u2192 MATH Module 1\r\n      // ============================================================================\r\n\r\n      // ========================================================================\r\n      // STEP 3: Math Module 1\r\n      // ========================================================================\r\n      const step3 = this.stateManager.getCurrentStep();\r\n      console.log('[SAT-DEBUG] \uD604\uC7AC \uB2E8\uACC4: STEP 3 - Math Module 1 \uC2DC\uC791 (Reading \uC139\uC158 \uC644\uB8CC \uD655\uC778\uB428)');\r\n      \r\n      // Guard: Reading and Writing\uC774 \uC644\uC804\uD788 \uB05D\uB0AC\uB294\uC9C0 \uD655\uC778 (\uC2A4\uD06C\uB9BD\uD2B8 \uBED7\uC74C \uBC29\uC9C0)\r\n      const detectedSection = this.stateManager.detectSectionFromScreen();\r\n      if (detectedSection === 'READING_WRITING') {\r\n        console.warn('[SATScraper] Reading and Writing \uC139\uC158\uC774 \uC544\uC9C1 \uC644\uB8CC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.');\r\n        console.warn('[SATScraper] (\uC790\uB3D9 \uC9C4\uD589) \uACC4\uC18D \uC9C4\uD589\uC744 \uC2DC\uB3C4\uD569\uB2C8\uB2E4.');\r\n        showToast('\uACBD\uACE0: Reading and Writing \uBBF8\uC644\uB8CC(\uC790\uB3D9 \uC9C4\uD589)', 'info');\r\n      }\r\n      \r\n      // \uC218\uD559 \uC139\uC158 \uC9C4\uC785 \uC870\uAC74 \uAC15\uD654: \uBA85\uD655\uD55C \uC99D\uAC70 \uD655\uC778\r\n      console.log('[SATScraper] \uC218\uD559 \uC139\uC158 \uC9C4\uC785 \uC804 \uAC80\uC99D \uC2DC\uC791...');\r\n      \r\n      // \uC99D\uAC70 1: Reading and Writing \uBB38\uC81C\uAC00 \uCDA9\uBD84\uD788 \uC218\uC9D1\uB418\uC5C8\uB294\uC9C0 \uD655\uC778\r\n      if (allData.reading.length < CONFIG.collection.maxProblems * 2) {\r\n        const rwIncompleteMsg = `Reading and Writing \uC139\uC158 \uBBF8\uC644\uB8CC: ${allData.reading.length}/${CONFIG.collection.maxProblems * 2} \uBB38\uC81C\uB9CC \uC218\uC9D1\uB428`;\r\n        console.warn(`[SATScraper] ${rwIncompleteMsg}`);\r\n        showToast(`\uACBD\uACE0: ${rwIncompleteMsg} (\uC218\uD559 \uC139\uC158 \uC9C4\uC785\uC740 \uACC4\uC18D \uC2DC\uB3C4)`, 'info');\r\n      }\r\n      \r\n      // \uC99D\uAC70 2: \uD654\uBA74\uC5D0 \"\uC218\uD559\" \uB610\uB294 \"Math\" \uAD00\uB828 \uD14D\uC2A4\uD2B8/\uBC84\uD2BC\uC774 \uC788\uB294\uC9C0 \uD655\uC778\r\n      const bodyText = (document.body.innerText || document.body.textContent || '').toLowerCase();\r\n      const hasMathText = bodyText.includes('math') || bodyText.includes('\uC218\uD559') || \r\n                         bodyText.includes('mathematics') || bodyText.includes('\uC218\uD559 \uC139\uC158');\r\n      \r\n      // \uC99D\uAC70 3: \"\uC218\uD559 \uC2DC\uC791\" \uB610\uB294 \"Math\" \uBC84\uD2BC \uCC3E\uAE30\r\n      let mathStartButton = findButtonByText('\uC2DC\uC791', 'Start', '\uACC4\uC18D', 'Continue', 'Math', '\uC218\uD559');\r\n      let mathSectionButton = findButtonByText('Math', '\uC218\uD559', 'Mathematics');\r\n      let hasMathButton = !!(mathStartButton || mathSectionButton);\r\n      \r\n      // \uC99D\uAC70 4: \"\uC218\uD559 \uC2DC\uC791\" \uB610\uB294 \"Start Math\" \uD14D\uC2A4\uD2B8\uAC00 \uC788\uB294 \uBC84\uD2BC \uCC3E\uAE30\r\n      const allButtons = document.querySelectorAll('button, [role=\"button\"]');\r\n      let hasMathStartText = false;\r\n      for (const btn of allButtons) {\r\n        const btnText = (btn.innerText || btn.textContent || '').toLowerCase();\r\n        if (btnText.includes('math') || btnText.includes('\uC218\uD559') || \r\n            btnText.includes('start math') || btnText.includes('\uC218\uD559 \uC2DC\uC791')) {\r\n          hasMathStartText = true;\r\n          console.log('[SATScraper] \uC218\uD559 \uC2DC\uC791 \uBC84\uD2BC \uBC1C\uACAC:', btnText);\r\n          break;\r\n        }\r\n      }\r\n      \r\n      // \uBA85\uD655\uD55C \uC99D\uAC70\uAC00 \uC5C6\uC73C\uBA74 \uC218\uD559 \uC139\uC158 \uC9C4\uC785 \uAE08\uC9C0 (\uC2A4\uD06C\uB9BD\uD2B8 \uBED7\uC74C \uBC29\uC9C0)\r\n      if (!hasMathText && !hasMathButton && !hasMathStartText) {\r\n        const errorMsg = `\uC218\uD559 \uC139\uC158 \uC9C4\uC785 \uC870\uAC74 \uBBF8\uCDA9\uC871: \uD654\uBA74\uC5D0 \uC218\uD559 \uAD00\uB828 \uD14D\uC2A4\uD2B8\uB098 \uBC84\uD2BC\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. Reading and Writing \uC139\uC158\uC774 \uC644\uC804\uD788 \uC644\uB8CC\uB418\uC5C8\uB294\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.`;\r\n        console.warn(`[SATScraper] ${errorMsg}`);\r\n        console.warn('[SATScraper] (\uC790\uB3D9 \uC9C4\uD589) \uACBD\uACE0 \uBC1C\uC0DD\uC774\uC9C0\uB9CC \uACC4\uC18D \uC9C4\uD589\uC744 \uC2DC\uB3C4\uD569\uB2C8\uB2E4.');\r\n        showToast(`\uACBD\uACE0: ${errorMsg}`, 'info');\r\n      }\r\n      \r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'scraper.js:beforeMathSection',message:'before math section entry',data:{hasMathText,hasMathButton,hasMathStartText,readingProblems:allData.reading.length,bodyText:(document.body.innerText||'').substring(0,300)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'MATH'})}).catch(()=>{});\r\n      console.log('[SATScraper] \uC218\uD559 \uC139\uC158 \uC9C4\uC785 \uC870\uAC74 \uCDA9\uC871 \uD655\uC778(\uCD08\uAE30 \uD0D0\uC0C9 \uAE30\uC900):', {\r\n        hasMathText,\r\n        hasMathButton,\r\n        hasMathStartText,\r\n        readingProblems: allData.reading.length\r\n      });\r\n      \r\n      this.stateManager.setCurrentSection('MATH');\r\n      this.stateManager.setCurrentModule(1);\r\n      \r\n      showToast('Math \uC139\uC158 \uC2DC\uC791 \uC911...', 'info');\r\n\r\n      // Math \uC139\uC158 \uC2DC\uC791 \uBC84\uD2BC \uCC3E\uAE30 \uBC0F \uD074\uB9AD\r\n      // NOTE: safeClick, clickSectionContinue, configureAndStartTest are imported above\r\n      // 1\uCC28: \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uBC84\uD2BC \uD0D0\uC0C9 (\uC704\uC5D0\uC11C \uCC3E\uC740 mathStartButton / mathSectionButton \uC0AC\uC6A9)\r\n      if (mathStartButton) {\r\n        console.log('[SATScraper] Math \uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD');\r\n        await safeClick(mathStartButton);\r\n        await waitForContentLoad(CONFIG.timeouts.screenTransition);\r\n      } else if (mathSectionButton) {\r\n        console.log('[SATScraper] Math \uC139\uC158 \uBC84\uD2BC \uD074\uB9AD');\r\n        await safeClick(mathSectionButton);\r\n        await waitForContentLoad(CONFIG.timeouts.screenTransition);\r\n      } else {\r\n        // 2\uCC28: Math \uC139\uC158 \uCE74\uB4DC\uC758 \uC2DC\uC791 \uBC84\uD2BC \uD0D0\uC0C9 (\uC5EC\uB7EC \uCE74\uB4DC \uC911 Math \uCE74\uB4DC\uB9CC \uC120\uD0DD)\r\n        let explicitMathButton = null;\r\n        const sectionCards = document.querySelectorAll('glowing-card.section-card, .section-card, section-overview [class*=\"section-card\"]');\r\n        for (const card of sectionCards) {\r\n          const cardText = (card.innerText || card.textContent || '').toLowerCase();\r\n          if (cardText.includes('math') || cardText.includes('\uC218\uD559')) {\r\n            const btn = card.querySelector('div.section-button-container button, .section-button-container button, button');\r\n            if (btn) {\r\n              explicitMathButton = btn;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        // fallback: \uC0AC\uC6A9\uC790 \uC81C\uACF5 \uC140\uB809\uD130 (Reading \uCE74\uB4DC\uAC00 \uBA3C\uC800 \uC788\uC73C\uBA74 Math \uCE74\uB4DC\uC758 \uB450 \uBC88\uC9F8 \uB9E4\uCE6D \uC2DC\uB3C4)\r\n        if (!explicitMathButton) {\r\n          const allSectionButtons = document.querySelectorAll('section-overview glowing-card.section-card button, .section-overview .section-card button');\r\n          for (const btn of allSectionButtons) {\r\n            const card = btn.closest('glowing-card, .section-card');\r\n            if (card && ((card.innerText || '').toLowerCase().includes('math') || (card.innerText || '').toLowerCase().includes('\uC218\uD559'))) {\r\n              explicitMathButton = btn;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'scraper.js:mathButtonSearch',message:'math button search',data:{explicitMathButtonFound:!!explicitMathButton,sectionCardCount:sectionCards.length,glowingCardCount:document.querySelectorAll('glowing-card.section-card').length},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'MATH'})}).catch(()=>{});\r\n\r\n        if (explicitMathButton) {\r\n          console.log('[SATScraper] CSS \uC140\uB809\uD130 \uAE30\uBC18 Math \uC2DC\uC791 \uBC84\uD2BC \uBC1C\uACAC. \uD074\uB9AD \uC2DC\uB3C4...', explicitMathButton);\r\n          await safeClick(explicitMathButton);\r\n          await waitForContentLoad(CONFIG.timeouts.screenTransition);\r\n        } else {\r\n          // 3\uCC28: fallback - \uAE30\uC874 \uC139\uC158 continue \uB85C\uC9C1 \uC7AC\uC0AC\uC6A9\r\n          const mathStarted = await clickSectionContinue('Math');\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'scraper.js:afterClickSectionContinue',message:'after clickSectionContinue Math',data:{mathStarted},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'MATH'})}).catch(()=>{});\r\n          if (!mathStarted) {\r\n            console.warn('[SATScraper] Math \uC139\uC158 \uC2DC\uC791 \uC2E4\uD328: \uC2DC\uC791 \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4');\r\n            console.warn('[SATScraper] (\uC790\uB3D9 \uC9C4\uD589) Math \uC139\uC158 \uC2DC\uC791 \uC2E4\uD328\uC9C0\uB9CC \uACC4\uC18D \uC9C4\uD589\uC744 \uC2DC\uB3C4\uD569\uB2C8\uB2E4.');\r\n            showToast('\uACBD\uACE0: Math \uC139\uC158 \uC2DC\uC791 \uC2E4\uD328(\uC790\uB3D9 \uC9C4\uD589)', 'info');\r\n          }\r\n        }\r\n      }\r\n      \r\n      // \uD14C\uC2A4\uD2B8 \uC124\uC815 \uD654\uBA74 \uCC98\uB9AC\r\n      await configureAndStartTest();\r\n      \r\n      // \uD654\uBA74 \uC804\uD658 \uB300\uAE30\r\n      await waitForCondition(() => {\r\n        return isQuestionScreen() || getProgressState() !== null;\r\n      }, CONFIG.timeouts.screenTransition * 6);\r\n      \r\n      const mathExpected = CONFIG.collection.mathMaxProblems ?? 22;\r\n      showToast('Math Module 1 \uC218\uC9D1 \uC911...', 'info');\r\n      const mathModule1Count = await this.collectModuleWithValidation(allData, 'math', 'Module 1', 1);\r\n      \r\n      if (mathModule1Count < mathExpected) {\r\n        console.warn(`[SATScraper] Math Module 1 \uBB38\uC81C \uC218 \uBD80\uC871: ${mathModule1Count}/${mathExpected}`);\r\n        console.warn('[SATScraper] (\uC790\uB3D9 \uC9C4\uD589) Math Module 1 \uC218\uC9D1 \uBD80\uC871\uC774\uC9C0\uB9CC \uB2E4\uC74C \uB2E8\uACC4\uB85C \uC9C4\uD589\uD569\uB2C8\uB2E4.');\r\n        showToast(`\uACBD\uACE0: Math Module 1 \uC218\uC9D1 \uBD80\uC871 (${mathModule1Count}/${mathExpected})`, 'info');\r\n      }\r\n      \r\n      // Math Module 1 \uC644\uB8CC \uD6C4 \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD (Reading\uACFC \uB3D9\uC77C - \uD655\uC778 \uD31D\uC5C5 \uCC98\uB9AC)\r\n      console.log('[SATScraper] Math Module 1 \uC218\uC9D1 \uC644\uB8CC. \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD \uC911...');\r\n      showToast('Math Module 1 \uC644\uB8CC. \uC81C\uCD9C \uBC84\uD2BC \uD074\uB9AD \uC911...', 'info');\r\n      const mathModule1Submitted = await clickSubmitWithConfirmation();\r\n      if (mathModule1Submitted) {\r\n        console.log('[SATScraper] Math Module 1 \uC81C\uCD9C \uC644\uB8CC.');\r\n      } else {\r\n        console.warn('[SATScraper] Math Module 1 \uC81C\uCD9C \uC2E4\uD328 \uB610\uB294 \uC81C\uCD9C \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n      }\r\n      \r\n      // Module 1 \uC644\uB8CC \uD6C4 \uC804\uD658 \uB300\uAE30\r\n      await this.waitForModuleTransition('math', 1);\r\n      this.stateManager.completeCurrentStep();\r\n\r\n      // ========================================================================\r\n      // STEP 4: Math Module 2\r\n      // ========================================================================\r\n      const step4 = this.stateManager.getCurrentStep();\r\n      console.log(`[SATScraper] STEP 4: ${step4.section} Module ${step4.module} \uC2DC\uC791`);\r\n      \r\n      this.stateManager.setCurrentModule(2);\r\n      \r\n      showToast('Math Module 2 \uC2DC\uC791 \uC911...', 'info');\r\n      await new Promise(resolve => setTimeout(resolve, CONFIG.timeouts.screenTransition));\r\n      \r\n      const mathModule2Started = await startNextModule();\r\n      if (!mathModule2Started) {\r\n        console.warn('[SATScraper] Math Module 2 \uC2DC\uC791 \uC2E4\uD328');\r\n        console.warn('[SATScraper] (\uC790\uB3D9 \uC9C4\uD589) Math Module 2 \uC2DC\uC791 \uC2E4\uD328 \uC0C1\uD0DC\uC9C0\uB9CC \uACC4\uC18D \uC9C4\uD589\uC744 \uC2DC\uB3C4\uD569\uB2C8\uB2E4.');\r\n        showToast('\uACBD\uACE0: Math Module 2 \uC2DC\uC791 \uC2E4\uD328(\uC790\uB3D9 \uC9C4\uD589)', 'info');\r\n      }\r\n      \r\n      // \uD654\uBA74 \uC804\uD658 \uB300\uAE30\r\n      await waitForCondition(() => {\r\n        return isQuestionScreen() || getProgressState() !== null;\r\n      }, CONFIG.timeouts.screenTransition * 6);\r\n      \r\n      showToast('Math Module 2 \uC218\uC9D1 \uC911...', 'info');\r\n      const mathModule2Count = await this.collectModuleWithValidation(allData, 'math', 'Module 2', 2);\r\n      \r\n      if (mathModule2Count < mathExpected) {\r\n        console.warn(`[SATScraper] Math Module 2 \uBB38\uC81C \uC218 \uBD80\uC871: ${mathModule2Count}/${mathExpected}`);\r\n        console.warn('[SATScraper] (\uC790\uB3D9 \uC9C4\uD589) Math Module 2 \uC218\uC9D1 \uBD80\uC871\uC774\uC9C0\uB9CC \uB9C8\uBB34\uB9AC \uC9C4\uD589\uD569\uB2C8\uB2E4.');\r\n        showToast(`\uACBD\uACE0: Math Module 2 \uC218\uC9D1 \uBD80\uC871 (${mathModule2Count}/${mathExpected})`, 'info');\r\n      }\r\n      \r\n      this.stateManager.completeCurrentStep();\r\n\r\n      console.log(`[SATScraper] ===== \uC804\uCCB4 \uC218\uC9D1 \uC644\uB8CC =====`);\r\n      console.log(`[SATScraper] Reading: ${allData.reading.length}\uAC1C, Math: ${allData.math.length}\uAC1C`);\r\n      \r\n      return allData;\r\n    } catch (error) {\r\n      console.error('[SATScraper] \uC804\uCCB4 \uC218\uC9D1 \uC911 \uC624\uB958:', error);\r\n      console.error(`[SATScraper] \uD604\uC7AC \uC0C1\uD0DC: ${this.stateManager.currentSection} Module ${this.stateManager.currentModule}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \uBAA8\uB4C8 \uBB38\uC81C \uC218\uC9D1 (\uAC80\uC99D \uD3EC\uD568)\r\n   * @param {Object} allData - \uC804\uCCB4 \uB370\uC774\uD130 \uAC1D\uCCB4\r\n   * @param {string} sectionType - 'reading' | 'math'\r\n   * @param {string} moduleName - 'Module 1' | 'Module 2'\r\n   * @param {number} moduleNumber - 1 | 2\r\n   * @returns {Promise<number>} \uC218\uC9D1\uB41C \uBB38\uC81C \uC218\r\n   */\r\n  async collectModuleWithValidation(allData, sectionType, moduleName, moduleNumber) {\r\n    console.log(`[SATScraper] ${moduleName} \uC218\uC9D1 \uC2DC\uC791 (\uAC80\uC99D \uD3EC\uD568)`);\r\n    \r\n    // collectModuleProblems \uD568\uC218 \uD638\uCD9C (moduleRunner.js\uC5D0\uC11C import)\r\n    await collectModuleProblems(allData, sectionType, moduleName);\r\n    \r\n    // \uC218\uC9D1\uB41C \uBB38\uC81C \uC218 \uD655\uC778\r\n    const collectedProblems = sectionType === 'reading' ? allData.reading : allData.math;\r\n    const moduleProblems = collectedProblems.filter(p => p.module === moduleNumber);\r\n    const count = moduleProblems.length;\r\n    \r\n    console.log(`[SATScraper] ${moduleName} \uC218\uC9D1 \uC644\uB8CC: ${count}\uAC1C`);\r\n    \r\n    // TEMP \uBAA8\uB4DC: \uC644\uB8CC \uAC80\uC99D \uC2A4\uD0B5\r\n    if (TEMP_MODE) {\r\n      console.log(`[TEMP] TEMP \uBAA8\uB4DC: \uC644\uB8CC \uAC80\uC99D \uC2A4\uD0B5`);\r\n      return count;\r\n    }\r\n    \r\n    // Progress \uC0C1\uD0DC \uD655\uC778 (TEMP \uBAA8\uB4DC\uAC00 \uC544\uB2D0 \uB54C\uB9CC)\r\n    const progressState = getProgressState();\r\n    const isComplete = this.isModuleComplete(sectionType, moduleNumber, count, progressState);\r\n    \r\n    const expectedForSection = sectionType === 'math' ? (CONFIG.collection.mathMaxProblems ?? 22) : CONFIG.collection.maxProblems;\r\n    if (!isComplete && count < expectedForSection) {\r\n      console.warn(`[SATScraper] ${moduleName} \uC644\uB8CC \uC870\uAC74 \uBBF8\uCDA9\uC871: ${count}/${expectedForSection}`);\r\n    }\r\n    \r\n    return count;\r\n  }\r\n}\r\n\r\n", "// Extracted PDFGenerator and PDF generation functions from content.js\r\n// NOTE: Logic must remain identical to original implementation.\r\n\r\nimport { CONFIG } from '../config/constants.js';\r\nimport { showToast } from '../dom/wait.js';\r\n\r\n/**\r\n * jsPDF \uB77C\uC774\uBE0C\uB7EC\uB9AC \uAC00\uC838\uC624\uAE30\r\n * @returns {Function} jsPDF \uC0DD\uC131\uC790 \uD568\uC218\r\n * @throws {Error} jsPDF\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC744 \uB54C\r\n */\r\nfunction getJSPDF() {\r\n  try {\r\n    // UMD \uD615\uC2DD: window.jspdf.jsPDF\r\n    if (window.jspdf && window.jspdf.jsPDF) {\r\n      console.log('[SAT PDF Exporter] window.jspdf.jsPDF \uC0AC\uC6A9');\r\n      return window.jspdf.jsPDF;\r\n    }\r\n    // \uB300\uCCB4: window.jsPDF\r\n    if (window.jsPDF) {\r\n      console.log('[SAT PDF Exporter] window.jsPDF \uC0AC\uC6A9');\r\n      return window.jsPDF;\r\n    }\r\n    // \uC804\uC5ED jspdf \uBCC0\uC218\r\n    if (typeof jspdf !== 'undefined' && jspdf.jsPDF) {\r\n      console.log('[SAT PDF Exporter] jspdf.jsPDF \uC0AC\uC6A9');\r\n      return jspdf.jsPDF;\r\n    }\r\n    \r\n    console.error('[SAT PDF Exporter] jsPDF\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. manifest.json\uC5D0\uC11C jspdf.umd.min.js\uAC00 \uBA3C\uC800 \uB85C\uB4DC\uB418\uC5C8\uB294\uC9C0 \uD655\uC778\uD558\uC138\uC694.');\r\n    throw new Error('jsPDF not found. Check if jspdf.umd.min.js is loaded in manifest.json');\r\n  } catch (error) {\r\n    if (error.message && error.message.includes('Extension context invalidated')) {\r\n      console.error('[SAT PDF Exporter] Extension context invalidated - jsPDF \uC811\uADFC \uC2E4\uD328');\r\n      // NOTE: showToast is imported from wait.js\r\n      showToast('\uD655\uC7A5 \uD504\uB85C\uADF8\uB7A8\uC774 \uC7AC\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD398\uC774\uC9C0\uB97C \uC0C8\uB85C\uACE0\uCE68\uD558\uACE0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.', 'error');\r\n      throw error;\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n\r\n// \uBB38\uC81C\uC9C0\uC6A9: \uC139\uC158\uC744 PDF\uC5D0 \uCD94\uAC00 (\uC815\uB2F5/\uD574\uC124 \uC81C\uC678)\r\nfunction addProblemsSectionToPDF(doc, sectionName, problems, startY, maxWidth, margin, pageHeight, lineHeight, sectionSpacing) {\r\n  let yPosition = startY;\r\n\r\n  // \uC139\uC158 \uC81C\uBAA9\r\n  doc.setFontSize(14);\r\n  doc.setFont(undefined, 'bold');\r\n  doc.setTextColor(0, 0, 0);\r\n  \r\n  // \uD398\uC774\uC9C0 \uCCB4\uD06C\r\n  if (yPosition + lineHeight * 3 > pageHeight - 20) {\r\n    doc.addPage();\r\n    yPosition = margin;\r\n  }\r\n\r\n  doc.text(`${sectionName} Section`, margin, yPosition);\r\n  yPosition += lineHeight * 1.5;\r\n\r\n  // \uAC01 \uBB38\uC81C \uCD94\uAC00\r\n  problems.forEach((problem, index) => {\r\n    // #region agent log - DEBUG STEP 4: PDFGenerator\uC5D0\uC11C problem.figures \uAC80\uC99D\r\n    const debugLabel = problem.problemNumber || problem.number || index + 1;\r\n    console.log(`[DEBUG STEP 4] PDFGenerator \uBB38\uC81C \uB8E8\uD504 \uC2DC\uC791: \uBB38\uC81C ${debugLabel}, problem.figures=${problem.figures ? problem.figures.length : 'undefined'}`);\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'pdfGenerator.js:addProblemsSectionToPDF:loopStart',message:'DEBUG STEP 4: PDFGenerator \uBB38\uC81C \uB8E8\uD504 \uC2DC\uC791',data:{problemLabel:debugLabel,index,hasFigures:!!problem.figures,figuresLength:problem.figures?problem.figures.length:0,figures:problem.figures?problem.figures.map(f=>({w:f.width,h:f.height,hasDataUrl:!!f.dataUrl})):null},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n    // #endregion\r\n    \r\n    // \uD398\uC774\uC9C0 \uCCB4\uD06C\r\n    if (yPosition + lineHeight * 10 > pageHeight - 20) {\r\n      doc.addPage();\r\n      yPosition = margin;\r\n    }\r\n\r\n    // \uBB38\uC81C \uBC88\uD638 \uBC0F \uBCF8\uBB38\r\n    doc.setFontSize(12);\r\n    doc.setFont(undefined, 'bold');\r\n    // ============================================================================\r\n    // \uBB38\uC81C \uBC88\uD638: problem.problemNumber\uB97C \uC6B0\uC120 \uC0AC\uC6A9 (\uC2E4\uC81C \uBB38\uC81C \uBC88\uD638)\r\n    // index + 1\uC740 \uD3F4\uBC31\uC73C\uB85C\uB9CC \uC0AC\uC6A9 (problemNumber\uAC00 \uC5C6\uC744 \uB54C\uB9CC)\r\n    // ============================================================================\r\n    let problemLabel;\r\n    if (problem.problemNumber && problem.problemNumber > 0) {\r\n      // problemNumber\uAC00 \uC788\uC73C\uBA74 \uADF8\uAC83\uC744 \uC0AC\uC6A9 (\uC2E4\uC81C \uBB38\uC81C \uBC88\uD638)\r\n      problemLabel = problem.problemNumber;\r\n      console.log(`[PDF] \uBB38\uC81C \uBC88\uD638 \uC0AC\uC6A9: ${problemLabel} (problem.problemNumber)`);\r\n    } else if (problem.number && problem.number > 0) {\r\n      // number\uAC00 \uC788\uC73C\uBA74 \uADF8\uAC83\uC744 \uC0AC\uC6A9\r\n      problemLabel = problem.number;\r\n      console.log(`[PDF] \uBB38\uC81C \uBC88\uD638 \uC0AC\uC6A9: ${problemLabel} (problem.number)`);\r\n    } else {\r\n      // \uD3F4\uBC31: index + 1 (\uBB38\uC81C \uBC88\uD638\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC744 \uB54C\uB9CC)\r\n      problemLabel = index + 1;\r\n      console.warn(`[PDF] \uBB38\uC81C \uBC88\uD638\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC5B4 index \uC0AC\uC6A9: ${problemLabel} (index: ${index})`);\r\n    }\r\n    doc.text(`Problem ${problemLabel}`, margin, yPosition);\r\n    yPosition += lineHeight;\r\n    // ============================================================================\r\n\r\n    doc.setFontSize(10);\r\n    doc.setFont(undefined, 'normal');\r\n    \r\n    // \uC9C0\uBB38 (Reading\uC758 \uACBD\uC6B0)\r\n    if (problem.passage) {\r\n      const passageLines = doc.splitTextToSize(problem.passage, maxWidth);\r\n      passageLines.forEach(line => {\r\n        if (yPosition + lineHeight > pageHeight - 20) {\r\n          doc.addPage();\r\n          yPosition = margin;\r\n        }\r\n        doc.text(line, margin, yPosition);\r\n        yPosition += lineHeight;\r\n      });\r\n      yPosition += lineHeight * 0.5;\r\n    }\r\n\r\n    // \uBB38\uC81C \uBCF8\uBB38\r\n    // question \uC0AC\uC6A9 (stem \uB300\uC2E0, \uD638\uD658\uC131 \uC720\uC9C0)\r\n    // ============================================================================\r\n    // STEP 5: PDFGenerator \uBC29\uC5B4 \uB80C\uB354\uB9C1 - questionText \uC808\uB300 \uBE44\uC5B4\uC788\uC9C0 \uC54A\uAC8C\r\n    // ============================================================================\r\n    let questionText = problem.question || problem.stem || '[QUESTION_NOT_EXTRACTED]';\r\n    if (questionText && questionText.trim().length > 0) {\r\n      const questionLines = doc.splitTextToSize(questionText, maxWidth);\r\n      questionLines.forEach(line => {\r\n        if (yPosition + lineHeight > pageHeight - 20) {\r\n          doc.addPage();\r\n          yPosition = margin;\r\n        }\r\n        doc.text(line, margin, yPosition);\r\n        yPosition += lineHeight;\r\n      });\r\n      yPosition += lineHeight * 0.5;\r\n    } else {\r\n      // questionText\uAC00 \uBE44\uC5B4\uC788\uC73C\uBA74 placeholder \uCD9C\uB825\r\n      doc.setFontSize(10);\r\n      doc.setFont(undefined, 'italic');\r\n      doc.setTextColor(128, 128, 128);\r\n      doc.text('[QUESTION_NOT_EXTRACTED]', margin, yPosition);\r\n      yPosition += lineHeight;\r\n      doc.setTextColor(0, 0, 0);\r\n      yPosition += lineHeight * 0.5;\r\n    }\r\n    // ============================================================================\r\n\r\n    // ============================================================================\r\n    // Figure \uC774\uBBF8\uC9C0 \uC0BD\uC785\r\n    // ============================================================================\r\n    // #region agent log - DEBUG STEP 4: figures \uBE14\uB85D \uC9C4\uC785 \uD655\uC778\r\n    console.log(`[DEBUG STEP 4] figures \uBE14\uB85D \uCCB4\uD06C: \uBB38\uC81C ${problemLabel}, figures \uC874\uC7AC=${!!problem.figures}, \uBC30\uC5F4=${Array.isArray(problem.figures)}, \uAE38\uC774=${problem.figures ? problem.figures.length : 0}`);\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'pdfGenerator.js:addProblemsSectionToPDF:figuresCheck',message:'DEBUG STEP 4: figures \uBE14\uB85D \uCCB4\uD06C',data:{problemLabel,hasFigures:!!problem.figures,isArray:Array.isArray(problem.figures),figuresLength:problem.figures?problem.figures.length:0},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n    // #endregion\r\n    \r\n    if (problem.figures && Array.isArray(problem.figures) && problem.figures.length > 0) {\r\n      // #region agent log - DEBUG STEP 4: figures \uBE14\uB85D \uC9C4\uC785\r\n      console.log(`[DEBUG STEP 4] figures \uBE14\uB85D \uC9C4\uC785: \uBB38\uC81C ${problemLabel}, ${problem.figures.length}\uAC1C figure`);\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'pdfGenerator.js:addProblemsSectionToPDF:figuresBlockEnter',message:'DEBUG STEP 4: figures \uBE14\uB85D \uC9C4\uC785',data:{problemLabel,figuresLength:problem.figures.length},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      console.log(`[PDF] \uBB38\uC81C ${problem.problemNumber || problem.number || index + 1}\uC5D0 ${problem.figures.length}\uAC1C figure \uC0BD\uC785 \uC2DC\uC791`);\r\n      \r\n      for (let figIdx = 0; figIdx < problem.figures.length; figIdx++) {\r\n        const figure = problem.figures[figIdx];\r\n        try {\r\n          // #region agent log - DEBUG STEP 5: addImage \uD638\uCD9C \uC9C1\uC804\r\n          console.log(`[DEBUG STEP 5] addImage \uD638\uCD9C \uC9C1\uC804: \uBB38\uC81C ${problemLabel}, figure ${figIdx + 1}/${problem.figures.length}`);\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'pdfGenerator.js:addProblemsSectionToPDF:beforeAddImage',message:'DEBUG STEP 5: addImage \uD638\uCD9C \uC9C1\uC804',data:{problemLabel,figIdx:figIdx+1,totalFigures:problem.figures.length,figureWidth:figure.width,figureHeight:figure.height,hasDataUrl:!!figure.dataUrl,dataUrlLength:figure.dataUrl?figure.dataUrl.length:0},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'})}).catch(()=>{});\r\n          // #endregion\r\n          // \uC774\uBBF8\uC9C0 \uAC00\uB85C\uD3ED \uACC4\uC0B0 (\uD398\uC774\uC9C0 \uC5EC\uBC31 \uACE0\uB824)\r\n          const maxImageWidth = maxWidth; // \uC774\uBBF8\uC9C0 \uCD5C\uB300 \uAC00\uB85C\uD3ED\r\n          const imgWidth = figure.width || 100;\r\n          const imgHeight = figure.height || 100;\r\n          \r\n          // \uBE44\uC728 \uC720\uC9C0\uD558\uBA70 \uB9AC\uC0AC\uC774\uC988\r\n          let displayWidth = Math.min(maxImageWidth, imgWidth);\r\n          const aspectRatio = imgHeight / imgWidth;\r\n          let displayHeight = displayWidth * aspectRatio;\r\n          \r\n          // \uC774\uBBF8\uC9C0\uAC00 \uB108\uBB34 \uD06C\uBA74 \uB9AC\uC0AC\uC774\uC988\r\n          if (displayHeight > pageHeight - yPosition - 30) {\r\n            displayHeight = pageHeight - yPosition - 30;\r\n            displayWidth = displayHeight / aspectRatio;\r\n          }\r\n          \r\n          // \uD398\uC774\uC9C0 \uD558\uB2E8 \uCCB4\uD06C\r\n          if (yPosition + displayHeight > pageHeight - 20) {\r\n            doc.addPage();\r\n            yPosition = margin;\r\n            // \uC0C8 \uD398\uC774\uC9C0\uC5D0\uC11C\uB3C4 \uD06C\uAE30 \uC7AC\uACC4\uC0B0\r\n            if (displayHeight > pageHeight - yPosition - 30) {\r\n              displayHeight = pageHeight - yPosition - 30;\r\n              displayWidth = displayHeight / aspectRatio;\r\n            }\r\n          }\r\n          \r\n          console.log(`[PDF] figure ${figIdx + 1} \uC0BD\uC785: x=${margin}, y=${yPosition.toFixed(1)}, w=${displayWidth.toFixed(1)}, h=${displayHeight.toFixed(1)}`);\r\n          \r\n          // #region agent log - DEBUG STEP 5: addImage \uD638\uCD9C\r\n          console.log(`[DEBUG STEP 5] addImage \uD638\uCD9C: x=${margin}, y=${yPosition.toFixed(1)}, w=${displayWidth.toFixed(1)}, h=${displayHeight.toFixed(1)}`);\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'pdfGenerator.js:addProblemsSectionToPDF:addImageCall',message:'DEBUG STEP 5: addImage \uD638\uCD9C',data:{problemLabel,figIdx:figIdx+1,x:margin,y:yPosition,w:displayWidth,h:displayHeight,dataUrlLength:figure.dataUrl?figure.dataUrl.length:0},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'})}).catch(()=>{});\r\n          // #endregion\r\n          \r\n          // \uC774\uBBF8\uC9C0 \uC0BD\uC785\r\n          doc.addImage(figure.dataUrl, 'PNG', margin, yPosition, displayWidth, displayHeight);\r\n          \r\n          // #region agent log - DEBUG STEP 5: addImage \uD638\uCD9C \uC644\uB8CC\r\n          console.log(`[DEBUG STEP 5] addImage \uD638\uCD9C \uC644\uB8CC: \uBB38\uC81C ${problemLabel}, figure ${figIdx + 1}`);\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'pdfGenerator.js:addProblemsSectionToPDF:addImageComplete',message:'DEBUG STEP 5: addImage \uD638\uCD9C \uC644\uB8CC',data:{problemLabel,figIdx:figIdx+1},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'})}).catch(()=>{});\r\n          // #endregion\r\n          \r\n          yPosition += displayHeight + lineHeight * 0.5; // \uC774\uBBF8\uC9C0 \uC544\uB798 \uC5EC\uBC31\r\n        } catch (error) {\r\n          console.warn(`[PDF] figure ${figIdx + 1} \uC0BD\uC785 \uC2E4\uD328 (\uACC4\uC18D \uC9C4\uD589):`, error);\r\n          // #region agent log - DEBUG STEP 5: addImage \uC624\uB958\r\n          console.error(`[DEBUG STEP 5] addImage \uC624\uB958: \uBB38\uC81C ${problemLabel}, figure ${figIdx + 1}`, error);\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'pdfGenerator.js:addProblemsSectionToPDF:addImageError',message:'DEBUG STEP 5: addImage \uC624\uB958',data:{problemLabel,figIdx:figIdx+1,errorMessage:error.message,errorStack:error.stack},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'E'})}).catch(()=>{});\r\n          // #endregion\r\n          // \uC2E4\uD328\uD574\uB3C4 \uACC4\uC18D \uC9C4\uD589\r\n        }\r\n      }\r\n      \r\n      console.log(`[PDF] \uBB38\uC81C ${problem.problemNumber || problem.number || index + 1} figure \uC0BD\uC785 \uC644\uB8CC`);\r\n    }\r\n    // ============================================================================\r\n\r\n    // \uC120\uD0DD\uC9C0 (choices\uAC00 \uAC1D\uCCB4 {A: \"...\", B: \"...\", C: \"...\", D: \"...\"} \uD615\uD0DC)\r\n    if (problem.choices) {\r\n      // \uBC30\uC5F4 \uD615\uD0DC\uC778 \uACBD\uC6B0 (\uD638\uD658\uC131)\r\n      if (Array.isArray(problem.choices) && problem.choices.length > 0) {\r\n        problem.choices.forEach(choice => {\r\n          if (yPosition + lineHeight > pageHeight - 20) {\r\n            doc.addPage();\r\n            yPosition = margin;\r\n          }\r\n          const choiceText = `${choice.label}. ${choice.text}`;\r\n          const choiceLines = doc.splitTextToSize(choiceText, maxWidth - 10);\r\n          choiceLines.forEach(line => {\r\n            if (yPosition + lineHeight > pageHeight - 20) {\r\n              doc.addPage();\r\n              yPosition = margin;\r\n            }\r\n            doc.text(line, margin + 5, yPosition);\r\n            yPosition += lineHeight;\r\n          });\r\n        });\r\n      } \r\n      // \uAC1D\uCCB4 \uD615\uD0DC\uC778 \uACBD\uC6B0 (\uC0C8\uB85C\uC6B4 \uAD6C\uC870)\r\n      else if (typeof problem.choices === 'object' && !Array.isArray(problem.choices)) {\r\n        const choiceLabels = ['A', 'B', 'C', 'D'];\r\n        for (const label of choiceLabels) {\r\n          if (problem.choices[label]) {\r\n            if (yPosition + lineHeight > pageHeight - 20) {\r\n              doc.addPage();\r\n              yPosition = margin;\r\n            }\r\n            const choiceText = `${label}. ${problem.choices[label]}`;\r\n            const choiceLines = doc.splitTextToSize(choiceText, maxWidth - 10);\r\n            choiceLines.forEach(line => {\r\n              if (yPosition + lineHeight > pageHeight - 20) {\r\n                doc.addPage();\r\n                yPosition = margin;\r\n              }\r\n              doc.text(line, margin + 5, yPosition);\r\n              yPosition += lineHeight;\r\n            });\r\n          }\r\n        }\r\n      }\r\n    } else if (problem.isGridIn) {\r\n      // Grid-in \uBB38\uC81C\r\n      if (yPosition + lineHeight > pageHeight - 20) {\r\n        doc.addPage();\r\n        yPosition = margin;\r\n      }\r\n      doc.text('Grid-in Problem', margin + 5, yPosition);\r\n      yPosition += lineHeight;\r\n      if (problem.gridInAnswer) {\r\n        doc.text(`Answer: ${problem.gridInAnswer}`, margin + 5, yPosition);\r\n        yPosition += lineHeight;\r\n      }\r\n    }\r\n\r\n    yPosition += sectionSpacing;\r\n  });\r\n\r\n  return yPosition;\r\n}\r\n\r\n// \uC815\uB2F5\uC9C0\uC6A9: \uC139\uC158\uC744 PDF\uC5D0 \uCD94\uAC00 (\uC815\uB2F5 + \uD574\uC124\uB9CC)\r\nfunction addAnswersSectionToPDF(doc, sectionName, problems, startY, maxWidth, margin, pageHeight, lineHeight, sectionSpacing) {\r\n  let yPosition = startY;\r\n\r\n  // \uC139\uC158 \uC81C\uBAA9\r\n  doc.setFontSize(14);\r\n  doc.setFont(undefined, 'bold');\r\n  doc.setTextColor(0, 0, 0);\r\n  \r\n  // \uD398\uC774\uC9C0 \uCCB4\uD06C\r\n  if (yPosition + lineHeight * 3 > pageHeight - 20) {\r\n    doc.addPage();\r\n    yPosition = margin;\r\n  }\r\n\r\n  doc.text(`${sectionName} Section - Answers`, margin, yPosition);\r\n  yPosition += lineHeight * 1.5;\r\n\r\n  // \uAC01 \uBB38\uC81C\uC758 \uC815\uB2F5 \uCD94\uAC00\r\n  problems.forEach((problem) => {\r\n    // #region agent log - ANSWER DEBUG: \uC815\uB2F5 \uC139\uC158 \uBB38\uC81C \uC0C1\uD0DC \uAE30\uB85D\r\n    try {\r\n      const problemIndex = problems.indexOf(problem);\r\n      const problemLabelForLog =\r\n        (problem && typeof problem.problemNumber === 'number' && problem.problemNumber > 0)\r\n          ? problem.problemNumber\r\n          : (problem && typeof problem.number === 'number' && problem.number > 0)\r\n            ? problem.number\r\n            : problemIndex + 1;\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          location: 'pdfGenerator.js:addAnswersSectionToPDF:problemEntry',\r\n          message: 'Answers PDF problem entry',\r\n          data: {\r\n            sectionName,\r\n            problemIndex,\r\n            problemLabel: problemLabelForLog,\r\n            hasCorrectAnswer: !!(problem && problem.correctAnswer),\r\n            correctAnswer: problem && problem.correctAnswer ? String(problem.correctAnswer) : null,\r\n            hasAnswerField: !!(problem && problem.answer),\r\n            answerField: problem && problem.answer ? String(problem.answer) : null\r\n          },\r\n          timestamp: Date.now(),\r\n          runId: 'answers-bug',\r\n          hypothesisId: 'H1'\r\n        })\r\n      }).catch(() => {});\r\n    } catch {\r\n      // \uB85C\uAE45 \uC2E4\uD328\uB294 PDF \uC0DD\uC131\uC5D0 \uC601\uD5A5\uC744 \uC8FC\uC9C0 \uC54A\uB3C4\uB85D \uBB34\uC2DC\r\n    }\r\n    // #endregion\r\n    // \uD398\uC774\uC9C0 \uCCB4\uD06C\r\n    if (yPosition + lineHeight * 5 > pageHeight - 20) {\r\n      doc.addPage();\r\n      yPosition = margin;\r\n    }\r\n\r\n    // \uBB38\uC81C \uBC88\uD638 \uBC0F \uC815\uB2F5\r\n    doc.setFontSize(12);\r\n    doc.setFont(undefined, 'bold');\r\n    // ============================================================================\r\n    // \uBB38\uC81C \uBC88\uD638: problem.problemNumber\uB97C \uC6B0\uC120 \uC0AC\uC6A9 (\uC2E4\uC81C \uBB38\uC81C \uBC88\uD638)\r\n    // index + 1\uC740 \uD3F4\uBC31\uC73C\uB85C\uB9CC \uC0AC\uC6A9 (problemNumber\uAC00 \uC5C6\uC744 \uB54C\uB9CC)\r\n    // ============================================================================\r\n    const problemIndex = problems.indexOf(problem);\r\n    let problemLabel;\r\n    if (problem.problemNumber && problem.problemNumber > 0) {\r\n      // problemNumber\uAC00 \uC788\uC73C\uBA74 \uADF8\uAC83\uC744 \uC0AC\uC6A9 (\uC2E4\uC81C \uBB38\uC81C \uBC88\uD638)\r\n      problemLabel = problem.problemNumber;\r\n      console.log(`[PDF] \uC815\uB2F5\uC9C0 \uBB38\uC81C \uBC88\uD638 \uC0AC\uC6A9: ${problemLabel} (problem.problemNumber)`);\r\n    } else if (problem.number && problem.number > 0) {\r\n      // number\uAC00 \uC788\uC73C\uBA74 \uADF8\uAC83\uC744 \uC0AC\uC6A9\r\n      problemLabel = problem.number;\r\n      console.log(`[PDF] \uC815\uB2F5\uC9C0 \uBB38\uC81C \uBC88\uD638 \uC0AC\uC6A9: ${problemLabel} (problem.number)`);\r\n    } else {\r\n      // \uD3F4\uBC31: index + 1 (\uBB38\uC81C \uBC88\uD638\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC744 \uB54C\uB9CC)\r\n      problemLabel = problemIndex + 1;\r\n      console.warn(`[PDF] \uC815\uB2F5\uC9C0 \uBB38\uC81C \uBC88\uD638\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC5B4 index \uC0AC\uC6A9: ${problemLabel} (index: ${problemIndex})`);\r\n    }\r\n    doc.text(`Problem ${problemLabel}`, margin, yPosition);\r\n    yPosition += lineHeight;\r\n    // ============================================================================\r\n\r\n    doc.setFontSize(10);\r\n    doc.setFont(undefined, 'normal');\r\n    \r\n    // \uC815\uB2F5\uC9C0\uC5D0\uB294 \uBB38\uC81C \uD14D\uC2A4\uD2B8\uB97C \uD45C\uC2DC\uD558\uC9C0 \uC54A\uC74C (\uC815\uB2F5\uC120\uC9C0\uC640 \uD574\uC124\uB9CC)\r\n    \r\n    // \uC815\uB2F5 (correctAnswer \uC0AC\uC6A9) - \uC815\uB2F5\uC120\uC9C0 \uD14D\uC2A4\uD2B8 \uBCD1\uAE30\r\n    if (problem.correctAnswer) {\r\n      doc.setFont(undefined, 'bold');\r\n      // \uC815\uB2F5\uC120\uC9C0 \uD14D\uC2A4\uD2B8 \uAC00\uC838\uC624\uAE30\r\n      let answerText = '';\r\n      if (problem.choices && typeof problem.choices === 'object') {\r\n        // \uAC1D\uCCB4 \uD615\uD0DC\uC778 \uACBD\uC6B0\r\n        if (problem.choices[problem.correctAnswer]) {\r\n          answerText = problem.choices[problem.correctAnswer];\r\n        }\r\n      } else if (Array.isArray(problem.choices)) {\r\n        // \uBC30\uC5F4 \uD615\uD0DC\uC778 \uACBD\uC6B0 (\uD638\uD658\uC131)\r\n        const choice = problem.choices.find(c => c.label === problem.correctAnswer);\r\n        if (choice) {\r\n          answerText = choice.text;\r\n        }\r\n      }\r\n      \r\n      // \uC815\uB2F5\uC120\uC9C0 \uD14D\uC2A4\uD2B8\uAC00 \uC788\uC73C\uBA74 \uBCD1\uAE30\r\n      if (answerText && answerText.trim().length > 0) {\r\n        const answerDisplay = `Answer: ${problem.correctAnswer} (${answerText.trim()})`;\r\n        const answerLines = doc.splitTextToSize(answerDisplay, maxWidth);\r\n        answerLines.forEach(line => {\r\n          if (yPosition + lineHeight > pageHeight - 20) {\r\n            doc.addPage();\r\n            yPosition = margin;\r\n            doc.setFont(undefined, 'bold');\r\n          }\r\n          doc.text(line, margin, yPosition);\r\n          yPosition += lineHeight;\r\n        });\r\n      } else {\r\n        // \uC815\uB2F5\uC120\uC9C0 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC73C\uBA74 \uAE30\uC874 \uD615\uC2DD\r\n        doc.text(`Answer: ${problem.correctAnswer}`, margin, yPosition);\r\n        yPosition += lineHeight;\r\n      }\r\n      doc.setFont(undefined, 'normal');\r\n    } else if (problem.answer) {\r\n      // \uD638\uD658\uC131: answer\uB3C4 \uC9C0\uC6D0\r\n      doc.setFont(undefined, 'bold');\r\n      // \uC815\uB2F5\uC120\uC9C0 \uD14D\uC2A4\uD2B8 \uAC00\uC838\uC624\uAE30\r\n      let answerText = '';\r\n      if (problem.choices && typeof problem.choices === 'object') {\r\n        if (problem.choices[problem.answer]) {\r\n          answerText = problem.choices[problem.answer];\r\n        }\r\n      } else if (Array.isArray(problem.choices)) {\r\n        const choice = problem.choices.find(c => c.label === problem.answer);\r\n        if (choice) {\r\n          answerText = choice.text;\r\n        }\r\n      }\r\n      \r\n      if (answerText && answerText.trim().length > 0) {\r\n        const answerDisplay = `Answer: ${problem.answer} (${answerText.trim()})`;\r\n        const answerLines = doc.splitTextToSize(answerDisplay, maxWidth);\r\n        answerLines.forEach(line => {\r\n          if (yPosition + lineHeight > pageHeight - 20) {\r\n            doc.addPage();\r\n            yPosition = margin;\r\n            doc.setFont(undefined, 'bold');\r\n          }\r\n          doc.text(line, margin, yPosition);\r\n          yPosition += lineHeight;\r\n        });\r\n      } else {\r\n        doc.text(`Answer: ${problem.answer}`, margin, yPosition);\r\n        yPosition += lineHeight;\r\n      }\r\n      doc.setFont(undefined, 'normal');\r\n    } else if (problem.isGridIn && problem.gridInAnswer) {\r\n      doc.setFont(undefined, 'bold');\r\n      doc.text(`Answer: ${problem.gridInAnswer}`, margin, yPosition);\r\n      doc.setFont(undefined, 'normal');\r\n      yPosition += lineHeight;\r\n    } else {\r\n      // \uC815\uB2F5\uC774 \uC5C6\uC5B4\uB3C4 placeholder \uCD9C\uB825\r\n      doc.setFont(undefined, 'italic');\r\n      doc.setTextColor(128, 128, 128);\r\n      doc.text(`Answer: [NOT_EXTRACTED]`, margin, yPosition);\r\n      doc.setTextColor(0, 0, 0);\r\n      yPosition += lineHeight;\r\n    }\r\n\r\n    // \uD574\uC124\r\n    yPosition += lineHeight * 0.5;\r\n    doc.setFontSize(9);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.setTextColor(80, 80, 80);\r\n    if (problem.explanation && problem.explanation.trim().length > 0) {\r\n      const explanationText = `Explanation: ${problem.explanation}`;\r\n      const explanationLines = doc.splitTextToSize(explanationText, maxWidth);\r\n      explanationLines.forEach(line => {\r\n        if (yPosition + lineHeight > pageHeight - 20) {\r\n          doc.addPage();\r\n          yPosition = margin;\r\n          doc.setTextColor(80, 80, 80);\r\n          doc.setFont('helvetica', 'normal');\r\n        }\r\n        doc.text(line, margin, yPosition);\r\n        yPosition += lineHeight;\r\n      });\r\n    } else {\r\n      doc.setFont('helvetica', 'italic');\r\n      doc.setTextColor(128, 128, 128);\r\n      doc.text('Explanation: [NOT_EXTRACTED]', margin, yPosition);\r\n      yPosition += lineHeight;\r\n    }\r\n    doc.setTextColor(0, 0, 0);\r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'normal');\r\n\r\n    yPosition += sectionSpacing;\r\n  });\r\n\r\n  return yPosition;\r\n}\r\n\r\n// \uBB38\uC81C\uC9C0 PDF \uC0DD\uC131 (\uC9C0\uBB38 + \uBB38\uC81C + \uC120\uD0DD\uC9C0, \uC815\uB2F5/\uD574\uC124 \uC5C6\uC74C)\r\nfunction generateProblemsPDF(data) {\r\n  try {\r\n    const jsPDF = getJSPDF();\r\n  \r\n  const doc = new jsPDF({\r\n    orientation: 'portrait',\r\n    unit: 'mm',\r\n    format: 'a4'\r\n  });\r\n\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  const margin = 20;\r\n  const maxWidth = pageWidth - 2 * margin;\r\n  let yPosition = margin;\r\n  const lineHeight = 7;\r\n  const sectionSpacing = 10;\r\n\r\n  // \uD5E4\uB354\r\n  doc.setFontSize(16);\r\n  doc.setFont(undefined, 'bold');\r\n  doc.text('SAT Practice Problems', margin, yPosition);\r\n  yPosition += lineHeight * 1.5;\r\n\r\n  doc.setFontSize(10);\r\n  doc.setFont(undefined, 'normal');\r\n  const dateStr = new Date(data.timestamp).toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  });\r\n  doc.text(`Generated: ${dateStr}`, margin, yPosition);\r\n  yPosition += lineHeight * 2;\r\n\r\n  // Reading \uC139\uC158 (\uBB38\uC81C\uC9C0\uB9CC)\r\n  if (data.reading && data.reading.length > 0) {\r\n    yPosition = addProblemsSectionToPDF(doc, 'Reading', data.reading, yPosition, maxWidth, margin, pageHeight, lineHeight, sectionSpacing);\r\n  }\r\n\r\n  // Math \uC139\uC158 (\uBB38\uC81C\uC9C0\uB9CC)\r\n  if (data.math && data.math.length > 0) {\r\n    yPosition = addProblemsSectionToPDF(doc, 'Math', data.math, yPosition, maxWidth, margin, pageHeight, lineHeight, sectionSpacing);\r\n  }\r\n\r\n  // \uD478\uD130\r\n  const footerY = pageHeight - 15;\r\n  doc.setFontSize(8);\r\n  doc.setTextColor(128, 128, 128);\r\n  doc.text('Generated by Our Service (Powered by Gemini)', pageWidth / 2, footerY, {\r\n    align: 'center'\r\n  });\r\n\r\n  return doc;\r\n  } catch (error) {\r\n    console.error('[SAT PDF Exporter] \uBB38\uC81C\uC9C0 PDF \uC0DD\uC131 \uC624\uB958:', error);\r\n    if (error.message && error.message.includes('Extension context invalidated')) {\r\n      throw new Error('Extension context invalidated during PDF generation');\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n\r\n// \uC815\uB2F5\uC9C0 PDF \uC0DD\uC131 (\uBB38\uC81C \uBC88\uD638\uBCC4 \uC815\uB2F5 + \uD574\uC124)\r\nfunction generateAnswersPDF(data) {\r\n  try {\r\n    const jsPDF = getJSPDF();\r\n  \r\n  const doc = new jsPDF({\r\n    orientation: 'portrait',\r\n    unit: 'mm',\r\n    format: 'a4'\r\n  });\r\n\r\n  const pageWidth = doc.internal.pageSize.getWidth();\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  const margin = 20;\r\n  const maxWidth = pageWidth - 2 * margin;\r\n  let yPosition = margin;\r\n  const lineHeight = 7;\r\n  const sectionSpacing = 10;\r\n\r\n  // \uD5E4\uB354\r\n  doc.setFontSize(16);\r\n  doc.setFont(undefined, 'bold');\r\n  doc.text('SAT Practice Answers', margin, yPosition);\r\n  yPosition += lineHeight * 1.5;\r\n\r\n  doc.setFontSize(10);\r\n  doc.setFont(undefined, 'normal');\r\n  const dateStr = new Date(data.timestamp).toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  });\r\n  doc.text(`Generated: ${dateStr}`, margin, yPosition);\r\n  yPosition += lineHeight * 2;\r\n\r\n  // Reading \uC139\uC158 (\uC815\uB2F5\uB9CC)\r\n  if (data.reading && data.reading.length > 0) {\r\n    yPosition = addAnswersSectionToPDF(doc, 'Reading', data.reading, yPosition, maxWidth, margin, pageHeight, lineHeight, sectionSpacing);\r\n  }\r\n\r\n  // Math \uC139\uC158 (\uC815\uB2F5\uB9CC)\r\n  if (data.math && data.math.length > 0) {\r\n    yPosition = addAnswersSectionToPDF(doc, 'Math', data.math, yPosition, maxWidth, margin, pageHeight, lineHeight, sectionSpacing);\r\n  }\r\n\r\n  // \uD478\uD130\r\n  const footerY = pageHeight - 15;\r\n  doc.setFontSize(8);\r\n  doc.setTextColor(128, 128, 128);\r\n  doc.text('Generated by Our Service (Powered by Gemini)', pageWidth / 2, footerY, {\r\n    align: 'center'\r\n  });\r\n\r\n  return doc;\r\n  } catch (error) {\r\n    console.error('[SAT PDF Exporter] \uC815\uB2F5\uC9C0 PDF \uC0DD\uC131 \uC624\uB958:', error);\r\n    if (error.message && error.message.includes('Extension context invalidated')) {\r\n      throw new Error('Extension context invalidated during PDF generation');\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * PDFGenerator \uD074\uB798\uC2A4\r\n * PDF \uC0DD\uC131 \uBC0F \uB2E4\uC6B4\uB85C\uB4DC \uB85C\uC9C1\uC744 \uB2F4\uB2F9\r\n */\r\nexport class PDFGenerator {\r\n  /**\r\n   * \uBB38\uC81C\uC9C0 PDF \uC0DD\uC131\r\n   * @param {Object} data - \uBB38\uC81C \uB370\uC774\uD130\r\n   * @returns {Object} jsPDF \uBB38\uC11C \uAC1D\uCCB4\r\n   */\r\n  generateProblemsPDF(data) {\r\n    // \uAE30\uC874 \uD568\uC218 \uC7AC\uC0AC\uC6A9\r\n    return generateProblemsPDF(data);\r\n  }\r\n\r\n  /**\r\n   * \uC815\uB2F5\uC9C0 PDF \uC0DD\uC131\r\n   * @param {Object} data - \uBB38\uC81C \uB370\uC774\uD130\r\n   * @returns {Object} jsPDF \uBB38\uC11C \uAC1D\uCCB4\r\n   */\r\n  generateAnswersPDF(data) {\r\n    // \uAE30\uC874 \uD568\uC218 \uC7AC\uC0AC\uC6A9\r\n    return generateAnswersPDF(data);\r\n  }\r\n\r\n  /**\r\n   * PDF \uB2E4\uC6B4\uB85C\uB4DC\r\n   * @param {Object} problemDoc - \uBB38\uC81C\uC9C0 PDF \uBB38\uC11C\r\n   * @param {Object} answerDoc - \uC815\uB2F5\uC9C0 PDF \uBB38\uC11C\r\n   * @returns {Promise<void>}\r\n   */\r\n  async downloadPDFs(problemDoc, answerDoc, options = {}) {\r\n    try {\r\n      const dateStr = new Date().toISOString().split('T')[0];\r\n      const copyIndex = Number.isInteger(options.copyIndex) ? options.copyIndex : 1;\r\n      const totalCopies = Number.isInteger(options.totalCopies) ? options.totalCopies : 1;\r\n      const copySuffix = totalCopies > 1 ? `_Set${String(copyIndex).padStart(2, '0')}` : '';\r\n      const problemFileName = `SAT_Problems_${dateStr}${copySuffix}.pdf`;\r\n      const answerFileName = `SAT_Answers_${dateStr}${copySuffix}.pdf`;\r\n\r\n      console.log(`[PDFGenerator] \uBB38\uC81C\uC9C0 PDF \uC800\uC7A5: ${problemFileName}`);\r\n      problemDoc.save(problemFileName);\r\n      \r\n      await new Promise(resolve => setTimeout(resolve, CONFIG.timeouts.pdfDownloadDelay));\r\n      \r\n      console.log(`[PDFGenerator] \uC815\uB2F5\uC9C0 PDF \uC800\uC7A5: ${answerFileName}`);\r\n      answerDoc.save(answerFileName);\r\n    } catch (error) {\r\n      console.error('[PDFGenerator] PDF \uB2E4\uC6B4\uB85C\uB4DC \uC624\uB958:', error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n", "// Extracted frame election and messaging functions from content.js\r\n// NOTE: Logic must remain identical to original implementation.\r\n\r\nimport { isQuestionScreen, getProgressState } from '../dom/extract.js';\r\n\r\n/**\r\n * \uBB38\uC81C UI\uAC00 \uC788\uB294 \uD504\uB808\uC784\uC778\uC9C0 \uD310\uC815 (\uB110\uB110\uD558\uAC8C \uC7A1\uAE30)\r\n * @returns {boolean} \uBB38\uC81C UI \uC5EC\uBD80\r\n */\r\nexport function looksLikeSatQuestionUI() {\r\n  try {\r\n    const text = (document.body?.innerText || document.body?.textContent || '').slice(0, 5000).toLowerCase();\r\n    \r\n    // 1. \uC9C4\uD589\uD45C\uC2DC (1/27, Question 1 \uB4F1)\r\n    const hasProgress = /\\b\\d+\\s*\\/\\s*\\d+\\b/.test(text) || /question\\s*\\d+/i.test(text);\r\n    \r\n    // 2. Next/Submit \uBC84\uD2BC \uC874\uC7AC\r\n    const buttons = Array.from(document.querySelectorAll('button, [role=\"button\"]'));\r\n    const hasNextish = buttons.some(b => {\r\n      const btnText = ((b.innerText || '') + ' ' + (b.getAttribute('aria-label') || '')).toLowerCase();\r\n      return /next|\uB2E4\uC74C|continue|\uACC4\uC18D|submit|\uC81C\uCD9C/i.test(btnText);\r\n    });\r\n    \r\n    // 3. \uC120\uD0DD\uC9C0 \uD6C4\uBCF4 2\uAC1C \uC774\uC0C1 (A/B/C/D)\r\n    const hasChoiceish = buttons.filter(b => {\r\n      const t = ((b.innerText || '') + ' ' + (b.getAttribute('aria-label') || '')).trim();\r\n      return /^[A-D]\\b/.test(t) || /\\bA\\b|\\bB\\b|\\bC\\b|\\bD\\b/.test(t) || /choice\\s*[A-D]/i.test(t);\r\n    }).length >= 2;\r\n    \r\n    const result = hasProgress && (hasNextish || hasChoiceish);\r\n    \r\n    if (result) {\r\n      console.log('[SAT FRAME] \uBB38\uC81C UI \uAC10\uC9C0\uB428:', {\r\n        href: window.location.href,\r\n        isTop: window === window.top,\r\n        bodyTextLen: text.length,\r\n        buttons: buttons.length,\r\n        hasProgress,\r\n        hasNextish,\r\n        hasChoiceish\r\n      });\r\n    }\r\n    \r\n    return result;\r\n  } catch (e) {\r\n    console.warn('[SAT FRAME] looksLikeSatQuestionUI \uC624\uB958:', e);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Worker \uD504\uB808\uC784 \uCC3E\uAE30 (\uBAA8\uB4E0 \uD504\uB808\uC784\uC5D0 probe \uBE0C\uB85C\uB4DC\uCE90\uC2A4\uD2B8)\r\n * @returns {Promise<Object|null>} worker \uD504\uB808\uC784 \uC815\uBCF4 \uB610\uB294 null\r\n */\r\nexport async function findWorkerFrame() {\r\n  return new Promise((resolve) => {\r\n    const probeId = `probe_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n    let done = false;\r\n    \r\n    const timeout = setTimeout(() => {\r\n      if (!done) {\r\n        console.warn('[SAT FRAME] Worker \uD504\uB808\uC784 \uCC3E\uAE30 \uD0C0\uC784\uC544\uC6C3 (2.5\uCD08)');\r\n        window.removeEventListener('message', onMsg);\r\n        resolve(null);\r\n      }\r\n    }, 2500);\r\n    \r\n    function onMsg(ev) {\r\n      if (ev?.data?.type === 'SAT_PROBE_RESULT' && ev.data.probeId === probeId) {\r\n        if (!done) {\r\n          done = true;\r\n          clearTimeout(timeout);\r\n          window.removeEventListener('message', onMsg);\r\n          console.log('[SAT WORKER] \uC120\uCD9C\uB428:', ev.data);\r\n          resolve(ev.data);\r\n        }\r\n      }\r\n    }\r\n    \r\n    window.addEventListener('message', onMsg);\r\n    \r\n    // \uAC19\uC740 origin \uD504\uB808\uC784\uC5D0\uB9CC probe \uC804\uC1A1 (\uB2E4\uB978 origin\uC5D0 \uBCF4\uB0B4\uBA74 \uAD6C\uAE00 \uAC1C\uC778\uC815\uBCF4/\uACC4\uC815 \uC120\uD0DD \uCC3D \uB4F1\uC774 \uBC18\uC751\uD560 \uC218 \uC788\uC74C)\r\n    const targetOrigin = location.origin;\r\n    let sentCount = 0;\r\n    for (let i = 0; i < window.frames.length; i++) {\r\n      try {\r\n        const frame = window.frames[i];\r\n        if (frame.location && frame.location.origin === targetOrigin) {\r\n          frame.postMessage({ type: 'SAT_PROBE', probeId }, targetOrigin);\r\n          sentCount++;\r\n        }\r\n      } catch (e) {\r\n        // cross-origin frame \uC811\uADFC \uBD88\uAC00 - \uC2A4\uD0B5\r\n      }\r\n    }\r\n    // same-origin frame\uC774 \uC5C6\uC73C\uBA74 \uD604\uC7AC window\uC5D0 broadcast (fallback)\r\n    if (sentCount === 0) {\r\n      window.postMessage({ type: 'SAT_PROBE', probeId }, targetOrigin);\r\n    }\r\n    console.log('[FRAME] probe sent to frames', {\r\n      frameCount: window.frames.length,\r\n      sentCount,\r\n      probeId: probeId\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * \uD504\uB808\uC784\uBCC4 \uBA54\uC2DC\uC9C0 \uB9AC\uC2A4\uB108 (\uAC01 \uD504\uB808\uC784\uC5D0\uC11C \uC2E4\uD589)\r\n * NOTE: This function uses SATApp, SATNavigator, and other classes that are still in content.js\r\n * It will be fully integrated after all classes are moved to their respective modules\r\n */\r\nexport function setupFrameMessageListener() {\r\n  console.log('[FRAME] initFrameMessaging/setupFrameMessageListener called', {\r\n    top: window === window.top,\r\n    href: window.location.href,\r\n    frameCount: window.frames.length\r\n  });\r\n  \r\n  window.addEventListener('message', async (ev) => {\r\n    const msg = ev?.data;\r\n    if (!msg || typeof msg !== 'object') return;\r\n    \r\n    // SAT_PROBE \uC218\uC2E0: \uBB38\uC81C UI\uAC00 \uC788\uB294\uC9C0 \uD655\uC778\r\n    // \uC8FC\uC758: ev.source\uB85C\uB9CC \uC751\uB2F5 \uC804\uC1A1. '*' \uC0AC\uC6A9 \uC2DC \uAD6C\uAE00 \uAC1C\uC778\uC815\uBCF4/\uACC4\uC815 \uC120\uD0DD iframe\uC774 \uBA54\uC2DC\uC9C0\uB97C \uBC1B\uC544 \uD0ED\uC774 \uC5F4\uB9BC\r\n    if (msg.type === 'SAT_PROBE') {\r\n      console.log(`[FRAME] probe received top? ${window === window.top} href: ${window.location.href}`);\r\n      const ok = looksLikeSatQuestionUI();\r\n      console.log(`[FRAME] probe result: ${ok ? 'looks like SAT UI' : 'not SAT UI'}`);\r\n      \r\n      if (ok && ev.source) {\r\n        const bodyTextLen = (document.body?.innerText || '').length;\r\n        const buttons = document.querySelectorAll('button, [role=\"button\"]').length;\r\n        const targetOrigin = ev.origin || location.origin;\r\n        try {\r\n          ev.source.postMessage({\r\n            type: 'SAT_PROBE_RESULT',\r\n            probeId: msg.probeId,\r\n            ok: true,\r\n            href: window.location.href,\r\n            title: document.title,\r\n            isTop: window === window.top,\r\n            bodyTextLen: bodyTextLen,\r\n            buttons: buttons\r\n          }, targetOrigin);\r\n          console.log(`[FRAME] probe result sent (ok=true, bodyTextLen=${bodyTextLen}, buttons=${buttons})`);\r\n        } catch (e) {\r\n          console.warn('[FRAME] probe result postMessage \uC2E4\uD328 (ev.source\uB85C \uC804\uC1A1):', e);\r\n        }\r\n      } else if (!ok) {\r\n        console.log(`[FRAME] probe result: not SAT UI, skipping response`);\r\n      }\r\n      return;\r\n    }\r\n    \r\n    // SAT_START \uC218\uC2E0: worker \uD504\uB808\uC784\uC5D0\uC11C\uB9CC \uC791\uC5C5 \uC2DC\uC791\r\n    // \uC8FC\uC758: \uACB0\uACFC\uB294 ev.source\uB85C\uB9CC \uC804\uC1A1. '*' \uC0AC\uC6A9 \uC2DC \uAD6C\uAE00 \uAC1C\uC778\uC815\uBCF4/\uACC4\uC815 \uC120\uD0DD iframe\uC774 \uBA54\uC2DC\uC9C0\uB97C \uBC1B\uC544 \uD0ED\uC774 \uC5F4\uB9BC\r\n    if (msg.type === 'SAT_START') {\r\n      console.log(`[FRAME] SAT_START received top? ${window === window.top} href: ${window.location.href}`);\r\n      if (!looksLikeSatQuestionUI()) {\r\n        console.log('[FRAME] SAT_START ignored: not SAT UI');\r\n        return;\r\n      }\r\n      \r\n      if (!ev.source) {\r\n        console.warn('[FRAME] SAT_START ev.source \uC5C6\uC74C - \uACB0\uACFC \uC804\uC1A1 \uBD88\uAC00');\r\n        return;\r\n      }\r\n      \r\n      const replyTarget = ev.source;\r\n      const replyOrigin = ev.origin || location.origin;\r\n      \r\n      console.log('[FRAME] SAT_START received (worker frame)');\r\n      \r\n      // worker \uD504\uB808\uC784\uC5D0\uC11C\uB9CC \uC791\uC5C5 \uC2E4\uD589\r\n      window.__SAT_WORKER_READY = true;\r\n      window.__SAT_IS_WORKER = true;\r\n      \r\n      // worker \uD504\uB808\uC784\uC5D0\uC11C \uC2E4\uC81C \uC218\uC9D1 \uC2DC\uC791\r\n      // NOTE: SATApp, SATNavigator, isQuestionScreen, getProgressState are still in content.js\r\n      // This will be fully integrated after all classes are moved\r\n      (async () => {\r\n        try {\r\n          console.log('[SAT WORKER] ===== Worker \uD504\uB808\uC784\uC5D0\uC11C \uC218\uC9D1 \uC2DC\uC791 =====');\r\n          \r\n          // SATApp \uC778\uC2A4\uD134\uC2A4 \uC0DD\uC131 (worker frame\uC5D0\uC11C)\r\n          // NOTE: SATApp is still in content.js, will be imported later\r\n          if (!window.__SAT_APP) {\r\n            if (typeof SATApp !== 'undefined') {\r\n              window.__SAT_APP = new SATApp();\r\n            } else {\r\n              console.error('[SAT WORKER] SATApp \uD074\uB798\uC2A4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n              return;\r\n            }\r\n          }\r\n          \r\n          // \uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4 (\uC774\uBBF8 \uBB38\uC81C \uD654\uBA74\uC774\uBA74 \uC2A4\uD0B5)\r\n          if (!isQuestionScreen() && getProgressState() === null) {\r\n            console.log('[SAT WORKER] \uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4 \uC2DC\uC791');\r\n            await window.__SAT_APP.navigator.handleInitialNavigation();\r\n          }\r\n          \r\n          // \uBB38\uC81C \uC218\uC9D1\r\n          console.log('[SAT WORKER] \uBB38\uC81C \uC218\uC9D1 \uC2DC\uC791');\r\n          const allData = await window.__SAT_APP.scraper.collectAllProblems();\r\n          \r\n          console.log('[SAT WORKER] \uBB38\uC81C \uC218\uC9D1 \uC644\uB8CC:', {\r\n            reading: allData.reading.length,\r\n            math: allData.math.length\r\n          });\r\n          \r\n          // \uACB0\uACFC\uB97C \uC694\uCCAD\uC790(top frame)\uC5D0\uB9CC \uC804\uC1A1 (\uB2E4\uB978 origin iframe\uC5D0 \uC804\uB2EC\uB418\uC9C0 \uC54A\uB3C4\uB85D)\r\n          try {\r\n            replyTarget.postMessage({\r\n              type: 'SAT_COLLECTION_COMPLETE',\r\n              data: allData,\r\n              href: window.location.href\r\n            }, replyOrigin);\r\n          } catch (e) {\r\n            console.warn('[SAT WORKER] SAT_COLLECTION_COMPLETE postMessage \uC2E4\uD328:', e);\r\n          }\r\n          \r\n        } catch (error) {\r\n          console.error('[SAT WORKER] \uC218\uC9D1 \uC624\uB958:', error);\r\n          try {\r\n            replyTarget.postMessage({\r\n              type: 'SAT_COLLECTION_ERROR',\r\n              error: error.message,\r\n              href: window.location.href\r\n            }, replyOrigin);\r\n          } catch (e) {\r\n            console.warn('[SAT WORKER] SAT_COLLECTION_ERROR postMessage \uC2E4\uD328:', e);\r\n          }\r\n        }\r\n      })();\r\n      \r\n      return;\r\n    }\r\n  });\r\n  \r\n  // \uD504\uB808\uC784 \uB85C\uB4DC \uC2DC \uC815\uBCF4 \uCD9C\uB825\r\n  const bodyTextLen = (document.body?.innerText || document.body?.textContent || '').length;\r\n  const buttons = document.querySelectorAll('button, [role=\"button\"]').length;\r\n  console.log('[SAT FRAME] \uD504\uB808\uC784 \uB85C\uB4DC:', {\r\n    href: window.location.href,\r\n    top: window === window.top,\r\n    bodyTextLen: bodyTextLen,\r\n    buttons: buttons\r\n  });\r\n}\r\n\r\n", "// \uC138\uD2B8 \uC218 \uC785\uB825 \uBAA8\uB2EC UI\r\n// window.prompt()\uAC00 iframe\uC5D0\uC11C \uB3D9\uC791\uD558\uC9C0 \uC54A\uC744 \uC218 \uC788\uC5B4 \uD398\uC774\uC9C0 \uB0B4 \uBAA8\uB2EC\uB85C \uB300\uCCB4\r\n\r\nimport { showToast } from './wait.js';\r\n\r\n/**\r\n * PDF \uC138\uD2B8 \uC218 \uC785\uB825 \uBAA8\uB2EC \uD45C\uC2DC\r\n * @returns {Promise<number|null>} \uD655\uC778 \uC2DC 1 \uC774\uC0C1 \uC815\uC218, \uCDE8\uC18C \uC2DC null\r\n */\r\nexport function showSetCountModal() {\r\n  return new Promise((resolve) => {\r\n    const overlay = document.createElement('div');\r\n    overlay.className = 'gemini-sat-modal-overlay';\r\n    overlay.id = 'gemini-sat-set-count-modal';\r\n\r\n    const box = document.createElement('div');\r\n    box.className = 'gemini-sat-modal-box';\r\n\r\n    const title = document.createElement('h3');\r\n    title.className = 'gemini-sat-modal-title';\r\n    title.textContent = 'PDF \uC138\uD2B8 \uC218 \uC785\uB825';\r\n\r\n    const desc = document.createElement('p');\r\n    desc.className = 'gemini-sat-modal-desc';\r\n    desc.textContent = '\uBB38\uC81C\uC9C0/\uD574\uC124\uC9C0 \uC138\uD2B8\uB97C \uBA87 \uAC1C \uC0DD\uC131\uD560\uAE4C\uC694? (1 \uC774\uC0C1\uC758 \uC815\uC218)';\r\n\r\n    const input = document.createElement('input');\r\n    input.type = 'number';\r\n    input.className = 'gemini-sat-modal-input';\r\n    input.min = '1';\r\n    input.max = '99';\r\n    input.value = '1';\r\n    input.autofocus = true;\r\n\r\n    const btnGroup = document.createElement('div');\r\n    btnGroup.className = 'gemini-sat-modal-btns';\r\n\r\n    const confirmBtn = document.createElement('button');\r\n    confirmBtn.type = 'button';\r\n    confirmBtn.className = 'gemini-sat-modal-btn gemini-sat-modal-btn-confirm';\r\n    confirmBtn.textContent = '\uD655\uC778';\r\n\r\n    const cancelBtn = document.createElement('button');\r\n    cancelBtn.type = 'button';\r\n    cancelBtn.className = 'gemini-sat-modal-btn gemini-sat-modal-btn-cancel';\r\n    cancelBtn.textContent = '\uCDE8\uC18C';\r\n\r\n    const cleanup = () => {\r\n      overlay.remove();\r\n      document.removeEventListener('keydown', onEsc);\r\n    };\r\n\r\n    const resolveAndCleanup = (value) => {\r\n      cleanup();\r\n      resolve(value);\r\n    };\r\n\r\n    const onEsc = (ev) => {\r\n      if (ev.key === 'Escape') {\r\n        resolveAndCleanup(null);\r\n      }\r\n    };\r\n\r\n    const handleConfirm = () => {\r\n      const raw = input.value?.trim() ?? '';\r\n      const count = parseInt(raw, 10);\r\n\r\n      if (!Number.isInteger(count) || count < 1) {\r\n        showToast('\uC0DD\uC131 \uAC1C\uC218\uB294 1 \uC774\uC0C1\uC758 \uC815\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4.', 'error');\r\n        input.focus();\r\n        input.select();\r\n        return;\r\n      }\r\n\r\n      if (count > 99) {\r\n        showToast('\uCD5C\uB300 99\uC138\uD2B8\uAE4C\uC9C0 \uC785\uB825\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.', 'error');\r\n        input.focus();\r\n        input.select();\r\n        return;\r\n      }\r\n\r\n      resolveAndCleanup(count);\r\n    };\r\n\r\n    confirmBtn.addEventListener('click', handleConfirm);\r\n\r\n    cancelBtn.addEventListener('click', () => {\r\n      resolveAndCleanup(null);\r\n    });\r\n\r\n    overlay.addEventListener('click', (ev) => {\r\n      if (ev.target === overlay) {\r\n        resolveAndCleanup(null);\r\n      }\r\n    });\r\n\r\n    input.addEventListener('keydown', (ev) => {\r\n      if (ev.key === 'Enter') {\r\n        ev.preventDefault();\r\n        handleConfirm();\r\n      }\r\n    });\r\n\r\n    btnGroup.appendChild(confirmBtn);\r\n    btnGroup.appendChild(cancelBtn);\r\n\r\n    box.appendChild(title);\r\n    box.appendChild(desc);\r\n    box.appendChild(input);\r\n    box.appendChild(btnGroup);\r\n\r\n    overlay.appendChild(box);\r\n    document.body.appendChild(overlay);\r\n\r\n    document.addEventListener('keydown', onEsc);\r\n\r\n    requestAnimationFrame(() => {\r\n      input.focus();\r\n      input.select();\r\n    });\r\n  });\r\n}\r\n", "// Gemini \uCC44\uD305 \uC790\uB3D9\uD654 \uBAA8\uB4C8\r\n// Gemini \uCC44\uD305 \uD398\uC774\uC9C0\uC5D0\uC11C \"I want to take a sat test\"\uB97C \uC785\uB825\uD558\uACE0 SAT UI \uC9C4\uC785\uAE4C\uC9C0 \uB2F4\uB2F9\r\n\r\nimport { CONFIG } from '../config/constants.js';\r\nimport { deepQuerySelectorAll, isElementVisible } from '../dom/deepQuery.js';\r\nimport { waitForElement, waitForCondition, waitForContentLoad, safeClick, showToast } from '../dom/wait.js';\r\nimport { looksLikeSatQuestionUI } from '../frame/workerFrame.js';\r\nimport { isQuestionScreen, getProgressState } from '../dom/extract.js';\r\n\r\n/**\r\n * Gemini \uCC44\uD305 \uD398\uC774\uC9C0\uC778\uC9C0 \uD655\uC778\r\n * @returns {boolean}\r\n */\r\nexport function isGeminiChatPage() {\r\n  try {\r\n    // URL \uD328\uD134 \uD655\uC778\r\n    if (!window.location.href.includes('gemini.google.com')) {\r\n      return false;\r\n    }\r\n    \r\n    // SAT UI \uC694\uC18C\uAC00 \uC774\uBBF8 \uC788\uC73C\uBA74 \uCC44\uD305 \uD398\uC774\uC9C0\uAC00 \uC544\uB2D8\r\n    if (looksLikeSatQuestionUI() || isQuestionScreen() || getProgressState() !== null) {\r\n      return false;\r\n    }\r\n    \r\n    // \uCC44\uD305 \uC785\uB825\uCC3D\uC774 \uC788\uB294\uC9C0 \uD655\uC778 (\uB290\uC2A8\uD55C \uCCB4\uD06C)\r\n    const allInputs = deepQuerySelectorAll('textarea, input[type=\"text\"], [contenteditable=\"true\"]');\r\n    const inputsWithAttrs = allInputs.map(el => {\r\n      const placeholder = (el.getAttribute('placeholder') || '').toLowerCase();\r\n      const ariaLabel = (el.getAttribute('aria-label') || '').toLowerCase();\r\n      const title = (el.getAttribute('title') || '').toLowerCase();\r\n      const text = (el.innerText || '').slice(0, 80).toLowerCase();\r\n      return { visible: isElementVisible(el), placeholder, ariaLabel, title, text };\r\n    });\r\n    const hasInput = allInputs.some(el => {\r\n      if (!isElementVisible(el)) return false;\r\n      const placeholder = (el.getAttribute('placeholder') || '').toLowerCase();\r\n      const ariaLabel = (el.getAttribute('aria-label') || '').toLowerCase();\r\n      const title = (el.getAttribute('title') || '').toLowerCase();\r\n      const text = (el.innerText || '').slice(0, 80).toLowerCase();\r\n      return placeholder.includes('message') || placeholder.includes('prompt') || placeholder.includes('chat') || placeholder.includes('\uC785\uB825') ||\r\n             placeholder.includes('\uBB3C\uC5B4\uBCF4\uAE30') || placeholder.includes('ask') ||\r\n             ariaLabel.includes('message') || ariaLabel.includes('prompt') || ariaLabel.includes('chat') || ariaLabel.includes('\uC785\uB825') ||\r\n             ariaLabel.includes('\uD504\uB86C\uD504\uD2B8') || ariaLabel.includes('\uBB3C\uC5B4\uBCF4\uAE30') || ariaLabel.includes('ask') ||\r\n             title.includes('message') || title.includes('prompt') || title.includes('chat') || title.includes('\uD504\uB86C\uD504\uD2B8') ||\r\n             text.includes('\uBB3C\uC5B4\uBCF4\uAE30') || text.includes('ask');\r\n    });\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'geminiChat.js:isGeminiChatPage',message:'isGeminiChatPage result',data:{hasInput,inputCount:allInputs.length,sampleAttrs:inputsWithAttrs.slice(0,3)},timestamp:Date.now(),runId:'run1',hypothesisId:'D'})}).catch(()=>{});\r\n    // #endregion\r\n    return hasInput;\r\n  } catch (error) {\r\n    console.warn('[GeminiChat] isGeminiChatPage \uC624\uB958:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * SAT \uD14C\uC2A4\uD2B8 \uD398\uC774\uC9C0\uC778\uC9C0 \uD655\uC778\r\n * @returns {boolean}\r\n */\r\nexport function isSATTestPage() {\r\n  try {\r\n    return looksLikeSatQuestionUI() || isQuestionScreen() || getProgressState() !== null;\r\n  } catch (error) {\r\n    console.warn('[GeminiChat] isSATTestPage \uC624\uB958:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Gemini \uCC44\uD305 \uC790\uB3D9\uD654 \uD074\uB798\uC2A4\r\n */\r\nexport class GeminiChatAutomator {\r\n  constructor() {\r\n    this.isProcessing = false;\r\n  }\r\n\r\n  /**\r\n   * \uCC44\uD305 \uC785\uB825\uCC3D \uCC3E\uAE30 (\uC6B0\uC120\uC21C\uC704: data-testid/role \u2192 aria-label/placeholder \u2192 \uC804\uCCB4 \uC2A4\uCE94)\r\n   * @returns {Promise<HTMLElement|null>}\r\n   */\r\n  async findChatInput() {\r\n    console.log('[GeminiChat] \uC785\uB825\uCC3D \uCC3E\uAE30 \uC2DC\uC791...');\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'geminiChat.js:findChatInput:entry',message:'findChatInput entry',data:{},timestamp:Date.now(),runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n    // #endregion\r\n    \r\n    // 1\uC21C\uC704: data-testid, role \uAE30\uBC18 \uC140\uB809\uD130\r\n    for (const selector of CONFIG.geminiChat.inputSelectors.slice(0, 4)) {\r\n      const elements = deepQuerySelectorAll(selector);\r\n      for (const el of elements) {\r\n        if (isElementVisible(el) && !el.disabled && !el.readOnly) {\r\n          console.log('[GeminiChat] \uC785\uB825\uCC3D \uBC1C\uACAC (1\uC21C\uC704):', selector, el);\r\n          // #region agent log\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'geminiChat.js:findChatInput:found1',message:'input found tier1',data:{selector,tagName:el.tagName,hasValue:!!el.value,contentEditable:el.contentEditable},timestamp:Date.now(),runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n          // #endregion\r\n          return el;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // 2\uC21C\uC704: aria-label, placeholder \uAE30\uBC18\r\n    for (const selector of CONFIG.geminiChat.inputSelectors.slice(4)) {\r\n      const elements = deepQuerySelectorAll(selector);\r\n      for (const el of elements) {\r\n        const isEditable = el.contentEditable === 'true' || (!el.disabled && el.readOnly !== true);\r\n        if (isElementVisible(el) && isEditable) {\r\n          const placeholder = (el.getAttribute('placeholder') || '').toLowerCase();\r\n          const ariaLabel = (el.getAttribute('aria-label') || '').toLowerCase();\r\n          const title = (el.getAttribute('title') || '').toLowerCase();\r\n          const matches = placeholder.includes('message') || placeholder.includes('prompt') || placeholder.includes('chat') || placeholder.includes('\uC785\uB825') ||\r\n              placeholder.includes('\uBB3C\uC5B4\uBCF4\uAE30') || placeholder.includes('ask') ||\r\n              ariaLabel.includes('message') || ariaLabel.includes('prompt') || ariaLabel.includes('chat') || ariaLabel.includes('\uC785\uB825') ||\r\n              ariaLabel.includes('\uBB3C\uC5B4\uBCF4\uAE30') || ariaLabel.includes('ask') ||\r\n              title.includes('message') || title.includes('prompt') || title.includes('chat') || title.includes('\uBB3C\uC5B4\uBCF4\uAE30');\r\n          if (matches) {\r\n            console.log('[GeminiChat] \uC785\uB825\uCC3D \uBC1C\uACAC (2\uC21C\uC704):', selector, el);\r\n            return el;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    // 3\uC21C\uC704: textarea, input, contenteditable \uC804\uCCB4 \uC2A4\uCE94 (\uCD5C\uD6C4\uC758 fallback)\r\n    const allInputs = deepQuerySelectorAll('textarea, input[type=\"text\"], [contenteditable=\"true\"]');\r\n    for (const el of allInputs) {\r\n      if (isElementVisible(el) && (el.disabled === false || el.disabled === undefined) && el.readOnly !== true) {\r\n        const rect = el.getBoundingClientRect();\r\n        if (rect.bottom > window.innerHeight * 0.5) {\r\n          console.log('[GeminiChat] \uC785\uB825\uCC3D \uBC1C\uACAC (3\uC21C\uC704 - \uC804\uCCB4 \uC2A4\uCE94):', el);\r\n          // #region agent log\r\n          fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'geminiChat.js:findChatInput:found3',message:'input found tier3',data:{tagName:el.tagName,contentEditable:el.contentEditable,rectBottom:rect.bottom,innerHeight:window.innerHeight},timestamp:Date.now(),runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n          // #endregion\r\n          return el;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'geminiChat.js:findChatInput:notFound',message:'input not found',data:{allInputsCount:allInputs.length},timestamp:Date.now(),runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n    // #endregion\r\n    console.warn('[GeminiChat] \uC785\uB825\uCC3D\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * \uBA54\uC2DC\uC9C0 \uC785\uB825 \uBC0F \uC804\uC1A1\r\n   * @param {string} message - \uC785\uB825\uD560 \uBA54\uC2DC\uC9C0\r\n   * @returns {Promise<boolean>} \uC131\uACF5 \uC5EC\uBD80\r\n   */\r\n  async typeMessage(message) {\r\n    console.log('[GeminiChat] \uBA54\uC2DC\uC9C0 \uC785\uB825 \uC2DC\uC791:', message);\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'geminiChat.js:typeMessage:entry',message:'typeMessage entry',data:{messageLen:message?.length},timestamp:Date.now(),runId:'run1',hypothesisId:'C'})}).catch(()=>{});\r\n    // #endregion\r\n    \r\n    const input = await this.findChatInput();\r\n    if (!input) {\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'geminiChat.js:typeMessage:inputNull',message:'findChatInput returned null',data:{},timestamp:Date.now(),runId:'run1',hypothesisId:'B'})}).catch(()=>{});\r\n      throw new Error('\uCC44\uD305 \uC785\uB825\uCC3D\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n    }\r\n    \r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'geminiChat.js:typeMessage:inputFound',message:'input found for typing',data:{tagName:input.tagName,contentEditable:input.contentEditable,hasValueProp:!!('value' in input)},timestamp:Date.now(),runId:'run1',hypothesisId:'C'})}).catch(()=>{});\r\n    // #endregion\r\n    \r\n    try {\r\n      // \uC785\uB825\uCC3D\uC5D0 \uD3EC\uCEE4\uC2A4\r\n      input.focus();\r\n      await new Promise(resolve => setTimeout(resolve, 120));\r\n      \r\n      // \uAE30\uC874 \uB0B4\uC6A9 \uC9C0\uC6B0\uAE30\r\n      if (input.value) {\r\n        input.value = '';\r\n        input.dispatchEvent(new Event('input', { bubbles: true, cancelable: true }));\r\n      }\r\n      if (input.contentEditable === 'true') {\r\n        input.textContent = '';\r\n        input.innerHTML = '';\r\n        input.dispatchEvent(new InputEvent('input', { bubbles: true, cancelable: true, inputType: 'deleteContentForward' }));\r\n      }\r\n      \r\n      // \uD14D\uC2A4\uD2B8 \uC785\uB825 (\uC5EC\uB7EC \uBC29\uBC95 \uC2DC\uB3C4)\r\n      if (input.contentEditable === 'true') {\r\n        input.textContent = message;\r\n        input.innerText = message;\r\n        input.dispatchEvent(new InputEvent('input', { bubbles: true, cancelable: true, inputType: 'insertText', data: message }));\r\n      } else {\r\n        input.value = message;\r\n        input.dispatchEvent(new Event('input', { bubbles: true, cancelable: true }));\r\n        input.dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\r\n      }\r\n      \r\n      // \uD0A4\uBCF4\uB4DC \uC774\uBCA4\uD2B8\uB3C4 \uC2DC\uBBAC\uB808\uC774\uC158\r\n      const textarea = input.tagName === 'TEXTAREA' ? input : null;\r\n      if (textarea) {\r\n        textarea.value = message;\r\n        textarea.dispatchEvent(new Event('input', { bubbles: true, cancelable: true }));\r\n      }\r\n      \r\n      await new Promise(resolve => setTimeout(resolve, 200));\r\n      \r\n      // #region agent log\r\n      const afterValue = input.contentEditable === 'true' ? input.textContent || input.innerText : input.value;\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'geminiChat.js:typeMessage:afterSet',message:'value after set',data:{afterValue:afterValue?.slice(0,50),expectedMatch:afterValue?.includes('SAT')},timestamp:Date.now(),runId:'run1',hypothesisId:'C'})}).catch(()=>{});\r\n      // #endregion\r\n      \r\n      // \uC804\uC1A1 \uBC84\uD2BC \uCC3E\uAE30 \uBC0F \uD074\uB9AD\r\n      const submitButton = await this.findSubmitButton();\r\n      if (submitButton) {\r\n        console.log('[GeminiChat] \uC804\uC1A1 \uBC84\uD2BC \uD074\uB9AD');\r\n        await safeClick(submitButton);\r\n        await waitForContentLoad(1000);\r\n        return true;\r\n      } else {\r\n        // \uC804\uC1A1 \uBC84\uD2BC\uC744 \uBABB \uCC3E\uC73C\uBA74 Enter \uD0A4 \uC2DC\uBBAC\uB808\uC774\uC158\r\n        console.log('[GeminiChat] \uC804\uC1A1 \uBC84\uD2BC\uC744 \uCC3E\uC9C0 \uBABB\uD568. Enter \uD0A4 \uC2DC\uBBAC\uB808\uC774\uC158');\r\n        input.dispatchEvent(new KeyboardEvent('keydown', { key: 'Enter', code: 'Enter', keyCode: 13, bubbles: true, cancelable: true }));\r\n        input.dispatchEvent(new KeyboardEvent('keyup', { key: 'Enter', code: 'Enter', keyCode: 13, bubbles: true, cancelable: true }));\r\n        await waitForContentLoad(1000);\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('[GeminiChat] \uBA54\uC2DC\uC9C0 \uC785\uB825 \uC624\uB958:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \uC804\uC1A1 \uBC84\uD2BC \uCC3E\uAE30\r\n   * @returns {Promise<HTMLElement|null>}\r\n   */\r\n  async findSubmitButton() {\r\n    for (const selector of CONFIG.geminiChat.submitSelectors) {\r\n      const buttons = deepQuerySelectorAll(selector);\r\n      for (const btn of buttons) {\r\n        if (isElementVisible(btn) && !btn.disabled) {\r\n          return btn;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * SAT UI\uAC00 \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30\r\n   * @returns {Promise<boolean>} SAT UI \uAC10\uC9C0 \uC131\uACF5 \uC5EC\uBD80\r\n   */\r\n  async waitForSATUI() {\r\n    console.log('[GeminiChat] SAT UI \uB300\uAE30 \uC2DC\uC791...');\r\n    showToast('SAT \uD14C\uC2A4\uD2B8 \uD654\uBA74\uC774 \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30 \uC911...', 'info');\r\n    \r\n    const startTime = Date.now();\r\n    const timeout = CONFIG.geminiChat.satUIWaitTimeout;\r\n    \r\n    // \uCC98\uC74C 15\uCD08 \uB300\uAE30 \uD6C4 \uCCAB \uD655\uC778\r\n    console.log('[GeminiChat] \uCD08\uAE30 15\uCD08 \uB300\uAE30 \uC911...');\r\n    await new Promise(resolve => setTimeout(resolve, 15000));\r\n    \r\n    while (Date.now() - startTime < timeout) {\r\n      // \uC5EC\uB7EC \uBC29\uBC95\uC73C\uB85C SAT UI \uAC10\uC9C0\r\n      if (looksLikeSatQuestionUI()) {\r\n        console.log('[GeminiChat] SAT UI \uAC10\uC9C0\uB428 (looksLikeSatQuestionUI)');\r\n        return true;\r\n      }\r\n      \r\n      if (isQuestionScreen()) {\r\n        console.log('[GeminiChat] SAT UI \uAC10\uC9C0\uB428 (isQuestionScreen)');\r\n        return true;\r\n      }\r\n      \r\n      if (getProgressState() !== null) {\r\n        console.log('[GeminiChat] SAT UI \uAC10\uC9C0\uB428 (getProgressState)');\r\n        return true;\r\n      }\r\n      \r\n\r\n      const bodyTextRaw = (document.body?.innerText || document.body?.textContent || '');\r\n      const bodyText = bodyTextRaw.toLowerCase();\r\n\r\n      // Gem \uC0AD\uC81C/\uBE44\uD65C\uC131 \uC0C1\uD0DC \uBA54\uC2DC\uC9C0 \uAC10\uC9C0\r\n      if (bodyText.includes('conversation was created with a gem that has been deleted') ||\r\n          bodyText.includes('create a new gem') ||\r\n          bodyText.includes('deleted gem')) {\r\n        throw new Error('\uD604\uC7AC \uB300\uD654\uAC00 \uC0AD\uC81C\uB41C Gem\uC5D0 \uC5F0\uACB0\uB418\uC5B4 SAT \uD14C\uC2A4\uD2B8\uB97C \uC2DC\uC791\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. Gemini\uC5D0\uC11C \uC0C8 \uC77C\uBC18 \uCC44\uD305\uC744 \uC5F4\uAC70\uB098 \uC0C8 Gem\uC744 \uB9CC\uB4E0 \uB4A4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.');\r\n      }\r\n\r\n      // \"Reading\", \"Writing\", \"Math\" \uD14D\uC2A4\uD2B8 \uD655\uC778\r\n      if (bodyText.includes('reading') && bodyText.includes('writing')) {\r\n        console.log('[GeminiChat] SAT UI \uAC10\uC9C0\uB428 (Reading/Writing \uD14D\uC2A4\uD2B8)');\r\n        return true;\r\n      }\r\n      \r\n      if (bodyText.includes('math') && (bodyText.includes('module') || bodyText.includes('section'))) {\r\n        console.log('[GeminiChat] SAT UI \uAC10\uC9C0\uB428 (Math \uC139\uC158 \uD14D\uC2A4\uD2B8)');\r\n        return true;\r\n      }\r\n      \r\n      if (Date.now() - startTime >= timeout) break;\r\n      \r\n      // \uADF8 \uB2E4\uC74C\uBD80\uD130 4\uCD08\uB9C8\uB2E4 \uD655\uC778 (\uCD1D 1\uBD84 \uB300\uAE30)\r\n      await new Promise(resolve => setTimeout(resolve, 4000));\r\n    }\r\n    \r\n    console.warn('[GeminiChat] SAT UI \uB300\uAE30 \uD0C0\uC784\uC544\uC6C3');\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * \uC804\uCCB4 \uC790\uB3D9\uD654 \uD50C\uB85C\uC6B0 \uC2E4\uD589\r\n   * @param {SATApp} satApp - SATApp \uC778\uC2A4\uD134\uC2A4\r\n   * @returns {Promise<boolean>} \uC131\uACF5 \uC5EC\uBD80\r\n   */\r\n  async triggerSATFlow(satApp) {\r\n    if (this.isProcessing) {\r\n      console.log('[GeminiChat] \uC774\uBBF8 \uCC98\uB9AC \uC911\uC785\uB2C8\uB2E4.');\r\n      return false;\r\n    }\r\n    \r\n    try {\r\n      this.isProcessing = true;\r\n      console.log('[GeminiChat] ===== \uC790\uB3D9\uD654 \uD50C\uB85C\uC6B0 \uC2DC\uC791 =====');\r\n      \r\n      // 1. \uBA54\uC2DC\uC9C0 \uC785\uB825 \uBC0F \uC804\uC1A1\r\n      showToast('\uBA54\uC2DC\uC9C0 \uC785\uB825 \uC911...', 'info');\r\n      await this.typeMessage(CONFIG.geminiChat.message);\r\n      console.log('[GeminiChat] \uBA54\uC2DC\uC9C0 \uC804\uC1A1 \uC644\uB8CC');\r\n      \r\n      // 2. SAT UI \uB300\uAE30\r\n      const satUIDetected = await this.waitForSATUI();\r\n      if (!satUIDetected) {\r\n        throw new Error('SAT \uD14C\uC2A4\uD2B8 \uD654\uBA74\uC774 \uB098\uD0C0\uB098\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uD0C0\uC784\uC544\uC6C3\uB418\uC5C8\uC2B5\uB2C8\uB2E4.');\r\n      }\r\n      \r\n      console.log('[GeminiChat] SAT UI \uC9C4\uC785 \uC644\uB8CC');\r\n      showToast('SAT \uD14C\uC2A4\uD2B8 \uD654\uBA74 \uC9C4\uC785 \uC644\uB8CC!', 'success');\r\n      \r\n      // 3. SAT UI \uC804\uD658 \uD6C4 Export \uBC84\uD2BC\uC774 \uC544\uC9C1 \uC5C6\uC744 \uC218 \uC788\uC73C\uBBC0\uB85C SATApp\uC744 \uC7AC\uCD08\uAE30\uD654\uD558\uC5EC \uBC84\uD2BC \uC0DD\uC131 \uC2DC\uB3C4\r\n      try {\r\n        if (window.satApp && typeof window.satApp.init === 'function') {\r\n          console.log('[GeminiChat] SATApp.init \uC7AC\uD638\uCD9C\uB85C Export \uBC84\uD2BC \uC0DD\uC131 \uC2DC\uB3C4');\r\n          window.satApp.init();\r\n        } else if (window.__SAT_APP && typeof window.__SAT_APP.init === 'function') {\r\n          console.log('[GeminiChat] __SAT_APP.init \uC7AC\uD638\uCD9C\uB85C Export \uBC84\uD2BC \uC0DD\uC131 \uC2DC\uB3C4');\r\n          window.__SAT_APP.init();\r\n        }\r\n      } catch (e) {\r\n        console.warn('[GeminiChat] SATApp \uC7AC\uCD08\uAE30\uD654 \uC911 \uC624\uB958:', e);\r\n      }\r\n      \r\n      console.log('[GeminiChat] \uAE30\uC874 \uC790\uB3D9\uD654 \uB85C\uC9C1 \uC2DC\uC791...');\r\n      showToast('SAT \uD14C\uC2A4\uD2B8 \uC790\uB3D9\uD654 \uC2DC\uC791...', 'info');\r\n      \r\n      // 4. Export to PDF \uBC84\uD2BC \uC790\uB3D9 \uD074\uB9AD\r\n      // SATApp\uC758 handleExportClick\uC744 \uC9C1\uC811 \uD638\uCD9C\r\n      const exportButton = document.getElementById('gemini-sat-pdf-export-btn');\r\n      if (exportButton && satApp) {\r\n        console.log('[GeminiChat] Export to PDF \uBC84\uD2BC \uC790\uB3D9 \uD074\uB9AD');\r\n        showToast('PDF \uC0DD\uC131 \uC2DC\uC791...', 'info');\r\n        await satApp.handleExportClick(exportButton);\r\n        return true;\r\n      } else {\r\n        // \uBC84\uD2BC\uC774 \uC544\uC9C1 \uC5C6\uC73C\uBA74 \uB300\uAE30 \uD6C4 \uC7AC\uC2DC\uB3C4\r\n        console.log('[GeminiChat] Export \uBC84\uD2BC \uB300\uAE30 \uC911...');\r\n        const button = await waitForElement(() => {\r\n          return document.getElementById('gemini-sat-pdf-export-btn');\r\n        }, 30, 1000);\r\n        \r\n        if (button && satApp) {\r\n          console.log('[GeminiChat] Export to PDF \uBC84\uD2BC \uBC1C\uACAC, \uC790\uB3D9 \uD074\uB9AD');\r\n          showToast('PDF \uC0DD\uC131 \uC2DC\uC791...', 'info');\r\n          await satApp.handleExportClick(button);\r\n          return true;\r\n        } else {\r\n          throw new Error('Export to PDF \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('[GeminiChat] \uC790\uB3D9\uD654 \uD50C\uB85C\uC6B0 \uC624\uB958:', error);\r\n      showToast(`\uC790\uB3D9\uD654 \uC911 \uC624\uB958: ${error.message}`, 'error');\r\n      throw error;\r\n    } finally {\r\n      this.isProcessing = false;\r\n    }\r\n  }\r\n}\r\n\r\n", "// Gemini SAT UI \uC9C4\uC785 \uD6C4 \uC124\uC815 \uB2E8\uACC4 (\uC2DC\uC791 \uBC84\uD2BC, \uD1A0\uAE00 \uD074\uB9AD)\r\n// \uBA54\uC2DC\uC9C0 \uC804\uC1A1 \u2192 SAT UI \uB300\uAE30 \u2192 \uC774 \uBAA8\uB4C8 \uC2E4\uD589 \u2192 Export to PDF\r\n// \uC2A4\uD06C\uB798\uD551 \uC774\uC804\uC5D0 \uC2E4\uD589\uB418\uB294 \uC0AC\uC804 \uC124\uC815 \uC2DC\uD000\uC2A4\r\n\r\nimport { CONFIG } from '../config/constants.js';\r\nimport { deepQuerySelectorAll } from '../dom/deepQuery.js';\r\nimport { safeClick, showToast } from '../dom/wait.js';\r\n\r\n/**\r\n * '\uC2DC\uC791' \uBC84\uD2BC \uD074\uB9AD\r\n * section-overview \uB0B4 glowing-card \uCCAB \uBC88\uC9F8\uC758 \uC2DC\uC791 \uBC84\uD2BC\r\n * @returns {Promise<boolean>} \uC131\uACF5 \uC5EC\uBD80\r\n */\r\nexport async function clickStartButton() {\r\n  console.log('[GeminiSetup] \uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD \uC2DC\uB3C4...');\r\n\r\n  // 1\uC21C\uC704: \uC0AC\uC6A9\uC790\uAC00 \uC9C1\uC811 \uC81C\uACF5\uD55C \uC804\uCCB4 CSS \uC140\uB809\uD130 (\uAC00\uC7A5 \uAD6C\uCCB4\uC801)\r\n  try {\r\n    const directButton = document.querySelector(\r\n      '#app-root > main > side-navigation-v2 > mat-sidenav-container > mat-sidenav-content > div > div.content-container > chat-window > immersive-panel > learning-immersive-panel > div > div > activity-set > section-overview > div > div > glowing-card:nth-child(1) > div > div > div.glowing-card-content > div.section-button-container.ng-star-inserted > button'\r\n    );\r\n    if (directButton) {\r\n      console.log('[GeminiSetup] \uC2DC\uC791 \uBC84\uD2BC \uBC1C\uACAC (\uC815\uD655 \uC140\uB809\uD130)');\r\n      const clicked = await safeClick(directButton);\r\n      if (clicked) {\r\n        await new Promise(resolve => setTimeout(resolve, 600));\r\n        return true;\r\n      }\r\n    }\r\n  } catch (e) {\r\n    console.warn('[GeminiSetup] \uC2DC\uC791 \uBC84\uD2BC \uC9C1\uC811 \uC140\uB809\uD130 \uC2E4\uD328:', e);\r\n  }\r\n\r\n  // 2\uC21C\uC704: \uC124\uC815 \uAE30\uBC18 \uC140\uB809\uD130 + \uD14D\uC2A4\uD2B8 \uD544\uD130\r\n  const selectors = CONFIG.geminiSetup?.startButtonSelectors ?? [\r\n    // \uC815\uD655\uD55C \uACBD\uB85C (\uC0AC\uC6A9\uC790 \uC81C\uACF5)\r\n    '#app-root section-overview glowing-card:nth-child(1) .section-button-container button',\r\n    'section-overview glowing-card:first-child .section-button-container button',\r\n    'glowing-card .section-button-container.ng-star-inserted button',\r\n    'activity-set section-overview .glowing-card .section-button-container button',\r\n    // \uD14D\uC2A4\uD2B8 \uAE30\uBC18 \uD3F4\uBC31\r\n    'button:has(span.mat-mdc-button-touch-target)',\r\n  ];\r\n\r\n  for (const selector of selectors) {\r\n    try {\r\n      const elements = deepQuerySelectorAll(selector);\r\n      for (const el of elements) {\r\n        const text = (el.innerText || el.textContent || '').trim().toLowerCase();\r\n        if (text.includes('\uC2DC\uC791') || text.includes('start')) {\r\n          console.log('[GeminiSetup] \uC2DC\uC791 \uBC84\uD2BC \uBC1C\uACAC:', selector);\r\n          const clicked = await safeClick(el);\r\n          if (clicked) {\r\n            await new Promise(resolve => setTimeout(resolve, 600));\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('[GeminiSetup] \uC2DC\uC791 \uBC84\uD2BC \uC140\uB809\uD130 \uC2E4\uD328:', selector, e);\r\n    }\r\n  }\r\n\r\n  // touch-target span \uD074\uB9AD \uC2DC\uB3C4 (\uC0AC\uC6A9\uC790 \uC81C\uACF5 \uC804\uCCB4 \uACBD\uB85C)\r\n  const touchTargets = deepQuerySelectorAll(\r\n    '.glowing-card .section-button-container button span.mat-mdc-button-touch-target'\r\n  );\r\n  const touchTarget = touchTargets[0];\r\n  if (touchTarget) {\r\n    const button = touchTarget.closest('button');\r\n    if (button && (await safeClick(button))) {\r\n      await new Promise(resolve => setTimeout(resolve, 600));\r\n      return true;\r\n    }\r\n  }\r\n\r\n  console.warn('[GeminiSetup] \uC2DC\uC791 \uBC84\uD2BC\uC744 \uCC3E\uC9C0 \uBABB\uD568');\r\n  return false;\r\n}\r\n\r\n/**\r\n * \uCCAB \uBC88\uC9F8 \uD1A0\uAE00 \uC2A4\uC704\uCE58 \uD074\uB9AD (mat-mdc-slide-toggle)\r\n * @returns {Promise<boolean>} \uC131\uACF5 \uC5EC\uBD80\r\n */\r\nexport async function clickFirstToggle() {\r\n  console.log('[GeminiSetup] \uCCAB \uBC88\uC9F8 \uD1A0\uAE00 \uD074\uB9AD \uC2DC\uB3C4...');\r\n\r\n  const selectors = CONFIG.geminiSetup?.firstToggleSelectors ?? [\r\n    'button[id^=\"mat-mdc-slide-toggle-\"]',\r\n    '.mdc-switch',\r\n    'span.mdc-switch__handle-track',\r\n    'span.mdc-switch__shadow',\r\n  ];\r\n\r\n  for (const selector of selectors) {\r\n    try {\r\n      const elements = deepQuerySelectorAll(selector);\r\n      const el = elements[0];\r\n      if (el) {\r\n        const clickTarget = el.tagName === 'BUTTON' ? el : el.closest('button') || el;\r\n        console.log('[GeminiSetup] \uCCAB \uBC88\uC9F8 \uD1A0\uAE00 \uBC1C\uACAC:', selector);\r\n        const clicked = await safeClick(clickTarget);\r\n        if (clicked) {\r\n          await new Promise(resolve => setTimeout(resolve, 400));\r\n          return true;\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('[GeminiSetup] \uCCAB \uBC88\uC9F8 \uD1A0\uAE00 \uC140\uB809\uD130 \uC2E4\uD328:', selector, e);\r\n    }\r\n  }\r\n\r\n  console.warn('[GeminiSetup] \uCCAB \uBC88\uC9F8 \uD1A0\uAE00\uC744 \uCC3E\uC9C0 \uBABB\uD568');\r\n  return false;\r\n}\r\n\r\n/**\r\n * \uB450 \uBC88\uC9F8 \uD1A0\uAE00 \uC2A4\uC704\uCE58 \uD074\uB9AD\r\n * \uCCAB \uBC88\uC9F8\uC640 \uB2E4\uB978 \uD1A0\uAE00 (\uB610\uB294 \uB3D9\uC77C \uD1A0\uAE00\uC758 \uB2E4\uB978 \uD074\uB9AD \uC601\uC5ED)\r\n * @returns {Promise<boolean>} \uC131\uACF5 \uC5EC\uBD80\r\n */\r\nexport async function clickSecondToggle() {\r\n  console.log('[GeminiSetup] \uB450 \uBC88\uC9F8 \uD1A0\uAE00 \uD074\uB9AD \uC2DC\uB3C4...');\r\n\r\n  const toggles = [];\r\n  for (const selector of ['button[id^=\"mat-mdc-slide-toggle-\"]', '.mdc-switch']) {\r\n    const elements = deepQuerySelectorAll(selector);\r\n    toggles.push(...elements);\r\n  }\r\n\r\n   // \uD1A0\uAE00\uC774 1\uAC1C \uC774\uD558\uC774\uBA74 \uB450 \uBC88\uC9F8 \uD1A0\uAE00\uC740 \uC874\uC7AC\uD558\uC9C0 \uC54A\uB294\uB2E4\uACE0 \uBCF4\uACE0 \uC2A4\uD0B5\r\n   if (toggles.length < 2) {\r\n     console.log('[GeminiSetup] \uD1A0\uAE00\uC774 1\uAC1C\uC774\uBBC0\uB85C \uB450 \uBC88\uC9F8 \uD1A0\uAE00 \uD074\uB9AD\uC744 \uC2A4\uD0B5\uD569\uB2C8\uB2E4.');\r\n     return true;\r\n   }\r\n\r\n  // \uB450 \uBC88\uC9F8 \uD1A0\uAE00\uC774 \uC788\uC73C\uBA74 \uD074\uB9AD (\uCCAB \uBC88\uC9F8\uB294 \uC774\uBBF8 \uD074\uB9AD\uB428)\r\n  const second = toggles[1];\r\n  const clickTarget = second.tagName === 'BUTTON' ? second : second.closest('button') || second;\r\n  const clicked = await safeClick(clickTarget);\r\n  if (clicked) {\r\n    await new Promise(resolve => setTimeout(resolve, 400));\r\n    return true;\r\n  }\r\n\r\n  console.warn('[GeminiSetup] \uB450 \uBC88\uC9F8 \uD1A0\uAE00\uC744 \uCC3E\uC9C0 \uBABB\uD568');\r\n  return false;\r\n}\r\n\r\n/**\r\n * \uC804\uCCB4 \uC124\uC815 \uC2DC\uD000\uC2A4 \uC2E4\uD589\r\n * 1. \uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD\r\n * 2. \uCCAB \uBC88\uC9F8 \uD1A0\uAE00 \uD074\uB9AD\r\n * 3. \uB450 \uBC88\uC9F8 \uD1A0\uAE00 \uD074\uB9AD\r\n * @returns {Promise<boolean>} \uC804\uCCB4 \uC131\uACF5 \uC5EC\uBD80\r\n */\r\nexport async function runSetupSequence() {\r\n  console.log('[GeminiSetup] ===== \uC124\uC815 \uC2DC\uD000\uC2A4 \uC2DC\uC791 =====');\r\n  showToast('SAT \uC124\uC815 \uBC84\uD2BC \uD074\uB9AD \uC911...', 'info');\r\n\r\n  const timeout = CONFIG.geminiSetup?.setupSequenceTimeout ?? 15000;\r\n\r\n  // \uC2DC\uC791 \uBC84\uD2BC\uC774 \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30 \uD6C4 \uD074\uB9AD\r\n  let startButtonDone = false;\r\n  const startTime = Date.now();\r\n  while (Date.now() - startTime < timeout && !startButtonDone) {\r\n    startButtonDone = await clickStartButton();\r\n    if (!startButtonDone) {\r\n      await new Promise(resolve => setTimeout(resolve, 250));\r\n    }\r\n  }\r\n\r\n  if (!startButtonDone) {\r\n    console.warn('[GeminiSetup] \uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD \uC2E4\uD328 (\uACC4\uC18D \uC9C4\uD589)');\r\n  } else {\r\n    showToast('\uC2DC\uC791 \uBC84\uD2BC \uD074\uB9AD \uC644\uB8CC. \uD1A0\uAE00 \uC124\uC815 \uC911...', 'info');\r\n  }\r\n\r\n  // \uD1A0\uAE00\uC774 \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30\r\n  await new Promise(resolve => setTimeout(resolve, 800));\r\n\r\n  // \uCCAB \uBC88\uC9F8 \uD1A0\uAE00: \uC77C\uC815 \uC2DC\uAC04 \uB3D9\uC548 \uC7AC\uC2DC\uB3C4\r\n  let firstToggleDone = false;\r\n  const toggleStartTime = Date.now();\r\n  while (Date.now() - toggleStartTime < timeout && !firstToggleDone) {\r\n    firstToggleDone = await clickFirstToggle();\r\n    if (!firstToggleDone) {\r\n      await new Promise(resolve => setTimeout(resolve, 250));\r\n    }\r\n  }\r\n  if (!firstToggleDone) {\r\n    console.warn('[GeminiSetup] \uCCAB \uBC88\uC9F8 \uD1A0\uAE00 \uD074\uB9AD \uC2E4\uD328 (\uACC4\uC18D \uC9C4\uD589)');\r\n  }\r\n\r\n  await new Promise(resolve => setTimeout(resolve, 250));\r\n\r\n  // \uB450 \uBC88\uC9F8 \uD1A0\uAE00: \uCCAB \uBC88\uC9F8\uC640 \uB3D9\uC77C\uD558\uAC8C \uC7AC\uC2DC\uB3C4\r\n  let secondToggleDone = false;\r\n  const secondToggleStartTime = Date.now();\r\n  while (Date.now() - secondToggleStartTime < timeout && !secondToggleDone) {\r\n    secondToggleDone = await clickSecondToggle();\r\n    if (!secondToggleDone) {\r\n      await new Promise(resolve => setTimeout(resolve, 250));\r\n    }\r\n  }\r\n  if (!secondToggleDone) {\r\n    console.warn('[GeminiSetup] \uB450 \uBC88\uC9F8 \uD1A0\uAE00 \uD074\uB9AD \uC2E4\uD328 (\uACC4\uC18D \uC9C4\uD589)');\r\n  }\r\n\r\n  console.log('[GeminiSetup] ===== \uC124\uC815 \uC2DC\uD000\uC2A4 \uC644\uB8CC =====');\r\n  return startButtonDone || firstToggleDone || secondToggleDone;\r\n}\r\n", "// Extracted SATApp class and IIFE initialization from content.js\r\n// NOTE: Logic must remain identical to original implementation.\r\n\r\nimport { CONFIG } from '../config/constants.js';\r\nimport { SATNavigator } from '../flow/navigator.js';\r\nimport { SATScraper } from '../flow/stateMachine.js';\r\nimport { PDFGenerator } from '../pdf/pdfGenerator.js';\r\nimport { looksLikeSatQuestionUI, findWorkerFrame } from '../frame/workerFrame.js';\r\nimport { showToast } from '../dom/wait.js';\r\nimport { showSetCountModal } from '../dom/modal.js';\r\nimport { GeminiChatAutomator, isGeminiChatPage, isSATTestPage } from '../flow/geminiChat.js';\r\nimport { runSetupSequence } from '../flow/geminiSetup.js';\r\n\r\n/**\r\n * SATApp \uD074\uB798\uC2A4\r\n * \uC804\uCCB4 \uD504\uB85C\uC138\uC2A4\uB97C \uAD00\uB9AC\uD558\uB294 \uBA54\uC778 \uCEE8\uD2B8\uB864\uB7EC\r\n */\r\nexport class SATApp {\r\n  constructor() {\r\n    this.navigator = new SATNavigator();\r\n    this.scraper = new SATScraper();\r\n    this.pdfGenerator = new PDFGenerator();\r\n    this.isProcessing = false;\r\n  }\r\n\r\n  /**\r\n   * Export \uBC84\uD2BC \uC0DD\uC131 \uBC0F \uC774\uBCA4\uD2B8 \uBC14\uC778\uB529\r\n   */\r\n  init() {\r\n    console.log('[BOOT] about to create export button', 'top?', window === window.top);\r\n    \r\n    // Export \uBC84\uD2BC\uC740 top frame\uC5D0\uB9CC \uC0DD\uC131 (iframe\uC5D0 \uC0DD\uC131 \uC2DC \uAD6C\uAE00 \uAC1C\uC778\uC815\uBCF4/\uACC4\uC815 iframe\uACFC \uACB9\uCCD0 \uD0ED\uC774 \uC5F4\uB9BC)\r\n    if (window !== window.top) {\r\n      return;\r\n    }\r\n    \r\n    // \uCEE8\uD14D\uC2A4\uD2B8 \uC720\uD6A8\uC131 \uCCB4\uD06C\r\n    if (typeof chrome !== 'undefined' && chrome.runtime && !chrome.runtime.id) {\r\n      console.warn('[SATApp] Extension context invalidated - \uBC84\uD2BC \uC0DD\uC131 \uC2A4\uD0B5');\r\n      // NOTE: showToast is imported from wait.js\r\n      showToast('\uD655\uC7A5 \uD504\uB85C\uADF8\uB7A8\uC774 \uC7AC\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD398\uC774\uC9C0\uB97C \uC0C8\uB85C\uACE0\uCE68\uD574\uC8FC\uC138\uC694.', 'error');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (!document.body) {\r\n        console.log('[SATApp] document.body\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. 100ms \uD6C4 \uC7AC\uC2DC\uB3C4...');\r\n        setTimeout(() => this.init(), 100);\r\n        return;\r\n      }\r\n\r\n      // \uD398\uC774\uC9C0 \uD0C0\uC785 \uAC10\uC9C0\r\n      const isChatPage = isGeminiChatPage();\r\n      const isSATPage = isSATTestPage();\r\n      \r\n      console.log('[SATApp] \uD398\uC774\uC9C0 \uD0C0\uC785 \uAC10\uC9C0:', { isChatPage, isSATPage });\r\n\r\n      // \uCC44\uD305 \uD398\uC774\uC9C0\uBA74 Export \uBC84\uD2BC (\uD074\uB9AD \uC2DC \uBA54\uC2DC\uC9C0 \uC785\uB825 + SAT UI \uB300\uAE30 \uD6C4 PDF \uCD94\uCD9C), SAT \uD398\uC774\uC9C0\uBA74 Export \uBC84\uD2BC\r\n      if (isChatPage && !isSATPage) {\r\n        // \uAE30\uC874 Start \uBC84\uD2BC \uC81C\uAC70 (\uC788\uB2E4\uBA74)\r\n        const existingStartBtn = document.getElementById('gemini-sat-start-btn');\r\n        if (existingStartBtn) {\r\n          existingStartBtn.remove();\r\n        }\r\n        \r\n        // \uCC44\uD305 \uD398\uC774\uC9C0\uC5D0\uC11C\uB3C4 Export to PDF \uBC84\uD2BC \uC0DD\uC131 (\uD074\uB9AD \uC2DC \uC790\uB3D9\uC73C\uB85C \uBA54\uC2DC\uC9C0 \uC785\uB825 + SAT UI \uB300\uAE30 \uD6C4 \uC9C4\uD589)\r\n        const existingExportBtn = document.getElementById('gemini-sat-pdf-export-btn');\r\n        if (existingExportBtn) {\r\n          console.log('[SATApp] Export \uBC84\uD2BC\uC774 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4.');\r\n          existingExportBtn.style.display = 'block';\r\n          existingExportBtn.style.visibility = 'visible';\r\n          existingExportBtn.style.opacity = '1';\r\n          existingExportBtn.style.zIndex = '2147483647';\r\n          return;\r\n        }\r\n        \r\n        console.log('[SATApp] Export to PDF \uBC84\uD2BC \uC0DD\uC131 (\uCC44\uD305 \uD398\uC774\uC9C0)...');\r\n        const button = this.createExportButton();\r\n        document.body.appendChild(button);\r\n        console.log('[BOOT] exportButtonInserted (chat page)', button.id);\r\n        return;\r\n      } else if (isSATPage || !isChatPage) {\r\n        // \uAE30\uC874 Start \uBC84\uD2BC \uC81C\uAC70 (\uC788\uB2E4\uBA74)\r\n        const existingStartBtn = document.getElementById('gemini-sat-start-btn');\r\n        if (existingStartBtn) {\r\n          existingStartBtn.remove();\r\n        }\r\n        \r\n        // Export \uBC84\uD2BC \uC0DD\uC131\r\n        const existingBtn = document.getElementById('gemini-sat-pdf-export-btn');\r\n        if (existingBtn) {\r\n          console.log('[SATApp] \uBC84\uD2BC\uC774 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4.');\r\n          // \uBC84\uD2BC\uC774 \uC788\uC9C0\uB9CC \uBCF4\uC774\uC9C0 \uC54A\uC744 \uC218 \uC788\uC73C\uBBC0\uB85C \uC2A4\uD0C0\uC77C \uAC15\uC81C \uC801\uC6A9\r\n          existingBtn.style.display = 'block';\r\n          existingBtn.style.visibility = 'visible';\r\n          existingBtn.style.opacity = '1';\r\n          existingBtn.style.zIndex = '2147483647';\r\n          console.log('[BOOT] buttonInserted (existing)', existingBtn.id, 'visible?', window.getComputedStyle(existingBtn).display !== 'none');\r\n          return;\r\n        }\r\n\r\n        console.log('[SATApp] \uBC84\uD2BC \uC0DD\uC131 \uC2DC\uC791...');\r\n        const button = this.createExportButton();\r\n        document.body.appendChild(button);\r\n        console.log('[BOOT] buttonInserted', button.id, 'top?', window === window.top, 'ownerDocument:', button.ownerDocument === document);\r\n        \r\n        const computedStyle = window.getComputedStyle(button);\r\n        const rect = button.getBoundingClientRect();\r\n        const isVisible = computedStyle.display !== 'none' && \r\n                         computedStyle.visibility !== 'hidden' && \r\n                         computedStyle.opacity !== '0' &&\r\n                         rect.width > 0 && rect.height > 0;\r\n        \r\n        console.log('[BOOT] buttonVisible?', isVisible, {\r\n          display: computedStyle.display,\r\n          visibility: computedStyle.visibility,\r\n          opacity: computedStyle.opacity,\r\n          zIndex: computedStyle.zIndex,\r\n          position: computedStyle.position,\r\n          rect: { x: rect.x, y: rect.y, width: rect.width, height: rect.height }\r\n        });\r\n        \r\n        console.log('[SATApp] \uBC84\uD2BC\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC704\uCE58:', {\r\n          top: button.style.top,\r\n          right: button.style.right,\r\n          zIndex: button.style.zIndex,\r\n          display: computedStyle.display,\r\n          visibility: computedStyle.visibility,\r\n          opacity: computedStyle.opacity\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('[SATApp] \uBC84\uD2BC \uC0DD\uC131 \uC911 \uC624\uB958 (\uC2A4\uD06C\uB9BD\uD2B8\uB294 \uACC4\uC18D \uC2E4\uD589):', error);\r\n      // \uC5D0\uB7EC\uAC00 \uBC1C\uC0DD\uD574\uB3C4 \uC2A4\uD06C\uB9BD\uD2B8\uB294 \uACC4\uC18D \uC2E4\uD589\uB418\uB3C4\uB85D \uD568\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Start SAT Test \uBC84\uD2BC \uC0DD\uC131\r\n   * @returns {HTMLElement} \uBC84\uD2BC \uC694\uC18C\r\n   */\r\n  createStartButton() {\r\n    const button = document.createElement('button');\r\n    button.id = 'gemini-sat-start-btn';\r\n    button.className = 'gemini-sat-start-btn';\r\n    button.textContent = 'Start SAT Test';\r\n    button.type = 'button';\r\n    button.style.cssText = `\r\n      position: fixed !important;\r\n      top: 20px !important;\r\n      right: 20px !important;\r\n      z-index: 2147483647 !important;\r\n      background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;\r\n      color: white !important;\r\n      border: none !important;\r\n      padding: 12px 24px !important;\r\n      display: block !important;\r\n      visibility: visible !important;\r\n      opacity: 1 !important;\r\n      pointer-events: auto !important;\r\n      border-radius: 8px !important;\r\n      font-size: 14px !important;\r\n      font-weight: 600 !important;\r\n      cursor: pointer !important;\r\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;\r\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif !important;\r\n      transform: none !important;\r\n      clip: auto !important;\r\n      clip-path: none !important;\r\n    `;\r\n    \r\n    button.setAttribute('style', button.style.cssText);\r\n\r\n    button.addEventListener('click', (event) => {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      this.handleStartClick(button);\r\n    });\r\n    return button;\r\n  }\r\n\r\n  /**\r\n   * Start \uBC84\uD2BC \uD074\uB9AD \uD578\uB4E4\uB7EC\r\n   * @param {HTMLElement} button - \uD074\uB9AD\uB41C \uBC84\uD2BC \uC694\uC18C\r\n   */\r\n  async handleStartClick(button) {\r\n    console.log('[FLOW] handleStartClick entered', {\r\n      isProcessing: this.isProcessing,\r\n      top: window === window.top\r\n    });\r\n    \r\n    if (this.isProcessing) {\r\n      console.log('[FLOW] \uC774\uBBF8 \uCC98\uB9AC \uC911\uC785\uB2C8\uB2E4. \uC2A4\uD0B5.');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      this.isProcessing = true;\r\n      console.log('[SATApp] ===== Start SAT Test \uBC84\uD2BC \uD074\uB9AD\uB428 =====');\r\n      \r\n      button.disabled = true;\r\n      button.classList.add('loading');\r\n      button.textContent = 'Starting...';\r\n      \r\n      // GeminiChatAutomator \uC778\uC2A4\uD134\uC2A4 \uC0DD\uC131 \uBC0F \uC2E4\uD589\r\n      const chatAutomator = new GeminiChatAutomator();\r\n      showToast('SAT \uD14C\uC2A4\uD2B8 \uC790\uB3D9\uD654 \uC2DC\uC791...', 'info');\r\n      \r\n      // triggerSATFlow \uD638\uCD9C (\uC790\uB3D9\uC73C\uB85C Export\uAE4C\uC9C0 \uC2E4\uD589\uB428)\r\n      await chatAutomator.triggerSATFlow(this);\r\n      \r\n      // \uC131\uACF5 \uBA54\uC2DC\uC9C0\r\n      button.textContent = '\u2713 Started!';\r\n      setTimeout(() => {\r\n        button.textContent = 'Start SAT Test';\r\n        button.disabled = false;\r\n        button.classList.remove('loading');\r\n        this.isProcessing = false;\r\n      }, 2000);\r\n      \r\n    } catch (error) {\r\n      console.error('[ERROR] handleStartClick failed:', error);\r\n      showToast(`\uC790\uB3D9\uD654 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${error.message}`, 'error');\r\n      button.disabled = false;\r\n      button.classList.remove('loading');\r\n      button.textContent = 'Start SAT Test';\r\n      this.isProcessing = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Export \uBC84\uD2BC \uC0DD\uC131\r\n   * @returns {HTMLElement} \uBC84\uD2BC \uC694\uC18C\r\n   */\r\n  createExportButton() {\r\n    const button = document.createElement('button');\r\n    button.id = 'gemini-sat-pdf-export-btn';\r\n    button.className = 'gemini-sat-pdf-export-btn';\r\n    button.textContent = 'Export to PDF';\r\n    button.type = 'button';\r\n    button.style.cssText = `\r\n      position: fixed !important;\r\n      top: 20px !important;\r\n      right: 20px !important;\r\n      z-index: 2147483647 !important;\r\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;\r\n      color: white !important;\r\n      border: none !important;\r\n      padding: 12px 24px !important;\r\n      display: block !important;\r\n      visibility: visible !important;\r\n      opacity: 1 !important;\r\n      pointer-events: auto !important;\r\n      border-radius: 8px !important;\r\n      font-size: 14px !important;\r\n      font-weight: 600 !important;\r\n      cursor: pointer !important;\r\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;\r\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif !important;\r\n      display: block !important;\r\n      visibility: visible !important;\r\n      opacity: 1 !important;\r\n      pointer-events: auto !important;\r\n      transform: none !important;\r\n      clip: auto !important;\r\n      clip-path: none !important;\r\n    `;\r\n    \r\n    // \uCD94\uAC00 \uBCF4\uC7A5: \uC778\uB77C\uC778 \uC2A4\uD0C0\uC77C\uB85C\uB3C4 \uBA85\uC2DC\r\n    button.setAttribute('style', button.style.cssText);\r\n\r\n    button.addEventListener('click', (event) => {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      event.stopImmediatePropagation();\r\n      console.log('[CLICK] export button clicked', {\r\n        isTrusted: event.isTrusted,\r\n        top: window === window.top,\r\n        location: location.href,\r\n        timestamp: Date.now()\r\n      });\r\n      this.handleExportClick(button);\r\n    });\r\n    return button;\r\n  }\r\n\r\n  /**\r\n   * \uC0DD\uC131\uD560 PDF \uC138\uD2B8 \uC218\uB97C \uC0AC\uC6A9\uC790\uC5D0\uAC8C \uC785\uB825\uBC1B\uC74C (\uD398\uC774\uC9C0 \uB0B4 \uBAA8\uB2EC UI \uC0AC\uC6A9)\r\n   * @returns {Promise<number|null>} \uC720\uD6A8\uD55C \uC138\uD2B8 \uC218 \uB610\uB294 \uCDE8\uC18C(null)\r\n   */\r\n  async promptExportSetCount() {\r\n    const count = await showSetCountModal();\r\n    return count;\r\n  }\r\n\r\n  /**\r\n   * Export \uBC84\uD2BC \uD074\uB9AD \uD578\uB4E4\uB7EC\r\n   * @param {HTMLElement} button - \uD074\uB9AD\uB41C \uBC84\uD2BC \uC694\uC18C\r\n   */\r\n  async handleExportClick(button) {\r\n    console.log('[FLOW] handleExportClick entered', {\r\n      isProcessing: this.isProcessing,\r\n      top: window === window.top,\r\n      hasApp: !!window.__SAT_APP,\r\n      hasClass: !!window.SATApp\r\n    });\r\n    \r\n    if (this.isProcessing) {\r\n      console.log('[FLOW] \uC774\uBBF8 \uCC98\uB9AC \uC911\uC785\uB2C8\uB2E4. \uC2A4\uD0B5.');\r\n      return;\r\n    }\r\n    \r\n    // \uC571 \uC778\uC2A4\uD134\uC2A4 \uD655\uC778 (satApp \uB610\uB294 __SAT_APP)\r\n    const app = window.__SAT_APP || window.satApp || this;\r\n    if (!app) {\r\n      console.error('[ERROR] SATApp \uC778\uC2A4\uD134\uC2A4 missing');\r\n      showToast('\uC571 \uC778\uC2A4\uD134\uC2A4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uD398\uC774\uC9C0\uB97C \uC0C8\uB85C\uACE0\uCE68\uD574\uC8FC\uC138\uC694.', 'error');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this.isProcessing = true;\r\n      console.log('[SATApp] ===== Export to PDF \uBC84\uD2BC \uD074\uB9AD\uB428 =====');\r\n      console.log('[SATApp] \uD604\uC7AC \uD504\uB808\uC784:', window.location.href, 'top?', window === window.top);\r\n\r\n      const exportSetCount = await this.promptExportSetCount();\r\n      if (exportSetCount === null) {\r\n        showToast('PDF \uC0DD\uC131\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.', 'info');\r\n        this.isProcessing = false;\r\n        return;\r\n      }\r\n      \r\n      button.disabled = true;\r\n      button.classList.add('loading');\r\n      button.textContent = '';\r\n\r\n      // 0-a. Gemini \uCC44\uD305 \uD398\uC774\uC9C0(\uAE30\uBCF8 \uCC3D)\uC5D0\uC11C Export \uD074\uB9AD \uC2DC: \uBA54\uC2DC\uC9C0 \uC785\uB825 \u2192 SAT UI \uB300\uAE30 \uD6C4 \uC9C4\uD589\r\n      const isChat = isGeminiChatPage();\r\n      const isSAT = isSATTestPage();\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7243/ingest/aca9102a-5cac-4fa2-952a-4d856789ea5d',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'content.entry.js:handleExportClick:chatCheck',message:'handleExportClick chat block check',data:{isChat,isSAT,willEnterChatBlock:isChat&&!isSAT,url:location.href},timestamp:Date.now(),runId:'run1',hypothesisId:'A'})}).catch(()=>{});\r\n      // #endregion\r\n      if (isChat && !isSAT) {\r\n        showToast('SAT \uD14C\uC2A4\uD2B8 \uC694\uCCAD \uBA54\uC2DC\uC9C0 \uC785\uB825 \uC911...', 'info');\r\n        const automator = new GeminiChatAutomator();\r\n        await automator.typeMessage(CONFIG.geminiChat.message);\r\n        console.log('[SATApp] \uBA54\uC2DC\uC9C0 \uC804\uC1A1 \uC644\uB8CC, SAT UI \uB300\uAE30 \uC911...');\r\n        showToast('SAT \uD14C\uC2A4\uD2B8 \uD654\uBA74\uC774 \uB098\uD0C0\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30 \uC911...', 'info');\r\n        const satUIDetected = await automator.waitForSATUI();\r\n        if (!satUIDetected) {\r\n          throw new Error('SAT \uD14C\uC2A4\uD2B8 \uD654\uBA74\uC774 \uB098\uD0C0\uB098\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uD0C0\uC784\uC544\uC6C3\uB418\uC5C8\uC2B5\uB2C8\uB2E4.');\r\n        }\r\n        console.log('[SATApp] SAT UI \uC9C4\uC785 \uC644\uB8CC, \uB2E4\uC74C \uB2E8\uACC4 \uC9C4\uD589');\r\n        showToast('SAT \uD14C\uC2A4\uD2B8 \uD654\uBA74 \uC9C4\uC785 \uC644\uB8CC!', 'success');\r\n        // SAT UI \uC804\uD658 \uD6C4 \uBC84\uD2BC \uC0C1\uD0DC \uAC31\uC2E0\r\n        try {\r\n          if (typeof app.init === 'function') app.init();\r\n        } catch (e) {\r\n          console.warn('[SATApp] init \uC7AC\uD638\uCD9C \uC911 \uC624\uB958:', e);\r\n        }\r\n        await new Promise(resolve => setTimeout(resolve, 600));\r\n      }\r\n\r\n      // 0. \uC2A4\uD06C\uB798\uD551 \uC774\uC804\uC5D0 Gemini SAT \uC124\uC815 \uC2DC\uD000\uC2A4 \uC2E4\uD589 (\uC2DC\uC791 \uBC84\uD2BC/\uD1A0\uAE00 \uC790\uB3D9 \uD074\uB9AD)\r\n      try {\r\n        console.log('[SATApp] Export \uC804 \uC124\uC815 \uC2DC\uD000\uC2A4 \uC2E4\uD589 \uC2DC\uB3C4');\r\n        await runSetupSequence();\r\n      } catch (setupError) {\r\n        console.warn('[SATApp] \uC124\uC815 \uC2DC\uD000\uC2A4 \uC2E4\uD589 \uC911 \uC624\uB958 (\uACC4\uC18D \uC9C4\uD589):', setupError);\r\n      }\r\n\r\n      // 1. Worker \uD504\uB808\uC784 \uCC3E\uAE30 (\uBB38\uC81C UI\uAC00 \uC788\uB294 \uD504\uB808\uC784)\r\n      console.log('[FRAME] selectWorkerFrame start');\r\n      // NOTE: showToast is imported from wait.js\r\n      showToast('\uBB38\uC81C \uD654\uBA74 \uD504\uB808\uC784 \uCC3E\uB294 \uC911...', 'info');\r\n      console.log('[SATApp] Worker \uD504\uB808\uC784 \uCC3E\uAE30 \uC2DC\uC791');\r\n      const worker = await findWorkerFrame();\r\n      console.log('[FRAME] selectWorkerFrame result:', worker ? 'found' : 'not found', {\r\n        frameCount: window.frames.length,\r\n        top: window === window.top\r\n      });\r\n      \r\n      let allData = null;\r\n      \r\n      if (!worker) {\r\n        // Worker \uD504\uB808\uC784\uC744 \uBABB \uCC3E\uC558\uC9C0\uB9CC, \uD604\uC7AC \uD504\uB808\uC784\uC774 \uBB38\uC81C UI\uC77C \uC218\uB3C4 \uC788\uC74C\r\n        if (looksLikeSatQuestionUI()) {\r\n          console.log('[SATApp] \uD604\uC7AC \uD504\uB808\uC784\uC774 \uBB38\uC81C UI\uC785\uB2C8\uB2E4. \uC774 \uD504\uB808\uC784\uC5D0\uC11C \uC791\uC5C5\uD569\uB2C8\uB2E4.');\r\n          window.__SAT_IS_WORKER = true;\r\n          \r\n          // \uD604\uC7AC \uD504\uB808\uC784\uC5D0\uC11C \uC9C1\uC811 \uC2E4\uD589\r\n          // 1. \uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4\r\n          console.log('[SATApp] \uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4 \uC2DC\uC791');\r\n          showToast('\uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4 \uC2E4\uD589 \uC911...', 'info');\r\n          await this.navigator.handleInitialNavigation();\r\n          console.log('[SATApp] \uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4 \uC644\uB8CC');\r\n\r\n          // 2. \uBB38\uC81C \uC218\uC9D1\r\n          showToast('\uBAA8\uB4E0 \uBB38\uC81C\uB97C \uC218\uC9D1\uD558\uB294 \uC911...', 'info');\r\n          console.log('[SATApp] \uBB38\uC81C \uC218\uC9D1 \uC2DC\uC791 (\uD604\uC7AC \uD504\uB808\uC784:', window.location.href, ')');\r\n          allData = await this.scraper.collectAllProblems();\r\n        } else {\r\n          console.warn('[SATApp] Worker \uD504\uB808\uC784\uC744 \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4. \uD604\uC7AC \uD504\uB808\uC784\uC5D0\uC11C \uC2DC\uB3C4\uD569\uB2C8\uB2E4.');\r\n          showToast('\uBB38\uC81C \uD654\uBA74 \uD504\uB808\uC784\uC744 \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4. \uD604\uC7AC \uD504\uB808\uC784\uC5D0\uC11C \uC2DC\uB3C4\uD569\uB2C8\uB2E4.', 'error');\r\n          \r\n          // \uD604\uC7AC \uD504\uB808\uC784\uC5D0\uC11C \uC2DC\uB3C4\r\n          // 1. \uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4\r\n          console.log('[SATApp] \uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4 \uC2DC\uC791');\r\n          showToast('\uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4 \uC2E4\uD589 \uC911...', 'info');\r\n          await this.navigator.handleInitialNavigation();\r\n          console.log('[SATApp] \uC790\uB3D9 \uC9C4\uC785 \uC2DC\uD000\uC2A4 \uC644\uB8CC');\r\n\r\n          // 2. \uBB38\uC81C \uC218\uC9D1\r\n          console.log('[FLOW] start scraper called (current frame fallback)');\r\n          showToast('\uBAA8\uB4E0 \uBB38\uC81C\uB97C \uC218\uC9D1\uD558\uB294 \uC911...', 'info');\r\n          console.log('[SATApp] \uBB38\uC81C \uC218\uC9D1 \uC2DC\uC791 (\uD604\uC7AC \uD504\uB808\uC784:', window.location.href, ')');\r\n          allData = await this.scraper.collectAllProblems();\r\n        }\r\n      } else {\r\n        console.log('[SATApp] Worker \uD504\uB808\uC784 \uBC1C\uACAC:', worker.href);\r\n        showToast('\uBB38\uC81C \uD654\uBA74 \uD504\uB808\uC784 \uBC1C\uACAC! \uC791\uC5C5 \uC2DC\uC791...', 'success');\r\n        \r\n        // Worker \uD504\uB808\uC784\uC5D0 \uC791\uC5C5 \uC2DC\uC791 \uBA85\uB839 \uC804\uC1A1\r\n        console.log('[FRAME] SAT_START sent', { workerHref: worker.href, top: window === window.top });\r\n        // location.origin \uC0AC\uC6A9: '*' \uC0AC\uC6A9 \uC2DC \uAD6C\uAE00 \uAC1C\uC778\uC815\uBCF4/\uACC4\uC815 \uC120\uD0DD iframe\uC774 \uBA54\uC2DC\uC9C0\uB97C \uBC1B\uC544 \uD0ED\uC774 \uC5F4\uB9BC\r\n        window.postMessage({ type: 'SAT_START', workerHref: worker.href }, location.origin);\r\n        \r\n        // Worker \uD504\uB808\uC784\uC5D0\uC11C \uC218\uC9D1 \uC644\uB8CC \uBA54\uC2DC\uC9C0 \uB300\uAE30\r\n        allData = await new Promise((resolve, reject) => {\r\n          const timeout = setTimeout(() => {\r\n            window.removeEventListener('message', onMsg);\r\n            reject(new Error('Worker \uD504\uB808\uC784\uC5D0\uC11C \uC218\uC9D1 \uC644\uB8CC \uBA54\uC2DC\uC9C0\uB97C \uBC1B\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4 (\uD0C0\uC784\uC544\uC6C3 5\uBD84)'));\r\n          }, 5 * 60 * 1000); // 5\uBD84 \uD0C0\uC784\uC544\uC6C3\r\n          \r\n          function onMsg(ev) {\r\n            if (ev?.data?.type === 'SAT_COLLECTION_COMPLETE') {\r\n              clearTimeout(timeout);\r\n              window.removeEventListener('message', onMsg);\r\n              console.log('[SATApp] Worker \uD504\uB808\uC784\uC5D0\uC11C \uC218\uC9D1 \uC644\uB8CC \uBA54\uC2DC\uC9C0 \uC218\uC2E0');\r\n              resolve(ev.data.data);\r\n            } else if (ev?.data?.type === 'SAT_COLLECTION_ERROR') {\r\n              clearTimeout(timeout);\r\n              window.removeEventListener('message', onMsg);\r\n              console.error('[SATApp] Worker \uD504\uB808\uC784\uC5D0\uC11C \uC218\uC9D1 \uC624\uB958:', ev.data.error);\r\n              reject(new Error(ev.data.error));\r\n            }\r\n          }\r\n          \r\n          window.addEventListener('message', onMsg);\r\n        });\r\n      }\r\n      console.log('[SATApp] \uBB38\uC81C \uC218\uC9D1 \uC644\uB8CC:', {\r\n        reading: allData.reading.length,\r\n        math: allData.math.length\r\n      });\r\n\r\n      if ((!allData.reading || allData.reading.length === 0) && \r\n          (!allData.math || allData.math.length === 0)) {\r\n        throw new Error('\uCD94\uCD9C\uD560 SAT \uBB38\uC81C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.');\r\n      }\r\n\r\n      // 3. PDF \uC0DD\uC131\r\n      const totalProblems = allData.reading.length + allData.math.length;\r\n      showToast(`${totalProblems}\uAC1C\uC758 \uBB38\uC81C\uB97C \uC218\uC9D1\uD588\uC2B5\uB2C8\uB2E4. PDF ${exportSetCount}\uC138\uD2B8 \uC0DD\uC131 \uC911...`, 'info');\r\n\r\n      for (let i = 1; i <= exportSetCount; i += 1) {\r\n        showToast(`\uBB38\uC81C\uC9C0 PDF \uC0DD\uC131 \uC911... (${i}/${exportSetCount})`, 'info');\r\n        const problemDoc = this.pdfGenerator.generateProblemsPDF(allData);\r\n\r\n        showToast(`\uD574\uC124\uC9C0 PDF \uC0DD\uC131 \uC911... (${i}/${exportSetCount})`, 'info');\r\n        const answerDoc = this.pdfGenerator.generateAnswersPDF(allData);\r\n\r\n        // 4. PDF \uB2E4\uC6B4\uB85C\uB4DC\r\n        await this.pdfGenerator.downloadPDFs(problemDoc, answerDoc, {\r\n          copyIndex: i,\r\n          totalCopies: exportSetCount\r\n        });\r\n      }\r\n\r\n      // \uC131\uACF5 \uBA54\uC2DC\uC9C0\r\n      showToast(`PDF ${exportSetCount}\uC138\uD2B8\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`, 'success');\r\n      button.textContent = '\u2713 Exported!';\r\n      setTimeout(() => {\r\n        button.textContent = 'Export to PDF';\r\n        button.disabled = false;\r\n        button.classList.remove('loading');\r\n        this.isProcessing = false;\r\n      }, 2000);\r\n\r\n    } catch (error) {\r\n      console.error('[ERROR] handleExportClick failed:', error);\r\n      console.error('[ERROR] error.stack:', error.stack);\r\n      console.error('[SATApp] PDF \uC0DD\uC131 \uC624\uB958:', error);\r\n      let errorMessage = error.message || '\uC54C \uC218 \uC5C6\uB294 \uC624\uB958';\r\n      \r\n      if (error.message && error.message.includes('Extension context invalidated')) {\r\n        errorMessage = '\uD655\uC7A5 \uD504\uB85C\uADF8\uB7A8\uC774 \uC7AC\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD398\uC774\uC9C0\uB97C \uC0C8\uB85C\uACE0\uCE68\uD558\uACE0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.';\r\n      }\r\n      \r\n      showToast(`PDF \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${errorMessage}`, 'error');\r\n      button.disabled = false;\r\n      button.classList.remove('loading');\r\n      button.textContent = 'Export to PDF';\r\n      this.isProcessing = false;\r\n    }\r\n  }\r\n}\r\n\r\n// \uBC84\uD2BC \uC0DD\uC874\uB825 \uADF9\uB300\uD654: \uCD5C\uC0C1\uB2E8 try-catch\uB85C \uBCF4\uD638 (\uB2E4\uB978 \uB85C\uC9C1\uC774 \uC2E4\uD328\uD574\uB3C4 \uBC84\uD2BC\uC740 \uBB34\uC870\uAC74 \uC0DD\uC131)\r\nexport function initButtonSafely() {\r\n  try {\r\n    console.log('[BOOT] initButtonSafely called', 'top?', window === window.top);\r\n    \r\n    // \uCEE8\uD14D\uC2A4\uD2B8 \uC720\uD6A8\uC131 \uCCB4\uD06C\r\n    if (typeof chrome !== 'undefined' && chrome.runtime && !chrome.runtime.id) {\r\n      console.warn('[SAT-DEBUG] Extension context invalidated - \uBC84\uD2BC \uC0DD\uC131 \uC2A4\uD0B5');\r\n      return;\r\n    }\r\n\r\n    if (!document.body) {\r\n      console.log('[SAT-DEBUG] document.body\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. 100ms \uD6C4 \uC7AC\uC2DC\uB3C4...');\r\n      setTimeout(() => initButtonSafely(), 100);\r\n      return;\r\n    }\r\n\r\n    // \uD398\uC774\uC9C0 \uD0C0\uC785\uC5D0 \uB530\uB77C \uAE30\uC874 \uBC84\uD2BC \uD655\uC778\r\n    const isChatPage = isGeminiChatPage();\r\n    const isSATPage = isSATTestPage();\r\n    \r\n    if (isChatPage && !isSATPage) {\r\n      // \uCC44\uD305 \uD398\uC774\uC9C0: Export \uBC84\uD2BC \uD655\uC778\r\n      const existingExportBtn = document.getElementById('gemini-sat-pdf-export-btn');\r\n      if (existingExportBtn) {\r\n        console.log('[BOOT] exportButtonInserted (existing, chat page)', existingExportBtn.id);\r\n        existingExportBtn.style.display = 'block';\r\n        existingExportBtn.style.visibility = 'visible';\r\n        existingExportBtn.style.opacity = '1';\r\n        existingExportBtn.style.zIndex = '2147483647';\r\n        return;\r\n      }\r\n    } else {\r\n      // SAT \uD398\uC774\uC9C0: Export \uBC84\uD2BC \uD655\uC778\r\n      const existingBtn = document.getElementById('gemini-sat-pdf-export-btn');\r\n      if (existingBtn) {\r\n        console.log('[BOOT] buttonInserted (existing)', existingBtn.id, 'visible?', window.getComputedStyle(existingBtn).display !== 'none');\r\n        // \uBC84\uD2BC\uC774 \uC788\uC9C0\uB9CC \uBCF4\uC774\uC9C0 \uC54A\uC744 \uC218 \uC788\uC73C\uBBC0\uB85C \uC2A4\uD0C0\uC77C \uAC15\uC81C \uC801\uC6A9\r\n        existingBtn.style.display = 'block';\r\n        existingBtn.style.visibility = 'visible';\r\n        existingBtn.style.opacity = '1';\r\n        existingBtn.style.zIndex = '2147483647';\r\n        return;\r\n      }\r\n    }\r\n\r\n    console.log('[BOOT] about to create button (initButtonSafely)');\r\n    const app = window.satApp || new SATApp();\r\n    window.satApp = app; // \uC804\uC5ED\uC5D0 \uC800\uC7A5\uD558\uC5EC \uC7AC\uC0AC\uC6A9\r\n    app.init();\r\n    console.log('[BOOT] initButtonSafely completed');\r\n  } catch (error) {\r\n    console.error('[BOOT] initButtonSafely error:', error);\r\n    // \uC5D0\uB7EC\uAC00 \uBC1C\uC0DD\uD574\uB3C4 \uC7AC\uC2DC\uB3C4\r\n    setTimeout(() => initButtonSafely(), 1000);\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": ["d", "b", "__assign", "i", "e", "f", "pack", "Bounds", "document", "toCodePoints", "fromCodePoint", "chars", "lookup", "decode", "base64", "polyUint16Array", "polyUint32Array", "UTRIE2_SHIFT_2", "UTRIE2_SHIFT_1", "UTRIE2_INDEX_SHIFT", "UTRIE2_SHIFT_1_2", "UTRIE2_LSCP_INDEX_2_OFFSET", "UTRIE2_DATA_BLOCK_LENGTH", "UTRIE2_DATA_MASK", "UTRIE2_LSCP_INDEX_2_LENGTH", "UTRIE2_INDEX_2_BMP_LENGTH", "UTRIE2_UTF8_2B_INDEX_2_OFFSET", "UTRIE2_UTF8_2B_INDEX_2_LENGTH", "UTRIE2_INDEX_1_OFFSET", "UTRIE2_OMITTED_BMP_INDEX_1_LENGTH", "UTRIE2_INDEX_2_BLOCK_LENGTH", "UTRIE2_INDEX_2_MASK", "slice16", "slice32", "createTrieFromBase64", "Trie", "CR", "LF", "ZWJ", "RI", "BREAK_NOT_ALLOWED", "BREAK_ALLOWED", "UnicodeTrie", "SPACE", "lineBreak", "a", "Break", "Tokenizer", "Parser", "deg", "color", "colorType", "angle", "angleType", "position", "BACKGROUND_SIZE", "direction", "display", "float", "LINE_BREAK", "fontSize", "overflow", "textAlign", "textTransform", "transform", "visibility", "WORD_BREAK", "wordBreak", "quotes", "DEFAULT_VALUE", "CSSParsedDeclaration", "CSSParsedPseudoDeclaration", "CSSParsedCounterDeclaration", "ElementContainer", "duration", "loadSerializedSVG", "img", "TextBounds", "TextContainer", "ImageElementContainer", "CanvasElementContainer", "SVGElementContainer", "LIElementContainer", "OLElementContainer", "InputElementContainer", "SelectElementContainer", "TextareaElementContainer", "IFrameElementContainer", "childNode", "CounterState", "counterIncrement", "counterReset", "DocumentCloner", "css", "window", "value", "PseudoElementType", "CacheStorage", "Cache", "Vector", "BezierCurve", "BoundCurves", "borderTopWidth", "borderRightWidth", "borderBottomWidth", "borderLeftWidth", "paddingTop", "paddingRight", "paddingBottom", "paddingLeft", "CORNER", "TransformEffect", "matrix", "ClipEffect", "OpacityEffect", "opacity", "StackingContext", "ElementPaint", "paddingBox", "createsStackingContext", "backgroundOrigin", "backgroundClip", "FontMetrics", "fontFamily", "Renderer", "CanvasRenderer", "letterSpacing", "fontVariant", "paintOrder", "text", "textShadow", "textDecorationLine", "image", "backgroundImage", "ForeignObjectRenderer", "Logger", "Context", "html2canvas", "backgroundColor", "findNavigationButton", "html2canvas", "seenLabels", "match", "explanationSelectors", "findNavigationButton", "extractChoices", "continueButton", "beforeProblemNum", "retryProblemNum", "progressState", "findNavigationButton", "findNavigationButton", "module2ScreenReady", "bodyText", "problemIndex", "bodyTextLen", "buttons", "SATApp", "html2canvas", "SATApp"]
}
