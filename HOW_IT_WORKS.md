# 프로그램 작동 방식 설명

## 🎯 목표
**"Export to PDF" 버튼 클릭 한 번**으로 모든 SAT 문제를 자동으로 수집하고 PDF로 변환

## 📋 전체 흐름

### 1단계: 버튼 클릭
- 사용자가 "Export to PDF" 버튼 클릭
- 버튼이 Gemini 인터페이스 상단 우측에 자동으로 삽입됨

### 2단계: 문제 수집 (자동)
프로그램이 자동으로 다음 작업을 수행:

1. **Reading and Writing Module 1** 수집
   - 현재 화면의 문제 추출
   - "다음" 버튼 클릭
   - 다음 문제 추출
   - 반복... (27번까지)
   - 제출 버튼이 나타나면 Module 1 완료

2. **Reading and Writing Module 2** 수집
   - "모듈 2 시작" 버튼 자동 클릭
   - 동일하게 "다음" 버튼 반복 클릭하며 문제 수집
   - 제출 버튼이 나타나면 Module 2 완료

3. **Math Module 1** 수집
   - 채점 화면 건너뛰고 Math 섹션으로 이동
   - "시작" 버튼 클릭
   - 동일하게 문제 수집

4. **Math Module 2** 수집
   - "모듈 2 시작" 버튼 클릭
   - 동일하게 문제 수집

### 3단계: PDF 생성
- 수집된 모든 문제 데이터를 PDF로 변환
- **문제지**와 **정답지**를 분리하여 생성
- 자동으로 다운로드

## 🔧 기술적 세부사항

### 버튼 찾기
- `data-test-id="next-button"` 속성으로 "다음" 버튼 찾기
- `.mdc-button__label` 내부의 텍스트로 확인
- 여러 방법으로 시도 (클래스명, 텍스트 등)

### 문제 추출
- DOM에서 문제 본문, 선택지, 정답, 해설 추출
- Reading과 Math 섹션 구분
- 각 모듈별로 문제 번호 관리

### PDF 생성
- jsPDF 라이브러리 사용
- 문제지: 문제 본문 + 선택지
- 정답지: 문제 + 정답 + 해설

## ⚠️ 현재 문제점

1. **jsPDF 로드 실패**: `window.jspdf` 객체를 찾지 못함
2. **다음 버튼 인식 실패**: 버튼을 찾지 못해 문제 순회 중단ㅍㅍ
3. **문제 추출 실패**: DOM 구조를 정확히 파악하지 못함

## 🛠️ 해결 방향

1. jsPDF 로드 로직 개선 (UMD 형식 정확히 처리)
2. 버튼 선택자 정확히 수정 (실제 HTML 구조 기반)
3. 문제 추출 로직 단순화 및 강화

